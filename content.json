{"meta":{"title":"YNCBearz","subtitle":"","description":"","author":"YNCBearz","url":"https://yncbearz.github.io","root":"/"},"pages":[{"title":"","date":"2025-04-29T16:33:57.939Z","updated":"2025-04-29T16:33:57.939Z","comments":true,"path":"manifest.json","permalink":"https://yncbearz.github.io/manifest.json","excerpt":"","text":"{\"name\":\"YNCBearz\",\"short_name\":\"YNCBearz\",\"theme_color\":\"#202124\",\"background_color\":\"#202124\",\"display\":\"standalone\",\"scope\":\"/\",\"start_url\":\"/\",\"icons\":[{\"src\":\"/images/icons/512x512.png\",\"sizes\":\"512x512\",\"type\":\"image/png\"},{\"src\":\"/images/icons/192x192.png\",\"sizes\":\"192x192\",\"type\":\"image/png\"},{\"src\":\"/images/icons/white-bg/180x180.png\",\"sizes\":\"180x180\",\"type\":\"image/png\"},{\"src\":\"/images/icons/white-bg/144x144.png\",\"sizes\":\"144x144\",\"type\":\"image/png\"},{\"src\":\"/images/icons/white-bg/128x128.png\",\"sizes\":\"128x128\",\"type\":\"image/png\"},{\"src\":\"/images/icons/white-bg/96x96.png\",\"sizes\":\"96x96\",\"type\":\"image/png\"},{\"src\":\"/images/icons/white-bg/48x48.png\",\"sizes\":\"48x48\",\"type\":\"image/png\"}],\"splash_pages\":null}"},{"title":"","date":"2025-04-29T16:33:57.939Z","updated":"2025-04-29T16:33:57.939Z","comments":true,"path":"sw.js","permalink":"https://yncbearz.github.io/sw.js","excerpt":"","text":"importScripts('https://g.alicdn.com/kg/workbox/3.3.0/workbox-sw.js'); if (workbox) { workbox.setConfig({ modulePathPrefix: 'https://g.alicdn.com/kg/workbox/3.3.0/' }); workbox.precaching.precache(['/', '/index.html']); workbox.routing.registerRoute(new RegExp('^https?://yncbearz.github.io/?$'), workbox.strategies.networkFirst()); workbox.routing.registerRoute(new RegExp('.*.html'), workbox.strategies.networkFirst()); workbox.routing.registerRoute(new RegExp('.*.(?:js|css|jpg|png|gif)'), workbox.strategies.staleWhileRevalidate()); }"},{"title":"","date":"2020-10-17T10:49:40.000Z","updated":"2025-05-30T08:07:59.557Z","comments":false,"path":"/404.html","permalink":"https://yncbearz.github.io/404.html","excerpt":"","text":"好幾年沒遇到不速之客了 先問你們，你們不是從海上漂流來的吧？光順著海潮，是不可能到達這座島的。 預計在 秒後返回首頁。 ʕ •ᴥ•ʔ：使用「排除」！ let countTime = 13; function countdown() { document.getElementById('timeout').textContent = countTime; countTime -= 1; if(countTime === 0){ location.href = 'https://yncbearz.github.io/'; } setTimeout(() => { countdown(); }, 1000); } countdown();"},{"title":"","date":"2025-05-31T09:33:15.535Z","updated":"2025-05-31T09:33:15.535Z","comments":true,"path":"about/index.html","permalink":"https://yncbearz.github.io/about/index.html","excerpt":"","text":"ʕ •ᴥ•ʔ：保持心情愉快 電影 x 咖啡 x 美食大家好，我是 Bear。 目前是 C# 工程師。喜歡討論程式碼的設計，包含 S.O.L.I.D 及 Design Pattern。 程式世界中最喜歡的技術是 git 和 Vim。 前 PHP 工程師，從 macOS 轉移到 windows 生態後，致力於同步兩者間 work flow 的一致性。 近期拿到 CKAD 的證照。 福爾摩斯迷。喜歡沉浸在電影院，每個月會跑兩次影廳。 ʕ •ᴥ•ʔ：歡迎大家來玩與各種合作邀約。"}],"posts":[{"title":"費茲法則","slug":"Fitts-Law","date":"2025-07-26T11:26:41.000Z","updated":"2025-07-30T02:58:29.082Z","comments":true,"path":"2025/07/26/Fitts-Law/","permalink":"https://yncbearz.github.io/2025/07/26/Fitts-Law/","excerpt":"Fitts-Law","text":"費茲法則 (Fitts’s Law)目標的選取時間取決於目標的距離與大小。 起源費茲法則是由心理學家 Paul Fitts 在 1954 年提出的， 描述人類移動到目標所需的時間與目標距離和大小之間的關係。 費茲法則公式ID &#x3D; log₂(2D&#x2F;W)其中： ID &#x3D; 輸入困難度 (index of difficulty) D &#x3D; 起始點到目標中心的距離 W &#x3D; 目標的寬度 核心概念 目標越大，移動時間越短 目標越近，移動時間越短 對數關係表示邊際效益遞減 人因因素：美國空軍失誤事件1950年代，美國空軍面臨嚴重的飛行事故問題。 飛行員在操作飛機控制桿時經常出現失誤，導致飛機墜毀。 費茲的研究他發現大多數的墜機是因為飛行員在高壓情況下混淆了外觀幾乎相同的按鈕。 解決方案重新設計按鈕：透過不同的形狀，讓飛行員僅透過觸感便能輕鬆識別。 影響與啟示更好的設計意味著要理解人在分析、困惑或壓力下，無法理性思考的行為模式，並確保在這些情況下仍能安全有效地運作。 設計啟示：目標大小與距離重要按鈕要夠大 觸控目標要有足夠的大小，讓使用者可以清楚辨識並點選 觸控目標間需要保持適當距離 觸控目標應放在使用者容易觸及的介面區域 實際應用：網頁設計 導航欄設計：主要導航項目要夠大且容易點擊 CTA 按鈕：行動呼籲按鈕要突出且易於點擊 表單設計：輸入框和提交按鈕的合理佈局 實際應用：行動應用 拇指友好設計：考慮單手操作時的觸控範圍 底部導航：重要功能放在拇指容易到達的區域 手勢設計：滑動、點擊等手勢的目標區域設計 實際應用：桌面應用 工具列設計：常用工具要容易找到和點擊 選單設計：下拉選單的項目大小和間距 快捷鍵：減少滑鼠移動的需求 常見錯誤：❌ 錯誤做法 過小的按鈕：用戶難以準確點擊 功能分散：相關功能距離太遠 忽略邊緣：沒有利用螢幕邊緣的優勢（到達邊界後，游標會自然停止） 不一致的目標大小：相同重要性的元素大小不一 正確做法：✅ 最佳實踐 適當的目標大小：確保易於點擊 合理的功能分組：相關功能放在一起 利用邊緣優勢：重要控制項放在邊緣 一致的設計語言：相似功能使用相似的目標大小 測試與驗證方法可用性測試 點擊測試：測量用戶點擊不同大小目標的時間 A&#x2F;B 測試：比較不同設計的效果 熱點圖分析：了解用戶的點擊模式 脈絡訪查：針對小規模樣本，進行深入觀察和訪談 質性驗證方式：脈絡訪查什麼是脈絡訪查？脈絡訪查是一種用戶研究方法，通過在用戶的自然環境中觀察和訪談，深入了解用戶的真實使用情境和需求。 優點 真實性：在用戶實際使用環境中進行，數據更真實 深度性：能夠發現用戶自己都未察覺的需求 情境性：了解不同環境對用戶行為的影響 即時性：能夠觀察到用戶的即時反應和問題 實施步驟 準備階段 確定研究目標和問題 選擇合適的參與者 準備觀察工具和記錄設備 執行階段 在用戶自然環境中進行觀察 記錄用戶的操作行為和時間 進行深度訪談了解動機 分析階段 整理觀察數據和訪談記錄 識別用戶痛點和需求 提出設計改進建議 量化驗證方式：指標 點擊準確率：目標是否容易被準確點擊 完成時間：完成任務所需的時間 錯誤率：點擊錯誤的頻率 用戶滿意度：主觀的使用體驗評價 總結費茲法則是 UX 設計中的基礎法則，它提醒我們： 目標要夠大：確保用戶能夠輕鬆點擊 距離要合理：減少不必要的移動 利用邊緣優勢：螢幕邊緣是「無限大」的目標 考慮用戶習慣：設計要符合用戶的使用模式 記住：好的設計應該是直覺的，用戶不需要思考就能完成操作。 References 簡介費茲定律 (Fitt’s Law) Fitts’s Law ʕ •ᴥ•ʔ：Thank you","categories":[{"name":"Other","slug":"Other","permalink":"https://yncbearz.github.io/categories/Other/"}],"tags":[{"name":"Study Group","slug":"Study-Group","permalink":"https://yncbearz.github.io/tags/Study-Group/"}]},{"title":"部落格功能清單","slug":"Blog-Feature-List","date":"2025-06-19T02:17:52.000Z","updated":"2025-06-19T02:39:28.939Z","comments":true,"path":"2025/06/19/Blog-Feature-List/","permalink":"https://yncbearz.github.io/2025/06/19/Blog-Feature-List/","excerpt":"Blog-Feature-List","text":"前言雖然我在 2023 年曾經教學 如何使用 Hexo 來寫部落格但隨著文章的數量越來越多，Hexo 居然無法編譯文章了。 研究了很久，沒有看到錯誤訊息，google 很久也找不到可行的解決方案，索性決定要搬家了。 搬家地點選定 hugo，開始整理功能清單，也研究了一天需要調整的地方。(hexo 跟 hugo 設定不同、themes、plugins 等) 但 TM 表示：「好的工程師就是要解決問題，而不是逃避啊」 完全戳中我的心，但我沒有看到錯誤訊息啊啊啊啊 最後還是沒有搬家，詳情見後記。 下面記錄一下這個部落格有的功能，當作之後搬家的 check list。 功能整理要 migrate 老專案的一個重點是：我們得先知道原本的專案有什麼功能。 原本的技術棧是 Hexo + Hueman框架的本身還有在更新，不過當年使用的 theme 與 package 幾乎都停止維護了。 Features Description 在 Hexo 的實現方式 Copyboard 複製程式碼區塊 使用 clipboard.js 達成 Google Analytics 瞭解網站流量來源 Hueman 原生支持 Message Board 文章留言功能 Hueman 原生支持 (使用 gittalk) Plantuml 文章顯示 plantuml fork hexo-tag-plantuml 修改達成 Post Sharing 複製當前文章網址 PD 熊熊魔改 Hueman Post to Slide 將文章轉換成 Slide 模式 使用 reveal.js 達成 Private Post 文章加密功能 fork hexo-blog-encrypt 修改達成 PWA 將 blog 放到桌面&#x2F;手機，偽裝成應用程式 fork pwa 修改達成 Search 搜尋功能 Hueman 原生支持 後記沉澱了幾天，重新編譯 hexo 時，發現原來是 twitter 相關的程式碼壞掉，移除後就正常了，開心！ ʕ •ᴥ•ʔ：估計約 150 篇文章，搬起來其實也是相當累人的。既然部落格復活了，之後會頻繁更新文章，嗯..應該會吧。","categories":[{"name":"Programming","slug":"Programming","permalink":"https://yncbearz.github.io/categories/Programming/"}],"tags":[{"name":"Note","slug":"Note","permalink":"https://yncbearz.github.io/tags/Note/"}]},{"title":"Kent Beck 的實作模式","slug":"Kent-Beck-Implementation-Patterns","date":"2025-04-26T14:05:09.000Z","updated":"2025-07-26T11:43:42.928Z","comments":true,"path":"2025/04/26/Kent-Beck-Implementation-Patterns/","permalink":"https://yncbearz.github.io/2025/04/26/Kent-Beck-Implementation-Patterns/","excerpt":"Kent-Beck-Implementation-Patterns","text":"Chapter 4 動機 軟體成本 &#x3D; 初始成本 + 維護成本 維護成本 &#x3D; 理解成本 + 修改成本+ 測試成本 + 部署成本 在初期的開發中投入更多精力，來減少維護的需要？ Kent Beck 的策略 注重程式設計師之間的溝通減少理解程式碼的代價 記錄自己的實作模式，並嚴格地遵守它 模式給人們和經濟的影響 Chapter 5 類別 類別 (Class)這些資料應該放在一起，還有這些邏輯也是。 資料會變，邏輯不變學會如何用類別來包裝邏輯和如何表達邏輯的變化。 繼承把多個類別放進繼承體系可以縮減程式碼的數量。 簡單的超類別名稱 (Simple Superclass Name)位於繼承體系上的根類別，應該有個簡單的名字，用以描繪它的隱喻。 命名在所有的命名中，類別的命名是最重要的。 簡短與表達力之間存在張力類別名稱應該簡單扼要，但有時候需要好幾個單字才能足夠精確。 隱喻替計算邏輯找個強有力的隱喻。 讓名稱變成一張張「關係、連接和暗示」的大綱。 交談當嘗試把物件的用途解釋給別人聽時，就得尋找具有表達力和感染力的名稱。 重要的類別盡量用一個單字來為它命名。 適當的子類別名稱 (Qualified Subclass Name)子類別的名稱應該表達出與超類別間的相似性和差異性。 子類別的命名要描述子類別像什麼，還要說明它們之間的區別是什麼。 簡短與表達力間的選擇由於子類別在交談中並不頻繁，所以可以「犧牲簡明」。 例外如果只是利用繼承來實作貢獻機制，則這樣的子類別也該用簡單的命名。 多層繼承體系的命名是個難題，一般來說要進行重構，改用委派。 若還是存在，則要思考閱讀者需要知道什麼資訊。 抽象介面 (Abstract Interface)界面與實作分離。 介面的成本需要學習它、理解它、替它寫文件、除錯、組織它，甚至替它命名。 經濟的考量只要一開始設計正確，軟體就不需要進行任何改動？ 軟體變更清單程式設計師沒有弄清需求、客戶改變了想法， 唯一沒有提到的是「正當的變更」。 Interface 多重繼承一個類別可以實作多個 interface。 介面的命名如果 interface 叫 File，那實作類別只好叫 ActualFile, ConcreteFile 或 FileImpl。 可以給 interface 加上 I 字首。例如：IFile。 抽象類別 (Abstract Class)用抽象類別來表現可能會產生變化的抽象界面。 Interface vs Abstract Class取捨的關鍵，介面會如何變化及實作類別是否需要同時支援多個介面。 使用 Interface 作抽象類別當修改時，所有的實作類別都必須進行修改。 容易導致現有的設計癱瘓，需借助有版本的 interface。 使用 Abstract Class 作抽象類別局限在「實作類別必須對其忠心不二」。 如果需要從另一個角度看待同一個實作類別，則只能讓它實作 interface。 兩者並非互斥可以提供介面，再提供超類別表達一種實作。 在這種情況下，變數宣告應使用介面類型的參考，這樣將來的維護者就可以根據需要替換。 有版本的 interface (Versioned Interface)引入 sub-interface，進而安全地對 interface 進行拓展。 123interface Command &#123; void run();&#125; 123interface ReversibleCommand extends Command &#123; void undo();&#125; 123456public void undoIfReversible(Command recent) &#123; if (recent instanceof ReversibleCommand) &#123; ReversibleCommand downcasted = (ReversibleCommand) recent; downcasted.undo(); &#125;&#125; 使用 instanceof會降低靈活性，也是個醜陋的解決方案。 但真的遇到這種尷尬局面時，知道該如何修改總是好的。 值物件 (Value Object)這種物件扮演的角色如同數值一樣。 函數式永遠不會改變任何狀態，只是建立新的值。 程序式如果面對的情景總在不斷變化，則狀態式比較適合。 123456789101112class Transaction &#123; int value; Transaction(int value, Account credit, Account debit) &#123; this.value = value; credit.addCredit(this); debit.addDebit(this); &#125; int getValue() &#123; return value; &#125;&#125; 效能使用值物件，最大的反對意見是建立臨時物件。 但考慮整條成本，大部分的情況，都不是效能瓶頸。 邊界對於「狀態需要變化」與「物件不能變化」的邊界難以劃清。 大部分是值物件，但又不純粹是值物件的風格是最糟糕的。 物件、函數式和程序式將「使用狀態的可變物件」與「像數值一樣不可變的物件」搭配一起，能讓程式表達地更好。 特殊化 (Specialization)描繪相關計算的相似性和差異性。 簡單的變化abc 與 def 是不同的。 但計算字串長度的演算法相同。 大部分的程式「相同的邏輯處理不同的資料」和「不同的邏輯處理相同的資料」。 複雜的變化邏輯完全不同。 例如符號積分程式與數學排版程式。 子類別 (Subclass)用一個子類別表現一個維度上的變化。 繼承有些人發現繼承做的就是共用實作的萬靈丹。 繼承的局限 這張牌只能打一次織。 要理解子類別，需先理解超類別。 對超類別的修改充滿風險。 平行的繼承「這個」繼承體系中的子類別都需要「那個」繼承體系的某個子類別。 這是特別糟糕的繼承用法。 關鍵把超類別的邏輯徹底劃分，直到每個方法只做一件事。 但當子類別修改超類別方法時，需檢查兩者隱晦的耦合。 子類別的局限沒辦法表現不斷變化的邏輯，因建立物件時已決定。 如果需要表達邏輯會隨時變化，則條件陳述式或委派更適合。 Chapter 7 行為（下) 邀請性訊息 (Inviting Message)透過發送可採用不同方式實作的訊息，邀請未來的實作變體。 實作如果邏輯存在預設實作，則令其成為訊息的實作。 如果不存在，則令其為抽象方法，以便表達出邀請。 解釋性訊息 (Explaining Message)發送訊息去解釋一段邏輯的意圖。 區別將「意圖」與「實作」區別很重要。 傳達意圖123void highlight(Rectangle area) &#123; reverse(area);&#125; 傳達意圖1flags|= LOADED_BIT; //Set the loaded bit 12345setLoadedFlag();void setLoadedFlag() &#123; flags|= LOADED_BIT;&#125; 溝通未來解釋性訊息有可能成為擴充點， 但主要目的還是更清晰地表達意圖。 例外流 (Exceptional Flow)清晰地表達非尋常的控制流，不干擾主體流的表達。 常見方式 防衛子句 例外 表達意圖當程式存在多條路徑，我們又以相同程度的方式表達，結果就會變得一團亂。 執行了哪些語句要回答這個問題，需要經過一番考古與邏輯學的練習時，我們可以考慮用「防衛子句」和「例外」。 防衛子句 (Guard Clause)透過 early return 來表達局部的例外流。 控制流與 if-then-else 相比，防衛子句表達的是「這裡的控制流比其他地方重要」。 變體在迴圈中的 continue 子句表達：「先別管這個元素，繼續下一個」 例外 (Exception)用例外來表達非局部的例外流。 使用當意識到呼叫堆疊中，有一層發生問題，在發現情況的點拋出例外並捕捉。 設計漏洞優先使用前述的循序、訊息、反覆和條件來表達控制流，當不使用例外會令主體流表達混亂，應使用例外。 已檢查例外 (Checked Exception)透過明確宣告來保證例外被捕獲。 例外的危險當拋出一個錯誤，卻沒有捕捉它時，程式會終止。 解法捕捉例外或者繼續傳播。 代價會讓方法變得複雜，難以閱讀及重構。 例外傳播 (Exception Propagation)根據需要來轉換例外，使其包含的資訊合乎捕獲者的要求。 不知所措捕捉及報告一個低層次的例外，會令沒有預期的人不知所措。 解法用高層次的例外來包裝低層次的例外，剩下的例外資訊輸出到日誌中。 ʕ •ᴥ•ʔ：Thank you","categories":[{"name":"Clean Code","slug":"Clean-Code","permalink":"https://yncbearz.github.io/categories/Clean-Code/"}],"tags":[{"name":"Study Group","slug":"Study-Group","permalink":"https://yncbearz.github.io/tags/Study-Group/"}]},{"title":"如何使用 Cursor 來寫程式","slug":"How-To-Write-Code-With-Cursor","date":"2025-02-22T12:28:53.000Z","updated":"2025-05-30T08:15:23.244Z","comments":true,"path":"2025/02/22/How-To-Write-Code-With-Cursor/","permalink":"https://yncbearz.github.io/2025/02/22/How-To-Write-Code-With-Cursor/","excerpt":"How-To-Write-Code-With-Cursor","text":"Difference between Cursor and other AI相較於以往使用 GitHub Copilot&#x2F;ChatGpt 來寫程式，我認為 Cursor 有以下三個優點： 更了解程式碼的上下文 直接寫出程式碼，甚至可以下 terminal 指令 base 在 vscode 之上，對 vscode 前愛好者來說，轉移的成本很低 兩者最大的不同：AI 是下一個時代的搜尋引擎，而 cursor 是一個 AI editor。 Cursor settings建議調校 cursor 相關設定時，從 vscode 出發，達到使用 vscode sync setting 的好處。 .cursorrules透過設定 cursorrules，可以 cursor 知道專案程式碼的使用情境，例如：使用情境、程式碼的架構、偏好的開發風格等。 可以使用 Cursor Rule Maker 來產生。 AI 傳接球象限 (Ping Quotient)好奇大家都會在下圖的哪一個位置使用 AI 寫程式呢？ 大家可以想看看對應的象限，可能會是什麼樣角色。 第一象限：senior 第四象限：junior 或 剛拿到需求的 senior，或者 PM, Designer 第三象限：新人 第二象限：AI 而這裡是我覺得使用 AI，最適合的傳接球象限： 你得想辦法讓兩個人，都在這個位置，才能夠好好傳接球。 Mindset為了能更好地掌握 cursor，我有三個心態想分享給大家： 盡可能的了解需求與可能要生成的程式碼（包含修改檔案的位置、架構等） 將 cursor 當作新來的同事，描述清楚要作的 task 搭配 ide 作 refactor 相關的工作 Practice - ATDD實作方面，有三個技巧可以分享給大家： 運用 AI Test-Driven Development 的方式開發，先請 cursor 寫測試 將實作的 step 切小，讓 review ai code 更容易 頻繁地 git commit (References) .cursorrules Cursor Rule Maker ʕ •ᴥ•ʔ： cursor + ide + vim 可能是下個極速開發的組合吧！","categories":[{"name":"Programming","slug":"Programming","permalink":"https://yncbearz.github.io/categories/Programming/"}],"tags":[{"name":"Note","slug":"Note","permalink":"https://yncbearz.github.io/tags/Note/"}]},{"title":"類別圖：動物園管理員（訪問者模式）","slug":"Class-Diagram-ZooKeeper-Visitor-Pattern","date":"2024-09-26T16:27:50.000Z","updated":"2025-07-30T11:30:13.364Z","comments":true,"path":"2024/09/27/Class-Diagram-ZooKeeper-Visitor-Pattern/","permalink":"https://yncbearz.github.io/2024/09/27/Class-Diagram-ZooKeeper-Visitor-Pattern/","excerpt":"Class-Diagram-ZooKeeper-Visitor-Pattern","text":"Example: 動物園管理員 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647@startuml Example-ZooKeeper-Visitor-Patterninterface IFeeder &#123; +Feed(Monkey) +Feed(Cow) +Feed(Lion)&#125;class Feeder &#123; +Feed(Monkey) +Feed(Cow) +Feed(Lion)&#125;interface IFeedable &#123; +FeedBy(IFeeder)&#125;class Monkey &#123; +FeedBy(IFeeder)&#125;class Cow &#123; +FeedBy(IFeeder)&#125;class Lion &#123; +FeedBy(IFeeder)&#125;IFeeder &lt;|.. FeederIFeedable &lt;|.. MonkeyIFeedable &lt;|.. CowIFeedable &lt;|.. LionFeeder --&gt; MonkeyFeeder --&gt; CowFeeder --&gt; Lionclass Zoo &#123; +FeedAnimals()&#125;Zoo --&gt; FeederZoo --&gt; IFeedable@enduml ʕ •ᴥ•ʔ：若不熟悉 UML 類別圖，可參考UML類別圖說明。","categories":[{"name":"Clean Code","slug":"Clean-Code","permalink":"https://yncbearz.github.io/categories/Clean-Code/"}],"tags":[{"name":"Design Pattern","slug":"Design-Pattern","permalink":"https://yncbearz.github.io/tags/Design-Pattern/"}]},{"title":"範例：動物園管理員（訪問者模式）","slug":"Example-ZooKeeper-Visitor-Pattern","date":"2024-09-26T16:13:35.000Z","updated":"2025-05-30T08:15:23.242Z","comments":true,"path":"2024/09/27/Example-ZooKeeper-Visitor-Pattern/","permalink":"https://yncbearz.github.io/2024/09/27/Example-ZooKeeper-Visitor-Pattern/","excerpt":"Example-ZooKeeper-Visitor-Pattern","text":"Pattern: 訪問者模式 Class Diagram: 動物園管理員 這是一間動物園 定義餵食界面 123456namespace DotNetCoreKata.DomainModels.ZooKeeper;public interface IFeedable&#123; void Feed();&#125; 實作猴子 123456789namespace DotNetCoreKata.DomainModels.ZooKeeper;public class Monkey : IFeedable&#123; public void Feed() &#123; Console.WriteLine(&quot;Monkey eats banana&quot;); &#125;&#125; 實作乳牛 123456789namespace DotNetCoreKata.DomainModels.ZooKeeper;public class Cow: IFeedable&#123; public void Feed() &#123; Console.WriteLine(&quot;Cow eats grass&quot;); &#125;&#125; 實作獅子 123456789namespace DotNetCoreKata.DomainModels.ZooKeeper;public class Lion: IFeedable&#123; public void Feed() &#123; Console.WriteLine(&quot;Lion eats meat&quot;); &#125;&#125; 目前的餵食方式 123456789101112131415161718192021using DotNetCoreKata.DomainModels.ZooKeeper;namespace DotNetCoreKata.Services.ZooKeeper;public class Zoo&#123; public void FeedAnimals() &#123; List&lt;IFeedable&gt; animals = [ new Monkey(), new Cow(), new Lion() ]; foreach (var animal in animals) &#123; animal.Feed(); &#125; &#125;&#125; 目前是將要吃什麼的職責交由每個動物各自管理，隨著功能變多，動物類別也會越來越肥大。 讓我們嘗試用訪問者模式改造它，解耦餵食的邏輯。 首先是餵食者的邏輯 (Visitor) 定義餵食者界面 12345678namespace DotNetCoreKata.DomainModels.ZooKeeper;public interface IFeeder&#123; void Feed(Monkey monkey); void Feed(Cow cow); void Feed(Lion lion);&#125; 實作餵食者與動物互動的邏輯 12345678910111213141516171819namespace DotNetCoreKata.DomainModels.ZooKeeper;public class Feeder: IFeeder&#123; public void Feed(Monkey monkey) &#123; Console.WriteLine(&quot;Monkey eats banana&quot;); &#125; public void Feed(Cow cow) &#123; Console.WriteLine(&quot;Cow eats grass&quot;); &#125; public void Feed(Lion lion) &#123; Console.WriteLine(&quot;Lion eats meat&quot;); &#125;&#125; 接著改寫動物的邏輯 (Element) 定義被餵食界面 123456namespace DotNetCoreKata.DomainModels.ZooKeeper;public interface IFeedable&#123; void FeedBy(IFeeder feeder);&#125; 實作猴子 123456789namespace DotNetCoreKata.DomainModels.ZooKeeper;public class Monkey : IFeedable&#123; public void FeedBy(IFeeder feeder) &#123; feeder.Feed(this); &#125;&#125; 實作乳牛 123456789namespace DotNetCoreKata.DomainModels.ZooKeeper;public class Cow : IFeedable&#123; public void FeedBy(IFeeder feeder) &#123; feeder.Feed(this); &#125;&#125; 實作獅子 123456789namespace DotNetCoreKata.DomainModels.ZooKeeper;public class Lion : IFeedable&#123; public void FeedBy(IFeeder feeder) &#123; feeder.Feed(this); &#125;&#125; 註：這邊也可以將三個動物的餵食邏輯放在一起，不過要用到繼承跟調整餵食者的程式嗎。 最後改寫動物園的程式碼 1234567891011121314151617181920212223using DotNetCoreKata.DomainModels.ZooKeeper;namespace DotNetCoreKata.Services.ZooKeeper;public class Zoo&#123; public void FeedAnimals() &#123; List&lt;IFeedable&gt; animals = [ new Monkey(), new Cow(), new Lion() ]; var feeder = new Feeder(); foreach (var animal in animals) &#123; animal.FeedBy(feeder); &#125; &#125;&#125; 現在我們將不同動物的餵食邏輯收斂在餵食者身上，當新增新的動物時，可以修改餵食界面，並實作相關邏輯。 當有新的訪問需求（比如看診），我們也可以依樣畫葫蘆實作被看診界面與看診界面，並實作看診者的邏輯。 ʕ •ᴥ•ʔ：Weija 於讀書會分享這個範例，完全刷新了我之前用 PHP 寫範例的印象。 原來是在支援多型的語言，訪問者模式可以這麼漂亮。","categories":[{"name":"Clean Code","slug":"Clean-Code","permalink":"https://yncbearz.github.io/categories/Clean-Code/"}],"tags":[{"name":"Example","slug":"Example","permalink":"https://yncbearz.github.io/tags/Example/"}]},{"title":"複雜度守恆定律","slug":"Law-Of-Conversation-Of-Code-Complexity","date":"2024-08-18T09:13:10.000Z","updated":"2025-05-30T08:15:23.248Z","comments":true,"path":"2024/08/18/Law-Of-Conversation-Of-Code-Complexity/","permalink":"https://yncbearz.github.io/2024/08/18/Law-Of-Conversation-Of-Code-Complexity/","excerpt":"Law-Of-Conservation-Of-Code-Complexity","text":"Law Of Conservation Of Code Complexity寫程式一段時間了，相信你一定多少碰過以下的幾種情境： 在重構套用了設計模式後，程式碼沒有變得比較簡單，架構反而變得更加複雜。 兩個軟體工程師討論程式碼時，有時會進入哪種寫法比較複雜的爭論，誰也不服自己的寫法有比較複雜。 前後端分工時，不確定該把某些邏輯放在哪。 以下跟各位分享一個自己領悟出來的定律，也就是複雜度守恆定律！ 還記得前段時間我們討論 S.O.L.I.D 時，有說過遵守單一職責原則時，仰賴的是你切分職責的方式。 當你認為這個檔案不該每次有需求變化時就必須修改（違反開放封閉原則），套用了狀態模式，此時程式碼會從原本單一檔案的複雜攤平成架構層面的複雜。 又或者你使用裝飾者模式、代理模式，來隔離記錄 Log、實作快取等與原本的主程式不相關的邏輯，其實並沒有讓程式碼變得比較簡單 （其他工程師可能還是看不懂）。 但這不表示我們就不該學這些內容，原因是當雙方都對這些概念有些許理解時，你們的大腦便可以快速的轉譯程式碼的內容，進而減少討論與修改的時間。 回到一開始的情境，我們又該如何處理呢？ 推薦幾個我用過的方法（概念來自 Problem Solving）： 傳教：組織讀書會，或適時分享設計模式的範例，讓團隊成員認識這些概念。 進行討論：討論不同寫法時，可以提出幾種需求變更的情境，來討論 Pros &amp; Cons。不要陷在哪種寫法比較複雜的爭論。 適度妥協：有時候並不需要完全偏向某邊，重點在討論的本身，只要事情有往好的方向發展，可以分階段進行。 每個選擇背後都有 trade-off。 ʕ •ᴥ•ʔ：google 後發現 Tesler 有提出另一個複雜度守恆定律，主要在描述交互界面設計的複雜度，該由軟體工程師寫更多的程式碼來降低，還是由客戶花費更多時間來學習，也是相當有趣的觀點。","categories":[{"name":"Clean Code","slug":"Clean-Code","permalink":"https://yncbearz.github.io/categories/Clean-Code/"}],"tags":[{"name":"Principle","slug":"Principle","permalink":"https://yncbearz.github.io/tags/Principle/"}]},{"title":"類別圖：光的三原色 （狀態模式）","slug":"Class-Diagram-RGB-Monitor-State-Pattern","date":"2024-08-18T00:55:57.000Z","updated":"2025-07-30T11:30:13.209Z","comments":true,"path":"2024/08/18/Class-Diagram-RGB-Monitor-State-Pattern/","permalink":"https://yncbearz.github.io/2024/08/18/Class-Diagram-RGB-Monitor-State-Pattern/","excerpt":"Class-Diagram-RGB-Monitor-State-Pattern","text":"Example: 光的三原色 1234567891011121314151617181920212223242526272829303132333435363738394041424344@startumlclass RgbMonitor &#123; -IColorState _state -BlackColorState _blackColorState -RedColorState _redColorState -GreenColorState _greenColorState -BlueColorState _blueColorState -YellowColorState _yellowColorState -MagentaColorState _magentaColorState -CyanColorState _cyanColorState -WhiteColorState _whiteColorState +Color Display() +void TurnOnLight(RgbColor rgbColor) +void TurnOffLight(RgbColor rgbColor) +void ToBlackColorState() +void ToRedColorState() +void ToGreenColorState() +void ToBlueColorState() +void ToYellowColorState() +void ToMagentaColorState() +void ToCyanColorState() +void ToWhiteColorState()&#125;interface IColorState &#123; +Color Display() +void TurnOnRedLight() +void TurnOnGreenLight() +void TurnOnBlueLight() +void TurnOffRedLight() +void TurnOffGreenLight() +void TurnOffBlueLight()&#125;RgbMonitor *-- IColorStateIColorState &lt;|-- BlackColorStateIColorState &lt;|-- RedColorStateIColorState &lt;|-- GreenColorStateIColorState &lt;|-- BlueColorStateIColorState &lt;|-- YellowColorStateIColorState &lt;|-- MagentaColorStateIColorState &lt;|-- CyanColorStateIColorState &lt;|-- WhiteColorState@enduml ʕ •ᴥ•ʔ：若不熟悉 UML 類別圖，可參考UML類別圖說明。","categories":[{"name":"Clean Code","slug":"Clean-Code","permalink":"https://yncbearz.github.io/categories/Clean-Code/"}],"tags":[{"name":"Design Pattern","slug":"Design-Pattern","permalink":"https://yncbearz.github.io/tags/Design-Pattern/"}]},{"title":"範例：光的三原色（狀態模式）","slug":"Example-RGB-Monitor-State-Pattern","date":"2024-08-16T10:33:01.000Z","updated":"2025-07-30T11:30:13.389Z","comments":true,"path":"2024/08/16/Example-RGB-Monitor-State-Pattern/","permalink":"https://yncbearz.github.io/2024/08/16/Example-RGB-Monitor-State-Pattern/","excerpt":"Example-RGB-Monitor-State-Pattern","text":"Pattern: 狀態模式 Class Diagram: 光的三原色 情境：透過開關紅綠藍三種不同類型的光，我們可以顯示出各種不同的顏色 定義光的三原色的 Enum 12345678namespace DotNetCoreKata.Enums;public enum RgbColor&#123; Red = 1, Green = 2, Blue = 3,&#125; 定義顯示顏色的 Enum 12345678910111213namespace DotNetCoreKata.Enums;public enum Color&#123; Black = 0, Red = 1, Green = 2, Blue = 3, Yellow = 4, Magenta = 5, Cyan = 6, White = 7,&#125; 實作光線組合的邏輯 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354using DotNetCoreKata.Enums;namespace DotNetCoreKata.Services.Rgb;public class RgbMonitor&#123; private readonly HashSet&lt;RgbColor&gt; _lights = []; public Color Display() &#123; if (_lights.Count == 3) &#123; return Color.White; &#125; if (_lights.Count == 2) &#123; if (_lights.Contains(RgbColor.Red) &amp;&amp; _lights.Contains(RgbColor.Green)) &#123; return Color.Yellow; &#125; if (_lights.Contains(RgbColor.Red) &amp;&amp; _lights.Contains(RgbColor.Blue)) &#123; return Color.Magenta; &#125; return Color.Cyan; &#125; if (_lights.Count == 1) &#123; return _lights.First() switch &#123; RgbColor.Red =&gt; Color.Red, RgbColor.Green =&gt; Color.Green, RgbColor.Blue =&gt; Color.Blue, _ =&gt; throw new ArgumentOutOfRangeException() &#125;; &#125; return Color.Black; &#125; public void TurnOnLight(RgbColor rgbColor) &#123; _lights.Add(rgbColor); &#125; public void TurnOffLight(RgbColor rgbColor) &#123; _lights.Remove(rgbColor); &#125;&#125; 可以發現上述的程式碼有很多 if&#x2F;else 等的邏輯，讓我們用狀態模式改造它！ Finite-State Machine 首先讓我們畫出有限狀態機 (FSM) 1234567891011121314151617181920212223242526272829303132333435@startumlBlack --&gt; Red : TurnOnRedLightBlack --&gt; Green : TurnOnGreenLightBlack --&gt; Blue : TurnOnBlueLightRed --&gt; Black : TurnOffRedLightRed --&gt; Yellow : TurnOnGreenLightRed --&gt; Magenta : TurnOnBlueLightGreen --&gt; Black : TurnOffGreenLightGreen --&gt; Yellow : TurnOnRedLightGreen --&gt; Cyan : TurnOnBlueLightBlue --&gt; Black : TurnOffBlueLightBlue --&gt; Magenta : TurnOnRedLightBlue --&gt; Cyan : TurnOnGreenLightYellow --&gt; Red : TurnOffGreenLightYellow --&gt; Green : TurnOffRedLightYellow --&gt; White : TurnOnBlueLightMagenta --&gt; Red : TurnOffBlueLightMagenta --&gt; Blue : TurnOffRedLightMagenta --&gt; White : TurnOnGreenLightCyan --&gt; Green : TurnOffBlueLightCyan --&gt; Blue : TurnOffGreenLightCyan --&gt; White : TurnOnRedLightWhite --&gt; Yellow : TurnOffBlueLightWhite --&gt; Magenta : TurnOffGreenLightWhite --&gt; Cyan : TurnOffRedLight@enduml State 定義狀態類別 (State) 首先是顏色狀態的界面 1234567891011121314using DotNetCoreKata.Enums;namespace DotNetCoreKata.DomainModels.Rgb;public interface IColorState&#123; public Color Display(); public void TurnOnRedLight(); public void TurnOnGreenLight(); public void TurnOnBlueLight(); public void TurnOffRedLight(); public void TurnOffGreenLight(); public void TurnOffBlueLight();&#125; 我們將原本 RGB Monitor 開關不同類型的光線，職責切分的更明確，來簡化各個狀態的實作。 實作黑色狀態 123456789101112131415161718192021222324252627282930313233343536373839404142using DotNetCoreKata.Enums;using DotNetCoreKata.Services.Rgb;namespace DotNetCoreKata.DomainModels.Rgb;public class BlackColorState(IRgbMonitor rgbMonitor) : IColorState&#123; public Color Display() &#123; return Color.Black; &#125; public void TurnOnRedLight() &#123; rgbMonitor.ToRedColorState(); &#125; public void TurnOnGreenLight() &#123; rgbMonitor.ToGreenColorState(); &#125; public void TurnOnBlueLight() &#123; rgbMonitor.ToBlueColorState(); &#125; public void TurnOffRedLight() &#123; // Do nothing &#125; public void TurnOffGreenLight() &#123; // Do nothing &#125; public void TurnOffBlueLight() &#123; // Do nothing &#125;&#125; 說明一下黑色狀態的實作： Display(): 顯示黑色。 TurnOnRedLight(): 會將當前狀態轉換成紅色狀態。 常見的實作有兩種： 第一種是透過 情境類別 轉換。 第二種是由 狀態類別 直接設置情境類別的當前狀態。差異在是否要讓狀態類別們彼此耦合，這裡選擇第一種。 TurnOnGreenLight()、TurnOnBlueLight() 同理。 TurnOffRedLight(): 因為不會改變當前狀態，所以就不做事。 TurnOffGreenLight()、TurnOffBlueLight() 同理。 實作紅色狀態 123456789101112131415161718192021222324252627282930313233343536373839404142using DotNetCoreKata.Enums;using DotNetCoreKata.Services.Rgb;namespace DotNetCoreKata.DomainModels.Rgb;public class RedColorState(IRgbMonitor rgbMonitor) : IColorState&#123; public Color Display() &#123; return Color.Red; &#125; public void TurnOnRedLight() &#123; // Do nothing &#125; public void TurnOnGreenLight() &#123; rgbMonitor.ToYellowColorState(); &#125; public void TurnOnBlueLight() &#123; rgbMonitor.ToMagentaColorState(); &#125; public void TurnOffRedLight() &#123; rgbMonitor.ToBlackColorState(); &#125; public void TurnOffGreenLight() &#123; // Do nothing &#125; public void TurnOffBlueLight() &#123; // Do nothing &#125;&#125; 說明一下紅色狀態的實作： Display(): 顯示紅色。 TurnOnRedLight(): 因為不會改變當前狀態，所以就不做事。 TurnOffGreenLight()、TurnOffBlueLight() 同理。 TurnOnGreenLight(): 這邊很有趣的因為紅光加綠光會顯示黃色，所以要轉換成黃色狀態。 TurnOnBlueLight(): 同理紅光加藍光會顯示洋紅色，所以要轉換成洋紅色狀態。 TurnOffRedLight(): 會將當前狀態轉換成黑色狀態。 接下來就依樣畫葫蘆，將所有的顏色狀態實作出來吧！這邊也可以解釋當初為什麼要將開關不同類型的光線切分出來，狀態的實作會變得相對單純。 下面會依序實作各個狀態類別，如果我們都懂了，可以跳到定義情境類別 (Context)。 實作綠色狀態 123456789101112131415161718192021222324252627282930313233343536373839404142using DotNetCoreKata.Enums;using DotNetCoreKata.Services.Rgb;namespace DotNetCoreKata.DomainModels.Rgb;internal class GreenColorState(IRgbMonitor rgbMonitor) : IColorState&#123; public Color Display() &#123; return Color.Green; &#125; public void TurnOnRedLight() &#123; rgbMonitor.ToYellowColorState(); &#125; public void TurnOnGreenLight() &#123; // Do nothing &#125; public void TurnOnBlueLight() &#123; rgbMonitor.ToCyanColorState(); &#125; public void TurnOffRedLight() &#123; // Do nothing &#125; public void TurnOffGreenLight() &#123; rgbMonitor.ToBlackColorState(); &#125; public void TurnOffBlueLight() &#123; // Do nothing &#125;&#125; 實作藍色狀態 123456789101112131415161718192021222324252627282930313233343536373839404142using DotNetCoreKata.Enums;using DotNetCoreKata.Services.Rgb;namespace DotNetCoreKata.DomainModels.Rgb;public class BlueColorState(IRgbMonitor rgbMonitor): IColorState&#123; public Color Display() &#123; return Color.Blue; &#125; public void TurnOnRedLight() &#123; rgbMonitor.ToMagentaColorState(); &#125; public void TurnOnGreenLight() &#123; rgbMonitor.ToCyanColorState(); &#125; public void TurnOnBlueLight() &#123; // Do nothing &#125; public void TurnOffRedLight() &#123; // Do nothing &#125; public void TurnOffGreenLight() &#123; // Do nothing &#125; public void TurnOffBlueLight() &#123; rgbMonitor.ToBlackColorState(); &#125;&#125; 實作黃色狀態 123456789101112131415161718192021222324252627282930313233343536373839404142using DotNetCoreKata.Enums;using DotNetCoreKata.Services.Rgb;namespace DotNetCoreKata.DomainModels.Rgb;public class YellowColorState(IRgbMonitor rgbMonitor): IColorState&#123; public Color Display() &#123; return Color.Yellow; &#125; public void TurnOnRedLight() &#123; // Do nothing &#125; public void TurnOnGreenLight() &#123; // Do nothing &#125; public void TurnOnBlueLight() &#123; rgbMonitor.ToWhiteColorState(); &#125; public void TurnOffRedLight() &#123; rgbMonitor.ToGreenColorState(); &#125; public void TurnOffGreenLight() &#123; rgbMonitor.ToRedColorState(); &#125; public void TurnOffBlueLight() &#123; // Do nothing &#125;&#125; 實作洋紅色狀態 123456789101112131415161718192021222324252627282930313233343536373839404142using DotNetCoreKata.Enums;using DotNetCoreKata.Services.Rgb;namespace DotNetCoreKata.DomainModels.Rgb;public class MagentaColorState(IRgbMonitor rgbMonitor): IColorState&#123; public Color Display() &#123; return Color.Magenta; &#125; public void TurnOnRedLight() &#123; // Do nothing &#125; public void TurnOnGreenLight() &#123; rgbMonitor.ToWhiteColorState(); &#125; public void TurnOnBlueLight() &#123; // Do nothing &#125; public void TurnOffRedLight() &#123; rgbMonitor.ToBlueColorState(); &#125; public void TurnOffGreenLight() &#123; // Do nothing &#125; public void TurnOffBlueLight() &#123; rgbMonitor.ToRedColorState(); &#125;&#125; 實作青色狀態 123456789101112131415161718192021222324252627282930313233343536373839404142using DotNetCoreKata.Enums;using DotNetCoreKata.Services.Rgb;namespace DotNetCoreKata.DomainModels.Rgb;public class CyanColorState(IRgbMonitor rgbMonitor): IColorState&#123; public Color Display() &#123; return Color.Cyan; &#125; public void TurnOnRedLight() &#123; rgbMonitor.ToWhiteColorState(); &#125; public void TurnOnGreenLight() &#123; // Do nothing &#125; public void TurnOnBlueLight() &#123; // Do nothing &#125; public void TurnOffRedLight() &#123; // Do nothing &#125; public void TurnOffGreenLight() &#123; rgbMonitor.ToBlueColorState(); &#125; public void TurnOffBlueLight() &#123; rgbMonitor.ToGreenColorState(); &#125;&#125; 實作白色狀態 123456789101112131415161718192021222324252627282930313233343536373839404142using DotNetCoreKata.Enums;using DotNetCoreKata.Services.Rgb;namespace DotNetCoreKata.DomainModels.Rgb;public class WhiteColorState(IRgbMonitor rgbMonitor): IColorState&#123; public Color Display() &#123; return Color.White; &#125; public void TurnOnRedLight() &#123; // Do nothing &#125; public void TurnOnGreenLight() &#123; // Do nothing &#125; public void TurnOnBlueLight() &#123; // Do nothing &#125; public void TurnOffRedLight() &#123; rgbMonitor.ToCyanColorState(); &#125; public void TurnOffGreenLight() &#123; rgbMonitor.ToMagentaColorState(); &#125; public void TurnOffBlueLight() &#123; rgbMonitor.ToYellowColorState(); &#125;&#125; Context 定義情境類別 (Context) 123456789101112131415161718using DotNetCoreKata.Enums;namespace DotNetCoreKata.Services.Rgb;public interface IRgbMonitor&#123; Color Display(); void TurnOnLight(RgbColor rgbColor); void TurnOffLight(RgbColor rgbColor); void ToBlackColorState(); void ToRedColorState(); void ToGreenColorState(); void ToBlueColorState(); void ToYellowColorState(); void ToMagentaColorState(); void ToCyanColorState(); void ToWhiteColorState();&#125; 實作 RGB Monitor 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100using DotNetCoreKata.DomainModels;using DotNetCoreKata.DomainModels.Rgb;using DotNetCoreKata.Enums;namespace DotNetCoreKata.Services.Rgb;public class RgbMonitor&#123; private IColorState _state; private readonly BlackColorState _blackColorState; private readonly RedColorState _redColorState; private readonly GreenColorState _greenColorState; private readonly BlueColorState _blueColorState; private readonly YellowColorState _yellowColorState; private readonly MagentaColorState _magentaColorState; private readonly CyanColorState _cyanColorState; private readonly WhiteColorState _whiteColorState; public RgbMonitor() &#123; _blackColorState = new BlackColorState(this); _redColorState = new RedColorState(this); _greenColorState = new GreenColorState(this); _blueColorState = new BlueColorState(this); _yellowColorState = new YellowColorState(this); _magentaColorState = new MagentaColorState(this); _cyanColorState = new CyanColorState(this); _whiteColorState = new WhiteColorState(this); _state = _blackColorState; &#125; public Color Display() &#123; return _state.Display(); &#125; public void TurnOnLight(RgbColor rgbColor) &#123; var turnOnColorLightMap = new Dictionary&lt;RgbColor, Action&gt; &#123; &#123;RgbColor.Red, () =&gt; _state.TurnOnRedLight()&#125;, &#123;RgbColor.Green, () =&gt; _state.TurnOnGreenLight()&#125;, &#123;RgbColor.Blue, () =&gt; _state.TurnOnBlueLight()&#125; &#125;; turnOnColorLightMap[rgbColor](); &#125; public void TurnOffLight(RgbColor rgbColor) &#123; var turnOffColorLightMap = new Dictionary&lt;RgbColor, Action&gt; &#123; &#123;RgbColor.Red, () =&gt; _state.TurnOffRedLight()&#125;, &#123;RgbColor.Green, () =&gt; _state.TurnOffGreenLight()&#125;, &#123;RgbColor.Blue, () =&gt; _state.TurnOffBlueLight()&#125; &#125;; turnOffColorLightMap[rgbColor](); &#125; public void ToBlackColorState() &#123; _state = _blackColorState; &#125; public void ToRedColorState() &#123; _state = _redColorState; &#125; public void ToGreenColorState() &#123; _state = _greenColorState; &#125; public void ToBlueColorState() &#123; _state = _blueColorState; &#125; public void ToYellowColorState() &#123; _state = _yellowColorState; &#125; public void ToMagentaColorState() &#123; _state = _magentaColorState; &#125; public void ToCyanColorState() &#123; _state = _cyanColorState; &#125; public void ToWhiteColorState() &#123; _state = _whiteColorState; &#125;&#125; 說明一下 RGB Monitor 的實作： RgbMonitor(): 透過將自身傳入顏色狀態的建構式來初始化各個顏色狀態，這樣之後顏色狀態才能改變到 RGB Monitor 的當前狀態。 設置當前狀態為黑色狀態。 Display(): 透過當前狀態來顯示對應的顏色。 TurnOnLight(): 使用策略模式來呼叫當前狀態對應的方法。 TurnOffLight() 同理。 ToBlackColorState(): 將當前狀態改為黑色狀態 ToRedColorState()、ToGreenColorState() 等同理。 透過使用狀態模式、策略模式等方法，我們讓原本的 if&#x2F;else 邏輯消失，卻也讓原本的結構變得相對複雜，這就是程式碼複雜度守恆定律。 ʕ •ᴥ•ʔ：重讀一次 Design Pattern，改用 C# 來寫範例。","categories":[{"name":"Clean Code","slug":"Clean-Code","permalink":"https://yncbearz.github.io/categories/Clean-Code/"}],"tags":[{"name":"Example","slug":"Example","permalink":"https://yncbearz.github.io/tags/Example/"}]},{"title":"【摘要】簡報的技術","slug":"Presentation-Techniques","date":"2024-07-28T08:56:31.000Z","updated":"2025-05-30T08:15:23.252Z","comments":true,"path":"2024/07/28/Presentation-Techniques/","permalink":"https://yncbearz.github.io/2024/07/28/Presentation-Techniques/","excerpt":"Password-Protected-Content","text":"c6651e4bcda59a4397bcdc1be7da6fb59fa0d727fe097f0c5b67aad44da379372770d612be3e946ffdac4a07a9bb1ac5661f2273c3da6fa300ee7da0c27ba90f94cd51cb12d0a5e7dafd808be3b168fe28986a85f3462026a48ed655dba602f3b7eaad77108bf0882efe65066a6b1f399522d48b2240d9f3601058c785ef41762a29ddf2daa863117a84a77494c01c426a892c30e55dee34ab72f647d89f9150d99f1fac79b9eefa5140888252bd749d5595f528605b570050409e33b1b6fdda241bb64d133174f68fb8efefb7068245235e138d9f42fa8b3eb87ddaad8ecaebdc091953d63ac8e9d1a8d1f2d06b40f039a6820031f69d4a0be7500e23430f4aea2602c8cc416af66ddbb56b801fcbed895a37fa473fd697038938d7ff88ed5e769315a2dc721b537fe4f637be7c4b914af4c2b0264424363565e4489f32fa0f3c1f2f2d0ee89d3fb8f6b4e9e27d064bce3e852cf31690daa8eb6a91e80873f9d1d3d66b95a694ea8371a825a5addc34d2c201250158522ad82a72f85681b286b675b0d451e0b8666e7bf39691cfa1405f18836632ee07ee7379afb720b821a207bfb8d67c0bc60a0a6a194fd3e5c875ad962e8ba7235b5dbc8b396a6aa07b18b6217c744a643b0441ec829f7e1c3eb9de75ca5bb2a8bf6f6fef7ac197cf1212f826a5c5f354df91dd178723224175b49ed42e6210454ff542e4dfc0602d706089dcd294ed755993d8a918bfe756ef9a8591a8f308cd1ce7495158b221cfa1de989bc73b98e74154a0486e2cb1f1605dc99c0747ee1e0f6b07c8273eeec1b0cd8409bada2ebfa2881c12971a636e26ef4dc744f083f0b0dc4b7114464dfb4f288ffdac11c1be159e0a0a9cf21ebf743197871ea4c5b84b57083ba38b81414374ed9d55a1f01f8e562a30c7ebd43e6bac9d7154bc35f2d2cc34afe532a9b0251eee0e68e24cb9bf91d9bdc7a55a4e59921fe85ae9849b86b9f6acc95150742be6cec4d72d8e397e00f7caae3572437682ed9db2a4327e7eb97ad90a6dfb9b70df3d2a5ac10b980c50a6c580048f61e983169fd72f4566fda165ddfc363491887a1be952c07292df1bf9c670419dcad4206e543bbc5f534ab89469ddf62a8d1acf500d7e90dc5d80a449a73ce5a4a4c3711d3d44ac8c68d16900fd443ad8e65c06b923693e3fda150462241af5c4ba645b167c88f7c0f3657cc13efe131f239141873ff976db0d24c21b70e411b700bc5893b10482ce66dfa16c87cc46366c9380787cf20ce9544b256d99d34ca3f0ed24f410abc52d6fee57d5ad62b3fbc2a6f102b2df449e469ac8d611d1b83affd7155d385a6967c558c5d4414ecb4842310274d08b134e2f6a0d99a8814f9930c59e180a9e285f29407a4bc5accd29f3091e89aa465cd2e62c8b7abc51c051ca2ebd4455230a8f30b72c3a255c064d4560743e7e75f9afed393304491a9aab1be5ff04bfb0e07730f92d2136f61066fb217f25d03657c57e43b99b3e1bf00e2540d58dd8f95c670f38ca848863960a0bb8da0b025b6c27cc3332c996eabfddfc483d87d5367fbccb106474b9f0eae9d5ffabb398114c85d55aa2ddd6c1570c2d5790395f6843b6820c8bce98de09f802e929f8bd21320ee4ae1c9358cfc2e228e4af863582cdb91cd0f5cd298a37d590cfb30c9b384571ed0958cc7525bc39d10658e87c9c6ce1984b2c84a479fdb1dffeb743c6116f2e97ac1f2a70c9c51642c06809aa5667609637a0393bcc558a2718f37aa4a71cfbac4cfcd77099cdceb2540f1745438a9f735c5cf70bca061485559c628a6c21915d8d4ae5773dc81cbb9f0bde1668df136cf708c7a919273069be25075160d100a008613385eac9eb4bbeef2c573446e3059bc01393c5600e617b49e3568d61e93abd1376f4316b5ec2dbba779e3dc5ab488447ccbc074e8f29eeb8ff52a22cb6e2293f7733916555d94aded166bab526c091308586a54305776b00490c56fc0fc8944c36a8fbfb2a575ee5e79f8e1d867cfcea54357e11b550146fa879c581dc0c5d06113d16b8f47d136bc5435bba93d4157625e4b9de84a8b85dd8173f2b7ffd4a5e0cb44d7c3f5c31904d0166be0627bfe9d5a6bff50067bbc646ff17eec92621fbf76270836a7acc772e0cb0c469ef4ff4682e90b8b921922404fe16c248afdc76b50374461fa50f34a4ff5e87945e79c59e4cb18c281e61ffa782192409cc4b0c350fbcbd28555b92f3837472b70c606a9d7069cacb93bdac5b0b61e2cd9405017fc59b79c5f301e89c46cd3800e49287c7e66d3d5494ce637b6f525026cf1c4392d3ad6f3ea722074f5fc1846979ea76be220b8a486d03184c3b187a204c825692200998a4e1b0b3d7b0353a85f3f4e9b66b9454c3dc692b9b16c0a2af5e60753232fe74ddfb6d297cef675bc880bf2bf50d6c8c08c3d0cca066f8fda3855ddff5a9e3e243ec782bc613a8838f7cf3e0ce68f1e01f5dbacbd729344928295b6db43deebd213de1c074029e5de0b538b463103795cd049df957d994ddb737d4eeeb5abb71708c58bd4e26be931846b5e05f53af3856f701f0f9eff64bda8ea19d8f95c33be702704f56c89aea71445755762b40dcd2e9f9a553ced74c46ae7ec66d7341141bbd86f41f9b098ea8c42e00b62350ada72b849030b01f771d3420b9f5ec9ea2fde1598f16a6d655858ca9f1336e31e224dd8deb82d5913815a08c4e3ff7da4bcf37f4af7f851b96d1310900e542f67630ef1644358a10194e30d3bb76bf5668ea3a7b9ae7165d91b4868aef10b77e49cf5796412458350914c0f2245e4a7d870c1e4e4293e86ab72a7f3eb41ae7f9ab6b1a5e68467bab40b52304725b176de2a0730cef14fb6cd24ec2d36d9c3c7106c0f93cf7f56254639f9a13f0bf3060ababc1bef81afe1256320a3b2af301c4a449df3ddf4c1873f59356bbc71bbeb3b0208654b329e9d2453e9576e90f00f64b2647dbb9dd04e24a0b3ef9171ac369a4ce55d480d58e124d0580c12b34b52eb7b40d96cf87cdb08a36c408c4ea34ce3cc7d7d1e3f6d306aa195d435b0c0059fde9b00d1e00a746cc0511332f55df8f37ee3c68acf838bfeb4ad36d76b43dcd61ac6994d89df652d3c029561bc7059b4aa6db35ab78a44ff7b1eb002835008bb18859aefe6e6b2cfef4c0f0a6e248240399e0d2ae869a3ae7b293ff6cf0c4dbb6564a40d4435a1824f2320268a1573e1255879e774fc588f11db1fde449d3002d91c3cee6de5813be23a4d02e47377a3e6dea2ac806d26a040484a9bfeaf3fbe1f2b1d131dd4f1caeb6a6f22d926b90b5a022cd5d695846566dbb1e1fc6d25bddcb42ad65062980ecbab2d3566b74a9e32f5c6a91603ee0689f9cb788cd26612ab7a26465a0bc3b0f3db98cfb6fc49cd0e28fffc99d36462b58eda9f0011170dc1edac4fa97dfa3801985f84d88ec1dfa69b6a50dfcf7b73d55ba85f882279d705274caf5196aeaef91e084612dc703c34f6bb3e16bb569d0bd9dd465d7b2ab8af3263e34c0b09aa5fce84be126874855810e941bffdc5a7917f279156ed5063641a60d231d0aed21ed7c2b688c6d1d803d17b4610ef075ae6103fde9cf391811fbf772ac9e68b83da7e148d9fc2c9413459d0cb890aa6c04b424c9ca4e4eb44486b1ad850fdb1cb7f4eea91342da325b1041f3b2a1d60b1642e7f25cb2d8160ef9c9119f16bf2ea3c5cc6ab79454dd54fffb47fea20544d87e64a6ea857180b19a21b6cba6870f85f5122be0784e3de51a8266945f4861f455151c24b5580a349801232cb58c331f0f4fd054b1b8f04c136f70fd45d583aad6151383c531c8aff0f2ce9d5e6a9bfaa6d984494f8a2a3a79fb693e97a1855f73b60220bd9c8ef533217e96d6d4c2be6a1fdde78eb9e3acf34e9497c6942cd84bacb756ffd59b97ef22f73d82aa42146546fc323bc71a1a21f2a1aafcb6f543fd1c0fe4357a3f718dff53adaa488c4397b75d699a487af29187a7bbf47c630384e8fb8c81e7b0b9fe771d4bf59dca2b77278007a3f8a3e53d56f1643386d5355a82cd461809f730fbbab5550c22530d3109630b332942569516f5105453dbc181beccca24832fdf68fa60ba3738aac5cff2060f952f9597fa4413377e2055a5ea324db9c7fed01f7501f91e84a0636d84193a24fc91f07bd409a2e574bd71a17570ad4e4f7dc4abfb8b0c67eba465a556a4a6d683fe4e9b97afd39effd962805cd69c2c0976bd0b13c2a4a831adfb665dbaa78d24e07320fc187346453030ab345e7353a29b0c1c8488c86eae68c61d91e39ac7aefa700ac0f0a57de73fb0d7b70213f83420c342b0e845a6c97913e43c5be80ce2a1dfa0be3cb2b4cb85ef80b96b5ea13587088f23f565ecc5324d154f3b1e9d412fea50988a721d143eaf3a6f071d86b97d14f60b24cbc2141f3a52f64cbcc18483ec1786d0d343f65f7d38124eb038ed9e959bc85273f72fc8de7f72a68470aceea3d9bc803ff4fb4d4909f07111a4935759264b0cf5d22501711333d2dbd1e9328fe2ef15ff094f1689a640ef004c9c442ca5939297aa5c0071c2941ca89e92c77d1d79f7d3e822cf0b91ffed63e14547a4159cefe2311aaee0e4be9e1a113f609713798699290957a7279874b05560c3081298a53d75b18feb6868a97421864947092ddcd98b574a45c11899af1d6746eac0b08e3879973e7fdac834e8ba9215731419d32e582fce097df6caf662104738b4c7452f54dc00c1b189e941f6ff53cf728bd3de8f7a9220bebd9564eec5f536d077d3f04825bdfdcf12b2de518a40a7dd6f4a59ab08cc1e0c1e70e920dbae57fe3f7932433ce7e1e0f86580deaa8bc0b5260f9e3d0d39840a9012421b2e287f923eb63606a2aa34046da4d0a90dc3122109b952a26739537bb0e1c5d5c74b2ddea390aa96ed3ac22ea67c1ff051222beaf383c6c509c0ba78cb281a2dd1014d6da7df644aa8a41441a9b9a8afcbbc4a725bf7b2831c0a5dcf72c0cdf458a5b82a4098511e603977264ac984b1b938f037a4523d75829cbb11460954b47ec59f696951fe7363e7aeea6a1107625a41cf7876cf39cd5cca87057e5d5d5ad7f74860d049147dfb54f345885f7e303d809dae7211ae7cd995f9ef705ad545dd4b5071251b15e1b44cf13f369181205736017603c7d11b24017614d6798edde0e6546b80bafd056766444d3e61a8093b3429a247c9f30b929ede088a84a7d51aaf4850e6408f0850d89dc9f308d3e71b380ff558e6a64a46eccfa8e4ded4f37dc47f10a7f27af32a7a62c801e0bf9ba9017e9a99669207a39604e6fe56d75a2b0046d96f10fb4452d61d7bfe06ec955fa43e9c8ad1d70fd33dccccfe9722001de3505248d72a51fe6a94f12ed07c649b4f445187d11e2228b73327353a6b99411365da1983bd11bbe0f6bcfdecb0daaa8d7739b2cc61317e1395ed8494b4a9c6653ba35b62ac9e938acc910cf913684794cd471182ddd2b9ede1cccce2be077956e2d71a334438fcecfdf781969db0e382da0ac2f756761f402fde8a411a1ff1f72444a8361c9f5983ddfb42f351a89ce046f8d6ec45659359ee79919b4f380171d13eefdca78640f43fe8847a040987e3e8987f10ba1b4141d567e7504843c04917adce33fff8e6e21f16529a1fc264a2c637b60b627d8e68c133a6c17acde34622af69104a6124a718febec48f741d62649cc96db7d73e4fbf63b7565e38e1fe6124bbb3c96967dd2cd3389eeb17ba5c3ea593816cf452934c19c7b334d98d7ec2781da42e53fb56e5a3370334a3adf2cbb34dac09bb9aedd2d10834a56fd397fb73eabf469417228a4a602651c48134d85a53eb31f8e1129feb4505dbc4914c8184c95416a3529dfbce8de40ce940144a6edaa9e8902b38b94302f8cf47d58812522608344dea2d4c51889213bd825b1946dbfe873daccb3b57f8df71324661a62d3a0208918835ad93e1b858629ba74122f6c910d7623cc814291e320d8d3fa97bc40c4bf7460f02b18915049b77128f66907d797c330c11cc7ddf3bc0885a43b056da7be509da7cc549cc88756d20350031a17abcd25ac22b1a74e279146a5fa297b2b704bf49d3c40ba39fc934749c841f132e5709b7c50f36963735df1c28934f96cae71cfc423fc8da54d70ac6a335e7e788a495c08442e52031af4e0b415d4a7ef3099c5aaaec055f342f8b83d27b80905d2d0bb161fa7729ca8a360d5613af2a5e20191ca12ed678254bf417058e1f6b511cdde8669fe1055ba7fb8962d576b26870251817f9744e9a384f9ae7cd44fdc0fec6d8f1c6c23a1d119f50bf1fb5bcb6faf979ad1bbdae04662de9fb74bf4df9423e728c6450a946055f81e4da2a441bc1f05650f03413f5a9f4b77fa9389a5580a3a62ebbfcbb2ce6fdf1672b4c25d3ca61906a8cff92ba13ecd5c090c06d08b9abf712636c799f24cc22d122538a790bba7e99a58f4283586577b9f596ea53e7be9103511f943d39d7d40b932652fa4bed9b362e330df80cc1ebb777f22fddf2040a0e02c096633b07e5a94a82d07ccaed6de75c96cd0360f56243630a85e8a2dc96a4d618ccaf00cfbb958f563d4f55468ea8aa85699e0fb45be83d0a451e4fed0c8a5142c68dd96fd79902b255d577f5b689df233a7c4afd0af01e1f3974945341df34b87fc888c4d9cda4c91cf5a36abcf5b90241c6e32592c2f09ec3922cb7e7a3f756c3d8e51df47b45074217ec75f66173cccb09bc9b116a652d3519ca1d69ea47775d83a7cd46b28a074bd766db5008a71b5e8424b605cb5d3584cc9ff6acda91c718243fb6fe3fa93809e30ad99750012ad18a9165e5efeea3958f493b35029f932b21ba962407bdee20d8bf4338efe74c488e505d7f40e5a41d651a3d721055a582330a6639e73d1dfb1c43f981c3911444e65f66cd7be007816d3008d70f291c27979ba5b8aa14a3175c3314feb0cf4000f3a3c279cbfcb240a83b5c175fdbd48201022ca57e455c08dee33f7f207a6856b535ca246be46cf8bf019ebadbfcf7110636608a16e52afdd263f16eb3ddd6e9116e4f2da3770a8b48650d56d3ec8b9fa8262db11ed421ade3269ee9e7960b329f29390e22197c433d7d87438d01f9ee04b8e8518c97d7725924cb5ef52221a7611e4c371c1808765d1dfa9f545ea9d6cbad38dc10073758fcf7d3c94af47102a6ec4520b5416c2a64656e19676fbbd7d0d64208f63b0d1c010fe5cf528b60e55232a0c60e5db49930570bef43850376cf9ac6f81d814759f8086cf6b499a117bbfd4573f07863c90fdf7a5ee9d9502c2a2d2e0701562f86faffed9e6fe9c7d007ea32c76a3236528821ac0a61d3b483bb426b3db5fe05d845d06ed932bc06a3fe75f427c168f12a5e5d6c06b5443b91d1a030dd4b845ffdc8daf3e3f704063fdc48d9b5c7c25e108a5e6df63dfc1f1e1742b7c969ffda94d0afaee46373d81f6e02ea4e26c2642ddcf60f7b01066441546e170d7a75a24462e9ee6baf11ef2a9d0ba7e725aa00e58f6a346b028ba6d6be4ddcd26201fbb5badff0fd58652e453df244c64951a6a5f2065a66ac3520e9493e207edb0008fb66a3e3c43f2ee60d64bc31e9c47310ddc45f03506a2230d4dafcd7cd244347d778b5514dbc1d3f3cd650fd587d4802881ac66de3c5cbb556b5c26cb6210553c26dbb01a7ba899dc061382e70f9cae1825cec8579f3b81d61406f3b4552b5a181a1839296b910d83be0c7c170384e20c5b072d8b9dac91d2e86991d6adabbac818873c7822a200b43159bfbb4746af2b927a25b36afba5e66294761bcfcf1b10392e1a087398a880bdba905a7d4b7133a31b8b33bcebd8e7e908ce489917ac143feae88c7645b51b2395e3d53384257a19f50811226285b4efe44a459af7814a863436f2fa8ca1110d1ac0ada7ee8ea5d7807fcb6856229df7610989fb84e232bac14346e50b93eaef36856c998d227c48af473b7c41d7014833a549badfaeecb398d0ff57e06788f9d080a9ee2c7af50ecb89638565c7761be1a569b81e5cb02d94cdcd73e6c75b1c837d990798e92200f9bf034b9e1cf4bdb09c6d8de1ea094e4112d11092342d5456350ba0aaeb47c4c2ca35f598038398204e41b3699356a7f8fc784cd29ef1d4c9a737e0992f77e6b395e25c1f777063e09bb3248a392524db0859505e470170be0288231a1bca6e1a05019bb8f166f21a28d30dddbb11ed7c19a95e84717964569e2fbd1d32cf3b7984b13cd92fc9d4b0410ad130be9a39b3b6a67d26ab062adbff5127631ab6b8dca0c72828702610ed9df0ac4ea69899ebc899e12e8b2e9954a1b8ec0504df4d9b5e96bd30e6dc04d3485009d5703ac0278f8f0e0fb564c842fd8f65b62e7f74e3c504005c660b48a9f1b31fbd3ca6df47059652701c9b8d762e7537b77dc00ce4a731a8de0028c8d7fc374b2e743049a4b0256e5afbe03482b29230027a3a4e944e560481a6b94cf005993bc5f136f2c2122c76fdfae5d96c29f981f8bf3d55b26431653077589ee769929f3aa6277a33abb3f304828d377efc889b9e58dfae0d3e4b87a89649bb4b85dfeff4e6451c59afe75d8d03c1c13b38f20531f0152c9a260610282ccc21c235f14c8661ddad35e43d090032eacc0daf6a5b504983dcef1fe098a459fe7dfaf20a70d4ed723d2cd161dbe3e62a42bf7bf15099f09da67851c78ebce6fc862f59b37018d86a3805c06dea17fb0e5cb82848627a6d4c223a19021bef1b6273dc6ffa866be953d846430a2b9ca2fce01306106114ca41911bd440afebad61aba0ddbd175c3f6a4355eb10482e767a9fe57b1e6a973b8e63fe433a1e302b734196c727e23defcc5b2984022f7c588847772b9371d4072f31b0f7e439be1ccde85aa723b8e16036d0bc9bb81204955178bba88cd425fef6fea83b8c7783b705c8ca9e70c0e56a79727d64913d65b07f241695044e2dd5bb1974b930bbbad5460902b0b9074e7381ed3a805a22237ea2f7777bb5368d01e4a7372a48558cece7b1b0e44327f2dfa88ef6aa69be4a23ef7fffb605d9333d66b5e97dc110e227ac6f850da93e9d551250f105d0a9d298f8f1f8690cea8923d6328ae30719e7e9fa8e9af9daf8116d263f32f9714e80c0d0b5a6e878bf8b7f9424277c0f73e960acfb3f69888d31832201411b0746454c6c8f0ca0556c0c1f9f38942887372573806b75e890d0acba2bce158ebe8829aa9e19172a99f33a9625d827c461bb074855f0272b8ff89de44f13dda8b89b33e5a6a03c094a8c769327625d30a03a92fdb740ce43d4d1bbfa01c55b8447e1a1cbede43a200b2312412100b0648ed0f874b66c079a8daf29361d7e1f096a065b6bcaebb938409419a2aa558080bf1fe9848b30d7127089ed52ba7fc0c841e1e7d71c1afe5502e59c9f76d70008109f101deb376284d542f44ab150080f168531bbd73cf10fc337aa0a04ad7966ba0dcfdd40af993a6d2bdce84d9ba05d3a959bbed9954c8b36c25542878d01ca2db6d56198e60a12036d081bf7e599914a44dc954a3530acd31f793f7efc897375b4549b9ad9b0db6c06c8d64da6cd94773f9608acb2bfb8f18349b67c972242d76e15f962777f881a56635205c064bf93f6408854f564c4ad4e321f53b20021c9b51e685526a9df7fd4a263d7c1c604c168ef08003f6b054ce3a2b18ae0137195fa1a68233112d82d2f612be0826909f9012a6f8ea9854b8e8f9e02eb8d5b467305da94efcf98467790d979f4b7856bb4a2bc25035d04c2d3d78d9f143b68759d154e0dfcc3e41f9a17b894d46206c14706fa065a789311868af08b378a51ccbc2e6fd57a622806e353a1304855b9c3ee03119a88e16a8d47c79103508d6878aeaeb8deb5cd37cee081d9a15ee7d75177c72a72458e167fde62599cd6da93f69d063a7c1789c12bc3ad9f2deee845d338ef007ffa68152e5a59901ef1e0c1be9b379bbcf7979937f98eb4a9c078a60e6cfd0325e9dc0cb14dec954239e196ce624065ad502f25eb05bea47b17ec01dc778e41c12d22941514be93d9254432527205c4ec8b82f771c54e9d21f447821e2bb2f96dc6e74ee07e22765f871428eced72b666db75fadec4b9c8d4dda08da3433af4bbfe4e6d2f7aa77f210f176392457141d427d5bc4dc8433e7439d3bcc159063b574430fbce36e30c559c9309060241f1083b667e16949ddbd64e5005399a33ce9d8d69f57be10adc922db5e8a411e54b70329d8c9bdac6cc7fcc79a87764b6cefc302ced8385185991cd8026ebb3c540a1b62a3af4e4bc677aa08dd257e6c4d78c8f7ddf3f5ca43c370452519c3efc30eb656821e2eafec106794ad0326ffe2599d489073786b0794418196b84d46315d1a71155a75506ae4aabb9451dc63712c08fbc1de6009f3de50bc6dec06f17be81a094720eea29440247a4a9a26c8421a50f994f32c68f38849da47267939386dfcfc8ec7f2ab365d82ae8902e314ee403d1167fea5ae93340232140aeec1d0d5e7422e6d514362f269d83a8ce62df2123e3960f02e237413fd8535d6dd165910969af4337bb15dda553e3cf00d704b066ac3a5ae92aaa13642f38dc6d9fe0693b43392f12ce8fb1d0fd6a10340cde772ef5b87c614e35442d68d89b3bb5cd526589a85754e48683a2b3b9c4452ba5a4744a658243cf8608f694dda2a2b9c2c0a249dcce4ec68e9707f85931f9933221c8ef4c93011baedef993da54c08b3c86de53d95bc6f099378dc4011ee65bae1775f878154fec606100c62856cf779db5f800ccaee0155784fcd505c1341b0ccacc37ddb0c2e5e39c95375e17e759b5edaee4d4e57ef29335bfddc782f3ec746bd405f5a74c8336944f20938f19499048bc7b313591eacdf849c21ac6aab02805459b776a3e1518032a3eae87e4f868f28b3aa23dbc5024b5ec84ac95efda8c51a65cf30ffdf8b254e9fc2f2e5bd7379e1b0d2496b919439739460df442df29043e6834326655c932158bd5291ed462871ead6438515e02560814ef00c594e1e0c5cc9861a0234784a743e02d3b7e41880730d00329e230162753d10c57ea805b14cbd34abcb21c7307246584fd0c006c9cb585e49f791eca775ac8acf1e21cbdf5407f20e4f56313452e0540e874046855d6d9ed21c591203a433fd210c745c19f756d1772959c1e965c64e92050ec8e8a68faf94470e74910a1a31cc9528e2e32eaca295cc35d33fec94280b40d7da08a876c85aecff9e80a2064635acc47921b03de0d1ade896c8bd8630fedf84daa2c726a30b85888ac42a6f92af2b7b5a5b70a68726cd6e084d10889d752454e4006b4f22450236ede15b21bbdef820c176839c846da1592f71bb4e5c6ed515550f4b3afc5e5d3d6de418963ded093ec50aa734d2bf459a40f68489f925e40e17c003f9a4592756a93569c8868e6a076a4119fbacd035428cb8a6e8d870635efbdd8c524a54bdcaab0490ac26e70bde8eb8ebb892c5e34d61d55e5edc17a7b68b6cf7a54a66715aa9b75d18dfdb4a51bc397bfd7a75d0233a4bd6ae6a0a92d292cfc198eecb0786d73e3c27808f643b97324d9239481e2e9e5017e55786083eb2d7a9bd86d3ff03fa4cedbb8f0a15727288422672eb0dfbbb06352820e3a15048165067de49ec8c594e7b5e14ddaaf8644a3d077b7e50e79cfcfce86c9d7e7d897e95981bb1d7e7a40a7e51f1d21b9874ab5252b2974efeb5daf71b6d2ddeccf77f377e52c82c908d95833c1cff684f3f06620ed66cc31d8df71c24e8dacea0b01cc80b24251f7377d8d9d1be4f3d7f7e254f33cc3d8a2ebb7b2da0f43ea70e216014efcff0ac4b0648e143e0040516b466b1701ccf6b42bf575203fd455fab8b685b8765f6a5ffa43abb85b57b4e5c6509ec7060d3ad585aaa1553c0aa22363d680c856ef737a35e68cb8eaaa9162d1bb43eeee2fe90ab1f2dbe8e6e825665c792f6cd4baf08efc62625e8ebe224857510aff26c8b933d2ecfa9ba92c89987d1393b158809bd8aed2ade0ebf4a846c6129c4ce64816bd09d792574adbade1d04fe3471446c82824796ff9ec308f396544f7a0adf112bcdc0bcc1e27752b458755f778f2f828b52f0994007cd5b8464bd25ea7a2f341672850660c809fc6c702fcd004f1996400272a6281002a90222da8003faedd0a45e70edeb745dd550334621463d7e74cc2b4831abe8fc58a1466af852377fb221826be08e5e8d8062f3ac4bbdce3f658fbd9c596d267072282a8207c8fbc04f3c03fe15c79a0073aaf2f5ed230a359b00518930fbd2a668ae3ee1ee67a22f197006c8f49eecffba0d3921db17bef989cceb9f16dae47d0a0e62ffa9e58afe042ed2dfd27aca93194854746c9bb53e51758a59eecb71d13ee1808e1a9d4e4e3726f728e08fa6e5df3b7aa7a0cc861945afdb2fcc3aa7e5042dbfeb5c56e24b7463c1de5556e9c6628d1cec3ed6fce16c2ee86e750cc70f20571a9127fe1b15b971f0a2f5b118fdfd6f473326490985e53ea454c3a2746e55f8e74a67044c755cd4a913ddb360224450c16019040266454e9b32357521c0b46591758457843494ab58c4b143e7c36be959878a2ad0381ec81e5a9afcdc3c192eb6bf64672e6b845436d90f73cd9e6dfe3113a03ccca2fd73e73de566e76a3e929f425db78cdbe3e7f2ce6ad82cae750c5a2e571f54b611985273d9a51ebda7b78f5e2f01be9dfb0bdfb971b0a5e0210db5186215a11cdec6fdbf0e642bb9ea7d72e01b1ace93e246d1916dc9f40639cd8deecbbdcb070f529f21733cb5b2b45b07069101317936baf20cd58b126c5ec83fb47f12b3dfae83def89d2cef28c18d30c8689141a87e6c88a29524edd00e9a6c88756229b4f086412226cf77eb85c332ac77e147de72f85009a38d933566ee772e13c94181419c7bbc21cae764cbd1db17bdaf0744ecbfafb68ac0dd80ddc6c245712308d5aec01efb355c48b87a6bf81646d6d9a181ed8b2f3e19e86ebf6b8bced13bdd2cf2311100030814d9f18ccc0f3135511020e89267f832f2fb31d0ad51628184187129cf82538b9a012d0facb6f425e300192481eff6aa062f675988cf6184b2f4c99800757e95b8c2e85096e4f1864ff3d08432da0ab2a54ab5246958d44cbbf4f372200564accd39e236c46f1064dd9afcde86b629179e9a138c08597596c501c4c9219cd1210298600335708686943d7015c6ae6c152ef0b3baf748a69e32c998b1f183b7f848d984d29adb61273c8abea8c4d004048b898d865f8afa55cbaa43c93d6f92acc823888cd3ac7241895b592ea1b4cd0d9d1d41898cc27eb51fb2103c502ad65f4dbef8d71088d9a29fbae3dd6484df0a5ca1b4a74a886f0d0cc367b3c44d803639729e4e2806fbbe13eb34cda003c71122945485214c49f1193d7250a4495c3c5db7d158bba8e3c7c81790cef627d0b0f376d14b787f27efccf925f6804d0432b580045de4ad07926ccd9bb89a012002b9fae6d0b6b1625a1ccd6e0496236e7d416b187502cc49a2556bef7e17d4bb478c7478b38a9639bfe25868ebc996b1b07a7f24cdb879769758dfe64690291fb7f50ff1bf089775e2c17766139a52b2aaf4b9db3e65ef514e6bcea5188c1f2d31762e80e7f87a161cef3720bcdab72913f03cf3f7b808005342dffaa12993e4e76d95c5ef137a142c1040f36afc3ac4d9be3c7cef7d8901cc014faa2acca58d378cda3fa4fc86828eab7378258fe0515b9241057fb8fe9d7cd999d20c5d43340d4e0d2bd088f68064f72edb18e04829938849fd4c212bd7ed91e22ba0d0767b9c573cbf7d86c7b69983c2ad2502ed8de5c81b14dcad95212ac79b7df28f4cd01b33f247594c2ce7333a00c8c655c858425bcfa978c4cf6d97ce1b303e725d1a0e07d3701ac497db84e6392ae7c7125a63a8e0848b3106bc634fea3787c6708537699db082203f588d185754906eec1e7c1bbef3a1b81a0eb21d491f992e7e8bde44544e3591e6ab9b6255d6eac23f938b50651b9241f76e52705634e97a0bd0586b7b180fdb239e3e476b3ac5f2b40e736f70f339665473e7a37c5162152a20aa1cd06a0c7d0f3a8a99cc37639f4527f4f19251d868e9d2a3c687bec6ad36ea63efba2facff606c37d9a26f55320bacdb93b12acada3d22b233da32c8669e2f76ca391a128aae8e73074decd86b512ff5650f7edf8f0f4d4c7316059dfd2e4b7e57ae728997c1aa26c340b789ed3e60be1104674a28f8cd1c9cc33eceb3c10ef2edf903f87811c9d221f833b5c36ac4466825ece681717d9f99f89249daf38ee70f3a5313fc72d065c529a3b69ac07977b3099e87c5796cc597dc1b7fbbb0cb74fe700eb49e7fe51f978ff59f6c051031206699632030583d91dfb019e48eefd7bb2c1e663da7dbcb51b016e92d5576d7bbfa859f1cf38768534a1cc5c13a9089c0b12458bd172ba0d98532ef4fd933fc8ec627cabf5ec42a14ac54ecdaf26c82e2b5b3ff245b97aa232e96c7be2b6aa85fe03811fe48ac73cfcf1fc56cfcf6352622f11b3b430ab3d7e7e7e81bfef3461c29294328e573fdf3650a65fa15d0858fe37467cdc4294596ad1b180d3cafbda88bdde056b2469443680e676196d97da09d2e9f9132f982a1f45a813aa0ce4f6357ed6a4c027aa00e23ba96d50e3bc30e2d2dd055448a4f89aa150a1588bfd621bee272101f41ff3cafa6b900c5db9fc815fc6075faf894f186e5f7d8249265b0b6c28ff023d118c4c2dee738effe77dc2e770762baa898f5c1e4a9225e84ed846fa56f152af59847b2230505ed61c6434d3bbdfb596952f0170e5b41e97fd9271f529e6c681c0a9c9119cba0e9e6432f4c4e5f3224c060d18d87e25a6d40262f8a76da934ee8cc47e0c4c363dab90274208c81b8f9fba9902d14eafc8c10777641090bb6c2f0a1af523210493096143e5a6c15c7892858a6fc14735cb6267cced82b5bb3709106a5107e52d82c50281ed65e704a9f1361fd2d888dc4c7192fff1d0aa836bd14e391e7b659f117445f3fbd594955f1b828d4a5219f06d34d6eb0b43a40d4034ed40e8596f6c53925c29f600e04b8a3852032a3a24cb866bc0b5782103206eb9af5f55f6c8a02660dd9900f2e3b136a2f3f4ec7de4c938330f1733422f390a28bdb8a81b9a745d21c80ea0ca337c905a146d948946c330871652823d75f4438e94792205450f359f1c6d9090e33566ffe317a04199682859228a6a5723fda9e05e9b6f6be1e101b54e900de7b37befa4349bcb21bc67095da6b3381d7806ac77d86f919ff35890f60548736424e39e4a0b1d851588f06261489ceadf75d7e55dbd0a70f3cb4d800ee88e9a8ac5f0803ac8a61ffbbbe68c928abc8eb3950bfe090c60a5ae50db13765abb239ba129993197ebef57bd6ed80e86bcfdba98e93c6f85edd7da38ab6e0e737baf089082d77593af80b0f6d3a0e47b08b3d7e91974f5b41b604152d68dfb018922c1c18042e082c78ac456ea46d51c75a3c0d330bf88e50eacd1a16501991bce73c3e4e4cfaaddaad9b756072a6c6b2932067f17921df6ab0ce59dbd81eee4d8c7905a3c4bb0027ae93a6673488a968c63f3965c61cb3df9e44d3df78b48cb7137f95b5f1cce2f742666f519695d8f909576b4b4a7852af6e70883037798535ab0976e78424f156451425ccd313d32426dd343a8033c81d7088ceb653c8a0329331d5e50efc4b17db031158972fe10c526d98379e235c7da06419b7210adf51a1949020151492aa24ab3a81bca32ec67e3ce07e2dcac74e25608cd4c55feafdd5b19848bfde04be6acc4e17c6ad8da95803ce048523a1eb6234d9a9dc5886de342089a7945629de2105718c99e41877501d7d648c2256190d797989167085bc404d807d4f0d0efb171255c148a29c0c47e70b663348613ddde38e4a368eb46818001530a733a7ae3e7d6e3c2307bdc0655ba8c7cd6f7c1ba444d3e13b7c773fdf3e93a37e18150922b75a00a2c2a738860181e56d5d20ba1ee566f6664ddd980694c00f08bd8252a8b375aeb49aa534661e5a07e65c4d5dc8f1ffa91f80f9419e2685c0a1e7a9ede1738b3e0ea3e314d06233398daa51c9fd76ae426096342605613ff521f7c798e08526eeb155c4af98eaa9c8093b91887822bca3e00de71360ffec6b325fc05b87a239e0dbf0857b64d8754f0aa8edb0fcecd8ec360907c9dfca182a413008f1669545e53ceb0305074e3c59a8087d6c3b98037927a83011d7debcee2fad2326b82f732c16a9a99ea0e1492b29847c6a21485e10ad4564472c3ef73beafb1a25f3dd8488ca689060b1f4d36faaaddcd5e74d459908cd7302c85ca31d75f21ba81ed33280c0bf8fb740284c7665fa28cfa97cda44b16b8e27dbbf57239eea6381e80c30880797e7f775f3d71629d23f9563d0933a06e6f7ba6fa2e8ee2c405baae94188f3e28b0eb6a3b7b647030237fd7b88b35937b4106e9668aff8c177ba3786b4641b140523d76d689a06f4bb0721dc05dec4203c1d2cf42c5c049757be52ba9553d3e73f76e5ebecdd05de686f9d970e9d5e9f44a9ca790ebf6b01a89fe400664698a7ff69d08fc489c8e7065cdc2d36c6a66607b9302a125051156517f02e46892ca3f03131098ae5e183d172b6f289a64c16ef6a5cc691866cf6324cb8bec13ca0df87a175632e25b923662fce702691c4ae5e813be2aa3f6482a5053759a3c229952d2bbf4098d9c6724bd275e5897eeef6726d0d93a97d87242162a04f7d93675f506fb90f412e130b8bbf3030562b88c28a4399e2c6f6009e01f70e8394654862d1cef38ff047773f9742417685d8fdf489da0b475f0f07b9d437d4c9038f4ae8136df43c79d918a8950b68c486391dd0678e1ee2a003da1f2da9d2c8784b2f75fb5b5059107725fe8b241bb116c3bed9db6c12334cf7c75e4e7508d1e9639cab697dfb23745013d9ed6382481cae1e46b7b120f857a9cd0cbc971364c529e935e4f5c74b6bb84d605b3ed22b291eaadf2ef6c68211046263a6db3d4110bfb61f462259f8bcd60453f6217bb283c862ce97f052279c4b63e96058fbac07170f0c20e0131eafe6d81e17a70e5f889269310ca458dbbaf7c601f0fa7e238357b79a099e6522caf76a03c7461dfea0f5cc69ad6d434d42082cacff3a873c3ca3aa2b3da2f8fe9eac9fd588d53d480258f9086dc8f4c6eef140e5cfa6eaaab807807824f993f559bcfd8a97b9794a77daf1a203a61ebce867b9eed055398c587b0f0a690b4a50c903d14f90e0a8d1d3e7ebebea6586899df94e86f8775c02105400c473bb42a47be2d1092cee7136f97294d135c4ce517f02e5f7c1fc8f8d82b530196374e1cd817513238853700a5f3d0476bc12e1300bba20065c3fd08b93bb69297730d9f013f740bd9861cd827b0b4b16c18283b7eafafc8b21696ac8995ff36c91077a9f9ba5e0ccf3bbdc4f4086ddca92f39f041b8207fa8c52f07b692e30a1402ff795fe63a815f904a1619054687d907a3f478b30075de1e4b777c9e580801861eb9275b5e152de1c54fd118527f4b97fd0a35eb16c5791fd668085518ff0c44da8e95f6e6a32e412b7ef8ac4f72ad55fc795f083d6311085d900c11d20bc94bed847a24e87067792f67a90dbdd10fb75498be107fd9ebd8909eed93f8340b34d965a5c2d6f998fed394fbef1298e424d17ce187a5b1a118a8ef5e6f5795937ee858c118f9fc808cc3d9086dc6843dba4e566dd74febd07b30d6d4b35a1ac49249ddff9c39bea63b2feedb0567a00bc3b25742327e67280eacf09d131b60340ec219dc13ac4e806d9165a4df015977fa5f4cd13da8bfd843288e96d54f9cfbbbbd069ccd5a8594047d08449f493f968e709235fc544ef7ef8529638840f37a7223e3a86a84f5e282cf76add186f7a4e4cc3b36063b37588248851ede56f72555f43d85bce66ac512efaf381a7824475353f9b76dff568fa73b41ad1c04739581ce0e2436dc2d36ee53f0d41c5e56ccc543e98b6cac4f7cdc09007c20f30b8bec528d37abd602d5a29864addb3cde05b615fe66325fd5a1c85f09b666b728bf7534694a24f0fd98aa1d04caa2cd94381e75b7f4ad8e291497eab36a50aeb3126e65d8b9ae7eccc4f86c3931b70293dc49a356d4f6fe1d9d48524ad32cd3196124d43680384c84de1aaf9684fcf3e3fba8406839050f4486a856d8b91f10c50aaef6d4c76d80ab62c831920929f2ccbb791f38d348a989614de4c5196f8a67afcc6b233e6a0719c015a7d901f281e29b452fc2ddcfe384b3f88325b47a2c2f667300defe5d592dd9838edf0663968be93781d71e78a53d5a228d145af179a08cc1ad6ce7e28d3f1fb84b481e042b244c8714b15dd4447a1a7122602967bfa67b6ed12619bf350b1ed2bd30759b779c77a38712f6852 Please enter the password to view the content.","categories":[{"name":"Other","slug":"Other","permalink":"https://yncbearz.github.io/categories/Other/"}],"tags":[{"name":"Private Note","slug":"Private-Note","permalink":"https://yncbearz.github.io/tags/Private-Note/"}]},{"title":"類別圖：世紀帝國（抽象工廠模式)","slug":"Class-Diagram-Age-Of-Empires-Abstract-Factory-Pattern","date":"2024-07-08T21:51:25.000Z","updated":"2025-07-30T11:30:13.079Z","comments":true,"path":"2024/07/09/Class-Diagram-Age-Of-Empires-Abstract-Factory-Pattern/","permalink":"https://yncbearz.github.io/2024/07/09/Class-Diagram-Age-Of-Empires-Abstract-Factory-Pattern/","excerpt":"Class-Diagram-Age-Of-Empires-Abstract-Factory-Pattern","text":"Example: 世紀帝國 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859606162636465666768697071727374757677787980@startumlenum UnitCategory&#123; Unknown Military Archer Knight&#125;interface IWeapon&#123; + Name(): string&#125;interface ITransportation&#123; + Name(): string&#125;interface IUnit&#123; + Attack(): string + Move(): string&#125;class Unit&#123; + Unit(IWeapon weapon, ITransportation transportation) + Attack(): string + Move(): string&#125;IUnit &lt;|.. UnitUnit --&gt; IWeaponUnit --&gt; ITransportationclass Stickclass Bowclass SwordIWeapon &lt;|.. StickIWeapon &lt;|.. BowIWeapon &lt;|.. Swordclass Legsclass HorseITransportation &lt;|.. LegsITransportation &lt;|.. Horseinterface IClient&#123; + Train(UnitCategory unitCategory): IUnit&#125;interface IEquipmentFactory&#123; + CreateWeapon(): IWeapon + CreateTransportation(): ITransportation&#125;IEquipmentFactory --&gt; IWeaponIEquipmentFactory --&gt; ITransportationclass ClientIClient &lt;|.. ClientClient --&gt; MilitiaEquipmentFactoryClient --&gt; ArcherEquipmentFactoryClient --&gt; KnightEquipmentFactoryMilitiaEquipmentFactory ..|&gt; IEquipmentFactoryArcherEquipmentFactory ..|&gt; IEquipmentFactoryKnightEquipmentFactory ..|&gt; IEquipmentFactory@enduml ʕ •ᴥ•ʔ：若不熟悉 UML 類別圖，可參考UML類別圖說明。","categories":[{"name":"Clean Code","slug":"Clean-Code","permalink":"https://yncbearz.github.io/categories/Clean-Code/"}],"tags":[{"name":"Design Pattern","slug":"Design-Pattern","permalink":"https://yncbearz.github.io/tags/Design-Pattern/"}]},{"title":"範例：世紀帝國（抽象工廠模式)","slug":"Example-Age-Of-Empires-Abstract-Factory-Pattern","date":"2024-07-08T21:44:25.000Z","updated":"2025-05-30T08:15:23.231Z","comments":true,"path":"2024/07/09/Example-Age-Of-Empires-Abstract-Factory-Pattern/","permalink":"https://yncbearz.github.io/2024/07/09/Example-Age-Of-Empires-Abstract-Factory-Pattern/","excerpt":"Example-Age-Of-Empires-Abstract-Factory-Pattern","text":"Pattern: 抽象工廠模式 Class Diagram: 世紀帝國 情境：根據用戶端對兵種的需求，我們要生產對應的軍事單位 這邊我們省略軍事單位的定義。可參考範例：世紀帝國（簡單工廠模式)。 定義裝備工廠 12345678910using DotNetCoreKata.DomainModels.AgeOfEmpires.Transportation;using DotNetCoreKata.DomainModels.AgeOfEmpires.Weapon;namespace DotNetCoreKata.DomainModels;public interface IEquipmentFactory&#123; IWeapon CreateWeapon(); ITransportation CreateTransportation();&#125; 定義民兵裝備工廠 1234567891011121314151617using DotNetCoreKata.DomainModels.AgeOfEmpires.Transportation;using DotNetCoreKata.DomainModels.AgeOfEmpires.Weapon;namespace DotNetCoreKata.DomainModels.AgeOfEmpires;public class MilitiaEquipmentFactory : IEquipmentFactory&#123; public ITransportation CreateTransportation() &#123; return new Legs(); &#125; public IWeapon CreateWeapon() &#123; return new Stick(); &#125;&#125; 定義弓兵裝備工廠 12345678910111213141516using DotNetCoreKata.DomainModels.AgeOfEmpires.Transportation;using DotNetCoreKata.DomainModels.AgeOfEmpires.Weapon;namespace DotNetCoreKata.DomainModels.AgeOfEmpires;public class ArcherEquipmentFactory: IEquipmentFactory&#123; public IWeapon CreateWeapon() &#123; return new Bow(); &#125; public ITransportation CreateTransportation() &#123; return new Legs(); &#125;&#125; 定義騎士裝備工廠 1234567891011121314151617using DotNetCoreKata.DomainModels.AgeOfEmpires.Transportation;using DotNetCoreKata.DomainModels.AgeOfEmpires.Weapon;namespace DotNetCoreKata.DomainModels.AgeOfEmpires;public class KnightEquipmentFactory : IEquipmentFactory&#123; public ITransportation CreateTransportation() &#123; return new Horse(); &#125; public IWeapon CreateWeapon() &#123; return new Sword(); &#125;&#125; 客戶端 1234567891011121314151617181920212223using DotNetCoreKata.DomainModels;using DotNetCoreKata.DomainModels.AgeOfEmpires;using DotNetCoreKata.Enums;namespace DotNetCoreKata.Services.AgeOfEmpires;public class Client : IClient&#123; public IUnit Train(UnitCategory unitCategory) &#123; Console.Write($&quot;Ask resources to build unit: &#123;unitCategory&#125;.&quot;); IEquipmentFactory equipmentFactory = unitCategory switch &#123; UnitCategory.Military =&gt; new MilitiaEquipmentFactory(), UnitCategory.Archer =&gt; new ArcherEquipmentFactory(), UnitCategory.Knight =&gt; new KnightEquipmentFactory(), _ =&gt; new MilitiaEquipmentFactory() &#125;; return new Unit(equipmentFactory.CreateWeapon(), equipmentFactory.CreateTransportation()); &#125;&#125; ʕ •ᴥ•ʔ：重讀一次 Design Pattern，改用 C# 來寫範例。","categories":[{"name":"Clean Code","slug":"Clean-Code","permalink":"https://yncbearz.github.io/categories/Clean-Code/"}],"tags":[{"name":"Example","slug":"Example","permalink":"https://yncbearz.github.io/tags/Example/"}]},{"title":"類別圖：世紀帝國（工廠方法模式)","slug":"Class-Diagram-Age-Of-Empires-Factory-Method-Pattern","date":"2024-07-08T20:15:25.000Z","updated":"2025-07-30T11:29:42.335Z","comments":true,"path":"2024/07/09/Class-Diagram-Age-Of-Empires-Factory-Method-Pattern/","permalink":"https://yncbearz.github.io/2024/07/09/Class-Diagram-Age-Of-Empires-Factory-Method-Pattern/","excerpt":"Class-Diagram-Age-Of-Empires-Factory-Method-Pattern","text":"Example: 世紀帝國 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384@startumlenum UnitCategory&#123; Unknown Military Archer Knight&#125;interface IWeapon&#123; + Name(): string&#125;interface ITransportation&#123; + Name(): string&#125;interface IUnit&#123; + Attack(): string + Move(): string&#125;class Unit&#123; + Unit(IWeapon weapon, ITransportation transportation) + Attack(): string + Move(): string&#125;IUnit &lt;|.. UnitUnit --&gt; IWeaponUnit --&gt; ITransportationclass Stickclass Bowclass SwordIWeapon &lt;|.. StickIWeapon &lt;|.. BowIWeapon &lt;|.. Swordclass Legsclass HorseITransportation &lt;|.. LegsITransportation &lt;|.. Horseinterface IClient&#123; + Train(UnitCategory unitCategory): IUnit&#125;class ClientIClient &lt;|.. ClientClient --&gt; BarracksClient --&gt; ArcheryRangeClient --&gt; Stableclass Barracks&#123; + Create(): IUnit&#125;class ArcheryRange&#123; + Create(): IUnit&#125;class Stable&#123; + Create(): IUnit&#125;Barracks --&gt; IUnitArcheryRange --&gt; IUnitStable --&gt; IUnit@enduml ʕ •ᴥ•ʔ：若不熟悉 UML 類別圖，可參考UML類別圖說明。","categories":[{"name":"Clean Code","slug":"Clean-Code","permalink":"https://yncbearz.github.io/categories/Clean-Code/"}],"tags":[{"name":"Design Pattern","slug":"Design-Pattern","permalink":"https://yncbearz.github.io/tags/Design-Pattern/"}]},{"title":"範例：世紀帝國（工廠方法模式)","slug":"Example-Age-Of-Empires-Factory-Method-Pattern","date":"2024-07-08T19:53:25.000Z","updated":"2025-05-30T08:15:23.231Z","comments":true,"path":"2024/07/09/Example-Age-Of-Empires-Factory-Method-Pattern/","permalink":"https://yncbearz.github.io/2024/07/09/Example-Age-Of-Empires-Factory-Method-Pattern/","excerpt":"Example-Age-Of-Empires-Factory-Method-Pattern","text":"Pattern: 工廠方法模式 Class Diagram: 世紀帝國 情境：根據用戶端對兵種的需求，我們要生產對應的軍事單位 這邊我們省略軍事單位的定義。可參考範例：世紀帝國（簡單工廠模式)。 定義軍營（用來生產民兵） 123456789namespace DotNetCoreKata.DomainModels.AgeOfEmpires;public static class Barracks&#123; public static IUnit Create() &#123; return new Unit(new Stick(), new Legs()); &#125;&#125; 定義射箭場（用來生產弓兵） 123456789namespace DotNetCoreKata.DomainModels.AgeOfEmpires;public static class ArcheryRange&#123; public static IUnit Create() &#123; return new Unit(new Bow(), new Legs()); &#125;&#125; 定義馬廄（用來生產騎士） 123456789namespace DotNetCoreKata.DomainModels.AgeOfEmpires;public static class Stable&#123; public static IUnit Create() &#123; return new Unit(new Sword(), new Horse()); &#125;&#125; 客戶端 123456789101112131415161718192021using DotNetCoreKata.DomainModels.AgeOfEmpires;using DotNetCoreKata.Enums;namespace DotNetCoreKata.Services.AgeOfEmpires;public class Client&#123; public IUnit Train(UnitCategory unitCategory) &#123; Console.Write($&quot;Ask resources to build unit: &#123;unitCategory&#125;.&quot;); return unitCategory switch &#123; UnitCategory.Military =&gt; Barracks.Create(), UnitCategory.Archer =&gt; ArcheryRange.Create(), UnitCategory.Knight =&gt; Stable.Create(), _ =&gt; Barracks.Create() &#125;; &#125;&#125; ʕ •ᴥ•ʔ：重讀一次 Design Pattern，改用 C# 來寫範例。","categories":[{"name":"Clean Code","slug":"Clean-Code","permalink":"https://yncbearz.github.io/categories/Clean-Code/"}],"tags":[{"name":"Example","slug":"Example","permalink":"https://yncbearz.github.io/tags/Example/"}]},{"title":"類別圖：世紀帝國（簡單工廠模式)","slug":"Class-Diagram-Age-Of-Empires-Simple-Factory-Pattern","date":"2024-06-18T15:43:25.000Z","updated":"2025-07-30T11:30:13.094Z","comments":true,"path":"2024/06/18/Class-Diagram-Age-Of-Empires-Simple-Factory-Pattern/","permalink":"https://yncbearz.github.io/2024/06/18/Class-Diagram-Age-Of-Empires-Simple-Factory-Pattern/","excerpt":"Class-Diagram-Age-Of-Empires-Simple-Factory-Pattern","text":"Example: 世紀帝國 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758596061626364656667686970@startumlenum UnitCategory&#123; Unknown Military Archer Knight&#125;interface IWeapon&#123; + Name(): string&#125;interface ITransportation&#123; + Name(): string&#125;interface IUnit&#123; + Attack(): string + Move(): string&#125;class Unit&#123; + Unit(IWeapon weapon, ITransportation transportation) + Attack(): string + Move(): string&#125;IUnit &lt;|.. UnitUnit --&gt; IWeaponUnit --&gt; ITransportationclass Stickclass Bowclass SwordIWeapon &lt;|.. StickIWeapon &lt;|.. BowIWeapon &lt;|.. Swordclass Legsclass HorseITransportation &lt;|.. LegsITransportation &lt;|.. Horseinterface IClient&#123; + Train(UnitCategory unitCategory): IUnit&#125;class ClientIClient &lt;|.. ClientClient --&gt; TrainingCenterclass TrainingCenter&#123; + Create(UnitCategory unitCategory): IUnit&#125;TrainingCenter --&gt; IUnit@enduml ʕ •ᴥ•ʔ：若不熟悉 UML 類別圖，可參考UML類別圖說明。","categories":[{"name":"Clean Code","slug":"Clean-Code","permalink":"https://yncbearz.github.io/categories/Clean-Code/"}],"tags":[{"name":"Design Pattern","slug":"Design-Pattern","permalink":"https://yncbearz.github.io/tags/Design-Pattern/"}]},{"title":"範例：世紀帝國（簡單工廠模式)","slug":"Example-Age-Of-Empires-Simple-Factory-Pattern","date":"2024-06-16T09:26:25.000Z","updated":"2025-05-30T08:15:23.232Z","comments":true,"path":"2024/06/16/Example-Age-Of-Empires-Simple-Factory-Pattern/","permalink":"https://yncbearz.github.io/2024/06/16/Example-Age-Of-Empires-Simple-Factory-Pattern/","excerpt":"Example-Age-Of-Empires-Simple-Factory-Pattern","text":"Pattern: 簡單工廠模式 Class Diagram: 世紀帝國 情境：根據用戶端對兵種的需求，我們要生產對應的軍事單位 定義兵種類型 123456789namespace DotNetCoreKata.Enums;public enum UnitCategory&#123; Unknown = 0, Military = 1, Archer = 2, Knight = 3,&#125; 兵種有民兵、弓兵及騎士三種類型。 定義軍事單位 1234567namespace DotNetCoreKata.DomainModels.AgeOfEmpires;public interface IUnit&#123; string Attack(); string Move();&#125; 1234567891011121314151617using DotNetCoreKata.DomainModels.AgeOfEmpires.Transportation;using DotNetCoreKata.DomainModels.AgeOfEmpires.Weapon;namespace DotNetCoreKata.DomainModels.AgeOfEmpires;public class Unit(IWeapon weapon, ITransportation transportation) : IUnit&#123; public string Attack() &#123; return $&quot;attacks with &#123;weapon.Name()&#125;&quot;; &#125; public string Move() &#123; return $&quot;moves using &#123;transportation.Mode()&#125;&quot;; &#125;&#125; 軍事單位會使用武器進攻，用對應的移動方式移動。 定義武器 123456namespace DotNetCoreKata.DomainModels.AgeOfEmpires.Weapon;public interface IWeapon&#123; string Name();&#125; 123456789namespace DotNetCoreKata.DomainModels.AgeOfEmpires.Weapon;public class Stick : IWeapon&#123; public string Name() &#123; return &quot;stick&quot;; &#125;&#125; 123456789namespace DotNetCoreKata.DomainModels.AgeOfEmpires.Weapon;public class Bow : IWeapon&#123; public string Name() &#123; return &quot;bow&quot;; &#125;&#125; 123456789namespace DotNetCoreKata.DomainModels.AgeOfEmpires.Weapon;public class Sword : IWeapon&#123; public string Name() &#123; return &quot;sword&quot;; &#125;&#125; 武器有木棒、弓箭及長劍。 定義移動方式 123456namespace DotNetCoreKata.DomainModels.AgeOfEmpires.Transportation;public interface ITransportation&#123; string Mode();&#125; 123456789namespace DotNetCoreKata.DomainModels.AgeOfEmpires.Transportation;public class Legs : ITransportation&#123; public string Mode() &#123; return &quot;legs&quot;; &#125;&#125; 123456789namespace DotNetCoreKata.DomainModels.AgeOfEmpires.Transportation;public class Horse : ITransportation&#123; public string Mode() &#123; return &quot;horse&quot;; &#125;&#125; 客戶端 123456789using DotNetCoreKata.DomainModels.AgeOfEmpires;using DotNetCoreKata.Enums;namespace DotNetCoreKata.Services.AgeOfEmpires;public interface IClient&#123; IUnit Train(UnitCategory unitCategory);&#125; 123456789101112131415161718192021222324252627using DotNetCoreKata.DomainModels.AgeOfEmpires;using DotNetCoreKata.DomainModels.AgeOfEmpires.Transportation;using DotNetCoreKata.DomainModels.AgeOfEmpires.Weapon;using DotNetCoreKata.Enums;namespace DotNetCoreKata.Services.AgeOfEmpires;public class Client : IClient&#123; public IUnit Train(UnitCategory unitCategory) &#123; Console.Write($&quot;Ask resources to build unit: &#123;unitCategory&#125;.&quot;); if (unitCategory == UnitCategory.Military) &#123; return new Unit(new Stick(), new Legs()); &#125; else if (unitCategory == UnitCategory.Archer) &#123; return new Unit(new Bow(), new Legs()); &#125; else &#123; return new Unit(new Sword(), new Horse()); &#125; &#125;&#125; 使用簡單工廠模式改造 新增簡單工廠，將創建軍事單位的邏輯從客戶端抽離 1234567891011121314151617using DotNetCoreKata.Enums;namespace DotNetCoreKata.DomainModels.AgeOfEmpires;public static class TrainingCenter&#123; public static IUnit Create(UnitCategory unitCategory) &#123; return unitCategory switch &#123; UnitCategory.Military =&gt; new Unit(new Stick(), new Legs()), UnitCategory.Archer =&gt; new Unit(new Bow(), new Legs()), UnitCategory.Knight =&gt; new Unit(new Sword(), new Horse()), _ =&gt; new Unit(new Stick(), new Legs()) &#125;; &#125;&#125; 修改原本客戶端的程式 1234567891011121314using DotNetCoreKata.DomainModels.AgeOfEmpires;using DotNetCoreKata.Enums;namespace DotNetCoreKata.Services.AgeOfEmpires;public class Client&#123; public IUnit Train(UnitCategory unitCategory) &#123; Console.Write($&quot;Ask resources to build unit: &#123;unitCategory&#125;.&quot;); return TrainingCenter.Create(unitCategory); &#125;&#125; [單一職責原則]我們將 創建類別 (Creator) 與 產品類別 (Product) 視作兩種不同的職責。 [開放封閉原則] 當新增新的產品時，我們僅需新增產品類別及修改創建類別。 當修改既有產品時，我們僅需修改其產品類別及創建類別，不會影響到其他的產品類別。 無論是新增&#x2F;修改產品，我們都不用再去修改到客戶端 (Client) 。 [依賴反轉原則] 運輸類別依賴抽象的機型介面。 產品類別實作抽象的機型介面。 透過簡單工廠模式，客戶端減少了改變的機會，但創建類別依然常常需要變更。 ʕ •ᴥ•ʔ：重讀一次 Design Pattern，改用 C# 來寫範例。","categories":[{"name":"Clean Code","slug":"Clean-Code","permalink":"https://yncbearz.github.io/categories/Clean-Code/"}],"tags":[{"name":"Example","slug":"Example","permalink":"https://yncbearz.github.io/tags/Example/"}]},{"title":"常見 MSSQL 語法","slug":"Common-MSSQL-Syntax","date":"2024-05-20T08:49:03.000Z","updated":"2025-05-30T08:15:23.227Z","comments":true,"path":"2024/05/20/Common-MSSQL-Syntax/","permalink":"https://yncbearz.github.io/2024/05/20/Common-MSSQL-Syntax/","excerpt":"Common-MSSQL-Syntax","text":"(參考MSSQL) Menu Type CRUD — — Index Read — — Schema Read — — Plan Read — — Rank Rank — — Read Index1234567891011121314151617SELECT i.name AS index_name ,i.type_desc ,is_unique ,ds.type_desc AS filegroup_or_partition_scheme ,ds.name AS filegroup_or_partition_scheme_name ,ignore_dup_key ,is_primary_key ,is_unique_constraint ,fill_factor ,is_padded ,is_disabled ,allow_row_locks ,allow_page_locksFROM sys.indexes AS i with (nolock)INNER JOIN sys.data_spaces AS ds ON i.data_space_id = ds.data_space_idWHERE is_hypothetical = 0 AND i.index_id &lt;&gt; 0AND i.object_id = OBJECT_ID(&#x27;tabel_name&#x27;); (Back to Menu) Read Schema123select *from INFORMATION_SCHEMA.COLUMNSwhere TABLE_NAME=&#x27;table_name&#x27; (Back to Menu) Read Plan12345678SELECT q.text AS QueryText, cp.usecounts, p.query_planFROM sys.dm_exec_cached_plans AS cp with (nolock)CROSS APPLY sys.dm_exec_sql_text(cp.plan_handle) AS qCROSS APPLY sys.dm_exec_query_plan(cp.plan_handle) AS pWHERE q.text LIKE &#x27;%stored_procedure_name%&#x27;; (Back to Menu) Rank Schema123456789101112131415161718192021WITH CurrencyTotal AS ( SELECT c.CurrencyId, tl.CustomerId, SUM(tl.Amount) AS TotalAmount FROM [Customer] c WITH (nolock) JOIN [TransLog] tl ON tl.CustomerId = c.CustomerId GROUP BY c.CurrencyId, tl.CustomerId)SELECT CurrencyId, CustomerId, TotalAmount, RANK() OVER (PARTITION BY CurrencyId ORDER BY TotalAmount DESC) AS RankingFROM CurrencyTotal; (Back to Menu) ʕ •ᴥ•ʔ：記錄一些常見語法，需要時方便查詢。","categories":[{"name":"Programming","slug":"Programming","permalink":"https://yncbearz.github.io/categories/Programming/"}],"tags":[{"name":"SQL","slug":"SQL","permalink":"https://yncbearz.github.io/tags/SQL/"}]},{"title":"CI/CD","slug":"Continuous-Integration-Continuous-Deployment","date":"2024-05-06T14:35:47.000Z","updated":"2025-05-30T08:15:23.229Z","comments":true,"path":"2024/05/06/Continuous-Integration-Continuous-Deployment/","permalink":"https://yncbearz.github.io/2024/05/06/Continuous-Integration-Continuous-Deployment/","excerpt":"Continuous-Integration-Continuous-Deployment","text":"DockerFileDockerFile 是用來建立 Docker image 的檔案。 GitLab CIGitLab CI 是 GitLab 的 CI&#x2F;CD 工具，允許定義和運行自動化測試和部署管道。 您可以在 repository 中配置 .gitlab-ci.yml 檔案來定義 CI&#x2F;CD 流程，並使用選定的 runner 來執行這些流程。 Argo CDArgo CD 是一個用於 Kubernetes 的持續部署 (CD) 工具，它能夠自動化應用程式部署到 Kubernetes 集群中。 Argo CD 通過監控 git repository 中的定義文件 (例如 YAML 檔案) 並將其同步到 Kubernetes 集群來實現部署。 Kubernetes YAMLKubernetes YAML 檔案包含了 Kubernetes 資源的定義，例如 Pod、Service、Deployment 等。 它們描述了應用程式在 Kubernetes 集群中的配置和部署方式。 Example利用 .gitlab-ci.yml 定義 build, test, deploy 等各個階段。 build: 利用 DockerFile 將 image 建立並推到 registry test: 執行 unit test &amp; integration tets deploy: 將 k8s yaml 推到 release repository 最後由 Argo CD 監聽 release repository 的變化，使用 k8s yaml 部署上去。 ʕ •ᴥ•ʔ：稍微整理一下相關的概念！感謝 Kyo 的解惑。","categories":[{"name":"Programming","slug":"Programming","permalink":"https://yncbearz.github.io/categories/Programming/"}],"tags":[{"name":"Note","slug":"Note","permalink":"https://yncbearz.github.io/tags/Note/"}]},{"title":"C# 的非同步設計","slug":"Csharp-Async-Scenarios","date":"2024-04-09T14:18:00.000Z","updated":"2025-05-30T08:15:23.229Z","comments":true,"path":"2024/04/09/Csharp-Async-Scenarios/","permalink":"https://yncbearz.github.io/2024/04/09/Csharp-Async-Scenarios/","excerpt":"Csharp-Async-Scenarios","text":"前言從 PHP 轉到 C# 的世界一年多，對非同步設計不太理解，索性整理一下。 非同步觀念釐清 非同步不等於多執行緒（線程），只是減少等待時間。 非同步能增加 I&#x2F;O bound 的產能（等待時間作其他事），但對 CPU bound 沒有幫助。 在 CPU bound 的情況下可以使用 Task.Run 讓方法調用執行緒（線程）新的在背景執行。 在 I&#x2F;O bound 的情況下，則不該使用 Task.Run。 (Reference.) 非同步程式設計案例 [隨手記] 再談異步: C# 裡的協程與多線程 ASP.NET async 基本心法 ʕ •ᴥ•ʔ：整理一下 C# 的非同步案例。感謝 Tintin 分享關於 thread 的細節。","categories":[{"name":"Programming","slug":"Programming","permalink":"https://yncbearz.github.io/categories/Programming/"}],"tags":[{"name":"Note","slug":"Note","permalink":"https://yncbearz.github.io/tags/Note/"}]},{"title":"越南之旅@2024","slug":"Vietnam-Trip-2024","date":"2024-03-29T08:45:05.000Z","updated":"2025-05-30T08:15:23.258Z","comments":true,"path":"2024/03/29/Vietnam-Trip-2024/","permalink":"https://yncbearz.github.io/2024/03/29/Vietnam-Trip-2024/","excerpt":"Password-Protected-Content","text":"4bc457368a8e267905e1aff1ad9ccefa77fb041f284d18a90892fda8955ec2c8846ede83e1efa42f2df1fc770ae5cc54b7121e96483ca230adc05339b99f5c059d1c9cb28c8e8cd009ec720d28d77b4a023be490b212c4f15f774782058af97c2c0d079abe85e0a116bcd95d554d7bf921b14ae11c7abb4ee3b0e76735c23c887aebac0f41cecbdb9f2d90b278aa206c9ac5f53bcddbbe1bb98fa2c0a61540e6c462bd80d4c39c5636659ccd03a54985fb9afccca64ef8ca95e9fec95f746697111dd9dce81e80b5b466a5e9f867b60560c2665670b78b5972e995ec959806451b5d2b1c88a61c3ed5b6bd033e8b1f7edf0483a1a27cc255d1b604ebc1254de27c9c55a3ce853dcbdd4578aa2d234ef07fdde3f7d67c4a1cb18466e0cffd414f9d5476752b451a958d360c6ab5f35726cacbd86d799356d8cb5a693a9f9980e6e4707afbdc7eb902abf54412929b9abef1d400d31f7e8de9081fc1d5b0b8a987921c6a7b0705023e432f93ca44fecfe7a3c533339552e20b825f2d9628ac0f988a011169f7b0e91059b0dacc40dc8133be124294f68db4f30c7bcd5b2df870f13294f45bc1b39d20d5b105dd67b9e43bce4b12b94e06dac8483f43c90e6ebcdda6e66207622c0d42bdf136a536aea57b1b68d570b0609c892348f4e6f003b44cb4c49ad9084e586647b3cef72dca99068a5436be125567f667fb51cf417f7cc616e279b7f7248b1b964acf8cf903af78d4d3d86f50c69bccfd429f30e913c8e2ec0cbe08d4da99d3f1d8e9d5a7c2de402e8c551726d6f2d3d6d3d30766d85d6c3b8a477eff8b38b46d6ec49dd74e8e91babcbaf24a808347597ca662b3ef8cc27b0d4248abef7dae619b022bdc4b1b88de2643cbdcc9963f93bee75821ca946ebb015706479c6cc6a3631a954ced6f7335f01075591ad4efa1dd2423108d4f0f51847a2ab9d1bfbb8742a58604a58da040b8d9bc2ac6e850798dabf9cfac5337784c83bf12d4194d4a49067614847a6720b73043c402f44dc8beea6f690e462af4c1c1d2f412b4c824f2ebcc25fbb1666b6566b43c37247996952f0822c7efc234072edcf2e417e8261ead7eea1afcebd96823c994f4d6f4f4ceb1f220394752fc46d986bdd50ec6a715ecc316bbac6f779c154131f82efd5478037c392b5756c3fbcbddcbed9d39cf5c34ef98d6fb36c5b0c7b0e6e8450c33607fedb2a940a796fee707b14fb786f74d638ce522fccee282b2106efb6cbc77a4581083bdaa74013732513deff298ba6df6268b85276da1ddfb340b7285d971401f0c8e05d419dbfb2debd82605b9f38bbef5be338839251adcbad175e95872f37b6a6966140e56678f78f5bbc9cf4c9a593d4322fe0dfe2342fc1fd1236e8434e2517bc36347261b2e206494772b336be96ed03755079ff550033da032343a6011fb6409a4eec11cb37f43eb965dce21e48f740f7d53610e262d0b9f55ace50e8c22dffa84851a0792bd70ec484bb7e4ee0e6590f32e6a96b6211920d8f7e26a0bfb48b1b4cf7bb15c22b82e1ce3dc620e11821ee33d56071873381af64d3b4c2a730a0d2849ff74676f3d26db6e1a2a707e018996bb05ecc073b0dde7e6c50bc92f5a8e1951d8d23fcb6c136e4e221240c5dabb0633708e504f4f14bbcfe2bf327b13c5240672c4f29c48672a004c9a11172506fda7a44296069c4f157b47c0c0558ef3c8bb4eadfb590cf943c12ee7b078b6c76579a081a64cfe01f67b85c4f89e01c58275c9a96ae7abe9f9f302840cc285d14755921c9429c12422ffdfa7b0852d270fa6ad0f71c6a437b289529bfdd55ad06f7622474c2bf3e04d9f426d03f0669ba7d14f0059cce9dbe80e2233519b4c5aa7985e592b984e8b247702367b08acc0e2aa18f42141be89c1ded0e3d9205262ce9d1984c14afe83973674b275d7454ea95e50667ea71f3c5a82799729215e49398682cf18fb301e1f3675abfab2a91e7430fce0baf65cb80ad8badb1bba18c5fad078b941575a7c36686ac7d5ede7e298e4ecff5ee7a02c1dc3fb861de7d116e67ad8fd3bbbb3f1f372d883ecaab3483c4c588666f5a2fb21b166546b93756ca22c0fdc3f508ce8be62b1bb490b514cfde714eb5fa2ae811eb2738f84f740e32fb44443eb223b7f98febd52d05150a57d5cb6ac186553d3da057999fb218fc405d1c5d4fb12d9b55a2bf951965358ba44cecd83d946e605174e90b55b5fead455b80a24de362f69e064756d07546b3e984d0ad24a53c09186fe351d4fd980faa36daecb5ad7e6c773a2928de0dc91fe518ad4da374bfe14e2556b66af59f9a708c5df2b83f2501e4c7328a0092b860d6d7c405db153f2887afbe9ddc376fef490dd4273ff126508490a473da0a70bfc4f519c701ed23ee94a068586b97f55bcc6b57a96fa102fd31ea83b45dc3ac98e8c031e98ae26b2120fe023bcf896a5fed77c448a252aa070ad7b14d041cbe1f8ec0588e3e23a7a9ec885b1c4a76155c448a2f34b4285efa77ac2714ebc48d1b76b3df40a1094bb2b33b589cb59f5c31dc4d1ff295e8004b1034d6b6cb0b00f744ba7f0b322c7ee71b493d0daa4e1c0c636536eda1ff61e50edf9d090d7f34f9dd3bc783d5dcdcdc7550fc17d3b41a577cfcb935ab59e192c0434d914528d1e74c47ebdd239408cb0c0fa5cec544a29f4bbc335e992afc18cb72ba785c62377b4b56ca58ce4ab07dc70ea7287390cf8e34462dba6e9817320a03bcd7ec686d5ba4558e78bce200ffc9ea45527a7592efa9ef83edd9051271882e59dc3c47f43eb162d71c9c5089c6174b2a45b09066cd8befdce58bac03a45916153b4d23991cbaa3717dd4255babc31305c1d2912bc53f77957dd55573b3d8cd1e2c9d7707723e20bdbd67fd35c11614b9169aec2298bab229edc06da82a98f6310d23013cf4fe93360152ddeb4b94ee70d41b7e2fc9d6331ab73448cda3558fc5d4f6644a8a1d616f4c5359c6eab2ae79e108b7613c6e0cfe7acb7799265fc238ac340887a4368c4511fe5447210b8e9e6d3b169effdce983cd9bdaa1da70f028e987b10f05452d8f3431bef210a8b0d9e0d1fe0de0c9f00f293fdc2fb4149c3f0a044f32605b8bd8c1535bff602ce5b8081a89b2c62e8f798af3107e14535bf20ffef47e8066782e934b68de6232c1a1d471b07d53a8137910ddf8de219232c73a28ca092bacbfdfbd38ab3fc963d168b0fc53b8147f12b461b19a6d6cf984a4ce60c8e261d47e870be66182fa69d7ebf44278bcbb947cb7fef1ae5b488876c1bb7717e383b0290583041dd762747e3183a0d5a24c21bf62c94cde75fcceed940853f0da58f9a8fbf2b30288207ee244aebba281fb20c127463c119493ef927d220f03315a45d0ac3f2b3cc013589887f3292bfffb7cefcdc3e8f2cf62d677bc5857ca9e5390e1810260b90f3286ea3c60d1ae1502733c8d84418236667deb705e87b1b7d4933782655a650b375496c047adb07f27001945890317002a2de115457fdd89f350f088d4b6b7e5b45b2f5dd17d6172677de07539564427934eaf9fa8940ef1efdf6771604f362e355960cf3ecd36505f8305e9caf3228388cda474dd26b817283ab6d9e078dd3675690ef56bf58f94871ca0a45cdbfdcdb4951043016a908dd207d88992e558959280ad21ffd2b827bf04e40be9e6824721bc537f21d1e4511124b627d5a57e1c1eb1031c18d8e58bacc0128ab4ab33d793d4300ccf2583ec9f1f8d53f98126059357f2bc79d449947f4b7cf63f20cba76a0d019384e3072a362d5a465fcbc31e76b1de323ec58539819ab66c39cf69da920b9446bfffed174864a6501dd5bf4a25b8eba7b5546ce76a5cc6e746f8f22b4fa85cd5c449a55089188cc2ad3f55be5f15663fc732ef33447d2e1d07d47a9e1d096b4cc4f38d1c10b5e410a770150c13ff1e31c134492573ff4d2191cb5c78dc4b133e88dcc827178c66f8b6b3ea29b86f652b94d91a969756d91ec61acc9e6f4f0a589eaad3d4ad2b4eefb9be42f04c6ff21b01d1fe2789a964ebfca3e2b8ea9b4b1e194d518584fa9593a0d9a0b374dc6f1053dab9318945661b33f9abd73be1af98498fd535af6cddf7727815f7cc8a524941ef3ce2a0a9b794be7939fdf320e7b41dc4f0c966efa1e29ce1a5f564fd81c7721a9afc7a3ddf39e6a36f3575ef9a95fc8f15e9115726b939ae0feacfbadcded0815bb576adc402dc0502fd5efcd501e62f513ba9cff40ef3742e7c5f836279d996c4e25547b72ce7f3adea21ad57f5b14782c6b36676e7f80d8bd9a31ea4f32f96c2cb6f20540287019baae715556130eed0dba0a3cab31d90bb6551a055d6e6b4ef78d992cd130d47cd2a6c1b4cc8e70a67b48441d82aa417a662e5fe89ce38c9c920716edb58fdf2238e80be62d03f68ada58ee677e23a982633751b8b7e3ecb7574742256a662212cb81607502bd0223dc10c341438119510859ae563a0c353fd1711ef2feed426c77eaa3dba53673ba5d1428dd94db3f5130236f4fd310fa56d5ee35739990e311e0102afdb1129931fd44387d85343f9e24b14b6b743c878b1f58175ef73e86c2901d2c671384e7424e4b8fe9f519a157a50b7472c0044718b5140b24f4a240d4cb4e3980c5acdfa7301b39693de4c6ee7097beba0af16c3fd69b3035e355e536fe2bedd42a4b6b0b65294c0783ad5d3d878e4e91b46b22b3bac03ff1681a8e863ba3dfc1251fce00e823e43afed7749950f8be3dfea79e378a5853a380080456f42b2cf2a57b3cf5b98727e55abc9491999cf6fdff017578709b1851220388dd6e864796b70a85861447dd55d529413a91d0ecd722e5df27f172a9325559135d7a55c1134a532e1530d658a9e37d86fe9a5a6d86b249745a1593b133755599ff761bb85ce982ef9b3732d797245216f82eb08346ae8577a3bbaf20c05ec9b05ea98f2b25e209fba886d27134ad61d57d14ddef57126845c462540f7660ea547b4eb284b2da60b0fb0a2a1f3bbe4d5e3f2346686a4816b5ea82d38884e92aa0c56ba6063120dbb1f8aba70a6dc3e859480de2f41f2c6afb96738ad3964a43d01d316f63a732e993e7dd35dad5a3c149e3e2d307dd3548a2317d2037a64ce3a744fa837431767c8acedc8954a87f94907c98c51f61f1dd6f0092aa520e456a08a7f9b52715a0aeb9ae1f77780764f076d073573eeb90c6ce8c12d567dec2c6554de3256606e37c78a0764b5cfa43a48f1efcd40d656a910d306e1cb281da18e5da6639079f8a0606cd0c4f60f85b5cb1249517387056a852772cafe48fc9c7f84582742e554cfff6e59ef636b15cfe0d6f8672b810f8cf953facb1b829deaa24b83d50fbc6676a14efeb3e6111782d450807934128c18ef86247c327df7d261807c24a68d264095cd5bd395734d139ec1140200625bbf665a43f0f7e880047dd35617ff0df4aa07bec096eb6f09a8659d6d42ac5a7a8846140d29dae6258922d9b8241554333a9688313d12edaff6cbac5b5cb4688f785dd7461ab4ac3966bfeab569f57c41380f01384cf9a81421e66ed971bb7accdff002f7cc5261279ce3257f5c35e5e73c821d9dab9b5e481078a0e9a4788f42774940eea7dbf27eecf096d179389fedc7d8eac470da5f4900484678e0ec15f8ea943680b7022cd2414910755b31b4a4d202ae39c225044d6cfec3f78f8db4541c385a7a3c5f6e27ccb48290f4c0f99600362943874b3d8c7561156bd5fc5c781f20e79568763d177a9e659d07485d76a0ca6466f9312d5a23465bfe5edf958ad8043cd41973ab257a9621475c5169e83b1ef44686d31e7f753fd3348ef99eb170e75849342e96ef83217d7d7d6e7b84b26738ee2dfd72fb36290a5ceca04a90ace948f541a76ab7b9584f553a99659124483f537c167a013881e0097ce3770b3866158638862e4da38a77ab37707aca5ef108b3aa3c1d259ca8cbc5297f714b26f6cba3007a8c5f839f9b569b3aceb11909e76f8165c6ffce9e6e00031afc7eceebb355c20c86f83cf85864fc5abbecfcec420bf9ba0d3d7aa4db6198fe896d98530311dfb0dc2aba92d5ee2de78898c157ebc3449bafa3ea1e218023b29317ef52f11b0cbe1f60ce7084bc6cfe2071073e10412714b88b99520fad4e57c417e34ca43b34e01fe53fd35866a6fdb98ad0618fbef468d2d6133bef8bdc9786d690e3255eac5bc17e4f2ce6c4781aebe56d72de860c3d3d604445460311c3ef95f58397bd2d617b9424467e5b31e1a42b158ca8747c17fe6efd71ab43fa1517e5dd9bd114ca01074f90a012e1d5d3445a91613638ffc6063cd074f5200e0e3fa1587627edb18c3c4cee56b7296d316813e0eaf8263c67f6543708af0567e6fcc8adefef001db6e70f5af11d7f570a88c3c51519ec3a2465d2269168359e151759c7a957b890a776099a0e8b2f4805ff18c8c923df1461a96d4990d6a6a46b0083c19b2af9ce39b61b48818a4e21bcb3c78d1d5a1716b86ef581d6d7cc421db2f333a7ece80733170dab9702f28ca87f7f0b6db1d7af84a3de240edc580ebd6c702217bd14ec984b9904ad3070008bad2e8276d7b194165a58779a8b291386561409ebd2a96d16c0ac7c0bb32bbfc0a03b179a99af20749167a4278f906d5ab1df556aa3b3744c0423cdd40a0b7a6de77c19f99b08d56289cddb40277e9ce6caf92f44f089354452ee336a191084eabb31714449596a285f0a40332241251fc4c140481d1a8536da709b14324a32473734ab479103bfb2fed2cace2f143d06bf14d70a068d400999b692d0d9defba9f0c66d647d7be5022ea42858c48128b4ac1826853e076ceba3ca88188737d9ed1f2be541dfb18798bd501087b180d88b07855eaf4666bf6ea93d2d8a24fa65f2a40df0e2ed9d60373c3b5c1e5197bd16065462d6f1bfa9fa59890bfaaa9f74f4b885c9d5932af02fd92eca832254bd8234cbc30593328b65365d325f3b7a2a34affe9f530922d82e0d279edf72747c4954bdcba9c1daf2d9a31a7960ab8a44c1d19b86ff7365ffb5efd2db46549203a6fccce121c1f3bcd1ffbd86aba257f914f990f2f20439c18b7d92fb17b0e8e83dc8d4293bbd1d77e6420246a2c1e8cfc634c9e110522c97fbf20d0fa7097f0dda742abb4b32e7734f5665e9359051bf1dd4ef25969dcb6d0be4f2bd683d83843da01c5dd624069f1fb9f92d41c9aa1dbe892968e326cc6c5b8d906f830f7f9b7e283dd186093d24a5889e56326705fd1bb94d0894dda64cdc340eb6d6e64ab81a60f6784e6a3f86ffc1bd0874258d3b954a74c169a3c42d993e8fa45559a583723d347b7a6e8a340accc0fd13a6c67399568dbe202dcbdfd1535ffcda4532eba41ce53e26fd16250ca42db251266e0908abe99449573663d7cef92238fa39cbe6cf77103a05df6205d4b63c3ea70d20a60cbb64053a31e2462a63dff7680ae11a85c703fd6c674dae008b3666789c4954b24476167c05a692735eb74cabc2f0d8fa00faa7c9ef8e7956ebd21d699e58b0656bcea6b6fb88fbbd44f6f70c0a6b291a38fb02fedb97a5fe505e2d94a3b06a5b6102f0319a6a3e448fbdb384c16855036406bebe1344b0341a9d7eb3a6ef3c7e60ad9df7789d6043bf181dfbb69ed4c8070909204ac512e2e05ce0355978c95eac60acb4c2422222fa0fdf3a6bff64dfa22b95f98940f544db60df184d863b1d6245ceea5bf622ff64145782bc0cad2e2bfce3b3adadb91c5ddd255954805f51f7d4c6753289ac6b93380a2a3e419254e964b6eded8d9a38f68a6504c8e31321dc320ead7057c402658a9d926f408474cad5e74f864d3aaf4cab9a9c6806cad1531902478826e0add47422b3da890621ccfdb8d984491b609af4a36af3f11271fc56c06189c5a5326641d98ae050c1722ff338d92018abce5e9e7bd8e082d41dbd77ee532a32211272322f43cc63aec5b4ce65fac1189100f66b10a788b2f6eefed681980f951451ec4029b9c1b2a2625a00c9ee5bdc2754824084519875208de40b67dd242ecdeeaf32fc15f19b363e04d4f86f0ad1594dd16636b7d92818a0ec55b4fcbf09a4d6b49ac26c987de7ed398c2d892265d71efe68fab68ea993cb7ab02c98354face3dcf068fcba6d5f6d54737a11d43e57f43ab9346ce0ad975945ff5f3237828c95839a116912b40b2df1fc4385aaa7a8c1a5609697e0678bf8b76224e3320f5f5c8e34adea83aaeaf9f5b4f8e647d2ed28b67e97949008fbc91c9e72141a31eccd9994b8cb59f0a6e3a60902b78243d63063c29fb76a0d5042cb2b33a922f4bf23c7c88dbe39a3a11633a35c0dc60c414c14709d84f13e8c2465960fa9bdef97a7b6ed7a9da102d91dec55c969092eff3fccbf63bad51887b1a1de78e45926c3598366bfa5ad3069d8e50ac7307d97434167724b9c1c8ab6477039a7445c0b5b80964181a264ad3d1407d3a25931aad5b1bfd5e496d9a6a6990e77794104e2f06fdc21ffb704f761dfa62c5b60733637ecdc0e882d5bd224f417d421952d4a9651808061e966a37180e7d594244d73d1cb22eaf11eb6e0c8df7e4bb8492b299263c528b2d3ebde6d0d53b3200ec62a1484b97844e39596be4582600b6fe4323a3e5f605d6bab90a25815471db23d28aa9609e4b122462b72c77e5f4ff806172188275147a8c571821cd3743837f576d5728cbb522be715a0fae69b2d8771faf2ea510a696c03112d09946fb130da675d6ab12d694237121ee2a863c40f2649a5c81a33aa56d26a9c19387d4880c2089e8da1307693b98be9487053aef87e59cce515723f57013768a0635f530e2a3167c441ee78f724991a655bd93229cba6ece1ac3bac7f12ee4ab9292480d718c734773dd951351091aa1b522fff1fa8284c7f5765b4f22e8e3df6d67d64655e8feb0d4c0fdb6c28203ed73d9ce355ab88bd0d6e1d1665ec51ec2b8c5393ec056666bab6cd7b3766dbc1bcd629dd04c4d16509d970d3022a476c56ffd666f8f233b16c0757eba86f2983a0f059f958e193d0aab5c3693ad7b368d67c560917880eff9b5ba4327aa522c36bc2f7377efaf1f8e23d205c62fe5372f1e2ffcb5e1ef5e8c1fe9d9c560d2b21a7babe6e2e8ba66bc9f0684b3f6c867ec6e5456b01542d76c109bdad0bd25d7840f63d945aa1069aea6dcd2ab0e26119d958787429047878185d780c30d9f7f7a6a0f8bfde80eb5d106d1c0e1d0c5adc380ab0ee6b165f42fb0041911b9f7a00200ab710c0937b58d36e5bc1d1cb54d5c5669bdfd6ede29e5e27900ef37865a0de6129e74bb9f2efc8fbf302a49b730bc2ef31d1c47ff8f56ea2a34033892bd0df82fe1692e0eaa0c9ad2aea5d719d050d21e729f51c32e2b133b8cb75f922cf63f57bea66f164ab048e7b654ef13a9604d06f6cc4725f521873a4c5caab1c21d7c9035d1aa08b9cd0bf3fb23007fa1bc8f99a5adf60f4eb5eb80938755187d750eef0f9f15803f46e61985346afa092ed45460043c3d8db381262e345e6f827b08480ef516650fd53d3777c28b46a277e018d2511628bb44a5d34920ad66bce85f9aafb6ff7616ccc78b7b7a59a62e63408ec89a066fb690fc0199c3cddcf2d13ca97abc17aed833ac714d082e701b01775b5928c41fc446fa756a6749bb75cde47eede3e3254d73461526b2f58b4709cef5ef78ef7b558b913549917d292c33281b960ba8fac9acecd51da945fa6e41962217bcd0f0f5a3b75d5d09f6d364bbcfecf12f9e13ca9921b3ccc97c20686a22ed9ee8a176f1b45ea3388874f32ede34456b48abe53299df03aa0acb44a906b926138ca319e1a11bdc596eaefaff1a11d645c8989648ecb21ab64ba3c53a59af7bd536642ee75f9d6c80051de145d3bd760408f6da2cae928a2933bb48a130440e889a929463351fd415492442e0a55e087ae24b48931c1b0dd3b658ef4194d68d4757bacd736c27d0b886bf3a7a77d4d0be6b0bbccecde5c2993dc58a29d3f28c78aff178de5bccc6493878e6feb79b0b213f8e851ee8497bb40cb5059dad115c8ed9699ea6612cfaa376b65125b337ad70c36f3c7184660963a15038975dcddd52239322fbf9802c3c589b3aa5c3a600759c1a42386aedbdc5701d7183e715f977a140722d50d1166148ab61ab26902d6381db9d71a45ad106e2e464e6c0183c29fccb8d42e539431843b9f2e4cc0bf4579cc6b3f941d3870ab1658c443ad7ee5c892574016f91c8b7a9f60e0c4b0a577c17f46f41b3e9ec7e31396d36305311e25d94d11081c0e4c638f4f3def7165fb7afde08284d60257041da8acbce3959edaa8463acab8057fadddb56b55f154964bb47babcbb5f91bb9127b2b5e9d6f52efa7687a0eef0afa888d27660228db2c81ad92a4de5df8ec35d4312e669b1b408e3fba8d4e9d35d51f1d5567420449d7eb3f1fb75a0e11aec29344a144bcfd417dc13d8c567b506c813d1f57ba3b3523148885dcc04a543c79706ed617fb269ef12ba4073945e651969e8aee2d7401fec9676e8b1c0dc7c330ab671c5b375f171cab2339b9820be8ab3e9ca26041f6a0d009542c38dfdabce7320dc80d08e40515cefd14932f81d82e754139a5b087e35122b280f48cef3b452192ba356082cfea4be7d66990f6453f63aecf9565bdb5c1ff0f54acfbc9d09fc1e6faf774347b22a151fd13424ee Please enter the password to view the content.","categories":[{"name":"Life","slug":"Life","permalink":"https://yncbearz.github.io/categories/Life/"}],"tags":[{"name":"With TM","slug":"With-TM","permalink":"https://yncbearz.github.io/tags/With-TM/"}]},{"title":"Kubernetes","slug":"Kubernetes","date":"2023-11-28T15:08:03.000Z","updated":"2025-05-30T08:15:23.247Z","comments":true,"path":"2023/11/28/Kubernetes/","permalink":"https://yncbearz.github.io/2023/11/28/Kubernetes/","excerpt":"Kubernetes","text":"Instructions CKAD 1source &lt;(kubectl completion bash) 12alias k=kubectlcomplete -o default -F __start_kubectl k minikube start for wsl 1minikube start 設定 Windows Path 方便定位 1echo &#x27;export WINDOWS=/mnt/c/Users/$&#123;USER&#125;/&#x27; &gt;&gt; ~/.bashrc 1cd $WINDOWS Terminal Basic Ctrl + z: 讓前台指令移轉至後台並處於暫停的狀態 12# 顯示所有運行的程式jobs -l 12# 將後台所有暫停的指令執行bg 12# 將後台暫停的指令執行bg %$&#123;JOB_NUMBER&#125; 12# 將後台所有的指令移轉至前台fg 12# 將後台指令移轉至前台fg %$&#123;JOB_NUMBER&#125; 12# 移除特定指令kill %$&#123;JOB_NUMBER&#125; 於指令末端加入 &amp; ，便可以直接在背景執行 Namespace Create Namespace 1k create namespace practice-231216 Change Namespace for all subsequent commands 1k config set-context --current --namespace=practice-231216 確認有成功改變 Namespace 1k config view --minify | grep namespace: Pod pod.yaml via vim 123456789101112apiVersion: v1kind: Podmetadata: name: nginx-231204 labels: hour: 15spec: containers: - name: nginx image: nginx:1.14.2 ports: - containerPort: 80 pod.yaml via dry-run 1kubectl run nginx --image=nginx:1.14.2 --dry-run=client -o yaml &gt; pod.yaml Apply 1k apply -f pod.yaml Get Pods 1k get pods 1k get pods --show-labels 1k get pods -l hour=15 列出所有 Pods 的詳細訊息 1k get pods -o json 透過上面得到的 json 欄位來作 filter 1k get pods --field-selector=status.phase=Succeeded 透過 filter 出來的 json 配置文件來刪除對應的 pod 1k get pods --field-selector=status.phase=Succeeded -o json | k delete -f - 取出 traefik deployment 中 livenessProbe 內容 1k get deploy traefik -o jsonpath=&#x27;&#123;.spec.template.spec.containers[*].livenessProbe&#125;&#x27; 刪除某種類型的 Pods 1k delete pod --field-selector=status.phase=Succeeded 1k delete pods -l app=web-crawler 1k delete pod --field-selector=status.phase=Succeeded -l app=klikbca-crawler Debug Running Pods 1k describe pod $&#123;POD_NAME&#125; Event 1k get events 1k get events --sort-by=.lastTimestamp Port forward 1k port-forward pod/$&#123;POD_NAME&#125; &lt;local-port&gt;:&lt;container-port&gt; (Note.) nginx 跑在 80 port 在WSL中，某些低於 1024 的 port 可能需要 root(sudo) 權限 Execute in Pod 1k exec -it $&#123;POD_NAME&#125; -- bash 1echo &#x27;Hello Bear&#x27; &gt; /usr/share/nginx/html/index.html Pod log 1k logs -f $&#123;POD_NAME&#125; -c $&#123;CONTAINER_NAME&#125; --tail=5 --timestamps (Note.) -f, –follow : 即時跟蹤 log 的變化。 –tail : 顯示顯示數量的最後幾行。 –timestamps : 顯示 timestamp。 Delete Pod 1k delete pod $&#123;POD_NAME&#125; Label for Pod via CLI 1k label pod $&#123;POD_NAME&#125; $&#123;KEY&#125;=$&#123;VALUE&#125; Label for Pod via vim 1k edit pod $&#123;POD_NAME&#125; 確認有成功上 Label 1k get pods --show-labels Remove Label 1k label pod $&#123;POD_NAME&#125; $&#123;KEY&#125;- Debug skill (use bash) 1k run foobar --rm -it --image=busybox -- bash (Note.) –rm: 執行結束後刪除 Top 可以用來看 resource CPU&#x2F;memory 1k top node 1k top pod Volume Create nginx-volume.yaml 1k run nginx-volume --image=nginx:1.16 --dry-run=client -o yaml &gt; nginx-volume.yaml 123456789101112131415apiVersion: v2kind: Podmetadata: creationTimestamp: null labels: run: nginx-volume name: nginx-volumespec: containers: - image: nginx:1.16 name: nginx-volume resources: &#123;&#125; dnsPolicy: ClusterFirst restartPolicy: Alwaysstatus: &#123;&#125; Add volume settings 1 Service1k expose deployment nginx-deployment-15 --port=81 --target-port=80 --protocol=TCP --name=rover --type=NodePort -o yaml --dry-run=client &gt; rover.yaml (Note.) 若直接 create service，需手動寫好 label 來關聯 deployment!!! Secret Create secret.yaml 1k create secret generic --from-literal=key1=value2 -h --dry-run=client -o yaml &gt; another-secret.yaml Apply 1k apply -f another-secret.yaml Create nginx-secret.yaml 1k run nginx-secret --image=nginx:1.16 --dry-run=client -o yaml &gt; nginx-secret.yaml 123456789101112131415apiVersion: v1kind: Podmetadata: creationTimestamp: null labels: run: nginx-secret name: nginx-secretspec: containers: - image: nginx:1.16 name: nginx-secret resources: &#123;&#125; dnsPolicy: ClusterFirst restartPolicy: Alwaysstatus: &#123;&#125; Add secret settings (env &amp; secret KeyRef) 123456789101112131415161718192021apiVersion: v1kind: Podmetadata: creationTimestamp: null labels: run: nginx-secret name: nginx-secretspec: containers: - image: nginx:1.16 name: nginx-secret resources: &#123;&#125; env: - name: COOL_VARIABLE valueFrom: secretKeyRef: name: another-secret key: key1 dnsPolicy: ClusterFirst restartPolicy: Alwaysstatus: &#123;&#125; ConfigMap Create configmap.yaml 1k create configmap some-config --from-literal=key3=value4 --dry-run=client -o yaml &gt; some-config.yaml Apply 1k apply -f some-config.yaml Create nginx-configmap.yaml 1k run nginx-configmap --image=nginx:stable --dry-run=client -o yaml &gt; nginx-configmap.yaml 123456789101112131415apiVersion: v1kind: Podmetadata: creationTimestamp: null labels: run: nginx-configmap name: nginx-configmapspec: containers: - image: nginx:stable name: nginx-configmap resources: &#123;&#125; dnsPolicy: ClusterFirst restartPolicy: Alwaysstatus: &#123;&#125; Add configmap settings (volumeMounts &amp; volumes) 1234567891011121314151617181920212223apiVersion: v1kind: Podmetadata: creationTimestamp: null labels: run: nginx-configmap name: nginx-configmapspec: containers: - image: nginx:stable name: nginx-configmap resources: &#123;&#125; volumeMounts: - name: some-config mountPath: &quot;/some/path&quot; readOnly: true dnsPolicy: ClusterFirst restartPolicy: Always volumes: - name: some-config configMap: name: some-configstatus: &#123;&#125; Deployment DaemonSet StatefulSet 建立 redis cluster 為例 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110apiVersion: v1kind: ConfigMapmetadata: name: mario-redis-cluster-config namespace: mariodata: redis.conf: | appendonly yes cluster-enabled yes cluster-config-file /var/lib/redis/nodes.conf dir /var/lib/redis port 6379---apiVersion: v1kind: Servicemetadata: name: mario-redis-headless-server namespace: mario labels: app: redis-cluster-appspec: ports: - name: redis-port port: 6379 clusterIP: None selector: app: redis-cluster-app---apiVersion: apps/v1kind: StatefulSetmetadata: name: mario-redis-app namespace: mariospec: selector: matchLabels: app: redis-cluster-app serviceName: &quot;mario-redis-headless-server&quot; replicas: 6 template: metadata: labels: app: redis-cluster-app spec: dnsConfig: options: - name: ndots value: &quot;1&quot; containers: - name: redis image: &quot;redis:6.0.9-alpine&quot; env: - name: MY_POD_IP valueFrom: fieldRef: fieldPath: status.podIP command: [ &quot;redis-server&quot; ] args: [ &quot;/etc/redis/redis.conf&quot;, &quot;--protected-mode&quot;, &quot;no&quot;, &quot;--cluster-announce-ip&quot;, &quot;$(MY_POD_IP)&quot; ] ports: - name: redis containerPort: 6379 protocol: &quot;TCP&quot; - name: cluster containerPort: 16379 protocol: &quot;TCP&quot; volumeMounts: - name: &quot;redis-conf&quot; mountPath: &quot;/etc/redis&quot; - name: &quot;redis-data&quot; mountPath: &quot;/var/lib/redis&quot; resources: limits: cpu: &quot;50m&quot; memory: &quot;100Mi&quot; requests: cpu: &quot;20m&quot; memory: &quot;50Mi&quot; volumes: - name: &quot;redis-data&quot; emptyDir: &#123;&#125; - name: &quot;redis-conf&quot; configMap: name: &quot;mario-redis-cluster-config&quot; items: - key: &quot;redis.conf&quot; path: &quot;redis.conf&quot; volumeClaimTemplates: - metadata: name: redis-data spec: accessModes: [ &quot;ReadWriteOnce&quot; ] resources: requests: storage: 1Gi---apiVersion: v1kind: Servicemetadata: name: mario-redis-service namespace: mario labels: app: redis-cluster-appspec: ports: - name: redis-port protocol: &quot;TCP&quot; port: 6379 targetPort: 6379 selector: app: redis-cluster-app 創建 redis cluster 關係 取得各個 redis pod 的 ip 1k get pods -l app=redis-cluster-app -o jsonpath=&#x27;&#123;range.items[*]&#125;&#123;.status.podIP&#125;:6379 &#123;end&#125;&#x27; 建立 redis cluster 1k exec -it mario-redis-app-0 -- redis-cli --cluster create --cluster-replicas 1 &#123;填上上面指令取得的 IP&#125; 解除 redis cluster 關係 解除所有節點的 Cluster 關係 12345for ($i=0; $i&lt;6; $i++)&#123; Write-Host &quot;Resetting mario-redis-app-$i&quot; kubectl exec -it &quot;mario-redis-app-$i&quot; -- redis-cli CLUSTER RESET&#125; 查看 redis cluster 關係1k exec -it mario-redis-app-0 -- redis-cli cluster nodes 1k exec -it mario-redis-app-0 -- redis-cli -c JobCronJob Rollout &amp; Rollback 指令都是 rollout 查看 history 1k rollout history deployment webapp 回滾前版本 1k rollout undo deployment webapp Pod Lifecycle Probe IngressClassIngress GatewayClassGateway Affinity &amp; Anti-Affinity RBACRole1k create role roleForList -o yaml --dry-run=client --verb=list --resource=pod -n default 12345678910111213apiVersion: rbac.authorization.k8s.io/v1kind: Rolemetadata: creationTimestamp: null name: pod-reader namespace: defaultrules:- apiGroups: - &quot;&quot; resources: - pods verbs: - list RoleBinding1k create rolebinding pod-reader-binding --role=pod-reader --dry-run=client -o yaml -n dev --serviceaccount=dev:sa 1234567891011121314apiVersion: rbac.authorization.k8s.io/v1kind: RoleBindingmetadata: creationTimestamp: null name: pod-reader-binding namespace: devroleRef: apiGroup: rbac.authorization.k8s.io kind: Role name: pod-readersubjects:- kind: ServiceAccount name: sa namespace: dev Scale1k scale deployment webapp --replicas=2 Redeploy1k rollout restart deployment webapp OthersExplain Explain 來看 yaml 結構 1k explain job 1k explain job.spec 1k explain pod.spec.containers.resources.requests Kubernetes Local Install kubectl 1scoop install kubectl Download Kubernetes Cluster token from Rancher Put them to a separated folder and explore by command 1kubectl get pod -n b2c-payment --kubeconfig=&#x27;D:/k8s-certs/k8s-stg.yaml&#x27; Easy way to switch between different clusters via wsl bash 1wsl 1KUBECONFIG=./host-uat-gke.yaml:./host-prod-gke.yaml:./host-staging-gke.yaml:./k8s-prod-backup.yaml:./k8s-prod.yaml:./k8s-stg.yaml:./mt-host-prod.yaml:./mt-host-stag-gke.yaml kubectl config view --flatten &gt; config Put the outputed file config to ~&#x2F;.kube Restart your Powershell and type command 12kubectl config use-context k8s-stgkubectl get pod -n b2c-payment Install kubectx and fzf for fast switching 12scoop install kubectxscoop install fzf 1kubectx Switch between namespaces (by kubectl) 1kubectl config set-context k8s-stg --namespace=$&#123;NAMESPACE&#125; Switch between namespaces (by kubens) 1scoop install kubens 1kubens $&#123;NAMESPACE&#125; Set Alais 12Set-Alias k kubectlSet-Alias kx kubectx Auto Completion 12# Enable kubectl autocompletion with alias k(kubectl completion powershell) -replace &quot;&#x27;kubectl&#x27;&quot;, &quot;&#x27;k&#x27;&quot; | Out-String | Invoke-Expression (Reference.) Kubernetes Documentation Kubernetes Adoption Hands On CKAD 題庫詳解 ʕ •ᴥ•ʔ：上完 CKAD 的課程後，對相關的概念更熟悉了！","categories":[{"name":"Programming","slug":"Programming","permalink":"https://yncbearz.github.io/categories/Programming/"}],"tags":[{"name":"Note","slug":"Note","permalink":"https://yncbearz.github.io/tags/Note/"}]},{"title":"關山之旅@2023","slug":"GuanShan-Trip-2023","date":"2023-10-23T07:13:26.000Z","updated":"2025-05-30T08:15:23.243Z","comments":true,"path":"2023/10/23/GuanShan-Trip-2023/","permalink":"https://yncbearz.github.io/2023/10/23/GuanShan-Trip-2023/","excerpt":"Password-Protected-Content","text":"4bc457368a8e267905e1aff1ad9ccefa6ae08bc63389f2c0d8fde5dcaf14517e755516145c94c0b8b953e0b34ad104a3c38b576d8a40b0a0fc7eec0f0c16f20615114e78e4b52ddd88e8ef0cd48d05673e7c9f06e7f60746b78a3441aaca1c5c1dc63c19a450cf0b04e27d42873162fc64115c98310853222c775edd1dac3925094d7d2dfe02c4143f9263f0963ea3ef147d65e2167f6cb3e31f18b66f3853cf1f01132e481ccebd9f0e6275ffbb15d734064d44c965db48c96708136515cc259c18bb20da5eecc56b30a35dde5f408c87e4b0bec4c6d457387909cb84321c14d18ed02befc9189b27255e9d2ed338413523152fdfa9570376ed7923cbecafbda6ef90d11750f4867217288762740512d6338d7a6440b79e8bf19204e6dc80661cb3fd3c7ad8eb239938756d45053d86d4bff1b1d21c32f94522c68052e4b5fe357cc7320887cbd3127b3e721f16f3ff811374165d7e75575a2fa824cb515c30c6c2b9fc0d17e670d2e801b958b13c43550084d3014acc9e00be7158b23deab97d691f3bfbec4711636334264490bda709c8040e5e115f0ed19fa081be6f9bcffaa34f2c2a665a0c84a0962f8bd6cd48e7c70fd0e0591c0cf83511c42f4bc8aec83e8bda9cec5afc87bb9e6ff93bf9c88dc043611f83389678b6b5c0182d4bafe49d573dfe0700dc8db12e6a84f001e5797b19c7dcab95bbb9c79586c7d009ab7ce8118cb634fc235d3a2ce04c0c0f7e52213630b33e1e4e3813fce58c67cb149a2a48dac0534218d1875ca9105c44647739e902dc59b1e15377805aac311c7a95b142fee9f0612d5296847583fc157abe748326c1b0729849a5d4789629aad0b0f96a09fd133575790a4a1bb406e26b5227ae3c2676343ff66894199a57ec43c2e8333025a469a64c87517a72af710ea9719c28d88599e9d89f0fc69e7a22480e405b25e3dfede66048b53f1dc779d72ba6b55673fe6c50b672a0af4861a1975e9989e687b1557faf6b151dfe4ed5ba36b436b726d9bddc90a05ed553b7e9245b5e8dbea042594bcac77dae45743cde708031d8f86582f4c78abf00153840beb85efc44f99787bf41c1805e086859052fc21b91ef0a20ac3aa195d728e3cb07dc0553788e90e278d4320fbc98229929f55eb72b82551c8366dfd65506c0f45d518250cb5ac16215f30fa89d8d6e880aae7ec3e130ad8a054b7518cbe3d7d4868bdcb7b22a275057dea455ce294520e78bb718ed53c0a53c28ea73433747c689cfd79bed8eddd38bbc0ac32427ba0bbd64181855d26de39a745085d020b13f763d7ce1e1f0d9341ec37ee5549cd95d56a754898899eda6c250f175c29053b0bc0c7652d98136e20a6cffe3a2f06a48c1b287ee149d97d8a3a3d94a24f7f2f85e0c68837d513ee149535e19aec6de6c1c060a34d804ffec5a56c7fa359ad0a8afd7d98216bbbf07a0475daae9bc0e4bef002a859f2d72e1cdae366de4a11b842f8576d279d7adf23d099427c3ecbcd09e9f4d8e04e2854928161d0f143dd5921f29ac76b22b10815d3cbcfbac97cfd9cae656f2c24439325946e9870406c7fa505b855602e6a77199911a7acf3d6eb933746dcac253b1b954ad99cdbe3594d5c9f76544048ea375dafef36d4fbdc7081803dd8095b3d26776b219c2d4a53592055e9010bf97280244261d4b42bf7ee936ab420ca6d955dec68ba79e7124d9b36c3b9826ca0f69e2f34632cd2ebde875995808991a5f60267fac293fb6d2b2af80cf65faacb8b747b47fb38e3b87ff8bbc6d72d308a8559b0d65ec09c1cc211d9296fc5865e27355c137d895573a5c7059ddc8f8de12c9dcb8372f3e43404f59a7ce2d27bcca4e101e3dad4521021a1ebc31b97c8da4045af8ee2ec1787a73157b2f9822f1b312169b8b4b1ab61642cc6f3bc31f57179161432d82e8124e7605e8447ef6201b4e34acf11c48ba293c8e02947b0f0da10a88c54336aed2ad493fdd6d5e23214a86246327a3fde7eb99baa108e03b3d8333eda31f64d0e34f9127c239f4b88666b333235cbf601cc58a5846b7b316141efc948bbd8cb93239f5e2d5a94513edb014e6754fc588af3498eb7606f1157ac1ba994bf9e9780024042039635f31d512107437e941fa12f5684123648a7ff17b7d56619ce5383ae1dbabecfae6859ef30fad3672b9450a4f40876ca42d83ab629660080fe96108a400ade26c6e24f2320bc3424fd18f6ff81be02dd982da067acf4ad5c2dea7cc096755e4d45b9a0c1dc83eb9606346940d34bbffbb3c9cf9d4304e6586ded7bbadc9d3b13a5696f281e70849acf99caf53af3e39a962c673107f95d7b601f15d13d86d5d7a02f0acf20ff9a678d3484faa652d8ec58df4d0e623c32e3569eba55ae5a371ee86216b54dccdc99d2946e7300bf3fc5e6c6ea1d492289a08a77e1a43a11ac278eac1bbda78ea331d5734b9b2fdba50b28366ff211e6048c939132d1dd6ad20f4f4d435701a9351ef05ece4994a39592ee8e9364aec0318da03df4ae50661a52dff49585b49e9ebb07864bf7fc0b7739c3c0d1cdd40a63a54a5206ab954ac8618f2e09ce301960354475e26d47b3329f0602d14943cf67683ed4589a18823330890498a94dc76a94fbfb944f1481d845f0c7b06e242d0fc1a5855146215fdc54c4f0fbe89bed83cf86556049afb123bf17f49de23d53e79287d42c89868e5c922ba4e6ea28110e0011d770b15bf5cbd0a60e2a0d8ef43dcc2ded8c0a955884e7daef5b7147a2c0280dd85bfe4744e0525dea63b047869e6dd143ea9d442f7e1a48f329572286cafc8f2a351dc70fcce9cccf335b688e35bf09bf05c3d83ad81b2a336c2591150680cb54a65bd63344fa9a9925d69d4a7694f74023dc80e30414e3cd0527033ccccde28813972cd84a4054521319a0f97d4a545fba21d25a2129b897e26a12f87fc31e1bc025b3c37a151d990217a9d1861eb5eb315cf4677da356d6eca8e61f47a6f4bedda782967e5395d549405bcb54fc3685663c86f4d0507d79c9592208e471531989156b7a5c0b13b0c05841f4d330675067d3be3a3077e593769369e7425b96b0323b64eef7fe227d64cef32a6657e268dbe0c26243da9e615f7a2a8f3a1508aac6a8bd00add90f8b3b9dd8918953ddf18a2b03be50b4773922b7dc58e5b26bee8a2cdf70aac32352ba08430b6207065fc0b4404f6f1ee731bb7d5661491a6dd17d427240e171aacdab20eb6d1832f71836280fd40df0add9b02b1829f46a11ac6cab9dab3c84a32b473a2acd5524da9b0b3ad80e45aefbad83a630a29963d3c3979f3b6434e62ff680454d00ab774df6fea2ad67331e27e7fa802a7af1c79f73411fa94a61f679c88fb28e26dfce9c560ac76a5398ef5839a71818097809b360d07d0b80c292bf1c63c347509a589a7e2ebd9a3a14f817d5cfe4d414f4e30b3c6fb7bed1528a459209d7bbe24efab9a0ea7d09395f8d6a763c1cb1815286ee278a1c2a8b80f9515753575da63b87020d527c791ce9d4d12865297c253f69c97cd29cff13da372d81c2d6c2dde20662b9f50439bb23f89bf69b5df0857afe26c12a193bbd056f5908c1c32fa683bb47ebf2ee32f24bb8a94201080caa425bffa6af4977d00dfee845483d65ef5bff2c39d6dd8272a596dd92b32c5be94db770e866c650cf4a4dd766e627b39ba89b99e38bdab19530bfb1b06d548ec56282fe907249f523b2c73d1a2458db47031cde0cab298ec3b5524693acefce7794f2d937f4f5c1f30c98c116cfdfbc78f67a5f94e00ae7e0ce6c0392e743b60fc9c6909690b2cab1772c5b24ecd23d74596501da5e59ce9592f0c60120ef1170a7ea2e4de8be1bc5b0a8f5a521a1b44f80b117f13c5baaee9dc9de983eb7b6f9072db75492e0d52130402abb851e7ff2a56341f0ce7788e9aa55703c75c6129821a15c566ae8abe681b0bd32262a3e26c2ca212a7eb8caaedc25195ba37ad32c267c9b2af644ccb550b8d5292f5213111574d3b55a1455bde63c0e9b82f5a8d122ab214d87a201a3ac015213ce935916003a05c90599848cce3ca8f730aa96ec3f650345119affe6c3b55f0c239833ca8a6f07f32fde552ee3b30069ef5c6207575efc8bbe5621d15e79d19ac2b384483e45470beb8400c4a5a4a57df067551cc6ec72b8ea7d573b546fcb4fbe5cfbfab66b7cb529eb21238f38394c100c48d0cdcceb5ad2288022bd66bd58a7eeccdea8a2889d70b11a34e990f3597c36422030853d3a5513dbe546fc29553a7012aa3dff10aac8163f2bb5177cd1afdb512addfe3c4f0990b8140cbef10cdb8256c9e419f7eb353e6abbb339231f18b301bc106ac2b17c2cd16468c1802e5192fc7e01c15ff7bbe8757c76ef61b86d141280a6360d22c8d365384eaa84d4fff0a5f208e3cdaa5d4e4949fb19d3c88ace15c8844bfd61f6eaaedc6f7cf4d5c2724c47460f4b3b40736243aedda4017396ccfca7990b6b2ecf4e84d20128589df38578c68ec1655c5eafa2e5116edfedc32406681fb32b21db4461815d1c668c6ecb64da5df538d067406f1359fc9389524040b388303ac2405b351871211117152cd576166522c3d82d5d849fb8637f3cc91c1f3003edfd54c20c25bbaa3afa3f3a471fc5b9110abcfa7a3f14a5fedca20831cf64f8a73b31897c85feaa187741d7fe14f12b1696a2414d339af467dc3d1271c80035d3187c02fee5d59c41f54a5c8566793e98d86b31298897e0611ff5a1cd0e82f6f3d83402d63008b09ce4b9e0c48a1f3f6a86a904223de7eab4e6c42d4e4e990c78b3da68cba992d01db1b884d274051000b51645af016b27f0ee23e70b4c94789c58ab5df03dfaa82bfb16fc754424256016108f80234a3d9528b097e92e5b878fd88721109f16609bf7aaf684773c2a30b81d73643b8cc470e55af643842de7a5f1531f335efd1511c3d74a231407db599f2304a45a4393a51437070215c73315a069c553691880ab3cd81bed73dd6e504be094f8cc8bbb13b6276881115b2f086cfd5e9127ed6db1f75f8ab2a9106c0d44b0be8ba3d48fabe539a3e3badbeeb60739bac19b66f125932c9a9e293e9427872ab38146fe91ae090bae414d8ebd2dbfc2efffd230e5038fa144db1baa836aa9b9fa7605e6207975183234489cfef3fba6e9e06b9227e7f0f445d5f2a9704bae702a9543ce8661dc36e4ac7bdf4d1903a627f6e107818b6134c33ce92502f5faad4edd8c67fcac2925902d4e19f2a3822ae80335958b3f20303ad8ad01aeb4efc8a3c4fa246df55e89847bd04744a3be54081dc456de56aa2ef69ca513e40af3140b720426677e09ba705b3a2dc1e835054f45b19941ed2c82ca1f002e30d78311bfdf6bf80fed62374c4033c60307f461aae69fe1650ca971b5d2b0dcda05e3228d358a09b421e18e8677c917af4be0a0232ebc1d04dc2362540c6af0491a6f03495b7d46717c3bcd508fe664b6fb8095184e219b118d4b36543c05a997f604b008167ed9a112876759d9fe8159a451e8495cd23e93f2ddb657682d69f4de8454634e2ed22d221a24f25be64fa8a61c7b219d27deb7ecbba5456be296a223795fbaf09564b08d6a60fe89c75fce77ff8dd2235a249e2027adc24ba775a24323fc7aca2a53c96a78c5a168920c05f52254e3d624228bdfd32d067e0a4c5ae2a342fedcc7fb25d7fb23e04a456223461ba2e0c609672992af08603d01bcb3e6d64a39396ddacdb22ae3bd805a4751574841c8931052484198ad28d283ed2c1480f80604cac4fc4bf5565fd83dd62a4687352058cf9abc3bc7b8ffd1e0e83e34723eed976efdeea35909a1e648d63593b6e2f49d1594b45286a442118db6704f7b5d384e9e2d1466d7b0a8ca54fc1d583ade79821cf5720a04a0dd5e114ce5523af6bd6ec2f29e19646beb758211072db244489a1eb3b51b26afa90cadcf1d9a78bfa5b7a1a7fac4336ffc626f8a8a94cb11cc95271d7cc89ef0c836dd0eae5473f259a428e029bcf6aa7c4e946ad48803c3fa0d2cd33e433577612c50250cd2eafd59ea1c5a2c12e65ba8321486bf80798395c3f46998f89c9d9a44ed3c5de0486de68458ba1e81cc6b7822b7c662bca8d0ac3c9684385dc27c19980306e1e30774f59676535028cfdd06b90613a4e3570ffa93b5026888b79c96163019eaea1e9f17f2a726d063c9f01bef7be1c5a9c9b40d8014da0765703bc6ba5cc2484cea6685f041f225a3b9c2e8c96ca6d184b021d23673b61e2632a4d04364ae1ffbe642e837e4d0fec989c1a4a53f973cfe529986760487600a8c49c3813e1ae3fa68384017e5ecbd84671b92e2a90fbf4216afdd049b48662cc29f89f003470c4a7304a9916b81304f7c5b63b83dd4b1b0b10b048ba5709ff47cd0dc6ee9e9a0379df098576cb33fa1a77512492fc75ef78e13edfee8eabc97a956ea748520f44990ca74607036f06a4c316bd3819c354624b3ecfcafac77f994faa7eda770b493682ef914395e9f4a25618c83b9e091a65c72d4b477982f98c9797b8425e2e68eef247ffcac99c78a56b281b989e8511070e44122b22d16561932173b8d848307aeca06b42ef620e2f032f280af70a9262056042c69cadf893ae57f064c8f2ccf70cc508669bf5b94369377c493a07b159095f823d32b12b95fc22929894f79d1513398a3a49671f7e82ea048bbddc483b33de451b15c544265d44c09c863ff054b2cf6cdb6ad40cea92332ddc0f48b787ebd93408b44d76789ab3e811299bbfa034d80a2dd83f1e706c70fffaf7ec783bd710e2b0d625442900c9bf12739d86e503a7809d9f39a5f5652408cf417bbe336a278902bbb0107e8b481a59329e4f124311462c9a937263836ec108b6d064088a037cbaf3fa7950587bd7597d01ef7002af2998c4f27c4148389959ce9e7e94b7c0d60f9a652d1c9f08caad22c972421e8d5bd5d04b308d328f708b4db528c151150caaeb0aa8f45e38b38c167445ac3e7927e231bfaba414f34f7305db5788469020bc8b13717fd5e58d8ff6ea855f2de957f1e4874793f584c97ca5b36152b2753e93e4648095b4d163257a217a10827164802a403ba67c85b81fc500719f614a8648a9069c7fb069c121e9e074fb4a4b8b9e126816566f856964866966750b8923cfa65171c0bd79f09d368804b6a32ad251b07e962fe018fbbf3f460414ea59b1c4d59a592c049dab7c47572f227f18b131c143b3f0562086c5d68d8e8e4ccb814e5e9cfbdd91d218c81abfcd1c08961abb80c72e51cb2be52d4a0372f4a5f86ac52ac5a5b035aed2a0787b8a24444e398af233900871335046de8f74171b081e9779ba469f226926d09f14e2ccbb389cb1a66bcfe60a9556c0352c13b82ea0b3c8b4cc551a6e30ac6657c64c22a68f241e924d1f3ed6aaf5d56f17d72b7847b1cd47dc96bb2a4c6966861fb8357dc7e7565a2af7d3aaeaa428045199a64cc228ae6811631ab93fecacc576eb1c73425a68be60f2841a47ab794bf8302f4282137cb55aba25c054fb069343e4e1b0ebb764ab1c613fccfdb23c8241a20cffb1461696efe65fbfa0bdf9c38ccb32b589825552d7738cd5c17123ad3b661057a93c4db987da5ed710d8d452bfea88f2866d945d6b63a8070d937e59139f88ebeb7665ab131f18ff6d932dc1667af2b2ba3f6a77c67f6eb04087a576a68ef3249a0418fc8d0f9912dcaa6cfe8bc7ee844bda8f90be75168a870a8c81654a276f655af2ad2eb49ffa25fa5e23ed998be6def2271cf3dfede555b2a28ac7b9d0a69e90cb4a737c6d89b50de692b9b50e8ce18e47a7e064d31d313acdb70d13180a5119adf60c15917bf95c7f88ece9487dab8662a43ccc5a53743fba2c0a359a830c07b073438c996ca8f6a42bc99477c8e1eaaa2af899fa13555a7b26d034098dc7a35a7c5b5aa1a221eec89017a912feb3c965dc083bfa6e10aedec837035bced2ed07038e4ad0c16665024f6a766f1e27275461f6dfee4b2500da2f93799dc79096e13359dfecd28cabd416a7f040b9ed85c1139b671095b05501593694acc3e3b6a7ddc596e6e6c03676de82bbd907e3742a87bffe4560d18a8ad5537a9ed2c181b4171594cf1911629352445645980ca5463d51dda3846efc241450c4438a487dce3d64ab5419de8a134c7ba1481372a4163e51677bf9fff66893618fd4770630a18d496d822a8ce97cf7dfff825e2474b78edc8c510573e9f1d3463c9c0b67014fd50cf62552ceb341702345895e47b7d30094312227162b6ac423d8304fbde1e36e5cfcbefb6c906865e0b7fd359b98f5c1dc6385616646bddc443b7224d7d0a0fdfe937bfc3c0ab2f467e7e022ec1800c41dd49343293affdbd68b18e65bd3faf3b6011ef50a6cbaf7ca1feb23e4796a465562c53bb355c8caaa14219027c8665db20bef48928112ef2423b9ee5bb67de2ae50b4368fd5ed2949e08716f3190f1aa41998beb152548c8b43108c58d9e5fcda387dc67e58399ac656315ff10ee4674a87d77cdb627dd30dc5d2a9f123138b6ac395415fb996fbd0e778c7e49f8210353f3e3bca0b8bb1969f26b1ffe1cc0d80e5026f1d1ee3377175a6d52e6dcb43a92ee5d7d704f307bb3cacd30e6892c4b1ae878db4dd8ffc268139b814f6d7279ba340c5fcef41f5f161983ac1cc55d0f527e3993dae1ee932362d3aa4dffcad7648dc6d920847e028ec08a12455619f1e7f9da378545c88af6e5803bdefdd44c852a1eb2fef0b9b3d56ea88ae6326b1b1136d94b239af9e4887af9b6c30136c7aab92e76ca92ede3b09a19278b5a77e07fcf2cedbbc14f54ad8fb66b164f94e8aa3649be41db7e50977f156b46d67e41bad879befc28563166ac937aefcb72bc115dbde8ff6ecfc6c333dd0df7bb3f54fbf8f297329fe8d1fbdfbd65b85d7ca773dc2eb3ebe89c236cb0c180dae02bab6001e0da987e5d7e95a1ab0def74cb1bf03313f5785b0b09f15746ff0d9edc47cf306398c3bb92356eda8ae355dc09c4f890b6e3938864c5d0d3384742a41ecfba884eac75c5d452909115acd2c61e8dc7607e29e4b9b0c9e47483ea574fd9f07ab59366f34fadee03684aa9411ac2f1296e2481a50aecb59d651362f1a11035f3329ad9869b320489ef90953db479825ac16fd492c2f049d7f8b3a890862ad6dc21e1ad4b3bbc4c7a1737e4793d5927fbfeece9387c98ada6f582dc9b2affa6df8d948f10f9bc53b91376d3b751f5c8160a63e72c40779e3e9c0378d1b8e5da32752238cca429c7d9a2a4f057b3dd4393d02a4472f8dbe4c64953094839c8af08660e103ac562d8cb4bddf9c1da681f43ba6427caf1a996d4f3aa9213fc236cd4e808d116cab8992bcd5981983024b0052451b9e57f3c6fca25880373bc9ca2f37f5e7fc205962bf9010918bf4e643cf9a609a9c7214369419571a7b9c35fe59f39bab4c5e83d42560f44f7731f6ee8a09cf4c1531c354d249b5f2139ecd485f02497e5272e1344535af45aa5734e46c567212ac9b1ba1ce4602afd8a19caefe77d40c873be5b1f440554244007742c4beb0239c091b9eb74a8f2d4d772caea37adbe7f4afe22a836e591bb5a2218fc9668eb4135ca76df6ecd101391022fa7d43eed629dac43a932b36ecf4ad3afd5b6fc91c54e4e4d18cbd4f09294fd32211b1f185848d1d68d0b049af223bdad7eb1575aef7031a5ea1b60c29a457201c480d48f09fcbf617b202f89db24e307bd471f4857e9c3bfedf04acd317c74351cbc2ab391da37f34caaecfc7ecd62d0278bb4b9378fd960131bdc8bcf85458d1464972cea4a4f6783307e0ff5f3a04fde451f0c83e0471f8f8fd7386c91d04be03889dbbd4b1ce55f0d903adec9ec5a097452a93329d9e5b28663b3058f081ff921426e524df93b27da810d60bb651ecb806c5940945d8dbeb0e2eaf3b59c70f11ac6d3ed909044c1d0402ebe57019eb3f5dc2e68ddb3476604edae9547acc128edfab9c86bf486f0e73e9ae0fc2bab031e6ab2c84295a8330a76fead9a619a9155a2ccb125be1b5e43929bf41de07a730ca7155d48dea2ca5825b2aa72cc6db7b2f27a8989600292a1249faa19482b9a4a2e1f5d47970f4bf8669bdafc9189d167be45f763f50a0069ffb047e09e658ed074d13697e17ed61589421a40b6364fc1ad01f55140bc60962e63c5bcf995a1020870c92d8a7799fa0b26ea25372e970e7e2f74104f48ff733e42a7ad8459b2cb13312fa34db5ef71cdc12532ee829ae4239ec1d335001bc98983f9734d69d8ac10c7e3a5ed29ca1b373fc073b083ec51075d9779227da48244011af883cd5795d668b92b14d75674d5880b5b8e4fbc1de22ea3e5e4be972f0efc29a5f560f4d13d15dfcac1f985071e42c5bf1f39135cb8ca126aba59a5333cfc41d15234932917823e2e36aed6296beb741b52772d43fd8a993edb87e1db86f25723eea7b117209c3179dae9f0bcf765f9de64935414ef4df1ccad1ac74a6c4f6c37f26f3c8fd079b3de59fa7e65d6f0451bd82d8228a940bc8958588ac6cd64e564c2e97cf7bd48461dc6cf3a6ee60178f08c338f290a191ad484ea8357c80b1d8b43a20c2bee8e63a348880d28d0722a6ad0da9d54a212f2fef5d542544e11c365b660837db7e3d2b48f80c4fa2b19346714d8f0f0a011df77cc20f18de78ed34bdfd78a3a6a83b23e7576ba1fa82668d85e80d873459ff4abab4f69add765a1502454817623c6cd3aa9095e04c5f40f4889fe1faf1241d43c66dc66567762db23f90ec9b3c9967c9f122e5320ed42aa5075026c0b6bd2fdfdf825bb4fe7478c5cd6b3909bcfc7ea32ab4c9ac24272e8c3c1f17ce99df3ac77c9a35b790bd6572614675dedd2deeb6dc7c300764fe52e2db4ba73a183edce3aec8cedb949542fb65e4f90d39424a695f19be2a0c5baa06ddd7fecd9b06f5ffaefaeafc5adb0ef7404fa867da1f96b98d84d2b1cbb36e884b3c6aff5e182fcb794eadef8a026771d6bb69654b1d949dcb1f44a6fa3bb7533a6aec5daa237f5aa187e365f3bc39c56f8e8bdd14c60d723b86bf14d8e03da2b7d5bdaff48a24a662cf7ba33a4345e28c8512e1b6573a1097b0318f1c79dafe22c0c30b0d1479056aa4a17179f171f22778a4d6ebb3f03141874dc7b444ea84e4ca7030e63c0afe6c334feab1385794fe6c9b0678eb845267f4da1031128ae214392981965135a6a6e221e3abf6db9185621606ae68fe65f7e43daee70d9cf2bff240d933449cf02a5e14a577556f7146f8b72fcac3e0d8971ac012a5b83a1461f9d35b64aea621f4436fbd035076dbdcbea559d419c0e128a9ee8b091d9c9ce26f43ac91147c888c17462fea2bdc4da435aa7c682ca4f4a3ca265428d834d92514cc699cda1bf41b5252bc94f55714b842bb346e445854bf8db5f3b1dc7c5857b91b995509ef2e8a5daa88516c0c0e72a088e5f95c5a25da3d54e2b79d9e2c8eda3b1ff6db2faf6d2856d5f9c7589fd2ff870eb22216600330f93d8e6bf448d56db5f2948c2919fff3e735556e8578d07ec87e7997e594f65ddfaa3401a5a4e585da337287d1e1f844447ecf8ed5a6562124d606ed9d5f1827b0cb38b525ddf1d2c104b0c853c3ae10d4712a0bafcebf46f125a93c4ae01336024bdbf536a31e8c11a9e8ed62df65555e607c042c5231c189d07afcbf3c230ebd16e4b6b84ea8be5dce0e27bb1378e0da789a61d3edb432c1bc9c233ec8af5e02b26c3c975bf39f5d4554e16b77ff5cc8f9fbf711e4cbf4e16369a6be51969e12949380ac2ac1514b7b42c970a95abb1b5d84d4a7cc457867bae6dadcbf6e9e625ab125291b19bff25cf8d4fee728ccd3a12f3a02b0544e4f921df13e66543e5428e3c27a13ae665a754f0ab3a36fe597ba7f08b1f9015a1890ce6714bc77b1a592a0221559f64a5dc1483d5d75872f7953d9ab03d8bef0b3899e33b274ea25d557a9fd02462c82961511d0ea829357d4d6ac8c2cafe2b1fd19fdba19adbceffcb4618270de2e15b18a4252589bcccb375b5c9c6d7126d9abc71d7e177d852f369d5ab3209a3a0565b623bfb96e41de9b446fa775d0f2469abe0a7a5f03f4d6cf6bb689806ec84422913f524b9fdce8711ca2b106ca283dd83461ec7d287dd233239472996c0741547c94492d43c6dd7f1109e819b05ec5c0d3facdae43ac8ca7519bbfa53d328f6111b78bec0a66f056e634ade3fd980bf0f1ace473bc8960d64454c7c46975bc130b652208286b032d4f9c91d4e1a64290cbeb83672fbd4383f0dc95f52dcad08f867d949067d939c833900792451b8284682e178ad20d860cf5332085da39cbbdb13d25b140f0cbdafec6279cf99671cc6c72a0d2e97eaa76fdc4c2656500c8c9ed64a5b27a1480892c65c6bccb09609be2fbebc18a7e5adc2687a1ae929e9df8d18be664560969d7ec5d0e1b6454face6513942b276ae32cfbf53114374aacc4672cabc1bd2586feaa7b369ab2c94a068eac1d8fc1ab6d38465dd735a1de644fac64e15612faa270454a2ab4e7d4c578994c0211ec5f2ed5a421ead0558f863781e0dde8852f60cfa411dda0b7d6fd05815aa8fceed963dd8f8edf5e813d75315d1e6cef6a85770f921294cbb133fe54b82b346103b549ed8cddec4a77c7a0a07cd7def4d3098b8aca6e272298f318d939c6eec8b61325c79eca7ae1d7662ed25dd8f50f68ae8dd2b15731716651e2993b37894e976534ba0f0a30dc3a3c830a0bfbcd07d200528d3d4e4de76f727790516654fdd54771776b7978d6542bd495c69d3926673b3d310af6366b9135c23e0e6980ecdab408f16ca7d91e770bd9febe18af3141b51d89d4b4cd6f67a1e4e97a3fa55e14610783851fe68d90d42d9070cf84233b684ecb60b43c94dc0b91a335f96ccc092d7c6f803fa29aa7e2ab7b39aeb1ad54a755cf1c403204f58012a911725af01a26b413091f013cf852826b5930f01454548cfeabdca6c961b4b2dd58aa4a488c9c9ca496a611ae57b053ebd7c3a649563dcfe1c285196757372a385d4b3ff3cd4ded7b2ff497e8d5d27c377da44a8ff54020b156843e344e5f4d9a8ecefabece7283c779cb72b3467e0223c77de6d0345cf8addaee4a4d380177f03f67776a49605d092e440ea98be6cb3329a19b5d6f8c1b7453b45d20b42a9bca290574b4fa14545ac9739ad52c4197c869e4a42cb75f08818a5b4908d82732e7172ffbeec6d881f993b374f5000b292f8700ff458ab005c50c5ef6294c2236e4ade0e62719e3db80a78f7ee06760c361f51303f0a6b620af70edf18a6dc98854ead666ea0ba8ce8b283728f8cbe106802ba67b1d84969f8a8a41a7d1ee001702d33190949c5a3bd4f72354a720a6f869a82f2889471cee8157ebf97e66475fb885cd260dd21bb0a7ff21ea3a9950f80065513bc0b57cf221859a8c0b86c213413ac28b604b695f200a6ed7a29c20e28f2ef71f2a57f433ff9503ccf089a47e1435b71427039c12b6e6386807181c9948e1a06a04af96c09aa0c44ed0b056a3efde6d270f8a1d51afffdbb631cf4c4178976829c905e96bb0d2baa3074aaf6a73dd0db222b6b130daea02d883853d93f6a58d9c504f0db1ae09b6842418cfc47437aada242720c1bb13db337a999bf653d343f4d8ac624033b4f6fdd910496847645af2550c933059d7a631f308d163529323c0787794134de6db6f7051cc7242d1a1030d101d46f4d95d1d43a4ce75ff5c88f7a2490e22ac9ff645a33134cb257072c8fc5db766bb86672c3621b23247f736209d77860be92a51cacded42075a348747d1c9b9f6a6669c8213f87cb6b34199bfa446dbb33ed45c15fed61c8a8ef01693927a8763fe143a153b1d40e9fc9174e06f904f7f4919d392701c00d2d832198db86703622ca278d80cda3fee5b1d37e89ce3b39be10ffacaf2db291114e3f2e86a2ebc49c49a4b3ddb271426ba7bf8817727eae9591125668aa90b5a1c82f90d0b7b7f12e6bd85aea0394d0a200b34ef2b57c7180b97ba76e756c4cfe70085190c060bb6a09aa5dc03696b571a74c425784315b12d2e21cdb1f428bebafbdf498db820bbb484959f320add9ed52c310ea4fee5d6aaeb248dc80c1a0ed53bff2001eb502a4f49629e570c0ffd3d76df73bb64ab3c4c91fa342a53c92894dbc9953a38cb6715ed991257c42d78ed01a6f1e060933ed88763059810cdfeade83f7c46feb7f4c256b35aef5cc7f958f74bda2ee1676cf10f955966090c976e7faff36510ce600f04048da6974e9d2a2d3d20812d61dc7ca9dd74a92d22a4e0bd17fdc799a05d7fc6d70edbd04307e972eb0d5909e09b118fd4f95e3c0d3a0a415495c8ca6835479c101557917c2f0329d059ef2860abcf9995db0521b0f7dea6d0798c117234f53ecf91e162d971ea753b13d6a13628fff814758ec3bd9597d52f88f218050e73312499883c0cbbbf20a8802685f911e17c4bfd9b69d30733622bdeef70d29199e9dfe0a896749b36ed2af8eb08b23cc7831d58db07bdaea1f12724591afec125dd94d102a3125492ff7c9f8311ba1cd5e345712e61523a1ae3f526a09f561e4b136de1091fedc3b5872d5d736a905d613c5dea1f8f684d70c4708a5fb5bad63e65a14391d5ff6e6139bc8359ee2ffffb4404ddd7c01ce34e68401b5994d783659aaea9d3f4faa1864c3a2013837ed063f684846f2dc632fe3d298e8422dd4a37bd92e5e6075eea919b96d13d8344530187a39af3727fe473831f80ea32f7cfb70b70d15ad00878edc708008f6706fbb8b57bc22a145e96a62b548b0d2949bb52ca044d7b9440b525cb01dc38a5fd4292fdc6a424e1b66dee2dbb1ed6067b7ea2b53cb261db0e1b65f155e0a0b6d13dfc21a6f5fc0d49db55756228c247f4733f8d3f2847eaa494ffccc13f2fba4ec560ef8870e0d9d6bbdc32f68a2ab5920f4b23ec265f5414b910196a897e3d6dc786449116a410e82918ef7e64dc998f5e5d7b9ec49b912f6f6d967bb72fa246b9b656d943a1dd3c66334ac0f4d912bfe5f6c2f7a0a2977a1482d49a4522b36f666c4fcd2aabec45289ed97ea3f1f4c4c680a8843405fcd3c653e66ea0a3562504e6167252f96103a7b5dbb5fae623b90b57e58418a272f673674f2abbbbc81e878a17b8e1305470604550ca4945f20475f5f56084c7bd0972e0a6d4d91d7273fef0655bd9daa50d5a45 Please enter the password to view the content.","categories":[{"name":"Life","slug":"Life","permalink":"https://yncbearz.github.io/categories/Life/"}],"tags":[{"name":"With TM","slug":"With-TM","permalink":"https://yncbearz.github.io/tags/With-TM/"}]},{"title":"如何使用 Hexo 來寫部落格","slug":"How-To-Create-Blog-With-Hexo","date":"2023-08-15T02:28:53.000Z","updated":"2025-05-30T08:15:23.244Z","comments":true,"path":"2023/08/15/How-To-Create-Blog-With-Hexo/","permalink":"https://yncbearz.github.io/2023/08/15/How-To-Create-Blog-With-Hexo/","excerpt":"How-To-Create-Blog-With-Hexo","text":"Step 1: 環境準備 Installing Node.js (Should be at least Node.js 10.13, recommends 12.0 or higher) Git 如果使用的是 windows 系統，可參考之前寫的Windows 套件管理工具 Scoop來安裝。 Step 2: 安裝 Hexo 並建立資料夾 1npm install -g hexo-cli 123hexo init blogcd blognpm install Step 3: 試著啟動看看吧 1hexo server -o 你應該可以看到一個很簡單的部落格界面，讓我們簡單認識一下其中的結構。 _config.yml: 網站的配置檔案。 scaffolds: 鷹架資料夾，可以讓你快速產生文章的樣板。 source: 原始檔案的存放位置。 themes: 主題資料夾。 Step 4: 選擇一個自己喜歡的主題並安裝 讓我們開啟 _config.yml 找到 theme 的設定，可以發現剛剛套用的是名叫 landscape 的主題。 我們可以透過Hexo Themes來選擇自己喜歡的主題。 以下推薦幾個比較常見的主題： next: 本文示範用的主題，最多工程師使用的主題之一，也因此有最多的 plugin 可以安裝。 hueman: 筆者使用的主題，覺得相當好看。 fluid: 撰寫文章時，意外發現也不錯的主題。 icarus: 與 hueman 為同一名作者。 12git clone https://github.com/next-theme/hexo-theme-next themes/nextRemove-Item -Force -Recurse .\\themes\\next\\.git (Note.)這邊建議大家可能會看到兩種安裝方式：npm install &amp; git clone 到 themes。推薦使用 git clone，可以比較多的自由度。 於 _config.yml 的 theme 設定中 1theme: next 每個主題的安裝方式略有不同，可以參考他們的 github 。 再下一次指令，看看主題變更的如何吧！ 1hexo server -o Step 5: 該是將進度存檔了 123git initgit add .git commit -m &quot;feat: init blog&quot; Step 6: 將部落格部署到 github.io 首先在 github 新增一個 private repository 來將 source code 推上去。 12git remote add origin git@github.com:&#123;username&#125;/blog.gitgit push -u origin main git push error (optional) 如果有遇到上述錯誤的話，可參考以下流程。 先查看 git config 中的 email name 1git config user.email 用上述的 email name 產生 ssh key，其中 {your_name} 請替換成電腦的使用者名稱 12ssh-keygen -t rsa -b 4096 -C &quot;&#123;your_email&#125;@example.com&quot;Get-Content C:\\Users\\&#123;your_name&#125;\\.ssh\\id_rsa.pub | Set-Clipboard 之後到 GitHub &#x2F; Settings &#x2F; SH and GPG keys &#x2F; New SSH Key 接著新增另一個 username.github.io 的 repository 來作為靜態頁面。 1npm install hexo-deployer-git --save 設定 _config.yml 1234deploy: type: git repo: https://github.com/&#123;username&#125;/&#123;username&#125;.github.io branch: main 1hexo clean &amp; hexo deploy 最後設定 github page 即大功告成！ Step 7: 產生 sitemap，讓 Google 搜尋 安裝 hexo-generator-sitemap 1npm install hexo-generator-sitemap --save 設定 _config.yml 123456sitemap: path: - sitemap.txt rel: false tags: false categories: false 將 sitemap 推上去 1hexo clean &amp; hexo deploy 檢查 sitemap.txt 1https://&#123;username&#125;.github.io/sitemap.txt 設定 Google Search Console (Reference.) Hexo Adding a new SSH key to your GitHub account 輕鬆地提交 Hexo 部落格的 Sitemap.xml 到 Google Search Console ʕ •ᴥ•ʔ：希望大家都能 enjoy 寫部落格的過程。","categories":[{"name":"Programming","slug":"Programming","permalink":"https://yncbearz.github.io/categories/Programming/"}],"tags":[{"name":"Note","slug":"Note","permalink":"https://yncbearz.github.io/tags/Note/"}]},{"title":"Unicode 與字元集","slug":"Unicode-And-Character-Sets","date":"2023-08-08T02:12:16.000Z","updated":"2025-05-30T08:15:23.257Z","comments":true,"path":"2023/08/08/Unicode-And-Character-Sets/","permalink":"https://yncbearz.github.io/2023/08/08/Unicode-And-Character-Sets/","excerpt":"Unicode-And-Character-Sets","text":"身為軟體開發者，你有搞懂字元集、字元編碼、Unicode 等神秘的東西嗎？ 作者表示連知名語言 PHP 都忽略字元編碼問題，非常歡樂地只支援8位元的字元集。 字元集讓我們看看 ASCII 的編碼方式。 ASCII (American Standard Code for Information Interchange，美國標準資訊交換碼)用一個位元組 (bite)，即8個位元 (bit)，來表示一個字元。位元組的最高位統一規定為0，剩餘7位用來存儲數據。 如果英文是你的母語，這一切都很好，沒什麼問題。 但由於一個 Byte 有8個位元，因此很多人開始思考利用 128-255 這段編碼範圍。IBM-PC 用了一種名為 OEM 字元集的東西，提供了某些歐洲語言用的重音字母和一堆線條繪圖字元：水平線、垂直線、右邊有個小吊釣的水平線等等。 當 PC 開始賣到美國以外時，各種不同的 OEM 字元就被憑空創造出來，大家都把上面這128個字元拿來自己用。在俄文地區對於上面的 128 個字元甚至有多種不同的想法。 後來這段 OEM 終於在 ANSI (American National Standards Institute，美國國家標準協會) 中被固定下來。大家都同意小於 128 的字元定義 (基本上和 ASCII 一致)，但由 128 開始就有很多不同的處理方法，這些不同的系統就被稱為頁碼。 在亞洲地區中有些字母甚至要用到兩個位元組。當 Internet 興起時，在電腦間移動字串原本會是一個大麻煩，幸虧這時已經發明了 Unicode。 UnicodeUnicode 是個勇敢的嘗試，想用單一個字元集去涵括地球上所有的書寫系統。有些人誤認為 Unicode 只是個 16 位元碼，裡頭每個字都要佔 16 位元，所以總共有 65536 個字元。事實上這並不正確。 到目前為止，我們通常假設一個字母會對應到某些字元：A -&gt; 0100 0001 在 Unicode 的世界中，一個字母會對應到一個 code point 中。即便在不同的語言中，A 的寫法可能會略有不同，但 Unicode 協會的人已經花了 10 年搞定這些政治爭論。 Unicode 協會把所有字母系統中每一個觀念上的字母都分配一個魔術數字，這個魔術數字就叫一個 code point 。U+ 的意思是 Unicode，數字則是用十六進位表示。例如 A 在 Unicode 中就是 U+0041 。 假設我們有個字串：Hello 用 Unicode 來表示的話，這個字串會對映到下面五個 code point： 1U+0048 U+0065 U+006C U+006C U+006F 實際上也就是數字。不過我們還沒有提過要如何儲存到記憶體或在電郵訊息中表示。 字元編碼這就是字元編碼上場的時刻了。 Unicode 編碼最初的想法導致了兩個位元組的迷思，簡單說就是把那些數字都存成兩個位元組。所以 Hello 變成 100 48 00 65 00 6C 00 6C 00 6F 這樣對嗎？等一下！也有可能會是： 148 00 65 00 6C 00 6C 00 6F 00 因此有存成 high-endian 或 low-endian 模式，可以依據 CPU 用哪一種最快來決定。 由於美國人，看到的都是很少用到 U+00FF 以上 code point 的英文文字。然後就有人發明了 UTF-8 這個絕佳的點子。這樣做有個很巧妙的副作用，就是英文文字用 UTF-8 和用 ASCII會完全一樣，所以美國人根本不會覺得有啥不對。只剩世界上其他地方的人得跳火圈。 因此上述的 Hello 可以寫成： 148 65 6C 6C 6F 關於字元編碼最重要的一個事實如果你完全不記得我剛說的東西，請至少記住一件超級重要的事實。光有字串卻不知道編碼方式是不行的。 假設你有一個字串，不管是在記憶體或在檔案還是在電郵訊息裡，你都必須知道字串用的編碼方式，才能正確解譯出來並呈現給使用者。 以電子郵件來說，郵件表頭應該會有一個字串： 1Content-Type: text/plain; charset=&quot;UTF-8&quot; 如果是網頁的話，最原始的想法是在網頁之外，再讓 web 伺服器傳回一個類似的 Content-Type http header。不是放在 HTML 裡面，而是在傳 HTML 網頁之前先送的 header。 然而這樣會有問題，因為 web 伺服器不一定知道各個檔案的編碼方式，所以也沒法傳出正確的 Content-Type header。 利用某些特別的 tag 把 HTML 檔案的 Content-Type 放在 HTML 檔案裡比較方便。(幾乎所有編碼方式由 32 到 127 的字元都是一樣的，所以不需用到怪字母就能在 HTML 網頁取到這些資訊) 123&lt;html&gt;&lt;head&gt;&lt;meta http-equiv=&quot;Content-Type&quot; content=&quot;text/html; charset=utf-8&quot;&gt; 當 http header 或 meta tag 都找不到 Content-Type 時，Internet Explorer 會做一件很有趣的事：它會依據各位元組在各種常見語言編碼中出現的頻率，猜測網頁所用的語言及編碼方式。 課後練習1.1 Is Unique (Reference.) The Absolute Minimum Every Software Developer Absolutely, Positively Must Know About Unicode and Character Sets (No Excuses!) ʕ •ᴥ•ʔ：算是徹底理解 Unicode 了。","categories":[{"name":"Programming","slug":"Programming","permalink":"https://yncbearz.github.io/categories/Programming/"}],"tags":[{"name":"Study Group","slug":"Study-Group","permalink":"https://yncbearz.github.io/tags/Study-Group/"}]},{"title":"台北之旅@2023","slug":"Taipei-Trip-2023","date":"2023-07-02T03:56:45.000Z","updated":"2025-05-30T08:15:23.255Z","comments":true,"path":"2023/07/02/Taipei-Trip-2023/","permalink":"https://yncbearz.github.io/2023/07/02/Taipei-Trip-2023/","excerpt":"Password-Protected-Content","text":"4bc457368a8e267905e1aff1ad9ccefac2b9ba033d8f0084afb65c59462a049834f879f77a83c04e3d397023c3d91dbf05b4f9175e331e085aa7915f064bd6b2ae5f9340964a428133c9ba706528bd3c68724332e6440165f738793099523c2bb8c6ad2dc15fc876e6d4e14ba3cc5721cfa3c3a8e63cd674d25c93c020c23c527d523656b7d58b08cff55efe6c17d0928097e1e7253000bb0abce13212b6f37f8aacd8a2e0dd549a98a325c78a26d957247c1f5f8639c87c53ced9fb88d0a30b6b11a7fb8a72aa879513392dd9c7360950da51a9a77a599eea05fc67df10a3653a779427aedf2a1e4ac3c2b14197f5ad9168716c88377597c2cc9a1606918b35eb31c2b020c4791c2b7a6449094b36648c5b94d211744a9107056a259977a1610cd5a35a64f806994551bee8dc593fefcbc29d8bf6cf8e0027edcb68434f21e92d223896f4cf0185e4d87995dbed439a96d573c6c10edd7039091cccea6530f71c53257d5ab931eaf0c51ec3d5270dafd4a3344100d5258f588b096b11db986b673904db67c7c0a96fc374009ed6693516ad3ef6de38036ce7d67d3d298ef45052e02467408525c37b4a3b563e46b7967c0ed4791479696d1e544e76ad50fe7e2b771b9213511f617762a6f8d4399d766275a0d5a739a13c90664ac5290a0e6a324c6915c9f1a605770f911d8bd7a5c1a0f988b602625b4e4ce672148cc3908a8fceab1e7aeff523b067fc1749ab219dbb42443056419e1778023f6743844e7771ce7ba4d913d92f88f33b29056984ff7c65df066685c694eb8b1d90158bf058da85792cb48e7208de01cd0c35481e684246b2ec9626ff1f89c4355d01e0092f58c0928b1a8a10cf6ebfb6820dd10289bee93e97a3cd36c4c8dfc8c3ba310ac0cf45c5ae239d21b2028d3fa0bb32bc786141f65390dc4c1ba9ddec3c959ac4ae05456f3d1c3c848337896c2a0d01aca44bd2de076f0351086025aaad7871ba13f8d0bde825b294ab387a4792b43d8c1772bff5417d85fb5292959f21fb88ab95146312155ff8876b82d81b7c29d4f0f5adff76affac360068328ebbb5406c79f16c21509b4e2b8f6c3e1b14ed9146df7681710bf259ccc1940773af9fb6ffd1b27bf22cdab84cd123a221b5f113bdd809e1bd5bef66fe15105e9c8f556a709ab4c2b1304fec08358e74dcf22ccd8e3c5fc8e1927c10d1de88d1b8ca8a884da609bdf4e5ecfa1bb1a79fd902345bbaaa2499c381db86b84af588d38264cc86a50d167607db84d04a778f612fbe34985291555d95b754f2981c6d316ddad84305c758d6e592b5fce98fc2c25d887d96e180fffe00659306c9123bad4541591fc7c48e69714c53ab8154ad3a89657dd95389a01bfce3e3339473c31e6c6e7ac6808a0ec57c1eca4e60d4a12e6222779e2103528b4fc3180df8edc7c27b13d791b8467167cd35ae35ab35a064fdef68f453943148edeeccd34aa235e9c0145dde4fea9a011b83f2c4232f8cc3e35b25fcd9c3f7bc9bd6fe60cfacaeeedd99cb1b2a7257fdfdd2ce0d792fae431718c8bba50af484f84c8a77907b62d596d4f940403ade17ca4ec9beeb94a8aa0116974a3b0b03155e52526f43d06398dbea051729c17a92b9dde430a196591be03599d3b43f57bb452eabadfc737f3c67db4db3ae6b6bf35a06bb4365ae5e7acf5f37a7beacea006747b0ecc28b158cf2817ad8e2d261bb964c2a02feb74594947414883db4ffb47d60956a807d9f705f5247b3316b8880f473738752a5a81292c4835eb511e4013bd80ed7fa8823c6f8a7a8584389fb24f081ceec201fedce655f20bb66cd563d27cc6a6a237a3f785b5f9d8277b7ef81e1cbe1c5be983d1a4d9abbc9f946ace2ec1cfe108fb654c0ff3256bde037131e786c6477cbca27597fd955e3b499620915a74a35e952d34de4c8db2a18e23ca36a0f4894bf98394dd3d55416fec476487e39b6301ba4ca30f4a4c86c4d9ebfeaf8e7f8112c13650382234534dd7ac10c33bdd552de7c6728ae1d2e957e7e8a3d5e5ebc1a84ace0b448f43359fb1c1abb919cdcdbade4579f16f25690c21ffdd3569fed37cc024eebd0091835c3af822eae031ae095861b4ee9a84b66c15c6c649467066dbf2496acde46cdac734792ab51852e36396f53e88dd7a82faefe41d45cc00736f6f1fabf7da0bdbd71e52730e2ade0989b14c02c70afdea2400c43c700f35022c014ec95d36535269d78ab3d380594aa51c7e90b94d091df541ea77da7a0a4bd37175e77413e5588d20576cf23b139181c9cf739d1792ed8eb0e15f1788f9b3688795e7809dfc80a774709ff0bfc98a00d37de55fb01b92f6b15c57e4b83518bcb469a0a340015bd8cf5cc925cdf09adf639ae7ae0576450b10f2851ece3db10d69ad2d86d831ab6d6f55c622337922cf94c0e6c274c61c679550c64efe6a9858961558df6cb7ad7d635ffe60398593f8c9ee0f2c5b7d0facf75e2a24ff47cebd4664745f61192f8b674f6cf6e7e1fc448f71a012afb2206869b18ba648ae5773a65ba86eb6acabe223f1950128b0222d04651becfb6741f2a84210227b2267d5d1e1cec468ad4a1f43705147753b27d451ba2ef0665ce8f6366abaeb6e0606944332a94f1fa931be3f575a26f47141cdd6b02c7ddf792bb75f5e7b0a1b9cea986c111f98a9d279dbab27905c497ae0eb27bf98778b0291a480f373c413760b58d79dfb85b665fb350c4dc1ba0e8269c4cdee245d67c01bfa9ea33aa3599d7e50d13c6b42bd17ea8c38097d979cc6b46e051a94c42ba2917202ad339d79d9b72457ce606da3ffeede3417b0ea29036d621b296d23d5d4ae946b1db4afc27c1d8159b44bb4702a3d23b7bf2d89b294940c1c900067bb05eac4be51026566e5747c838bfe6281c132ed7cfa3ee3211ed5f58772cd31e22246294e78b6918ce704d8c90e846ba8d8f64a1ef88db1c0320eeca612780283f1dc52c34a0408fa884e5ae187b8fb22cdac61df54fa86b327ded9477b8d8236997414cde7ae0bba6c22ee139c39abef5a340c29032bce82f1329e6f8f7226ddea26139a08d733b8b61d1dae9c606620cce31a393ab4097eedee720aee919b2046c3fe6bb93b8cb54706f481351ae1f122508488a05d05419a10ab4f0ad5afe54eb9fa90e47956b9ab5d4a7cdd6fd1dd83655eb4795c658799f0fe9010726def0e49655f5d5e89b83f21b172809aed3f3a5f1a1d1e03b636586c80624f56d4ba8425be5478ca3ce9bde9f525f1351bb592b8eacf7aea35d4717939ea502416b109c8867c0797904444bcf02d0d0c21ab003d756d94e3b1316b2ccd01a348619a2487a4e72c69e60d9146b7a1298d5ac48ad062f493d479eeb8acf5c14b469e9dd34a9b633c7a9063efbe755f19cf5a7fd6cf025f9c2948a89f44216893115ce51166de4fc7aac95995b6e0f29c94fc599bd67b8630a66229e90c157983e9f376e80fac4881c656cab136dcf969041faf59c059b5ddd21ed000da9954e6e445cda9346062c72efb4211e6f91a1dd2fa16edbf204cb574ea60bde6afa8095b9ff8f84bbecad52d49f44f9a1b1d8decae07ca0d987bc3b62e2a465b3a7a62423ec1ba34a662174adca6f1efa12f97656889a3878ed8edf439a9ef95fb65a77948dd2cae7a444e0f52246baadec8717ddff38d389b3b16df93c4226d4e9951775deeb64e207c2342496939aed088738fd67979fb27845eeedfd8dd5b845015a4411bfa40a90265f6f4fbd8e41d3806cf166c1e37136fea936cf611bfe30e34d45fdd01b8c47ebd9fcc1109b599661d9f0efbb5a30f14b012f6570d6a522fbecf95d4a33a083fed8665f6e8d8cde9f6bba73b806b7065461b228224d89213d442ae2268050252825fab4be0420949e1e0eb4cf52aa03f0ab5ec80285f803daa0ea9cdbcd4b279e11366640c905b58c9127d70d06f9c731f1730790038c61d63274aac4d039219f6a380c1cdeff3edcbd92bcb417f3e8c5cd39fd3d786f1179973b73fececc26ea0f0f0564aa20a897e3e9fc428b1f6e50f1c91aacfe3e61b19f3053242fe2e85d9acf7c77c7b9603f0e13dd3dfff083b580377f9a51956be06f90c17f385cae85cb514302cfa931e20928be47ae4f0ab8c4d376c16c8f324cee2a1d0dce6fbd154f9cad78d03c94b345b84ac727aafb18fbb0b819e90e4131014329e2dca06c86efc09af3232aea6d0afa089eddb8968a4e27e2f6559b9bee3c24e1c224613ab3fe459db861a97272c547cd5c277996cc3360b6fae99b970348f2a8322b63cce54e3867201b46ff1c3ace0faa714849de40646e6c3a63adf9779b7c7ce084188c941195801c6274f7aff312fc10075d5fb231c3a4461bb855a8392532a9a64ac289bd1bf43a49fd79048bd6c1cf287cb1f4f238127e40dec3afdbe024976d1cf3507692f8365fccd02651717f1d5434dc3fddefa717fae4280b161eeaf038800f022aaaebdd708a8ed22bbf1662409095395aed9b0ba0b469e5d2310a0ef6548d7b877b7c9ba2bd038297c2fd9ec8bd9967b10ba811f1431d32d56f54b7fe4f8771a4ba3d33da637081ecbff46717a63eb8a90e9599a212ba642b54bef406a563617430dd9890757e0bce86862896720b42729a3f261a894cd8289225eb8d01a5ad691e8d2a0bef8a2d08f0bf8c0cd16bdca295e533238f379ced00e2993f830b75d3c7b78a689198e8661417bb8a76be9e3e8400e8bf0a26b9eb7af21887743b55bf7572ff20d5a8e799e8bd44012c612bc48d18a15fd2b3498bfd633bdddb7eaaa3e3b5fd6a15202a2a11071f623a902a573134379cd03c61c1abb8c5ebb44a253ff29c30e70af5f6a76c8bc5a51144caa19ee242ba64d640ddee063f2c34ef5e9e2c44d1291cf51084ed6e5172748b8d51ba80d44cb8d549b38dc65b2f05c739b42529e5b1d88980317abd2c3356a09d85362ee5e9d37f65b57ed09e532d5a6c01669d39ea79d8c9ee827038188904581139f92bf6e2c16ef0290f0fbc84be50f745ffe80b0e55e0195faf693759eecdb6d8e2a121aba150e2acfeb634cf08ee2dcbef2f29a36ce4f188e863c64e4b21d0b1fb3ca65337dfb5a1a5a240035e83fb65a06ea6d6915811933cd532f556bf35132b22180cfc60ecfa627456f937df78f84ca90991021989355c3f61078d4b4292416d37b97cb26506ca7ec99abc7863676ac7140be3a6b3e3ec24bd100aaa81c89a6207d1f9f0c05c29aaf1f2c1815ddec45b7a7bba1241e60b3a8a6b5b090c0804c542cb0fb309fe89a5beffadf267fd90326cd610bd43a08b5d941339fbc5adedab37a67e3006b4c9fadf9fcabc24b57f90c9952caf388aeb2f26145ee52ab353c495fc8b09efd011ec5d8bc315d124c0fc804cee86354c22ce2739d8624a1bd2c34309db57a593cbab53e3ab21f68ac69b700b3b8bd852d452b87ec291e1214f301e32ba9d3ef70ce2403ce3d29ef62dc0f80a580ef0bfb3a6db81ab7803ed6cebe195c96be2bf5941088a3adf57eadc7ce615045f3cf9edb95cf032575362822d93e35491716a111bfad2eae6cb6f143bd743193794e96b6854588863084ba6bd757a3a96d6e9495b974f43a3f7a6adc2f8a8e7384f515335662f87d9175b0289ff8a0071392e4a6fd3cef85e2531a8fe988a7d347e933bb074c7ddc725939f34082c3f4f59331a6d5705b1ab26cc993685e875cd8cfa5ef4e5b8839560cbf4b42132671a1f2d694def0a679c5fc3c8983ff83c8547c7087462e46e301dfa912741833e66ea91ed4f079ff0ca33dc2eb9121246ec3468746ac17c5028eb7dd8198a197ae8e12fde8aab8d2dfa75fe70f3f78b104315978c34a480b4ca4ffc2de4459c32ff31b19f30769831a1a29e1c71a81f60f9aacb40af7f226282785560dbbb98a2a1cf1a7bd34d9e4777d1672e0181bf47efaf29ed45c9e3b7549a190a12b00bcfed06ae4a354240c71e14f3781beffc46c3532e06dfd4f8c697af096cfc2fb95de9f41077901cc7b7d695280cb7284906596e1e291cc2c3f6dcf621deb5294f3e0a4ae0bb011199664e04c148b01c9efaa0c1436c4db54fbc2eaa5b8d18ac7669ad0b5a78427edcae14936014c7859034ab0531852f1e2b89fa57619793eaba5eec4d2583bc70949f944acd2ce4ebe5b5956e0d9a3d28b1e606b02ae07a00c707fb30dd7bcd3ed1fd77978c785de23a6455cdae93f615abb1c950733292438fabc4cf2dfa8975c9a5009f6d742093e457218877ecd942a132c6202e0e0c6a30aee28a3971c9b86233aa4b99e028dcdce224989c3bf1af8356f6cc68f76e4ac1c461628faf43a10342f97c4affc31256a9ba2aaad07f160cbb753b2c01104d721628609f35512851023c0fac290f3d3d7964c3bea6feb8a0ad591fcf87b6bd826b442181d5e552f5962f5a2a333f574215e3999c3ba4dc072890abcf08fe8c5ed3d5f42a47ba517cbc8ef73c9899f437d0fdf9d9911b8d8631894b680f3731d76a3d1a61a17dc7a4cbeb0b4757c558deaab05a0b0df86540a2e64587926a973bf0587af80fbda33926d0d03fd151094be28d68a249bde42a2874022a6861d3579ff4c58ce362cb030a2773ea7adff6bbaab2d5176775037c197858ff4c7d7e85372540422d1348f195b9e218c121aeafd678fc6cc2f199325ed08fd0eb0443690247c8051815c0cb71358acf71cf783d9d0d861244212595c7add28ddfa82251a7281d12f0d5bd5d08665a0bbd397242059e0e0a47e1ebadbd284057057739442fe7396f10080a67fcb4e72e08177699aee820ac3dfb86361c414978a94a1398ba14052bfa8027b26fdd2c496834970d9dd2a2ff2f72d525980217da821e6880d91b3887e9d28e9e91759faeb1fa2720490eecf040c1e6ddd21bc9c5a4f55558894b09d2f328c6832c5a3004e430a98051f05bc13b89640454676562de8ef42e193939d69b9625bc921b074d28973f426197e168fb5d3cdd4adbd00af104eaa49f6d954d52ca380f96f740071e08cf8e5d4f3200cfc089049b702d297dd8d96406469f28e49b6cedb9a026b9f914e5a9de9a74c78d7bf4d101b0796fe3cb6dab668e5e026268506b2d2f09f89f4e0ef07aca1cc92ed068c8c66f85ee1096d2295d442bee30b1ffe268d1f6b609926d126d7ba88ff248c8bafdf3497183479aaa7c87c7c9bb23563b025eef5b5832ef58f8b39901eed74fab623e03aab6992c5f7a4dc38e06a229b7ae0dde00b214a404bfbfea1fef896ac8c73bf717c668956127b2f2e889e88d2bb802ef805f872e31676880f3e3702cf099365241d87c51179168c8220885b395e633e42b001c0f733f46eeb749f6544cc31d2161119d3c5530808a382b76356da12aa822621fbada9980f637bb269b348c7b9da6284f40fef632ea15da5e4a68c315011b2566fdc06787b566b0a90276b372dd4aba63886f53c768394da6f0b92f49837f057e53e47af47412f4a9ce4815c012fd0d965224bcf8ccf886c2e0ae82c9d26f4be593be4d2fc27460d39506021537b38db294f1786077f22cf773c309d68d6892268f72b425228daa1bd3f1e9638fd052927782db00719d36a47646b5fcd1b68f1e5a28f823a08e8752b85bc3fd987edfa3e27e96e03a37317ec0b6b44f9ffe4b8c8d4711965cc2d0949660b9c800488fd733530852c0e35ccaf2f37764ba7c7f83c4cc960152657eacd7bb164be0f91a465ce3d7fd807b2b471f5ba61dc416e9eb1cb65ae0a600bac2f7b8014bd0d756c9b245e6673e8aef303af2e1647ecba5e6af0a70fa06470e8ae2a7034dc8c5c2e44b5a8a54ff50dae31dfc2100a828f4e9fd570237933ffecdc455109e33a6a715b2d7bd7660d686753155613fead1635717dab2afccf9169888666b91a3bc200568d4e100cd0c9ff94480f1baed0b2e24b7741f1178fab98abaad9b1c49aabe5049437e1efca077c5449a35260ab4fd6b6b1f0e1138ebcb8baf488fc8fa21fc61ff85e1820433db570dfaceef9cd4d5618621d6fac58aa7334ff6ff1dfc13a790ce25dbb3b7377d9fb3dd245e0c66808dc34a31fd8fcd6082dea10b8e9b545459bccc26d62ab24555d0a75fc8daca1284e9be916e81724823b2bcc13ca47f2aa6d4b61ca0bd2f9054d29575952497a4c81d3fbebb0cd34d2fc31cb071f835ee8ad1f403848b4bde93414fc6e3c543040ebfe48248702cfb4a2473ba22815c5ed65c30ef90f006946da15d364f37335488ed7c78dfb2fc4fdc4d573008f621353a8447e04ef507f9ab474f5baf225d46ce40a6e3a9449387904e3a4b8ee7b2b8a408d07e3103ac14a82dfab96f983fc62f9646b2a744c9313f89a56ab96322b29e214eb9c68a381a4eb209b02620d1c42f79daa861812925e43958d8b61116d72dab6979c7ab6cfcf71bff4d810c4bc022a72832a2a2a94cda2d6aab2714c24819b9b37e921365d9ad0c538a7d562cc1b499a2b4d723b7b201e29d0b29e9ea2821098d0a3b9cff70cdfe87eebfe32152051071e1a613d7f43c15db5ca189db8769b8f68a37bd34dd595ff6fdc02dcfc4b00dc99a90c47bb687ab7e13bf4ffad94310758aa53f5a2f45ba1abdd091fcb14180ffa1cc11d0d62a6cc424c4c24d9597b75829a24359c3431fa45298acfca303d728f6b4ea1ab36c308db08cc8b39ebdda21a3b66228110005032b70c2d67cde4d3ef639fb8a30080caeb92f55da1be5aeead160f563218dfe50a974ea74db63b4056b0104bb7b7ca90ba88b362840ac232e50a09829c5f2fed20c87d9edd835345ffa80257f366dd0cf09932911fd0f190f231ea9895f9a1b50ffdf17f8aa6cef1d5f96998f9b640f4f5cb250c54ce7033157aa49dd8a0a0ec74cb2ef4fce7551240641c22815a73a44d05f8c1864507eb53a08f89d7a69e339a8039031beb46fb1990658cc9f0059420b563c5f4b7049cb265eb96dc7558e2d3c513d03f7995fb2033b635abcbd6218d053b6137254e3ffe17d012492bbbc19fcaad51cda72f8c0c2b89c19d03d496cb5c2b74b0c59c61490e3e0d84b29af7b941700e52777b0baf15693bc1a8f67b528c441375405840079c130d4333f99cb54bee35717eb0f217373b205d4f0143262bb8f6328742129fe16f2ea1cabcb09d1918beafaa3d9bb011eecac57281305799dbc8ae4c59c8812f6d71b16384900eb22478a6cbcecf6c222fcaeee382fa03dcffc8de2b7b1b1ba145e75ec97671628f57f0ee896dd82f189179ddbb794adbdb5253b7e7dc12569e3d2321775b2b986f0627499cc800efdb0fdf6d815684f47b9a8a0bc8d4161e9ab254c957e5790ab9a8700a97d806beb874fa69d96ffb2e1eab35f17b4b3baa82f4ba8a4961af31c576577f43d0b6a3cd4ca613c676dede755960a723bf57b749741223e1b2bed121befaf3af9c43a5f516bd9c220e9752e2cd90ecf0a916f1f846a70c0e47bb3efa4dc3d797f3c42f8637cd80cd2440c48618cbe014a070d7dfa651f12986ab4c4f6408a5e6b7e1245e8e965b43ff0254a1d753ff05d8400d5128f6d9d18bf0e77db8de765037e2d9ae6329b2a3df8237bff56e386e90498b107bed4d9efaf9e42ced6f94b985062f4758ea4a2c7bd617e267551806649a337c2189fa178982a5fa423b62bb5a9053cffcf527a309a953e26026bc72bbcf82f6d1ba17f149d0c3c664a9010a3af942986feba6798d462a19fe49fc255b4c5cfdbaece7ea3842e5c94094703e5b390e1ac2fdb5d3afe281613e9ec27294a8287d11e6504e809380608ca9a197810047cafd8c83020378091522e0fb496d21c8d95038a112f5405a6d1fc5ee482f6cdeeac32ce9d8078ca603781a534849c090c411e1da4cd15427493b27860d49a0a7e903188d26b0e9eba780060273385406b6da5f9da6666edd409f559bad6d49ff3cb05b7cf718e44edd913baa3cb2c372b41fe2c123c11f0d8a9c09082d4dc468e95ef1892fea6b1c11e062f335cbcad802ef05d9e9fba1ed3a2a7589ea2e9694c4877dcb87d9d814baae555e655ecaf662745fd560993f7e017b828dbfc2aa782a3fdf6bad00dbc3c148862dda327855b594b767b7f1a07b1db536fea5ace523eefdf4bb76628aa8a0f5a49f14fce3a4baa10a1a35db9f9d6af7f7bc0747d39366cd20e87c4ce324b2aa77cad6aa04cc64ca0124eaf1c20206080d6d47692a8c11bc29203340770b9e3690c114bf2e87a7c21988e3057a5182aeda35e62605f9a096680a611e88989f460409b6cc07cadeaeee1ffda3c6579028024f2ba24e8a4effec7c6caacf6137eab2dad1caac0672b6449ba8a763e1bb945c08cddfdcfb58a945c2041b3472 Please enter the password to view the content.","categories":[{"name":"Life","slug":"Life","permalink":"https://yncbearz.github.io/categories/Life/"}],"tags":[{"name":"With TM","slug":"With-TM","permalink":"https://yncbearz.github.io/tags/With-TM/"}]},{"title":"Problem Solving","slug":"Problem-Solving","date":"2023-04-27T01:35:42.000Z","updated":"2025-05-30T08:15:23.252Z","comments":true,"path":"2023/04/27/Problem-Solving/","permalink":"https://yncbearz.github.io/2023/04/27/Problem-Solving/","excerpt":"Problem-Solving","text":"What is a problem?Problem &#x3D; Gap between Expectation and Reality How to understand a problem? Name Size Guideline Fishbone (問題、大分類、小分類) Large, Normal Mind Map Medium, Normal 5 Why (逐步問出背後的深層原因) Small, Urgent 5W1H Small, Very Urgent How to generate countermeasures?Brain Storming Killing Words:Don’t, Can’t, Not Able To, Impossible, Ridicules, Stupid, Bad idea, No good Rephrase to:Yes …. And….. How to select countermeasures?Pros vs ConsDecision Making Models Authority Delegation Consensus (共識決策法，所有人都同意) Consent (共識決策法，沒有人強烈反對) Range Voting Majority Voting (絕對多數) Plurality Voting (相對多數) Random Advice Process Impact VS Effort Matrix (or Two Factor Matrix) How to write a problem statement?Vision Expectation What would world like if we solve problem Reality Current State How is the situation and what are the consequence Action What are the countermeasure and benefit to the user Keep SNT in the mindProcess Define Problem Understand Problem Generate Countermeasures Select Countermeasure Decide Problem Statement Check Progress (References) QBQ！問題背後的問題(30萬冊紀念版) 你想通了嗎？解決問題之前，你該思考的6件事 ʕ •ᴥ•ʔ：上完內訓後覺得很有用的課程，順手把它記錄下來！","categories":[{"name":"Other","slug":"Other","permalink":"https://yncbearz.github.io/categories/Other/"}],"tags":[]},{"title":"欸！你知道三層式架構嗎？","slug":"Three-Tier-Architecture","date":"2023-04-05T08:03:20.000Z","updated":"2025-05-30T08:15:23.256Z","comments":true,"path":"2023/04/05/Three-Tier-Architecture/","permalink":"https://yncbearz.github.io/2023/04/05/Three-Tier-Architecture/","excerpt":"Three-Tier-Architecture","text":"Three-Tier Architecture當你在瀏覽網頁時，其實是在跟三個不同層次組成的系統進行互動。這個系統就是 Web 的三層式架構： Presentation Layer (View, Middleware, Controller, …) Application Layer (Service, Domain Model, …) Data Access Layer (Repository, Proxy, Dao, Client…) 由於在討論這些架構時，大家使用的名稱常略有不同，下面列出其職責。 Controller職責： Routing 解析 (Http, gRPC, …) 驗證 Request (確保格式、權限等是正確的) 將 Request 轉成 DTO，交給 Service 處理 依據 Service 回傳的 Domain Model，準備 Response Exception 處理 Cache 管理 Middleware職責： Global Exception Handler Log Handler Validator Service職責： Transaction 處理 (begin, commit, rollback) 調用 Domain Model (包含從 Repository 取得、自己 Construct 等) 讓 Domain Model 彼此去互動 資料驗證 (確保其合法性、完整性等) Repository &#x2F; Proxy職責： 處理 DB Connection 處理外部 API 呼叫 (Signature, Url, …) 從資料來源檢索並轉換成 Domain Model 進或出會是 Domain Model 命名參照 Domain Model，跟 table name 只是剛好撞名 內含數個 Dao、Client，呼叫後將各個結果組合成 Domain Model Dao &#x2F; Client職責： Dao 命名通常 1-1 mapping table，處理與 DB 的互動，但要留意效能問題，適時使用 join 語法調校 Client 處理 api 的 request&#x2F;response，回傳原始值給 Repository &#x2F; Proxy 補充Simple Design Pass all tests Reveals intention No duplication Fewest elements ʕ •ᴥ•ʔ：這是目前與 Erwin 討論及請教 91 後的理解，未來有可能因開發經驗的增加或團隊組成而再發生改變。 [2024-08-30 更新]跟 James 討論後，新增了 Client 架構，角色類似於 Dao。跟 Kyo 討論時，有提到使用 Dao 的效能問題。","categories":[{"name":"Programming","slug":"Programming","permalink":"https://yncbearz.github.io/categories/Programming/"}],"tags":[{"name":"Note","slug":"Note","permalink":"https://yncbearz.github.io/tags/Note/"}]},{"title":"Front End Design Note","slug":"Front-End-Design-Note","date":"2023-02-20T02:07:30.000Z","updated":"2025-05-30T08:15:23.243Z","comments":true,"path":"2023/02/20/Front-End-Design-Note/","permalink":"https://yncbearz.github.io/2023/02/20/Front-End-Design-Note/","excerpt":"Front-End-Design-Note","text":"c6651e4bcda59a4397bcdc1be7da6fb5f6cd3b44e6519c5f5998fbf3afff026f693c86a610b819c6183f3f1f233d3537dcf27e15e071fc4080953fc7c34fac35b5709ddb14dbc3f389e96279aed3cfabf4277e368f0899783ef2f9709a3759233af08850ae190abdd141ed57c3b3c8647f0939228d52fbd9d9cd3ab58acb2916701ab100ee97f08708f3aa00d76edcd08f86fdce9e01a299c0b1dc71f866631cc5d07a8c6e1eff12256f62b4fa413e873067b3f57813f1f6645a604066d2e68453961447781a98d3d851e37b58b97b686880d78452da52dbf7ac7beadbfbc16f9ada7ad1ad7437ecdc2bd62332c2298c806020d52fe9002ba5beb0f379e1172695c51ff1002d673d90ac74612293c3f5f0f8c2d8b29c74b9760dfa8adbb7f004cecdbb181e9d8cb00edfb898dc76a3c89f60eae77d876feb7982659a77a4c573087c6f45133298d5ae0d4ec89a17086adc09721cc2a77436adb2af2e2121c7dbc8fa54d4c212e4bb193eb26aff4726b2108594b2622a4154a140acbdcfa41f0f696957ff0efab9fe52f19c2fc5e3fda8b235579a2bc77db74773f3e189dc37726610339543bf00d9c98caf6dde627966a4d95d655c3fbf34f416dc3e5ac1e0ad621fdd7d26ac4f71ccade48c9b7063e01f2cae969834ea002e81462493e77007988c880fa5b41cf2088a275b210562a023e89c32b57e42973e24106aa294eaa96b41c2c67cc518cf04a7dcf5a8be7d3b8701a41a6a81fe116b29c5a56d9fadcdf702180308871a07fe1874f434e3939c65868a1a84daf1d58ea8d16c3a628b287eeb420c32fc618083b116f0bac87ceaffdebf03f31b815812665b8e184498e19ada71d25702b61f202a27369fd94f6652f4810547aff90be420305b974cf93bbc019171d67a395b9c8099f39e00be11560d05955ea36284a97a321e4cdbce8b2330aa3e8186907aecf5b2887c2cc05852a392d08785cbad45fe27fc642cbf8af7fbf91f56f9f729e8104a7b98ec6ab1d3a6d28c8b23d1727d31dd72c9715c83b6ecfb8cd72f90dcf88969290ac180ba66b0f1ed3cd725eef4076d63a935c57f10ede614514eb8fc644339415097d3ac3fcf5256d69a74e8ff0db27123117ab4817a24e66c2627009ede810d52a1200d542b0db56982a8c6362ee5b703b5886f65d5bb4e9d43691c146b2186425d368201f227491ab14a38daab30f6017c93a46e3e1841df7c76c87f3d37fd7f1305add1559bbc23c8d05b20021f2173957818bff8a1f18ad35f8e9e9d41536f971578c145102659e5999abb1224e9d444a31f99dbc1f47c6342e872566527844a1e0023d97dc496420aabf4a1e70b205cf7a9f8fd2b5f49452f92c26f85e2d9b2cdb4e51d214ae69df0f0eb0b1101d67a0104eca61de7bb5a397523694f7bb7a539fdf807c5376b1a95ec088c10ed5b075cb324677e265c5ae3f13a561689739e07359c175134827fa1e65baf32a2c51a2b50af979946b3ac851719d36ac9e5b807d3086772a6fc55b38127139893748a289aa5bcbfd9cd92574e3dec921e6dcb786dae59702d05c7f012fe86dcadbe5a1dbe43df05cba264b160883cf370f5a571a72f5e5bc859ff6525aea870b83dfee1ea36568def680c89f71ad61379429adc13a4a4dfe975b4d2e6a8636b9e6456068fa2b65a57512af83c29483a05f4e2c7dd464795e94ff5a22b6edc266e2eed0da709f82a03174e9fe82e20428cfb771dedcd0e61a215154684f3fd58b38012408aee4e063ddb473aea474d15e959c2a504437f664e67ebc89044e4d83015d58745fd3989dcbff045c9d61dffa13fb613754a8ccba66ba961f8c29b0aee23f776eeb68c1bbd5b333a85a1a3a21696b46b910d16c793703433bf45c5b9bef3af29702ce3abac8fef10fb9cab8c88eb10efa14e66ce2183c79093522e8a1e8bb016d547bac377363fddb18647b064eb46c5755c4f1de20464168c99aa5b441f7bbc323c9d74b41f3532d0e66f36f395d335239a66a3ad551a489bb3d8d85f41f21e81ff23f1257abbffc458ab1b93cfdff50d18e89a9555d3cda18dd71547b37e39c6768d7d61496620d9f760f167142fdf75f2ffab818d4dbfbb89970705fa57d510394b9e5a411cb7cc211ed0104f1ce32a14cef2176a04dc050241bf2fba0ab24ebf56029b04a39f0aa5321ba8cabbfa7cf5a585c524b820479576a2ba7bcf8069ba8fe4bf1db0d598bbf09c4af676ebf255e5569ac91197ea0423945820e23bcdc303abb51e018897ef40290468613cbe684e6c215d28b355923eb5f7bd8149f43481d3bd20af25cd21b45fc3fa82df892bcad51a895c120c881e395f991ebe966c438e728a00d40a25ec1a463c0bb761d056f0cd230482166f4d99759f5e6a50bc6f59f0692a25359e9675c3ebe590e11795d72038c5ec60e1f6b8d456aadd0f950164275920b29dec6912deb4ed11aa9e3c6f2ebda8d8ffacef011d061d85353ba3b8268ec47093ba73a6afb4ef299755c1b46a578e1756b3f1ea98d383f8741c7210c6d482560839de4a15967609afd35497ab9309a03cb87e3954fdc52801bed6eb7571923c475ad5cb3027f2b3cda751ce7e8ad11a0526ae19d967152481c5ef43181960397e19f2dc387f8370e1e61d31555439ea8908ca2ebf4669194cc8aaaee8feef10a88fae341b66ea065c181785379bcd1e22e2dc4688bc7175a9bdc22f74be218d7e1514c442558964d4e7c07dfe92e1da05665af38249dfd156ce1991e296b468e810929977e59a88c2f8102ca1e4241f61651fabceb73ea19c4cd5e931d08eac343781c296653d9780810d21ecebd24dcd40cc397fca766dc1f7084d41d1b8da01a1c5bd3f676b8d588c671f276519f2f096567db5e860433c4a0651a039a7f57e4cecb5ec638cdac441193fd31750bf3542a189821294fa59f2f90cffe7545997d93cdb8f83ff786df3160009f2da3202d3b2d0ca9c4930881d026b6b6693e902d30dbede98de7747266145cff5c4a5fa737995540f169809d8b249ad9d7cacf0c3be3e964ebea9fd1c8b90a7d565a10f81a4319abd6362759137330d222610463ea1162a1201174b3e6a8c27c5eb07174d6451b2c9ca43daec7189a266a57972080e9929d36470e3b20220d146be5ba596d4b5bd1c8c00bf3fd5ac611398054a5b029813724451d87efe31a611097fe9780704884c9768813f9239501b9faa8adc1c71002e69f11802ff53b9269e9d1c636d48e12ba0d60ab4366d08862b8f00f14e292804b9643fa4da00c162829f27aec53b5ef68b8e365165e79fe03d4d95044e242645d9bd1eefd52baf4244d6b7222ae2cd9d05da96bed1a39dddcd88e76c988b3ef8815b4225bcd94cadb6fd00c73290f4640682e7bc175ae60f7a259acdfdb6fddbf1519aa0addba49f86d88a7c1e298bdf862f9b1e8c9cf1a5d561b34ccc796e42441b8951b6e5c9c7945f170d2fc854854ad017381d2dc076b524009a39944023b449a2a6c9a3edc47b83d1b9ada7d463ef33119db40f83e144739a5779a67bae346f282c771bf8c7da8c78d2a818e88f4000a787042be97bf43fc93c441e07169848458d3fa700f5503cc460a2075813ceb977273cfeff5a9d0ff2620d442b5d949cd1cd222e2184982e249d6d693cdb0e14b0699564da1f41651670bca04e2fe552d3a6183da7af9e0fe265067267a738683829b3784a404544e09a554972abce0eee493a1c38a008d922676a1844eacd1007041bea725555643ed874210d24856b12cf56879a86299abd10fefbf78447a664c7b8f369d2f019692a039e3908c72850eba4b63909b11d3c405b87d52a2f430c244ab194dccac27340691bec90f2ae4619ca2e837372f4c7970c5df2fe971c20d9bc4bbbf73fca7a7c8a5cde97f77b9012ebdc6bcf2e2487f3933212bb0e0c272cfa00254e4a1e674eed50a1616a5bc9570b88e4849fb2f83435a57e9a2d1f5706e695a33dcfd8c6dfa26c791701ce2185d4677718c8cbb483fa52962a0e4f509f0242e44a7f857830c6a52fd9f87080b8058c49286e8c46bd4f114a3e55052c9ea9ee3eded58ddcde3d4da4f2a961c8b2a55fe1183e1b8066862d5e750af0a2fc8399af2d0e4e0d07b975a74beeea4d717aa12597d233e3ee6b28992ccf0d1d38d7c4aa8ec1596ea1db1cc9fcf39c231b9b2ffe1d787d091aca07ce19c636fc10f0cdae0db826036ec3368a17f46cdfb140006409a01c6a4d21a758bf5e91b2befe4c0b29cd3e3ebc1a9f2c8b2b651209420d0565999f6890c44b62aff5498b171db26b29e9b463204265c899d971bba110961d0a63b3eca2d0857571d6d86492d9879a9fd3afa4c47bbb062175a84122bfd543aafe5f5c5bb1a0158eb154f157a521b50613c979499207f4adabc120ada6b9f4c30bb26ae30ce46c6e425aaf7024de69311ed6152169c58f230b189770942b56c0fe710fa6238ae0d697ac96e5a5922f253522d55676d5086c395d4a352486c14c87a3970efcbb157096067d786367d081e8ad6a07a6162b14201d9ee6e3964bf5f713e3037a76bda1fc8f71eb2d660a898ec42edc927bed12e16832f974bf7ad1435030e35f1ad9807de950e38e63ddaeeacf9d10f916addca871b595e99b8d97b3c7ce5cf5bcaba3e072d14e304ad318a41abbd5f6b662780c1a6b51bababc33b644b19ce0d3b143f35813c8e94318b3f26b59642f3c17ab9e027a8401dd77317f4e2c7b956a6f635ad671c5353b447ae3402e24f5c95267bbaa2df91e05f6ae82859269b58143d9ad2a0ef8c05675c96d47b612fcb3bc0d58fd0e9ac073ff1b20aafd94ae266b43eb5a7ee46027bf3aa54cd7298d9eb3cd55e517b0ba1a58aeea7545175229811fda80b1217f922eb180c76da2071011094e6000499009e003e0615204950d318097c7487e0c1d41752dd80b60ec2c563bb34a3f546e6213f4f7b13a3ef7ae76878bfceb439c89e4dc4770c6dc62dff7446bd37e1eb311877dbc701e82c44f3d8fc035f7af4670d8230a13a348dac723c12873f1285936c0e869dec90ba37a9d61c73063ed4740cc0fd467812c0b9a29b7615d64d432d2f492b381d7366db606406d1e3d30861d25c9735ffe714f8b677a25030f9c3317f07371adf355034f01015ea1a3f984e238e764ecca9dae5dc577eb442e5716de8fb4fd8d0e7523fab96d3e638d25f66af1fa7ca3b06c612434a082df53677833baef9049306280063cd4f948c61f8d57d5251fd481b4f5b9fb6a28c6709b8701f612bbcbe36dd7d2dd6f43ecc3a903b503c0dd07ff774fb96c3637431300af92e4351e291bbfa28b2d1fdacc7ed4806d47d8d62378a148117420b0393f25cc9855902ec6568f6a90b44820d47bc446c2dfd105d1c48fb1d17c302f279a87045c3c005caa54204fcec2f90940ca97bda9c1678a65b1746435c718980ba23b250452cdff6654ae02122aa8bc64ed6e5ea9a11f7c27c15fd7e61e2094d5d0a98d630b4db94d36465d8976e63a36d072352c9694b306f660b62566262f8aec07742c8c9f8a9e091416f5e499a1e34079dfbc17bc98089c39766a62581fe9a293a155ad06a16b7a386e2ade9a4525a4195c467fb5ba1b75c49529fbe6ac465236e9dc199a202ba6cb7f576b82dfbcc58e06358c6103fad163975a02f221a1ee27a25ca86c949ff6a953ac0a7bd728dbc68a7a7825e8f0b51e5bdcc9b77fdca23634d621f8792341bec4b06d53366a19fae7db880cd941430a7f0a0502315069577e2365b9a105b8303aa3a93056c5862649be5b40b9d4ac98c77db6cdbaf969c4e19f9486e6624f25b1c652471e931529c56c67594b9c6b386d4e1267c5ea5f4b68fd66782f3761f9c7867936891ccdba7f7872d5b8b4f7e962fb38be9c1132171fcdcff04d5d76238fc8a4bf8b6ae86139e22642f042b289bb26b4b89e67debec9153226073d129a4baee6011b47664aea302022d352a9e506a6ecc2aacd25bd5dd12b8a9ad0ee6bd852eece89d785a99d1e7c7323f1ccf0aa7d9dfe4099cef87fbc8dba6745e8d525ecc0532ac3331510b89c035b3dfa27a196cce0f0ae7508ada7f6d21c39956bacfea4fd457ac4d0cf5a4aae6ee67eae7aa2fccdf5bb39c508766057efb98477c6a40a655c2f23d4b8b5ce71e730a231fd7b9d908df9446be320275fc299c887b612c2946ec866c0488c681cd99b31696d41b40c4e5dbab9d60d3de79c38ab27fff7d567119bdc39a0a1f8ff9804206fdbb40eec36f3a4960a6218e714a57681681df52714d8aa6b401508166e674790234610ad7c44bd9f453ef1769b2fe3f51d5771eaae447d66652af0f940e49912d2a57901aa11d9a0d3eed087777979ac3439642fb8cdd18163824d1f19bddfed4651bf2aa3fec9b2bc55214ef1d686bdb66f17a939127b17b4611b7c37c18e02e73d053dd09e32b45b6de259cf4deb7ee9ed961dfef8500d7919d795b70c212a86979665d87bc5b7d3598bfe682a02f86bcd0d499e30ede29f2aae1239e653c6d2dc5a1f7b073aeb36dcbb5246c1f48eac850a8c72a473c74f9e0cab6ead214871bdfba83596fdf756e487fe441f36685a60672151d79ce182551936601872987b18848446dd7f6fe8c2d85df5bb1e6ce38fc5bbf401753435cf86abd931d4758f220970916eae623336d3f597b4a676b89982148dfb5e0e07617d6a66cf0adf7a84fa12a480ffb72e41f1cbb155f7f75f662ca409c9b5e732991294af0b73ab65c8c27594210b1fc4eb5edd93912e58b292faebab26a98b65fe57d2bb2c0805af86583a7f4e5995aed7cee819b169bbff4243451631931de71afedaae3b09f1609d26ab3c7b6b42990dad663c49f692e35e78a3d33b40375b5bf7021459e7128f67f551305c72165c0079622d547d3f91b1ae21b0d9ab79a36fb0f41de5049d16a9ff67c187374c83a48da5864e6cc597db8492c8cf36dd54e51d277644bfcbb75c88f3f728acd5ee2d77053fc2a98a2b2a1fd93223ca7063793ff43098796c9687b242386f553913d09dd35f2ecd2b3e9b5d9ea3fa019b0b81014213588babd5fb5122959478559e975ebfdf9c5f04dedc1b7f810e7eccff4a21873912abf1cf491be59b154828767e762bdb5d307e9473ac835657681583d8e8b68adbe35565de04490c9eab61cf88ae6602be976fbd1010c82680c4d22b57f0fbcb46c09a4eb1a6d7e63ad7962a5e6438fad6dd37566dfb0226b9d4ee73f24c4d99fe696a1860beb5a1fd48e9a70473d05b8342690e83a48c0fe5a143f854ec590d7567988d617d6db154202059c4e3064d1ce6204556c4b500c3365a7a7b697f05da2d4afb382df8ccfcc0edfab61069e57fcc9e94c32d585f00956bf80348bdf98136e5490e8d7cce8535932ba5418406d827548cca782c7ecee701d3a9ed9c1a3eaeac35767dd12e64441a25c1d4c0b4e9987b8dfc1eb9037b2186fe9df1a6a142be3b4db400fe505928880e77bbad55bbf6bb0aea65ddbc2112a9b42f3d1b798055c7805e4e089b80894c320f8382a8d4280c4b146a4b66f78f83eaa84a7ddf66d8bbf129ac1543e722bc2595a7f7c52ec6e061733664851a0e9344f268e2961ba7d30e050c4869603c8e844b7e15c94698e4db81f39a60e967ab6ab0789f8d3ba84fc3356eeafac3d7b545dc5bff1820ff0ea043a2ebd5fc2c74be62d3a9b70d1dd8d5c78ee3fe7eb3f3ace25459ce46e808c150bf88d45bad9682394241d6d1b013531104caa9441e566ee5699fe3b039895fa21425a60d5f2feab9f17a1d7eec63debbcbd8b1c4707d9e8859f97324218c7616ab50727c6b389b01f92ffa9d0b930e3f3071d515d577d40ea54a6967ffb8e42d49da4603926a513601ea81617a1b40f1ac25cc0d1e554f1f8e1a29dad1f9906986144290dd88a4f3389af766a2b663852927dc6ad9377780aea646f05beed6add3fdbff439f73330f6d3d5cfc910c89d84dc848b27ff81485eae133cd48d3f71beeb4410fe1195d2b848f86515d15ff42be741b367b9a171ee09719e190053b9881a9d1203e87672d4ef0ba8d7db1195a89c0852fe057c8ed8313ec03f3dceff3cdc75048bc74839a75f2de5a5930f3b241afb57766bd5aaa8d98ae979682d0000ea8f95cfba572b4a638924df7db44138aa5dac27bb3f18e838d2cb460bedeeaff051d420b560a8ca704cf1b470db5a8b46cbcd430a0597ff273ce9eefb2be02d00a8c60bc1d30a79e4e0f6a040d43dfabe6076eb40353203c9cb42c94a4dc297458abb25dba335dc13e279c74b8702b6bfb8045b1391969664b16ad0fd53b3a5e611e1b322af0e6b74d4acc806724902e88cba8b7d3e9a9f6757037bd4bc840e3fc68aa315afa3189a9e8c4661fe1707c4c3a46eb7c4f5dae6c5e34f2e4f944a2e00aa902010d0ce945ef765fcd3274277d3eac00dceeefffd53d07cd25f4499cb4898f29c1fa75fc50ced83d74cfa193e2596c6f0e0baf2de52570001f950503367ebe4756ff4a2c20abe46cec8b6e20f2a3b4ae05bbb849919dc1ebdcb69b95d7a9cb21b777c32846563706402c182a4f98b2e3aac8f8b7fb758ebf93a171afefd7be94c6e4def85792e090d38e860257336fd42d189a952b49ee68f4ad05204603e95968296604d457fdc738c4895257b16884e105bd1cfb9f9fdc98135c9e4051009cd802facd632f70bb9b03167e4a2c2f7dceee959e8c1c0899d4a24765bcb92d08d8e2fddd7b444edab5e8df328914e2fbeec790c520f17aedb7ec4ab1f7f12aff6d07d619a8dadb8650e83fc9d01271e9721edb7c322376f8bca54f51cecfe52010435e49f29dd61cd67fed7920e8fdbdefbebe3a5e67c4dd7147b935daa2bf52f50545b269aba7159604b8984cce4b2d1b1ba9cc119a46d7687ae18b5691f22143d90115f0ece158208dabffa863dae039d148b546784f36d7f190767eb38308964933bc06b271861ff4a1d73908d8534e875c24705f97be800757c56080043926ed00e9ee5ebf03b7b3fc73b71a90fc0ab08b82cffdf3f50d7e978feba9095280665698189f2dd90087ac186cd27e2e78347adde68135c4ef27b94463df059ca29f11de8f212f069c4b56bf856dafb5364114d61b7361c6db207198d9e8f4a4ca9d4ded126c63650db4ca6561260731d464a04fda58cd605439856d5d754bc31e446bbc197049afca415a0216722f8082caadbb13ced6b5ea05b1b15d85f715f1e5df184b71b61c0a0e5c23c4e237a99e570430e173aafa719488bc0d18a31c1449d9abcd3c02e772227351c9bcb2040153f989fbc5f48551384fdcb956bf1f101278bbeec46ee0f280de2d7727405c25df4e1f8c3e183115d07c0256d5bc0d8a9ddc67bf49df7b49f684d12d559c2484d26dda7de5fe718f67d91dda9379d2281390966db0466391663e904929c0c27fbeb4668e61496b3b3c5d163b95d1bfbae8ae12c5c654df01c0854227dc003beb973720af6aafd400beaeb167a16ddc492523089f25064f776e2b299af3d609dbe3ca925efb0fd5dd7b7a1f811af2bf70c149475f8e1fe82469ec9406cab5ca5ef9b9721a00671bffd749a75bb1799294fdd302746b4bebd1b1c5f3f57445fadba5af7387b71ac9c4e870c9a04cbd6ec32b9f8590a293f816dbfd7edf736a933afb4d8bd342d3c38dfef9e29ff9a7cf176355e89fe3714287e1c625e37c8e9b568d6fa1c8c168a54e62bbd7a90b793f4c366d652f1581d59dde013aa02bd8a5e10e1ff55e308f0f563ab79ee144a59c3a9adee1329e2a0bb85fc2dbe873420734a3f031547681bab4d659a178bf08105cb8cc3c00e04d8e876552d01b469ea2f17f3305a60af101f52eb611a68bec16f473100a20a30842f2121faa3980127b67cec012fcb250c870d1d521c10f299d7c78a893a920a0c07b0fae3bf30e0f30638a2ff30f0ba3d0d3a0c58c858ba4b886fab8f01ba12135850e7296014a057d9a6ddead938da8956e26fc899ef1da4e90bae4ee05130f4921214c7b2002a994d6a159a4b4a6ec40c7adb2fd4ffbf50f1ffb6f779d2d75a458e1de3ca1e55d875c0268f3bddf9f9eb95e3d083ce7754180c0aa8787a358da7dae765106a52a609ec2b64c5c8b6d23209fe9c3fe109f4ea791ad84f140d772dbdb3a26a7419517cdc920113449be36d27d5617ca57416e2f32c89cdc58ea4ae5bd4114d18a9b1449c26b92cfabf69d6be2d8be832913c928c51e6b03b733e09ba27751ae1fced5d04c9f0a6d5e5325c7ef450a52b39a3cadec61b40607e9477e547709528e52b43004d4ddbea5b4b91b07894fcdea536408a93e1ac1c063b94608b251bc1d91e18c1f495dae97feffe533a72c89f778a21c3821abeb9308dfaa45b9374dc641e89fa69de57d01e65f3fe6344628065dfccb33fe4eafa1f237d0e89c6540a31746fa8d03dfc58e44affffbcc5eb5ce56e7a6b30e161b1ddebf26e2228815a1e6e0b0a3950157f1ca78399b487405b21f1cdf2b3a5379790e01296905d1c25d5b5035322c05b379e1464ac63401762b20486183103231ed5cc4c9608fdf6af30aafcb5ed805d0d3f017352dab8f8af1fb336a8fb74572ce3749bcc32d08565a3124febc4f6541bdb6aa1388180a7f9b29d3f666dc8db5a804267f42fd9f5245df468f2adfd97d20c1c81908c4ba4dfe72c0a439e680b6074c983afa5d47df93cb10401189ccb92f3bc0670f8525df36e1a5a3b8e47036f4bc57e9827f17cb3de5f97ddf4a9fa4f582d8508513dac4451ae8d6d42c3fce6a413c6b1f09ba959d9810d560a01a246a2938a3b4f58b06bb1f2aee94f6e82d6e7f6f3222da74489bdf85abcbd646850c8f195e17842e5b20bf26cc3784baaaf14f16f46a4822fe79bbe55ec8ec1e6be8a1aaa8b8da485e659ca073164fdb0761d0f8736b18dc8f3e7e8fb153b218946c9bde2d56585de308565528ebfb67c8e2b050d4dc663b8fb21bdafa7a5aba41ce05206cd10f7134644fa698ff46e66899e9d3b02a51c61015959bf0f994ce36ff9ac368f22d8c4c519b7854b70c04cb9e81339cbe2e69b513756935a6fb3736c681553fbca490c2992a5ba3917f650b3f9408a11d966b835ef0118bc8ba845d5752b2a5e9b830158f20fe2205d87746f7494638b273da889f8856453a05725436877a41fff2bd490817510c109ff54b3a2712afbec638c5189d59e1c6317ae768424e6d0553817136668cd6d878cbe76bd1fd406351e4816d947b36b15c933af3774088f9a02deb8024e683d4baeecd7e279ae38250f08f90963b4d2724fb320853bed0365f60ff493cca122ff0151e738faa56d71fba34bad422baf7adf608805c4336163dcd89e795bf02b1bbf54dfbff5e256af0195ac5d44273701952b7e3cefb671c656c64f863c585d7b4638c6dd18414741946d45b925a239851fb47549e29923eea9fd1534a3b8436c58cc263eb47e3af8b286bad12b6490093f4282ee9ed21f58acc49659ad193569e664db48e1ba22f8e6763bc363ca4260481203282260c5e004920e67787d6de6b07ce05c0202ff0378d88f8fdbba4c87a207d7fb706567b98c458ddb60782052e57990870be47429815869e44a4ce03602c044b41322642cfe0ff41ae22bdf4ece14601a43f0007f63574aa55cde0ffc5594861c3fae1c42f48236aea88cb2cc95a8a10b5e59aad671398bf90b9a7dc99700dd47249e08e1ee3fe1647a886f59d7419d217a30d452dfeaf3298ba1e303572213cc6ceaf33f11eb74315f4c54a95e346f9f206d1ea60350c0d67c7fcce8ee2bbf8ed5a416afe89e21acf197fcdd43bc8737b4ccddf6dd655e395b11e8233f00db73065ca8299243358faf3c7f604a788c5872ef03ead2ade1bd8ec8eed51dfc9b823a3a8ab665903b745ae868caeb79f8e867319f65d50b1075a49853826a4bd766438193052664fc14d947e98f81011487246e382ddbd8bd4b59dc5810bdd8d50b57dc62beb7280df8b83d31055a2147b18298ecc64331bc41fcaba2ceaf1dce5ad4c404b284e7ae84865129a7fd2cf8f527d56eb750cb3710d5eb7bedb1d179bc497e81784aba0d5278f7e189d8680ec0450cb0d3c00dab848af890d07df63ee15bafd68c37277188e72b2544864f7e7e74b4a61cbfd208616ab95a30746fcdc75e867dd9a659c4618332356475d7095359b0a22c2a910f543ec03a4de639226693c76c90d07ad10c72975317aa0022e67a0e062892a91e1db84386b688bad2f7bd0c20dcbaf78ff2533c9665f21c1074fa4629253fd5978620f24c88c08560b5ef02c599664c9dcbd6dd886b44ce03b726bffcf6cd14df9553e29103cda97e7456ebda6dc58d36d72fbc7b6a8852add451d1b4a41217a24b502ef5aa64df8b61a957e716ab35fb7ab52cdfdf0d5a2e92646c76e1f34653a5873e205b6aedb917cc8ce758e0ff4bed7d6712384c2b74c17342dc3e230e5426e786272e93d07a493cbe9e3bc7650d983fa8699ae479dae820233cea5421a681c49b79c75b84aea7de0254bbcadeddd22afac2bf6b4b2b9f973da76b390edfdb6f2bbe79e7b4d22488dfff9f96b128510c9a8575eb8df88af1f117b8885e2788501f955b6ad65099f19b44a5ca856263990f02d51dc08178c07558aba0d1eff11e795eb60cf6a967a5e41bfebb6bfbaa95c4887c09cdc1cdad09c715b12a16127be18b4fa2c23e837b018f2c881270e76a55761e57db6e5a9b869394bd96ca828d595c145c5ca5754dbf83d3c5879f30817de8eb2b76e547bb1bdd11decfbb222fc06d23df95cc5bdf343a855f4e5c97ea8c12c2fda1db155eae690d8af55677f1d1ce6324720331182c0e0c53e77e0899378a7321a1d3afec367b6a7ba17c7531f99022b66d9b0435e83f9db77c355923fec741366a02fc7145cfefc26f2259d9f367225ebeffe0bb2a2659e78ef31b51cc83f1903d335cbdc8c72af102e8633a451cded5d1e1015b1da9bf512b6e45f1da4eacfc51d978ad009ec2f2136c4a639c94b210bf2f0d65836b0691e2c4c53c04bd689d17a494dce0ec7d502d8ac4d9a9690b60ebbe0435d4f48f0d0460486209dcf598160adabc406ac89ba10d8ac3ff6d2a3de2275191a47d3fe4f23c6387b59a80401323a5e7055fe2a8303cba2e76f4b4be49e845eb8f29e1ae7abc9b8189700258c40034875f7484cda03e3dcef01e4b8dec84a8e158dd9e1f9327794d202fd0c2a5afbcb62143d0452fe9a14d66206dadbd27da1decc813005e7e455eb89938b478dd6f7844a155f0c59c41083a377c15d7c2fbdc8c7f5fd1cb3a6730c341c4b32141585a3b5dbe710693a137832e5c93b96845a22fd4918f3158ee955182b44cf0e76d552fbf568cbb69d20581bccadce37f7800b39ca5416c50a8633103a9186388b439a92e20f1820c245278f26dac73a1a23252135be35cbc332899df77111e31f6023a5fd0199318eabf1e6fcacd575883b00ba26e2848b06d0456083ec46f3bac07e9c5770215b9bb657ca9c509faad0fce42009309053a70701d6bc471bd3c1a7346ba9dc1b7d1dc633f4d4484f8cd3093472732f23f7eb559f5862efab5a0dff80b68ee3770bb0f25882e218d49b217d64bcd2e569bd067d48abe7c020d8b2fc4fd0a96ff5d511f9e32d8c9f133ef367c03570de8a95242affd40de9681350a44decb6c36f9c1d92cc8540e20bc4d5d6511d6b3558ea23d017b85a10602cd83d45b214a093d0cc3d1996aaf683fd6f6f69b1db37f598e6107fdced61585c282021ff1c8d96d474948565441d716f0e069062614e59d57353c7397b556c816967e916f22483f07a68d98c0ddd717a265fa7c95790488332948c1ac152c1a883890b65cad5fe219bdfc553f532fca3ae0477428b78898cd96d8bf84be6fda7cfac482e06d4cd96a2bba3312be50467223dc8ad5305487d75ab7aa99ac8800bc728549c54d9d5e06ecdd897c10dbe612c7c7096673387c825637c5afaaf7c702f758a8e63b1d8eaa81e0beb1fbd9da82bd168bd36e837ed91deb0afbbc6dcff1a27ae1ba00f479c81c7870d151c82f7bb40df73806cbaad6ac9ffba5f4efef1077b4d77cc95e6ca33d218462bbed6bd8a571c2b6b2d742c4a9c4fbf2f34008276b7dda62eeb04a592968b5fae466b4da16a79c7e6cdf52a07d9abd8006137e24716f19608a627811f8e7dcaebd6d17422181c0fafafb9a7d286ab9174d569b14c145d468a13d468367b815a508d4ab93319869224ee3168875d29cc838921cfe784ea7aa26ac81bb8cb771b28fddc01feb20661087e04c1288f6633080e478d811ef47d0e5493ed64c2cbae654806c2f87bcb60f0ea5a987f242501108048d99c6f8ffaee712b97be9db23d7d154499dd915dcabf6537788e9550b75e338df004ac2b8f629872c5ac88f05b9a5f735dcca23a07c90ff51302bb6ccf1d0738c1c4fcd872b68444cac8802965200e0b2f051bf07cdeda6c65573b5a746fd98c10e74cefb416fdb5a12c7699ce14e13577620eb25aa1106ab3950545d1cbba82cccd737a6c1258c36df9642c6346c34bb6d0fc576388a70397ca123a57beb275ed15483e9d9ff85a5b09dfc92911f9ed59a1d67f5220f1b5b249263d3b4eef1464519d350f82d7f39bfcfa9c85c8604dace983bde872862bd5896c94b64023e13c2fef1553f390f7435633c92e3b0eec09eb27b11ec04b6764a944e7fba078a1b2f73e5c7da7a29d2bde78a63338cbcc7cdb63c4d57d4b426e6060f53830f7b981799f142df692222491cfa75ba05ec5e1ae00118e74d6aec11bde3f72b0fc901fdd09690f18e3dd5cbe74156473425d5bc84cc4a890be880056cc3f370f75c9558437c9a21ead2c7da27e68f60d40404383ba1ab41ce9e44a7fffebf90eedbd8e0eeab921f85b2c809a6c00ba2c35c04edf6e3c1d2284f3fbf8c4ac0fd63f453c15cbb43d88836cd4d64a4814e8f91d91ba49e2fd31271ba8b3c9d886a316464660d493847855da8f4a0669f7b2f3cdbe415612228347caeb1976588ca7787560a5b98b82425d9420cd5fac8be328a4dcd9a2562bf53f1e72adc8cb3447bb3d8ab44dabb9ee5af1bd6c53f01483f1992830f1e93179d4623f06cb1bfd610c4601efb0ba945f4e6c5fdc6eccee9b7bb3d49ebea51c86d962e95d7278cd2a9918bdd7854de9455b2b4d81dbcf998050dc4925388f2c2ac95151bd669362711143a592aa97e54bdcce4b9b7d3cc5d17f1b8077cd909c2a43f3278f208299a6387505770a7779d763532130658b7c74a13b50487f765413267946cc1492fe750f03bd77d912d4a475307a438151a538cb68e59554260d438fa1aeb89bf72574175cad4ce4fbb2ede2aadc6f3ad049169d40b878298a6f02787e19c94d1dbba1a8257057b10098d85660e677345d48d944b7eef1ab140e5ed96365d29e46da59be3e4e6930199dc35059ef92e6743a366cad0f7c66a3e5c5aedba90547597dfd38e81f6215574f3799270b16c38366ef2f4f5453657ade2bc6da5fbe99432af0deb989726587e39ee5cb455c58322c3056961cf25407a5a879ad5ebe880e846b163a8ce255a214d08c430cc8cbdd226bc68c4c36f5ab3a2dd60d952ea6b5332d13b51375e87b6d4b6a1344f71ee0765047966bd6fa2acb2b48afe4e9bfd18fd5df1568ce636cf5b38237df177740ff6706563ad9fac794ce8cec5600a587dfe90e9c74d93b9cd18d66a61f9ec1138aca17337b407683141f9758f231ffbb6a09b24b19b0a80f41db37c43011d0a6076e808e21fb2b1420cf26dfb9ae84c76d4c03daa0de3487651edf37a830aa2b6015cb1d2fe65f9bbc769a12f6900099e44558f54da9bf9321cf1c214ca25aed59751312dcd08ea29282233d0fbf951f62ad5e9de67b6b7f6a4ac87a389417d5fe53a01105cc72227b545d7b0003c5c69c9ccee5ea1f7b54a84f4111844ce659e003a644d289c6df0060b688764a43ef5a33239c6df42d9416d012903ca8bc3416066efcff863ae0393c012c86cfa1ddad029e7c4fa208a1882d7b606d66ec2644a73174523e863c3016f7858978b2041a5cb330f7cd8efea91989ff682a0894ff061951914d0c8205142fe5a0befe4ecf282550be2915269c22c79e66312e71fe6d8a26ff3575b937e2fd90e6226fd7a0d1e757bf0849cd071f2102e54e500769f63c2d8d86f48c25864dd23e4fef5d34cbf7e79e0030afa696391fd43cb9f66689544677ce78ecbaf442d6984afba4e67e1d443c5f88b46b4c6a0808fc39dc1d7518b2cfc3558317a963b8a3c561f9cf3a551268b15822e7cdc5c1c5d9fedea1c13a15924bac3f1a21e174fe384b9b379cee5ab45efb3f806101399d1fb0dac06d58068a08f2afad52a254469e88b7e7de84097e3ca554a89a2dae263ca09bd206244d809c4a62971209fdb72d197e1daa5f207e5ba50881568f6c07820edcdc27b1a6ddb4bdc63e72a1f2bd644e86123e8f5e5ee195d671f725318dc4e85558fcaa0655b868c89ccc849787064febb961da38d2d70134c5e14efa8aa85af046cd76e79f74c8b705f28edcdd8578d1bd4fa1d3e1c1517f9c391cdc992a3d508295c29bc66af0b44c246703b91a25baa1ffa6fa47bca3614a706aad76ae99bc8bbf46c4ac79405c57faf087a7e85967c282b56265d0f7eee8ebed92de455b941a432511f899c73dbec17f450ff71bb266ec0bb3ecf881ffa1470f11d635349a32f96e6de2a7108a9c294059d73da21c66afd11fa3c958ee186132c477a97f630025419ea730d86613360ef83ec68937416332a10497d6a8ff17d7d3cbb11d954c4f45476cc6963840a16b2a06a699bbf7474f845a68e16f0ec04b1eee818b2f175cac02b5a90c09391ecde514d1367bcb711f7888693ddf2f1f2badd33834a80a1cae8497099835e51032ae6322e6221b8bb3057ae9fe4115fc8e3b781a21e7f2c90855f81941cf45cb016b284ff506879a72b50365b3301ff962af53f203bfb1c582b3609d9af51990d67d0c41bbdfd349923d19466f2dc9f36fb7ad5ca786e18b5fc59643e2b3d047afd7d1c6bb2bd6960ce8dc0aa6c5a9297b29f4604e65114f2efc8ae64f0f0b4897449998fbdb5097e5d513fdcdeda2e0f6471c34015e4eb3e9ef15679e8e0805ff0bb46831202755ea72694e84b5f43ebc61b8c080df1c692dabc6346c36996a32412e0c92924cd44fa027cca2721d9f9fba2d10f566b2b3dac4f1518ee6d0859c3ae3e33234067081851df73b35dffde58c802a1da687701c5d4d4f90e82c07aef102441b559df9b3656d7e7b1050a244cef8ddce3e3f56749dad48bd07ccc1e5606feacda0495864921cb7def4a5ca854e1a3322a0bd9d30712e999e3b4a4f24a24aee415bf9d03b017beff4ac00e88b92ae52d44876547a526750fc3756a651546a8215e11e8af84f02cf4de33255f7545dff19f3116c8bdc0689168f8b01ba61b2e89163920765b57018fb020568f6a0d35c60ba57b1f7e277aee5a7ce7f2fe00e42bed12be48b3f0862c9f7d326b7301be94838851adb77a8fe0d0fc20353aaf08d65a0753eea574e7a06fe49f649f6ccd2bc70e6abc8511274f997feda817173002a8aeb869baf3dc61134d2068a89f40918053ddb08f5c66e5b049c9e82d6e50745857bf3165619dd065cfeb911a81fdfb748ad7d3262a4c3086739d4285319d7a40d940f499612ff2536b2a7a019f97151e2b39a311df6d7d72dd3e9f44993be09bb4ad6ae4c49be1694e3fb02dd499b766a3c476b72cfc7f4566210da40694a88640adcdd6f336849371b670d3d58c1230bb2908ff26cb1066f3bafe616ac908ae17824b8e039da57305903a68ec5cd31df4ca5bcece2960edf136ad3d7d64a8c57b4d2fe9f0cb8a05b6940d011b665a8c232ac625818614915eccffacd698318cf87e077f7d45e0b9ff8651e424bbe6d8879956fd38801e22c892d1c1a874d4c690f87a012d3c148b1d931b569e1bd9051f0e14413b04c16b5e9849d6ad97e6fce0014f737078be7bb1422706be3dfce231dae4fc3ecb2145b42847e11cdf2e7d642ce2a7e76f78bc20fcc6dfa6d11912f0d7240e37dc54f503c00f8f998f8a238d4724cfa64f4c1a4a03f92ee5668d59b64973d813d0b51a86607d7b3b43925f1f6cc913e68a48aa2a0336a52228c5c4806acf159a800d9388832eae6f23f5dc5870bf49feb465044c20099620f6771be8ccedc1ba54cd9a5f731b96d553f2c72bdb52c4d9ea4f8fa5d3ffc4e5d0aedb0b3d45f549379b1b9685383aad65cbb2945a24a1370ab42fbc0ec25773eeab3dd8008a87b22460b57be2acf80df87eb6c4d98a578e1e9ac562b55ce5f49d6f96cf3dace5557c4647c916093041999d6bbc2c609f478ee1bb71aabd3fdf966eef5d11f886d626aff8fc71ae41c9499c4a7702c8904de01680bc8363bcf12489c44bef81848314760c991a1df8ab0414698c2f579a917b853b2ffee7586a633d6883a72e2820af65c2ac21c6aa89dbb7b2374bc37463e6c59d7f94d4207df8dc9690be8ecbe1c5fc455af509b5c094ae9f5fccd3e19369b4f3849f3b284bd32fe2cf8aaa2660a8d2b9305327ece45bdcb75cf2521f4f6b3fc6a58703651b136300976cb4bffe7c395d3f5a798579e1ac4b1cdd7027f975ee280cec66ed2ced1f169ee7bd053c589362938fb4120c02ade2a210628d2b017e68c23a79b44763da1a406d37f5c18c9b9bc87c5973b592c0740e45c51caa79db4854b5af4ccd5f6121e713e1a04b10dff23ec8fbb444d4b80464809ae056a4b1be1149f4f6446820a2851ab57623707701a777dadc6ed563687f7bd82de14bcf92d47770bafcde12848d3cfde8ee9aa46137ceaf8cedeb175163f82fc576bf2535828ee6fbb73f8234a00a62dde0a8c641320ca617e61ad792bb366a2d221a2f0108b73b42b96e622b77abe42676d07095a2d9df497221413478c57809f757261a7c2b446c3125aa5e67d9b062167e4c0d1f8111a11359b2e930b7e26901442619af3d15b958be22aae945624ab90a1d2a6a291d570dc091db81972fbabe2970cba5bc7e3cef96583c71a808ed18a38c55e31f14f446d55f3bc70c2d39ae7498ef9a1d9ab5433c3deb141d186a618f75198520c8f320b06100bd9d88ca18c53cf361db61c863fd9bb881078ad452cc2edb757d4d1136f4f4b2f71aea839e95125bcb06fbcea3b16fcb8d8561ff013a3d946f7e6893a729ba864045e5880e0875a6fd5cb3f75bbc690398b2791c193c2dcb422b7a93e8e49fc62d01799cea22c33f077e56bf184493edc6aef846d1207bfd31a7ff8a1efa104c30a018a70171a5c7e276ce319ecfe4fc924a20550bdfe147d8db878b824957a74a9360d8c90ab1ff18d25f12d99c539c58c11dbbaf988fe5727e9f90dd13084d7222b06a514566114f970668d6e921089afc659dd7ebc784b258ea305b56c0012cae031bc926b5b9ab112377f13d3b8975cee45bee82d6bbce07c134fd755382a612086ed473956cb98e09f2ae060809c9dbab4e8218ef29b36ee33899032915d0a8dddce82995b0978d151ca744ac9e40fe17047d370cbed018e69b3ceff09cce63477a2c2935d9081f45c2af664246c59930aec25817ba967ef3e5c5000b42afb14d757c4c120380553d5702281c9264ad346431a17ff9a52d21be200ea740fff2860329a4ed2fd3a7a1ee5814797afe32016f6bbea6e3c93aab11b8c7e528e5a98cdd6e43a55e38d40e05710d10153627d4e83e29f7db592006725237aad2bb79b827aa185d1d73d121a6986de32683d1a4b1f892796ec38819133a335ae87cfd2642aa9ecf0364b5809e7268c0e1d142b8a54a250a49a55894972997df245284d9944484b97f3a45425be4dd2b29eb54eaff3d7bff552377bf407b0a542041251f2e1cd1505c2a374b0f210d90f8fd1dc6cfe4100b56ff8b246b097ad341754e805452ceeb9afdfd8a002a1aacb18a02978f3ee8be690face9b3ee5ec1abb611b1df36bf00b2db89c835abc64163dc8e9aa633aa9977ce13e61d4081c2458764d888f1fc33936934a004a033db676f5f206ea75a484a639e47e2b450fc52f8e71a5bb63ec01de4a5af56378011819487cc3b05d5da9efb40ad7823387b5daabf23682864151919fd7671b838f72b287fe454e05d8ba10e7c11c6a7cf080dee3bcf2f3329fd8e2d98595a41a4e1ed8d983940e11259a1c1fb288560a8f75c19cb090d7a80496e4bf400f87c09e57b7182adf0a3ae873738a6d2feda7126349cc33dd90928815cda552a9a14bb964773da70b9c0494e1a01309462976710138e718f24ac31c1178ad219b98b5886acec3ad6bb977950233c92718081498fae47af381a69eae2050d3afcb5864352daca955705fbbf448030f36dfec838178abc3164452e387ef2625b23c074380b8b93339b3a97a1968d92b306c73e568d98016236772e31ff9147a61e8767a436d1e6195986150f6400b89368f7a003236e5de70c104fc40f85c4adfaa73d1b946ebaa2183cdcc78df76feb50668434ba752949f9609e61c87f3238dbaead62f0f441453df022a5a2ffbef1ce10f9937992240ef9563914006b5134e1e6d1ce789e927dae6ab4592321d74f41eefb41cf8bc02dfa716682167cf9d01a2195a6d2ede2dea4bc164e81f1b586bc0782a4c7e2a7f1cc956ef4256141a02078d8479a3227e75281c8e09ea3e8b6c57586765dc547708cfad6b7920bf3e370cf60d786d4559f098567b9a91fbf5dc0cceb79d39352c33db7b5c042de5b8a173f0488a268f3107ab85c9fe03f6e4282ee89783ff7913b423545bbdeaf520c6e488d4987d9c0bcb81654eea25483b27be1376cd45c0d880a2b96d96d49e100ff7989c2cc5efd6e1da93b77deb3ef9d71f550c87dca16cd4ad8eda084808d21f78ec4ee184fb3b1b9742f3822f931dd1c4d71e452190f378ecb9a2cdfad79f8d6bba81cbe600aa13b4209525d60bd9edde100e0160061c93af21e3e35b462bd27bcff1f77dd4914db48d0342f02ad27654d1515855829bf2021e8f19ddc8cd9fa4e8aa9bf3dad5eb9cd5947707029dc23a69bae03b9a4ce0a3bbc83cf58e0935b0d92fe7748c04727c7a98b0bfc3ddc0b1feb4f462ee6585153012b6d4094fd5f4c4f7b702f955f92cecf9c8ba60e27975441e0ee4fa38f9e56d9fc9ff88b67827833e49f96096adadbd00034114e868d2863e0099a45f35cd3f2d1cfe5d9f5a5d8630256aac62eade8d155d8dbbbeab008c55cd43b6dd532270386de5e9def3961bfc27e72ee8ab2df90392dfb68c353a7e7fb604dbf5afe02f6d20b5495d7afd271518f2a90bdf5d0cb7f69c6fac561c29d35e7d91eb65c2dc57c314d36a0fade1a279a5844c412bc41819745cf8f37b7cb0f3a9c004655df6fde6ea3f51f5149086c71f2337ba3d625886614907c7ff3d7dae3df8561519699792a3621fc89d2837b053e6db4fcb50f9e2ed1195543b4dd1b1554c2b28d058eacbbf22c401b147f3a0005712cdb037845cd5aed39b92be540aa59b79dfd4ffc6ca64796eabfd1cd62e8ad5e60147dc545b7f199637059fe9a62194883480b2d1309a0e2dbefc5a93089a01e6bdcc7b8d0154ce17869e0edb32f107f6052c86f5a68b80913a5ad6db0929db5332338ad33ec1d72005805f819dc526775250d6ad0683fd5a7e5c350c7adee73e367e1ec764d54f8f28d21cc22304eba61e388709c8f168faa86750c43168607dd0f03e4f32684e96e37b340efa350ef56cac5ff080dc70261e0caeea789a8f7663434c377ba121dc6501e31563a17d082874fae94b383b3098ef6952bcc2569b18946630e59bf4c18a8b107b5b7b8a786a6ec6b76222bd0bda4721e68187ddc346323fc2edb5dffbb5b1965e3d5eaee666c68aac86bd5e440620ea0541404094557947ef84ef61ee2434d182c9dcd419bbda7b17c3eb48bff9e8e6603400b5ff3606f92e33a7fbfe2210d8cee566cb662d1a904e46acd9357f1f11c722bb7c88fad45c39bcb338d2d19439335cca9723160bda303711762f048b59256ca02b50dc5f9d6bb3e2e5e16a18efc667fa51afc6d4b2a341c6c765537dd8fa6f8085863e0d3e5430cdc63c126776aa3a5e553adc97351160be457c25afab6601f56e48531be53feffab610a8ec2e67ddb38f4118c20d7e195dee284516f559df169f1044de793a4dbf3a5a739af7b43b88ab2e13abcd9417ff8d6fa79cc9dbaae926516fc53cb1d4f2ed68ca822f33ceded79e53029da3d944cd451d6fd6a33d4028fe870200f48e45785cedde8e7e9fc6861b9aac48a2ed76f5e04e7f57121bdcb30979cec026ef4ab46c6dfdd21fac7711b65c90c002407b37137e021946981c5377a03dd0e26f9a8b4a65c29d4bfce4eaf10d56eabd219ba2abc1e44f541c68984653eea6e82f9858e38dd03c6e77ab11166f1bebb649567e974da821f3372f7f30944ecedc5dd4ba3bf6753a057d3e67986352256dc67ce52b72de64ceee8d29d5ae8f094ee9255937c30feffcdabfb9ad1c9d1ee250f7061b84e2a1cfdc6dc498040030a920f621afe6a864b94991b7bcf55ef6211dfebf81ea8bfc524eb0b Please enter the password to view the content.","categories":[{"name":"Programming","slug":"Programming","permalink":"https://yncbearz.github.io/categories/Programming/"}],"tags":[{"name":"Private Note","slug":"Private-Note","permalink":"https://yncbearz.github.io/tags/Private-Note/"}]},{"title":"Windows 套件管理工具 Scoop","slug":"Windows-Command-Line-Installer","date":"2023-02-10T06:23:12.000Z","updated":"2025-05-30T08:15:23.259Z","comments":true,"path":"2023/02/10/Windows-Command-Line-Installer/","permalink":"https://yncbearz.github.io/2023/02/10/Windows-Command-Line-Installer/","excerpt":"Windows-Command-Line-Installer","text":"準備工作以下參考 Scoop官方文件 的流程安裝 Install Scoop 123Set-ExecutionPolicy RemoteSigned -Scope CurrentUseriwr -useb get.scoop.sh | iex Install git 1scoop install git Add bucket (增加 package 的倉庫) 1scoop bucket add extras Install aria2 (multi-connection download) 12scoop install aria2scoop config aria2-warning-enabled false Install sudo 1scoop install sudo 安裝套件 Install vim 1scoop install vim Install Vim-Plug 先了解 scoop 將 vim 安裝在哪裡 1cd ~\\scoop\\apps\\vim\\current\\autoload 參考 Vim-Plug官方文件 ，Download plug.vim 後放入 autoload 資料夾 其餘就視個人需求，安裝 wox, everything, vscode等等 移除套件 Uninstall Vim 1scoop uninstall vim (Reference.) 重裝系統後要幹的幾件事 (Scoop) ʕ •ᴥ•ʔ：跟 Chocolatey 比較的話，scoop 不需要系統管理者權限，安裝指令也比較簡單。可謂是 windows 版本的 homebrew！","categories":[{"name":"Programming","slug":"Programming","permalink":"https://yncbearz.github.io/categories/Programming/"}],"tags":[{"name":"Settings","slug":"Settings","permalink":"https://yncbearz.github.io/tags/Settings/"}]},{"title":"【摘要】不詞窮的即興表達","slug":"Impromptu-Expression-Without-Lack-Of-Words","date":"2023-01-29T15:56:27.000Z","updated":"2025-05-30T08:15:23.245Z","comments":true,"path":"2023/01/29/Impromptu-Expression-Without-Lack-Of-Words/","permalink":"https://yncbearz.github.io/2023/01/29/Impromptu-Expression-Without-Lack-Of-Words/","excerpt":"Impromptu-Expression-Without-Lack-Of-Words","text":"c6651e4bcda59a4397bcdc1be7da6fb5f6cd3b44e6519c5f5998fbf3afff026fcd27e50afdd227f361deca3262a1bbe010e7c1d07c44a292fa0e4b769b52f7e7ee02d27467e78d0170c3206685197d3e2ab37444197be9c8d52777a8ea445c6a8a73b91e016df04ed86162a4925e17ee308e9cab2c8b7cea3fb56c1b8652e1cc0c1608f1c573583536ad0498b4c0e2d37e7f031265a5500453a6c3392ea87d4190062b61a30b266655b7c57d64d6b8edf79874ff6e90e68247b6c24111c8ca63e9bab6389360cec43ddd1eceb71212b1e21a4384ada84d678452ddaa12a302ce863f34b422256f062e44dd1009bf38f5cf4f726db9d07664438ff4e493c0df94b703870d120e5d34cadbcf52cf5258c87fdca18a0a17f4ca8c2560f61fbd3f66a0539ecc08d37f797d18d5421a9bbb60895d98a590d7eb43788bb009bc5d92536a1034ec12693575989c086bb6c8874432d2312121ea734de29f22cad612cbd0b12df42d84c6a3eae3b2f888d7b7bf639744b3a060ab0990b13c27875471ecd6c12555a8736ee31b7c832ffeea1af32416b889cafb73a297147c6b00e71d4b247ea319c74a436c4d62bffb739b6fa4a0ff6f787fd50f63f2573547d1e34231115bfdc551730e78e58e29c0d514e419c1e713ca4785797f223423bb03c114647e09212086601b467de73ba2210a9912703f9ae58ac55d2300c3bb6f9f8df49ddfac0c96bdc5ecb6d46ad001fe2ad8db2edcb1e4efbec48ed89d0d708c681fb96446986b990c563d17c0468ab3ce3c443655892e4e9d0fa8cf20646129527769554210dbb152d244ffa34b63756826c99883d843cb097813fe367e18880a80ab1aa677f0e0bfd1b678d1e183ecab90ec8caf5905fb20f947ad2586ceba0cb10b0d99349d73bd0acb54dea132385daf3e8a3761dceb221e93c5edb9d7aa35ee1ef9f340d164b0644dfd674867aa6377ffd94d9162368050dfeceec2cf9a2f99f3b3ca1cb78c79633b53004c96314a565707dea271858a5753841e5f5d750537c67f9ea803b6928000baa079ce8f6a0096392680c460b16d2db264ad1198f8072046e743ec4ac491640c1a3e98204775bd4974237058e892d384d527c8bdc2c4df603d606bb93bc0585a4cb6fc128a5dce2b82c342129e8a49a561e6216d4176e2f4758ebffc10ed4cabeb5762fa3e6afbeb47c322d392a1a45efad096f50e8df72380f4ce033d7fb997d94167987853189d9664308593ff1af14db03cbffbed1cf66eb7e14d805a0701d6abe2f6de82f431e96e337d5ac70d251d15e6ac6fc2a3b26ef9b574656149aa42d707fba3cab3f46f85fd452dbe0cca4373666d01e29995d130560d4d0c5c5f9a04a517db728ea35467088f0afc0f0db2bdc8cc1a39b8d7b1b6c11c2693cdd5a46e34008929388e46ce5c1a8ccb4329f86bccf487a5176e3605ca7b16462daf268c45380a148e0d60cd746171a91e8e71d48f12ce2b3a70eb9c8d1ee3e1282a6be0ec9de36c18396c68ed29a5f3ebfee3961af3fe2ee68e8bedb7a6467446406f3e40a121eec198fa941c177a1cff13576313a3f1107326885b714626cb867f39b93a83bb4a2908b3b75cc0ff3fa678cf5c8011ea49b53a2b38a7abe0d87c7d656d0989edc4791fbbed32b82abfa48f9d79b10730e6a7c7155d6e131d9ed4950dfeecafa3e75b93504617b7ba2e9b0940d10f30d205515cd75bd26affa4cc65ac0f281ea29b826149ef37ddaaccac9125e0feccd6e12ee83ec75167542ee80628a3f1c1457f665cb21b52e1e1a48b075f932cf7b7caeaf28bdb75cebab62a161c3c75c761dd9dd32ba468902a8a44cf3fec6db8d82af52a8ab723e82c98c049caa6dc634834cb7af67145a3a9aa130914c2c0eab151a4dab49ff4b4aa7e4582b536381b36a14ee1c5467da5e29caf79f191214cae9da516be922b0444c5cf892c0ca2fd7772e637d0760db8bd2244ef747b826766399b3865b04e153b2a1c4db749be62829d8a8d0a3e5d718b5e0db8d52fbac9b4f294e4f609a81eb5556ba8d6f60e72e68525dbb04fc407473b1306d0146d62c6493ba5101a898d2ea6399f00f05a3aa6270a553472b7b684763cd244824f77b446bbf8e1887b626d730fde4fa0153f3a7c071e331c8604447de868aa6f9e736a1f0901024855bc58f4b367d68373cb6ee7e9c6d8dd430d1086061a85885bf93b5d25b366b05c914375c3b1deea82530c59f7516d9122b66d83e6def9c22af4327225b39967817f273c42036a2b06b584b916c96a616f601cb520999be3ce849463cadd1da605c02dc04a6818c1fba2243940ec76cf8a14fe7ed5652c1b14271192fdb74170d85f7a96355e4006f76f6c8608a4e2415718612a704226dfdcc9b97cae51b487a019ebfac5dd620ca18cad0a4ab8ab41683fdb706a71e47d186635dd2dfed6948d063212d3020438681814a1753f1096fbc6a67f5acdd4c76c69944a58f5338d19d84af52ea47dd42e5434a9ba76f0deeb9080d9bba5fdd7f25a542cd41007768a9c38dfeb79f9fd85d57e63d5549973ba5d7dddcf25e271b4a8d730672978f75cabc0f57d4b242e7b45c71d6d8a06ba667d93c4a8f056ff895f5e7983dd243634c516a51c068cd923cdc97f9d1694037844dc4c23151613d8a277fcee81a5cd9a6381ed110018c78b3902b0311e5b54f3c61288bd2b5fea086085efc2a320a279456b1f3c4adc82de7fec0a3598326152ed0501789ddeaec4ccfd4ebd95ecf9df514754c4e7cef18a584c788fa6fe67d0b97d24c2579590a99c5b34d2239f7e85bac3b3e9fe5afaea522958831bc4617f5b7919738e7f3e01f4725747c5108ef6120056e7c0b772ef63c717ec4411215a0c30af416ecc349d5ba8f0085d0ea8beae82338aecafba2cc986a54bcea07959de46fe931709c21dd03fee361a8062bae053d3ef09148098265159e80aa1b1797d93abda71804b0db7d70410c9c3a1bac5a0e34f3f94fdabd7494af01cf8355483e9f721f3652b14faa275a0de6ed00e0fda65b3176222a3065df392a4449c30a6a7cff02b1cd307f3635f1f4aaab119eafd9c6e9992d3e5d10f0e78b68ffeb6bd851ed1355a9c00f432f7d795e5a137f29ccc3dc14410772cde67e0886215f60c567034a9b24067ea00f2178f2d9a2ac85a1663409b65efb18c05fd783aa48e356b94d51d406a56a003a3a9114326b03ba37a84e201b227d358a691e68e38828cf79f3b66ec0a7efc32c3f2d323ee7b30e363543b8ab83fbd1f0a555ee7cfe7f11a8f3546ade1d92c9b02add04fbd4d4bbbe9b319b8450a207208b496822d6f2d2628b66de2794f813b7d83c6fea2ee5698e50399d2ae40712321d9324d8300709c650e467adcccf9942b559f00d628d4a2b0662bbcad8937d4d0912ef16b9341c8d713748fc6edc8c4815ba540c3a3a5e23cd060481a73609fbf583d307213e55159315fc0e7934f0676fcb47e5e3be89502a2465246b0a4013f76a924a1738f0b9b5b94aa34974a5e973146cfd6536acab7480140e32884551d148ca4525c796956e055bed22a05d3ede515f5cb0a8f410cd2c7a5e3fd4858d225079ba05d2c8fc8d1eedb066a33b28af579c93a9903b59f81f58e6b09c696c9a4e89d88145258b93e86d2a8b74d2408701069283d8a76f73b39b4aabba2c644f9b888f37ee4046b6fd5bfc71ae8863eea43c78220def27309f54806b1f4d72b49a72b7360594267135e916367f29ac49933c7c536ecfc25c47a29b2b1ad88f1f2f19fef1d54cf7d8c2059bf77f3a1f9fdc0a95bd74aa3f53182f68a0ea0449f26ed6fa888f042f1a848ccb46a36ce10bc0ffce5b129ed1061948ff1ff80a0ca6167b950e04db540a3fe2bae620bc86d41131e3bd88a0d30e7df99efe46cd6d8c3d2c72b0c410ea382c50aaeea412d9f6620ec002995fb5d8c65279c7d84185751d34537fe7e23341d03cf60bd68a06e7262a692733d4ef133821fceeb5ffbc718ea24478cc5d11d538f3af81b66dabb21927daac26cc6b19a38a8eff82e82610d086e7819843861d67bd7f5ca6e3f297188a369b42de17e8862e824a0fc0dce1fcdbb781ab5e0da7b740d928f6b6e80dd884484f26b8dacc41fdd947a1e7d336e66e83a248824afa318f816855c936802f357094bfe480c1e2ba2c9225a56bb293bc78b5a40668e29837f1c16b5822963a2ec605b9904369e9b0169d076325e0c7d4f8ea280cc1811a0f540d7774692b835dbad264c69b1f6ade07d265cc5a3435e799f061f00c647ab2ad25227503a739a87742ca44a1f29d2542ee0d827bc279d89c6875541cbc90606b15c7b8315f726acf2a3fcaf6184638562cc7b47ef83ab4954e872a8855d4c285899aacf6039ee453733c11a1cb9ad6ff71c758d9e71cef2d8a932a5bf6a67bd816365cb4be3bf2a5bb409afe4b6ef12126728915cef8ba8780f0bf610f1a0724eaa7806378059ba133f2fc236d4cfbad718f9c97289683b7821ae9928f0bc72f874bdff1a5355c18acb6bbb3688511a6f0e6b2503366a860453ede9b07131b82926c8c622388b839faeb96c6de11098e81cadc793010ca89496b53bbe8a2d633ae5839302d7e572d85a40cb7e2a5729406e9f1fa91864e571d1b7a0ccac723d816045407040207551120b157f4e046431f6eaa3c0bac914deaae24028264250e044001ffe0f81f0c8194801f1780c3dca72a2d217a1c3232d8dabc165eee114c0bcd6e4d477f193c59a096e57fbc47590b6dc848aa3209736ffb96dfc36ae7ebcd616fc01e712cd0528faa5efa963933ce913cac9fd7d4eac9208b97df9813d4e8edb6966f2445d1835df4b71b2ac978fc47eca4552adf8c1b51ff663d19a197eb3f17ca32774a58698182ff2e3dddfdb1a3e97d84e3b1b99bc9343cadeccbb804ee3a6e49fc25cb0477dfe7911f56d1a878f1dc4bb54a3a81aa77da93049ed178be4e05c87f0ebe336f37f32b43af244f9163ee07554fe56ba94cbb8763cca0e9f92a9ff4de138d358926c1b4540dbd5bb8ac7e2c15ddae5df230deacecf5b89086013230c5631e91ba1e483fbbd6719e8f07f1aaa79a0cb990491da5f5441048c3c9fc17f7119249b32cceec0c589817aae2731e81a487481022fee10acced9deb519913e8c8cbf950121b0517b095cef616bac4443a8ea6a21ee74fcd0ecf1a28e9e93b7452ddfdae3bc38d38e550c5fbee9d99769e940eeafaf2805a02312d7d09d54faa15619f0791766655573ab298275c76f705ce7047e6a6e2e4cb9545aa4c31fcf760572004382b738f5a5b12eed98082f75fe6b178306a7c03815e00b01457bffea981859c8062cfd2ba81872cb1371b3aa81733e4f741a6a50e4fbb343335e657fc8f45444ed5c95db672e43e11e74862809fc09c0691d297bb50fb26d4c0e41d8bd1ba552956177f79272e10f5f2a101f89a627f65e431d4471d219119bf2d9b37d5e1c198fd98f69113786b279240e0078ddf5aae139ddb6fe8ee6721b1522fa6fc9faaf06fb7e7e2e5b1ca02bbe55da4b48357ba4ddb0e219b9093ea5f61e015bd859415cb68dea5da7f4fe21653c7be77129785df555ce1925897cef44706842e691a3d9e3e13f2438a1900c70ca19a7e2a157acc2c993926103a4356d70a53a8628552dbbe8d87080ba7e98fbe66b39bb753316d25e3c4a2448b1f7b9c6814baddc245a97873bdc0647360193da7af99b4f48870da085b47f161ebbf2ec4838ec31f744440c80c1440c0d4806cec7114d08d6bddbe087b5316ce7dd02eafcdfa57acb2d5837169a6d775fae3d25c3b5c50c6cbd6d3f958a5df4d7d17f28342b89cb7d763d87cccd5a97ec636f1188ca8bf17c4d78a6164888d09a0cf3a41e0c13534b710371ce332786a89b3c4ac12a3bfced7088331747d27e22be943e5b10e7edbb903aad793ffa10e323dcc233ae9f55eebfece8d1996c1220bc9a19c6e58c8b08f6c9801af659595aeaa8d1bceee71ebe1210367131dea0a002bb0c8a105818a32200619f340e7f77cd38456c98beaa568ed59a339bb9aad693e374aee1c385707f85cb12df46730bfdbc3b17725480480b91d414ba5c270fe82a42b5b88f30e46e01014b9dec0e12d5a0b7220b6bed783ece460fb54939508a9208eacd378b30a8d5808549c6649128ad552c3a7bcc021a9649c04e95e9841d227ee27a0188595239ed090aa91c9b206502dd2bcd2d9ee8badb0e62aeabd797b9f50c99bd4331d245402a7916ebd6debdc4b5653209c174bdcd0e50082c1c2b58572ed0c12e71ae2a15f01d651fa845a24455a6048e12a4a4a1ac8ec0769e329cd214b291bd3506542911b88d64db70844be4a979f9cb4d8ff01acde0e6fed047706be93a4d03f0f8191d3228b063f0a0cc68afd346006d2cf215de12c0d5648759af337920fb7462466804a4e8edede006ae9bde320963cebe56f1ce9398d6d8bfde76fbabc6d7af84173e78607894026c012f73e2cd583663584044e3eeb4eed26d211840914e53a4aa727106f104d706459c1ec53a2050eeaa33dbfd90ceeead0d6c129f2e1e1d2c92e92390bd4ac0b88efbd5ef9d815afcc85dc3e9b93231742ff64394e548f959f01f319f372c1bdb43e4ecffd91438b8bf591abf37fa301dd20e425d32d41913ad74ed05217a27aa8ff2172be5600e65a9ffd1bf392f8ddc58a6572d63b75d90439b6de5dfdac58a3c20ae1807d936f1aa2e9d5160610018efafabe300059555ad319cafb2307043aea2a6d99245e0bbe6c45aa2ede16fbd69297699577f2e5c0cb38527c253a6a39d5abb0143b810076af73a2797a3d51b3192e016bfc404815c382ef483faa928aecc9b61c11e7044d7a3269b1e309f9e2680e8b6124d8571cfae03f80fcc910a468d1850ec76db71a4a9637ca25c68511c21787b69efc9d5186ebca911160b2210ccb5bb51e5b1d0ceda6f381fb271664bcdcd37f107417d8b02c115f0225b03cafaec0af798f0b04fd9d3850cf019c7e1fd04bd45857e3a99df778cfb2b6883389c87b10253f8deb2dc1bf96659e9dea70c7a258b27879ddfc46ddf712c3bd2d663dd06141f0cc61e8b91b15c5fcc104206aa418f2f0ce9afb924bb4c898c75ad2f4e7ba7f0b07cbbc852f47d08bd66548bf9cf705c01e3d4688b542ad93add9fe84cecd60dc4f3ac3996802a2fadb9be521d4e5e83e12f6027a2b602a8d0a320a05555dc3ce2b34428163c385d9aa94bd96195d31f124835f1c98aa453e0720af1b4d9a537d57504046ed0a2391e045bd066829247927fc3cfcc1cef90cdda41f968141ac9c388e434f73db5ce75532cde1128845ac9b91ed18400ecdd530843ac5a23eea81a88d44f8a850c990a9d5f51b3b29b4add45f16fafe3e1f3bebdb15599c2f2122198c01d10a7ffd4534fcc7c46659cd78d69e961262f21c9f7a6f2937e09aa212b88c4644c9f31aeccade444a39d98d80ec959b9c77b99ed9d3d08b006537236fa78c6d7a7350c14d3a8f0a5675250830194f1e827bd55d2364ab86192606d27db9f7de39ad5cec17ce73b1096229ba036fb6ea9bfcc68f72a938165d9830f4c8ae219f8feb85a35c4b3dd3383d37cc91b24d7854fa20417308218f8e0345ddf154b14c0eced3c7a00ab565e59ac0a19fa3cdacc116ded5fc2722700ea8912238a02ec7d765d718a75187bff972e6994dcef275968104559b01a4d0df445abce872f332913056b0244af2f8d9d18d19142fea974119dbb7c24933737bbba5caa889a0899a93f95214f1b202b0fc113cf4cd8222f11bf0d129b2b15ffa24e11789abafb0900672d125ad498af55ba510ba613acce4c5815472ca9bf4580ab0591608f80ca738b8dfc52c06f0808918a855209b7abbbdbc0d4687ecc5293d3007008bc68abfc949237c9e66386279624890b110c56baaa390f9d57ccb295db37b17dad9fa4bddf8889d1df38bf3f3fab7f6325234f3c595013cc7ffa40fddaaf8835fb30ccd5e8f1b426edadd1f94a04b29b43943b58d1cf6d6ec4579157dba60d03a1f6e35cc4b81f67c58f4908b796b26cebe70031635db3aef12f37481652c888082fa18d659e95124db862be964f94b351cc3b32017c92a5f6842be87f5d8e2a9263c5486444ed8e7c056dc1d84953214d826b0e04f6226a20b5621377d20367fdd4415e181604f2d531548e50993f107dc602f8fae55b37d2b1610a9b93ce5f02e6cd395f81be856c06bbfd95d16ea8719d90c28fdf1e58d924a998b889df7517d7cd888c607fb7e4b3df9e2a29b14ca4321bd0d2b257019cdab3a34d7a86a15d79b02b049a8a260f0f6f4bf9fc75b92ba1759e8a198cca8795dd3640d5af677a4849ad94e99e942e56286c64c1c0c36513bc4929b61923abd88f9f87067250041efb36672ae0aab7175415b685fe8d2a91973db2cc575b87c30521fec5a89ac7f7fa6c840c506017b74c04a79c9b16d43dc31861c2b433854d19a15bd0a0f9c6e5a67c874bd74c89cd68c8ff1df8ee955e7929cb75e7c4a82f39dc6e3deaabf4d6f56f5527ef1cbcfae128db1ac664607610fc806412686423f74dd8d10df026fac9b809c416199034fabb83c28363ffd46a6c3f0bc2d2df68fea88d09e86e9d56044cad1cea532c9351d257de0b025e1b25ca0bf06e580030766e4217561c0a45b1d0cc82b72dd3244592d9b0b9fd329a885cf3b0470d3a0ce8edaaeac20e482c5512936af669cc94e759775a5755520c4b7453bc897e03c5d5e747fa7a0c4547005f27b26894565512160a1f95486b2def6df50a8a51823d7b68df1587a5bab19b2e512309d709f10178427ecd8835d050345abd93147b543908f0e64a4d5a0cc88ad605ad63cf62e6e087e708f17d456479d6a9f3f0117295996d46e73d2a8792745b41417038b32547d0e6c1a905b4267eba188c4724f6c547594f790971b4d145b841eb10445bb14727660e47418e5d4be438cf304765f1850ec29909fc11395830a40327fa1652d2a7d0a9b0f5ed8b6f50dbdfe5d79904bcc5b465ccbefbf39e9af0663a9fbb459bff116358befe124fda89b10d212d0be1919df384dc18cbe41bcdce2aadbde74be476663d032915da02ecda987acb89c633b5a4b24389f92c8ea22fa0963d3dd18c789eed77855bf142188a137ac55eedfd466b0efd29586c90bc3bd89afc0693496b5b5aa6fb3557d7b53064bb234ae9b4607d94cd92a3d6f64b81774a3a83dab1baa153ae4b7cc99016ccbc06cf40b83be8bd6989631d97b26455ec776703ce08d590c427d7aa7927710fbd93958258d72d3a64d2e2d9d1f68359867acbfddb9a951b6e3927dd0ab845917efb45f61f4d3afd164fd9c56312a3f7c18bb0077d7f5985c1bb72077a819d67a9c4184bc07544d7c74dc46b15e402b8c7ec255a1f08a65dada863124ed37c9a50e4461c4db2ebc928d42c9320b910e8502706ceee404082b665faccb5b64568ce860f1961833bce04f836f70a5aa0b550bd864c8d617a97745c4023294741fe93a7e12bba0e55c1aa6654e748fe328ea6d23a2d53423bd265ceaf7350e94ec490f05a130ebbf17aa01f8ac771f5465c57f7f6c20812aea1e90145e1fd16809743f37f8ac8f31347ebc5ef2da7cafa5d04ae795fb017bada7fdde61c43e330ffdcbf67890f1c01ee1ae3cda793d768008960a1036074faa294c0511106becada01942d837c3f7fba5d74b5db6bbf439a07ea6c017bbea26c6dc2de53e293479653c41086b1443dbc0535f486f0f7d7b4b1ccf8a00a3bdb7b4368a87e33dcb1530d529c0538f2f30d05a06b527120552c709d9f8c71c99950d8a7f884acc1f7b70804ca91ef566a4b19ff10d1e78095e5776b2a0bb3efabba52cf5b9004ca5e135f2c70d15b96a64756a932c4a7af608e3b50f1f48bd2bf139273aa6c15bd5174144c6bd89f0abcc666e74591eacb2f23e055fb0e55492c655dbf723936830320a73743a16201814c13d36cb76674d94f24ada56da4a8fb8868cf5fffcfe80ec632cba494c0ef813efea6e87b83d249afaabfd08d264c2b58ed87675c71d8c3ef7db3d2327f8e0568b45a02abde7000a76f08882bbc8123e7afa57a3175f78446124f615c3404c054b96b3d25e338b30c9bd23a3ad9a57953820641fa68a98bfe300bc2f8db1f9e7dbc0f20cfced9121570c99ad8a859ef86ca1a7eec61b2e75529c257c246baeedb0376225e95c21f9267c31d7885108ad18f089ddb17c84e45e52ea16a2a87797c5596b7bf2bbe1dbd0e566b45088ff881f07fd649612e155e21e1cffb3fc1e046e190194c676734004cc6fd0b49221b5796f31c07f86cbe746341a49e5d86f0713fd17633672cfc3da2794904f8031b0e74808edf0180d87442cdb784cb5b38a9b4f794bfff962950ed6a078edb479da8d66b48a8aaeb61ff25f4f189c65638e2dcc4beb9981ba0ddc30b86792c287f1fb556d69e5143fe02a99dcc7f7b5b5eca9c1eeb7e7c1bd014618dc4df8429f4886122eae75bfe50623a37b3611c6538d2a50bb7c1c8202bcba962aed336e2d253b95c4a3aa1f74957c8cb061b284ed33cbb06dc44da129ab4c0f1b6aa2b5b055f916336aba6c7add8a2a2707deb0d3140c05f1713d000062fb5ae96da4f8f43b9f25dd1bf30ab42aab03089cb398315a428469fa2c12eaa0111329709480e5385eacb5c15ebebe27a4f698e0442c2251870515aacc0c6b1ef21eebf90a1f6a39dec4d41cfb7ce74b00f41a18f46fb9c61e184764a25498735182a915508ba4d7b379ee44f7c5ee9bc53437ab9f4179d6c7ddab5a39150d45ebf2970c15884fca2f4ec1c98b63b0ca2877292de08709ccf446d80f538c3d5218162c4f23ca62a0c803b8d8df1fd7723cf64c0ad1c13ee9877c841adbe7c6a5afc59b344ca9ae503dc04cf646389f888b42da27379ffc824287801952e939c00f7b0b557509130f5a0c030f6805c616c7caa0b0006cfdab3686eea29c1b8fc1e9db73f43bdff4b0d3494e253d9e8bf630864aeb21d351aae2f551d5011ce538b995be7f7d84d0751dba5461c101d3dd033a0fcb0a6dbb23713215c8608c3e69a5dce55550258413bce92350d733e13549965d7acb1e63e30e37377ebe94ff07ec2d45d352c3b6cd8e34eb46dff2e9f0ef720eb75c6b0193bcf81dbbe22b5d8ca67546ff081b2bd46794f6d6a62bcf0e00ac63e8204e0586d8f624728f4d7a6f751e9f618033fa97aa60f412e1bfd9e64021d97b0e1383b3b034725d3f2d04bdd96ba8787c57498d8d1c8d8f67c03ddbca295b2af0f590f035e8b472d39ad07dc8e52e4bb85d60921cf5558e473f1663c1ffe99ca342c2ad9b8020cee59add46b6523fcadbadec3236039789fd475dec095dce1402941273e016c313e31226ceeee87b7f964906a126e42bfa5043f2a1d2738be3d9edd92b41ea1fc7a611b9eb070416f1bfd29598c6622d9b3f34c07a9af71db55b33250b7d0bc015d7e2f9fec81ced95f95ebf40fe17f81b80fe0c6057bc34429bcfe8217258196e4221dceb883a7121359b7d358983e639e43022093e9f10e7cab1b01247c3a5e4ab1a9ca88f7104c2356da0ec761e7e0fdb51f2e0a0dabcb45496dd6c1189fb1e8ad603c059ea9639cf23a645f4c4fd4603871f695aa21262abefaf4e3c8b8add7446e7df33447c1f9211a704a6f340be34c5813f60576289b9c91492ffaffb82d246816662e64f816b245a32938e912084408f7b629ce7aa744650313569fdecc8f55b81198099ec05f2ddcd4548c3d9686161130b9f66583bcaf8baebfef1ed679790a138e877bf07b418f461eb40aafeb7c1d56fdc4e4589b50e1760488e0917eda72f562b5b13be1a65d5641b9096d4da689914af5de84ef99b6f56efc66f4799839e758d2c0bfb200a49c4339e359a2f9f755e4ecdabf7726eb9344127c76e4024c9c10267834154caf7da10674a3d9b90c8ea0437bc2103ee966c3f3146afeb3dfaa51d5718712614d3aa790e8697ac7a879f285bde6acb2469bf87dbfe63509d64f96ef50d742f5e30a891cec6ad6b9be623aae490363ab5d0ecdf9e8da60453a6a3ccd9463723da46d5791d2eaf9e855559e7129dd9d03ea2723e9e0c0187976e1e5ced580078071682c5150a367dc607a6ac563b56736c4e1f3d9aa6891bdcdb57a642b0b145bc4fc43d908513a9c5327ce431e26980e9dfd511c400ea7b415d77a5952375e7ff369a6790a6e896db9a4d77d2d781b70162a5a66c4eac6a74512d1b99241d9a6b201d6058b0f766d1c85b958ed51a38f062b5d30d547d9c8728af5539803ac0a251f4bde33ea4727b2b36ac07f9e7e902a6f4bd67a86f6891ad50a6208806c2c572037e2cfe0842bc3499255736597df007e48a6257a1d06aed145ea1c9c2c893229af9597b2fb5d1543b083612594379a947616422e11a6dac0478da30d672df5d810e5c978e41993acf40f310303a93ff05c3b1dc2b080a968979be17f7fe59d3962da27420b0b7e2abee4461406dfef188fa39bfcaa21f0b10cb446722e1dd7a130a096562c0d03f9cace1f572a32bc828d78ee391dbf86e27c5d09e51c32127010925c2bf5536e1ce3360b5f2c9d76a3cdd2c162d0ba76b684f3f1a728a0cac37cc47123058a3566952e527b8cd4c0235e1ee09b221acf95dca53e94c6e477ef7b890214e92a07438e9cdee243ffe518be065bb8a972ad2472a0915a3008323451f1f1d84472e01b61c28100d7f29bc61422eb72cd1ded18ebdf85fe58e7394503a48a353703ee477a809cd9685fe97f2e8139c8c0cfb1b2536f97359b834886652d932cefdf18fbee2f9f34ebf82c7a2dca45805bd34ed8ac08bf9dad0edb66bcd5dc8a3d5e8c43630cb00e57007f3687dd089e1f0cf5f767e3a68449e3dbf21a6dad5765d9acdb81bc6e1ebc8a4a09f519f6057f03d681557804a4a97836c0cf302f361f6000a7787576aa1393e1f595935390d88cad38dc2929ade6e38abbb35a1a427adaf2ef7c208463a62eb3f9fd885189414240b6d2a8b861fd7526b906121e13c3db52ff29d2ac89ce95356501fa0c348ac6e006c46f8e6959bdf15a635080df7bb6ac01b16eac28e05c5e21a8e5101eca51ba6207e90a4a1402faf0f43abcf49c80b7271bd0fe4ed0ba8dd078f0bc007df4ce5d2fab977dda159fc87a675d4d81d4ff98097c58c4a5d3eea41911d7f0c5c8097e1bd6c686274f1c205bf0389ee9590613612b3346988267464a99e2e1836b33317d1e0ee1cc580b2b22add304214009db7609262025916ab58d25815739d100329d63697cbc8b643e10604a78b4a2c043b8a6871c2c64fc5ee253929b0b5b11007cc06a789b4f0112d7502607a39450bfe07c0f9545e40922a751be9cddbe3fe4db50bd85e422fe716fe2785d321a12eed8ab1416aa1eba052609eaf963bdd27d7bceb9a3fc282528415637a73529b335a7d7e9ea95a96a6431a5b100f923651c69421e57ada6cd6d230d58710b6d165f94b4937f7ab4c33813c760ece486b239ca867b28f6c0718e6918387014600298aefc22ddb4d39be60c4783490bd524d8c05150ea0f0397089c722d308303807671a43d099667231e7096c71e246e1213e4620ea9d03f6803e5368cf59396e38e605d0f41ac4df9fddfbf04e5201bd6c975047784373aa489bbd9b61ed212972dbba1d58e26f986d6881e856958748769504004e86b0d3d2f84151cbbbe3dc03f515d4d04b34a78bdb8d8b1f5bfa85f974f9d3a9c8334fabc8b0bc371e1078fe06f1f13b0d3b09d4f137051a6ed1a62c45a9af7de6f26d75fd320a2b344c0243dc347fe78537c9c2b2094cadec1db9150b5f85ffee42a57201d63dca81ff4448305303018016cf8ceef2560149ddb08dff28ce326c63b1367e2b2373eaacac2479b2a00eee07b6f605eebe1cca2e1ffb0ff4dc6b20ab7d93b9c940e3d51a64bf1962a7601717553d37f4de4610cc2595a7db423f66ba89e24eb081cf16de2f2d5ccdb71cc46bda52ff35ca67bdf2ebec1cde409b763c2b1fcae3581850ab643c11a31ee720b821f3184d8bde5fb38efe95718d8eec7db2ef2e56b43042b1173b77f16e3659a35ed3b8b9930d31ef4fa2f30c6e48a1aa9c7e89f128ea9dfc4b3aff5bc34576fc6cc935b9b8c47b5cd9f6f23c8cbca2f6f7826b12352b71a843cd9890b13b595b7bfd083b1440c762561baec76105009a134200a4c7b742a115d70ee8326729b1e7c8cf9629aa5ae70cf940f15d8f47e5e1839584e60ecc82f3f32b44b8b303cb636fba4b2344312bbda63686ac389a51c7f53bb3e651caa5d20b9561e31ec47cb047c2e46d025e93f1afd9e8b8a7718250a4d52dbd0527115a9335137aa39775103b9f6d08313361c96f011c5a226a8ffb74ed9a43b8e3c1f13e65277db4967170c0d65918ee3f390df6e3d9354b341eef255f2ecb25a7407dadff0a822e509c4861528a6c1c7da9990e026f65ee75a4cb4c164b79663d0c35ed548e9e2008a81713ee081948c41aa4f68c2a10faafe751f2500351b1ffd7a6d8ffe3c8fe79e105913734761835bd09965ca16d2a223985704e267dcf7f2a797139b608470642c62f2cca00909040a73235115d649b301691950f00fecee5fd6ebe9ed6a0f96405d22063a5b51713f42e0f2456668aa0ef6628ed7917c6bf2b00a1fb512406465848a457b66361527796767b5e1ccce650a9390993b400b9c46767e20b7c1ebefb28f3dd4b30b40024105afe3d8f8d5504114383be34ea4a5bb43176882e2db6315fdb1e105e1d0a67abdc3c5dc0b5edac3370b81bd69fcbd43b6ea88d51213be0b9a4f6604e44d25e2c1e7314bffe79456fe098d33547a3248d5ce7f1b8d3a618fb5cdd06ae6cd7c3b0c322d007a29e29e3c708624958e44edadde9fa8aa8e0ffdf37905a9bfb2cc59c8a4c475f63d262402fe83db41d68d9392662f0018fad199edd9df4bcb7ddbf066aaafdc9996ebad552de9da58baabe68fd851b66adb60261e879870b924276a8280a402d6e87b634091ed9d521a5a2fa982789637ed9377b9825e52928b200e496a062f17cb3613d4470f8a19b30979bcb0ec49d5fac1d95ad5fa7d65ecd7be70a6b54cf87d4696baedad190152b6b9dd1c7d9a692b577b10518abb993e18d0065a1eb61ad4dc8782f3bf1cab808737ec17d7866762a85de309199c51cf050a3a3da464b5d96cb1bb4e4a074bb415cbd191d6ed080d33d1cc11269f9f861d473f753eaa5afdaa3fe8baee62cafb69dfb656a77915c084311890d0fa75e973ed43f391d5575a69cf88c8c190161c0f7759305ea68f54fee92641735f5dc8936bd0061271a8768ad1129cb35b33418bfd4a517f06bd7bde76938b244756d4a4bfa738051e6dbe3518ffc8ffc8311103aef8ef8be86e993ae95078aeaab18c6088749d7268777b81ff1e1d8be51301a8a07275d70c63560449fa37fa486b42b5bb398bc078f2faf8b6c1feecd757e160cc80c4427fd887fb10643394d91273c1f05df9d229438e81faa0c0389c69f9baba7f1acaedcd57ed45e75b6f80bbf21a6d85d3e537bc727c75b45592519d12f0ead8bd03db7cad156cbfd4d2998d986b4e76cb79085d8d6ef1058a62b39e8c45409bce7b6529f4d1d20a58c0892b51b5d9a1570f8aa92c788d2315a185b6e62c412ed28d2ae008516cc1f137323bde784c0652db47e0b401e1d238c00fe8b97d469c59bb089a64293ff73c1481a22134031e1d984c5af9bafcc66f3a8daf7151070856d6cf10ca713918f2756ed43fb3e88828e5caed7690f29f9c929c1f3a6c4c14c6bc8dba92930b2e9dafdf6a59219b4ced5af6b0d3459b81729d9d2341cc84065cbbc4f347ccf1fac4b36c1b3ae5bc7178e183230cb108c1da84d0f3abdef9cf6cc291e16fbe453893158a2936b8ae897547cb0e7810317a7dd85d8a35f291bd688352f031fe445326b12cb54c1f9ae492446af9f918aee3d3e8e9c3581e45cb993b64dc2a96e38a4b8cb35198e490673030c7d43e0a726d961b13d04922dde6edb6c2a340dc050106fd5f5f86bb06a100b01400ebc52ef86f3eefb96d19d7304f70a4df11110817582d5ebcb7ad82214b67416c962bb53719bb5a23725d16b91e184932bf20fb38b6f24a04b987c60e5f2ca6b1c72f00ecbc1dc95a57513285c6f3d7382509b703937f5bb00a7a84ec2f2cfd9d24d9defc62e079430a3747254680579e80c71b5e4c298e89700fd69516066ce57f4a979a9630528d75264ecba50a9f5b452ccb67e496efcf37c864385429eb69c7359bf24a743d249c3c820b4ce52f0171c13d065e034ccf344a1e674215e01162db1f1648875b2efb339bab0aa6fc90bdca48a225f462ed9d1e036817ba13108c3cd421e72a5b9a517850e0350aad806ff7f0bb6482cf628c4bd3cde968318c325830095f2fae25d07dd2e6c7c40b1e0f426473c3f863fe602b0a050f08f9063675cfee0d181dfd25f229b32441fe65a03eea5991b7b5d4d421166763f858384ec81db89e4826bc9d9b8bec8574e2870c8b45eecffe0ef70ec8228813e71c6c464bfb4d15a170391da6bbc76f0bfa96f643aec6eacbd9a0f020ba7535c13495d53f6155fd1dcf7ee586c6649af5692daa42a25e9b77f1e98db0f4a790e4b365ecc023c4a1c6cbb74f3ece6daa7a7668137b5a91b44cd2e39f1336175c515ebd4115bc9505f5339648ab27ad02a80d27480ffd1cd371838eb3e4004a3612ea4d00000b8845b5630b557a31825a841ffde76036eb812cbbba85a1ce7089d624604111ce721fb0202c7d895b9a4910881e2e4e31e2c5081b856054cb294213a3ce20959edc986f75d364a36acd5c4b410812e1b143eff5dc5de5a3b95ca5491f12864c7a90611b924ac6e27285a55c01675ac79beb916c87d550dbf3680e86fa430973ee6b6ae5241dddc746e628b3661fa87dbeb667372864dddf15ea0fb502a7caf3c104013274ede27759bfaf5ffffc9164ecdad8ef60ecd2b4bda673671893c7318ffd74ca1ad6472e22eadb017bbcb5fae103c0b9b1ebe64ef27c5c7983dae35ca35a66608afbbddc2b39ea5a18d64a3a335511d76e1cc10cac8795de3b7d8bd757843fc0c1881161aea893755eee506ebf7d8c5db7383380cc20704ff2187b54acb568819458725a98b8b8acaa9960ed82e8e6950e9303c1271fa20b53bf88ce923da068abd859a47b4cb2fae1b0158a15877dea444a380a6a3d96cdcc3cf57f487c08358c66289fbfd1d71941b7f57f5564814872029cc881163b49165c577ac9c8e88c0e60d9b46c40a6e12ecb6156e3beceed37ba4b766f22bc2a0462b88b6d79b6fc66e2f6233d288dad362c9a3d1b4a85a83067dd4cbc3e34a7a627484bad415f3c631ab6dec02ea2756382609ebbf0cc1936509f74e1268b6649be9a42c2e01acbe4c99e93d8707494096db2d9d9f1d15bb41135791f8998438bf8602b6fef944d57becaa4735cdcd966cf474fe05eea412120a17ad7394da5ae4e4b17ff868ed0c1c5f630fb2f84e39e19c95d2c52d6907b6698e2b9c33f4f91104dcfc5fd1079f7b165d498eafce845164705eb02a8950be29f742b3f1758cc4b3aa140c9192924f9b873bd18f55957f29c810ec6a5d55d1dbba3a40e3e684481dc9cf0882521f9cc83d0aa9f0d9d4736c9f441de1165a318eef67fb1eb3dec926e68e270ee18cfa11af1b7bc1542a7d468f94bdaa7fcdf1d6a582447b30725756cef0f95b2262de528f8eca637696f035b056d84a816ca51cfaf34442cb5bfca348352baa695e757c096a14eb443e5ae087939c0bc930852747e815e4a88ae41fbe03e02ad774bc1968bf87be79b0b06a988f4ee05680181bae93855dfe37fffa7e54f2921d8f8953c60a922a9f1bf4037a5165521317923a54b11c20ac00a3d1090ba9ba527be75d94eb579c637b2d1ab5a453e2bb31ea53f72968c366fb9ffa71302408f6a6cd6f551e112341186c9429b7731ef6ceb20e5611b1379566138d3a5f5c68f21026d274fd6472f7981d097968d15cf8eff0fbd9d1f82376552c3684586de192a262129908372322b28d7446c9ad6784578b0d6271abfa6e65f4874b93a5b1527c5060859e39fd1c321b6b0d758de5533fd64c524c1b813c22a9ccc08ad00008393db1aab269c2e198fe339d53fb0ee4aed4160532fc6dbd2de1100c4cdb95a0776909f02e3a6d1d0efa31a9dce1066b1d6321d0856582843a8f8b27b2c960724b5cedc63004f7239f10cf19f68f15905b6fc4a1f572aee33264048cf67a64f3d89bb6153fe4f901641b0e75bc78dbe8615bbe107b36da40fc01d4f1b3861a79379edaa14218ec8365e71ea7672df0eee130486f3eb69f6e30cb33023ea65d9e7c1eb41fb1b154d647c08088588f4dfb903b10f739c7e73bf291d31b8012917c33b3ec337f1ecb259cea48f55da32dd919ca78597c945672d34be9047a7b192a412f2af31120e1b080c992c31bc1958e28ad6f6785728ab4e92f3786610ab8bf168beba550f964a3cdc0ade7da34cb67a31ffd9e0a8cb8b81f3d54baa9a1f168bb055686b8d2979a7025154a40c4c0b3a51a6f49fd6e463ef22a06fc11bdee43d802976df2f2e4f5ef19d2760b00a874943ecd62ee4d313ee0e40e42c55e536d03b83b11116ec127f7ba1f28d3050dedcb7bde7657b04ddc6cf2c781457952465cd15c470d3fd676f9b128f65862c17bf86ab5f6457099f69a73d9844fe80f24dd58771a91ab8a42eb05f8903bff88865125004b7fc5bb7295a2aa8bafaa403a072225c882b01603d129880b41e9a0c448043dc0e61fc27fd7b72216aaf5a3ee7865a3998d101e9731fbec282ca1adef99f52ed3f6a81783135414fd10bf6350512559af9d30377d42377a126390bfa500a75bc55a89cf954ecfb7413726db96c873c8685444706b6097b11b61a5a49423b58915c28b5d10fadd09de2cc4f7c322681d06000a12eeef5c95ab195c670f16184d8e8df47e53b6fa41fb2f458c01b097fc015996ae92009d9372527a1e6d48da8f6fc0bdda93f5914ce616c5839e40c5070e1f6935c9bbe7c12a9712bfe00bdc21f8d754fc8d7fdc240307556e89fa96182f1cf910f9d35b82c6d1bdb881b9dda84153d1c9811fc6edfb08060fa93f705fdbfc363f67d70d96b5b7cf70f1890a7514a13dc7dc21378a678fc5b4d70bc220ff0f457b6aae3387db31f722e875c9d7c750c007c2853ece391a3b3c91cacf2196dde5a4cf21d7573331d9ccf8400f22aecd2658133b1038071461e74a93502d86d89e1959ba7cbabd9464bfa8bb19b202991d2180f64698df2626dacec82a75bc87af2b01f2533cbbb7eab715ba51d8c6f55e6400df241f320ef14d083d0ae4664800453be7714f61b6f944928e1640f59bf5cd63b932340bcc0de5c44e1caca5ff36f657f48a690f6fa877347c2099b93aeb4dad3b919d426a3f66d3ffef33f839ed8eda03f7948ab072e03e512ee5f3c4e8642fd6a94780e629b2b35234515531adcd9ed444f62704ecbe3bed89577a8c58408cfca70d5e025a32dbba656d6d25cfb6fff0b4a6073bc63a54116236d3a21bc2e4defc589e2ecca133431aa37b2d112383bd97266b98560c8cbb98f024ef3c1e824104b0b80fd2f498ca2ee38b169bb6b10d06be6224a3c88486fd52ae635ca42c464607ba621abc0e5c935629622e33d318d609d15c4b45d7af9e60fccfb20d3daf26ffdab51bfe5e89e65908c9756fbf602c81d89b65611d9e26fa5f6c32a833536fc8faf8adfe3e8da52334f1e3ebc1bb69a36500dc7a28be14950f8aed9b44bee7c9545437b1a4defda34906b4432843055da2800395029a54013848f4ea88a0177528e4e35a728e1c4211ed80bcf851cb5caaa28d8529cbf28498c0b0d28c698e732517d5535b61bb8044c6e6a2f2fd5e6f93df150f68914787b1a9227b3798c5b9f549c41ce64064c1b5f14caa7571a2b9a75cc6cf5f09aef4c75fce91d1f3da369f032c4fb235d01e4453c7e64d49e57486e5119db3acad6ebde3b888a738c0756d06c2707040d767534c0677b21b5067c8c812c2ac08cfc6d088d0f1d65e38759310b294e54a02ad3ecde15eb11c4e42cae0b9f4c7174b44f7390e3978fc97308782d237dce816ef6e1262ae190e84fc4c7c22cb231b8724f03603e6f760a312081e04a55e13ab1da0ae5e9d684879c295dd1ad03aac736b2ba95920fdf9bba745cf809f02cc45733a904699193d4868d35cc44dc745aac9abfd5415a91a5f39a2e22957d97cee0865eb1452c189d5ec360d6b1bbc29953698bc65e370e70b4ce72b72115b3e83f38577b145f73143b1d9aef5d3df457e263f18a5ac602e4acf2c0feee88d9e487b1fd41bedcdf2fae4f662fa805a965714434ad0c8e7704dc6185040f5e3f2cf872cd0ade030de71ee65e2d0091a6921c3c00d3f630fe4bdc381740602475b176c52d9e2405104af69593f861b212c2d487665bae1c4c38a1369a065891587ba81afe3db36ebbb6e4a61b2adb95bdd6027663ad608da78ea7f79a1945b7f212a801610d21ee1f53a7f0169f4dfe198df53d248ebe180c635a4c1e27a0e1f8a0573e019f8276f3c2343aefd5fd666b9feb8c812923180f06c8a41f464c7de1eb44f071e3f5ab3b49e7e05dcb9640901a5b8b59e2ff5af3b4800d7d00d52a64a88aac033f008aeaf80a828817075d7e6be21985ae7b7dc542980030a235f35b3377b23a52c0a6e1f42a321638333cfbfa77986c58c040f02f3a121eccbd87437cdee563b9ac7f0e64b9c57d18abeaf2be56e9cb2b1704bbbfbb4a734f3734f98e9b37d6fe74a1049e58aaa1ba3d4232268ca69963b5169e0281d7700f8c14a2cb5d3f9f57d16b8402a0e11fb0fe080dfd82f6cf980f762b9456e96fecf229ee1f0c5de5e934f9aafd85a35bbe096b6f7e87bacdfd66a1874f7a55b924d1076d7ed23a31c40ea2a4fe6d7622910fdbc70a7d85cda9ac4dd93a4015fb6fac869831efb0515e6bb0f79a4ecd7557f70fd4ea749fb31c082f24eccae76ac5d5afacf6fe8d5f7e9a9b8956d6a5b99788759983a7be19e4cd9afb5d5221af14d3a62bbe29d44fdf9d1d112c67fe9bac82da0f5ab2b863838524ffd6a1733583fa8a173ecd283b449170272b50f8a30cefbb7599100a9927d89c72d51febc112868b92e218213a507ab5bdf5c89d52b2c0973922c604b367697a5cd80d649d2f7bf4c82b667f449c7489faea9896f30cd9b956d2c37d66c75a8f80449cb99364fe96d0af9735736fb348b2b826ce48f53ef1cf81eb6f5c9c71164c3a11d3fceafb2f774b7fa7cbc0c6dfa1f9ae748ff3cd431ddf4cf0c5f8b87c2b69e649422278d3818fa2fbf5d6469fa7b9182b605461350addf841bc9f02c06d71e1045e870d3c41a44422100177194adb2012207dec61681533b0a2ad979854e31b0bf6550368721d436aa9a420bc5eee335c5f5af5daceeef60eba4a87fd84cab73c0c34dae385baca7d4e9031c6af5b33b72fd6472babd65fa94054ff37a4282973cc346289f973a21861e80bd9a659ed16cea03590080c02a06d9defdae62813d2590d8e3bf043bd4170dd35d57c0315d7cc7d444c0f6e969d46b18ba0aaf1d7bba53546541d3c57a676540675fcd08e8d9f182b73aa4953299076b99c4640244369337dfba764ad69204620283df74819d5ae1d17aff95eb911eb8e47b20c62b2e8915c9ed1ae8a84879a42e12f59ab8ed2e121fbe6c26cca2910943e67203c4540d6fb6d67f650b6d216c5cd1c1cbc3b05e0f85f6203c47ad532c859c4917366a1767a4942f2ba1ad388eac17fd248da44a8538be26a222c04a867d867aaff7d98072922b2e6d66d0b265dc609984f6841f5858d263f1a353c72f47123489cde103b858fdaef3cdcbadc4d6b89ba9444d943600adb9a6834f197d07f259e0c3d4ce283fc4015d4aeee499ff30e87dceea76a16f1d641d1ded57675490ef0b3a83e6244e9bf840538c2358c9a0e5390d30bbf69ddb7315190face3f087af42aa1883cf7596b64c27cf110f9f2600e174ee2e4342b5e86f1e6dd1b46f99ef4abb0bd0db47d8deabac18af6e8ee6d56afb2b077a26df9da9fb26b3ca81d587aa109afb69877412b04f2659e3ef8e9b43f59b7bb9b245c3df51881699117b13c63c7b45f118abd6b915c72ad6c1fc42682e33b4cd350273feb50d442aa7fc0755959cdd03dd4db3e39cecdd3928dbf849304b4a782fa964ff179f6428cae5670b2906cd2a66e2f5032994a5a351d497771d064be3c1cdf87f35c42d6a0d403a9878eb1f96621eb75d0394dbccfa4c1ccb757e54e14ac569e2b59a5bbd79b70c68e3521d32740c3fc351fb5ef33ad433cf8d409369d659aea1895c6aca76779efd1488acb8bd0c4e9624c052067ccf66122d52b64cf5fe2d4d7871753c7101ee052322ff8110cf96669efa0534fa3024a58476d5ac8fb74217cf754ab806ab33f610aac97fa4fa2a29ae5c37ddda04d9f444e5bb348b2b48b9792caaf68abf2713a206f5437254c9ea4502d0c08b230fa15eef4abe9e0b280c3a7377e1c6b06135003bd6b257e162e3e724249d9d2a73fe8db0df73d005ed31ac79b2ee9bf6a6dba8817d501cedf394f7244511f7116acdda92ec7927f2da59be019801e85054cfd2011907e328bb5ae613098d911b3fefef031b86e39f82b8dbecd877cafc7d72a7e6bdbf163a24b9639ee1ca4607edb1872d747dc7c3a53f5b16f367d4c844cc70ac71e729c2609481559f2965fff3c81154ecd0962332f4bbb7a240431efd97da1ecc79de33a0ce90e6eb275968df8b933df205e3f1c5f41faf987f19bf302f72d9b1c1f3ca24a1a709f5b78c8c63d90fc82d426d6cec0fbf478d5d6d36010fb8d3de0ca0261dcfa13ff96f310349306980c038ae62ede9f7e9d74ea3606fb545fe3bd82b5beaa68bc5311e0a59a4b940f5e34735c24cce99df81ae53db0969aebcaac033c44bab3ece912e8ae41a301ab8645b013a64c2f4b9d9eeb0232517f9733e3844ec5599bdd6f4d07db1f8098461ae0fc347348f26d66dca4af292c48d6cf9981cece585bb6817e37c5e1df6e21d0a7c8a5beb2618e109e7a739107ab79fee9a7b1f72a86e42574dd8eecab02aa95c2165c14c2706fff717bc284cdb3eb3ef9e3954fa3500abde3a5ea3d7eac1ac4ead885140036e6af0d385de7aa48e424c5b9c261d19d5bcb2cf2933cc96f6d829bfeb062929295606be16bbaa093819b5828d69e5d44f47c702474ded4bbfe18fe67d01826e439af321f8066933f9af5d072060c4ba014de1f3f8c645e02df64d70abc619a8519fc8665cd363d2fc8a57cd448e563d5dfb45713db7c6e06b06ac294e54aeeab9ca6aa7f3dca7c2651cfe111debd48d664e0c20a4a4c966608f240758f1403b3e406fca8694b761f87cb8f5e4cc9be14eb033daba5c471c36d765e24d61ad41a9b79367ffc29f48b566d71ddaa799f85d2d59132ac96796741c03855e1ff4d2c3025f69eb2ba12dda100e187bfc3bf4bdf770bd65f148d75e013876c5b7d5581a752b991cad04e1bd822bc003769b2a64e7fea0c8667a4314686d75ef02a246cbc23987bb5f6a3014ce5cbc31e5da7cda20379f87312a6b6f569b73ab8172a6c8cfc33b11ee361ccdc50a334d9ecd88212c187bcbe6c740f74d84d4d53f705280b33b0e403eb900bb4256ec677fb31cff7da390dae2f5a431ea3ead0fc23dbcab9390e568bcf1af08847a476cfe2b5126098a6d045d62c6ea7bd37a34907f036f352310cee096f7341d5337444e3769f2b07d4625fe30147a0dff35d71003381c67451ce7fda72ec07b01fbcee6da7d6af9cef12a24f8266c9b45fc17bc220b155ffc14aefe56dd32597a078a04a31081b8a73b37b9bd4eb8ad28945f6130ca5073e6ec0cc30628334e1db2c6429fbc3de0c6b9451d34bde3df98855ac12083527a67b3d6112bf3b87b0f95c9081eb4baf72f207c1f4e2989ee07d8acf89d10c58d71bfa5950be1a59279f67b43e2593293bca131f0f45785d7636e3c003be8bda015ea0dbdffda30cd991e9bb826a364eb15c114a9d842d4745b0e2e7edf300d0013cbbf8d901017e58a0adbfd4b84218a297d47822e46ef40c11d59c8d157db4641d2c2068db3a279e33b1c42c633a276a5ba7a20e4bdab0c3917f077849a012f49658e5842c0b27300020bac3902c668a27f8cfeee0d537b56c4cf5652655bea6f56af0fd351bc2370d8eea79fc7dd57add7c081f78c9376267b6ac93058aedc6bef2f8abe21739caa86ef6083c0f3bfb75c7c0c6a34650f6d3fb884b715d53a1c830e5e0a216f8829059a542c437ee154317605cf52609b86b9c03a151943b7e1d8a861557067d4596b3ec57c7cd5af669115f727722a6d6145760d8186e7b5e034a8d2acca4e1fd1c8bf2b2cbe6946485cda4915c65883bdcf2991da2906731f1d4f32379590e45952ff55d69d48d529470924287ff31e1a0ceca1b3db7f6b8b5dfa417641f1661ba095a0fadc58bd3129bf72208b675574ec72dd2aad6461bef2503a38f728e6a8228c911b7bf3e0ed09304640df7bf6afe27bd66f9d2a3398e7ea8e868949bd4f105aaca1dd0bd1f5c22b51197ac05494c96875ee1bb0d93a4e32c81b5792bb4da59c6a1fc62d68e15d94834f9f35e7a8292cfd379f97a0b78e409168fdaa26addbc1c43f85e1b6153a0c5d6f58c48ff496b4390e856916165a9ed4995a0ef405b0ab6e2e89980409087c1b24687cf8bdf5fb403f7e177e749ba8dac7817ced27ada73caa094045103e6a0f96053065aec4086a97a20202f5748ea182a35b8b2cda4bc652b614757ddfc9cca9da8990a35848bbe5df7a07b444d01ae10a6a7a2808a0f7f8ba4670d37e59b3924f4561317eaa1cf93ee94caf3c8f3d0d085b4fcd5dd9f5c610ef1eada4324f7cb62729f7c9076eeea3e6c8c8eb079bd28dc6806e16fee49e1ca6b72b6765a4fbbfa84e528209fd4724f783683f1a86fabc2e69fb8eaff6c7b6b174ff1fc577ae178ee30655841d4a540db9cdeaafe40b8895df2eb87ed762d3119cf79f7f97c4ea3b852afd9fa5c3cfb5e2d7ad9e525983b373143b7380b82c6f57979af0504aac8b21e61323aab010d9834a2e07282904255c0479c2fea73b82d9763d6523f2d130ea8619a32164fd1cca8ace3262faaecb7492de1f9c78d9b07ab1c51f1e5e88437c0c31145c64da9dcf091e5b51d2272ad2b0909404ee4c79c955e348371c99f6904bdf1130480ca600455fbc829d541bae49eed01b6ea1cb4e178862377453e16159788ebe1820d889be5151a4e1dda3a71eb9b0511dcc9ea60e01f41cfa3fb71f110881babab38f81e82cb415578e588a2ad677caa2fb1114a004cbe9f1c83da1d20a0e12c7705b59fbb1dc015b3032d10674f717148768d982de11e088d92e582e946b6cc483767aca359e3a735f335053e5c582c547ca8d36b33a9dbb745eb0f49a5679868ebd00b13dde2a47a4607704c3881c48af5c3dbc3e0bf3dab01a0ab8b22cec88593a75c7e7dad10781e483dad3508020ce5a586f9f0777633efbab64f17641a8ba5909714251649d70222275a576cfac8cd63a72cf9bc46b9d221ad6e1be06db424645cdd373f81b5a203aa91c4edff43ff1b88c653fdd3659a6509b550a25d7873a4a5b930e633f1a39e39261c6f2f5df8a5477ec03cf995d9fd54a9a5e340008a7171e6d7f6fe9856f1b99fa04209937c34b1e6333cb13b57e9682238fb498bbbfda54d67d385e9b782c86046a3fdd10c206f86134168e66a0bd4d083a1b889dd978b560b23ecee49f51efa5387cdcbf7f69928a8f82ff7c2e6c3e0974f5a294513cb42c150ff826eec2e7892c4c6da48cfeb742d3811465e28385749061a9f9be62bf0a54c0bc088b0e19b0ebb03f05ae07eb63dc4c96c91d923224d56c64519411c0a88c8a1bd8cab60cd4bed606253425395db2c79fc284d0a2022f07b9321c51542ccf255e9b749ad39b8287b9cf5ae726c47eb36641ea74017582d559a75d97d3c27750ae2f90a8f17e1fd9c0332f0c1e2e9e99ab939a43fb3ae03afefde50cbf5e7a5e22a55edd67d772e9284a0bf68abc25dd6b4b54b4c20fe2d0fad4e6a16dda75cc0db066cbad62cf786c04048713c3cac949a1bbc77e895e12d8f97ffae6f4ad71a571ccff43335213e8f7c5d31e57b0815688f27556274251eda5bba7ce9939e9728e19074799553cf22ad0585a9660e7bafb10781df7733067e170b36ddb1cb5ed723d479438f4f2306f928fbb0e34e51c79e698f053081335d4c6ff41a61e02e680f67378ff5ecf08dbc4c519e6ea71fc9f40f8df65d3b9908c0cca30d8eb4ce5df6aa956529a427af082e539a8badcb16c784c74eb2e8773dfa4ed59beb6d148dd214cbac3603bf1fb7946bdc183b9c2d846d9e8b089532523c8c1a3e19891486c8fa78687fc8db44f0a7c81d2cdb732e2e0260a60ff0929ab9564ac9f6563261bc7538b2346157db19569f7646061c693e37b97acd6e9a6f0c0244dade86237bd10bdd0d47e85bed6e973947cf70dc599e7a128490211082d75b5dca5be9a21840c97a094cfdc3789b0926186b6b9d8822ebb1b6fedc980df838d6feeda42076b866b2b72d1950d25a61b18154dcfec6bf9782f16211381a92a0934bdf267ae54e5409975dcbe986e724a7df161a4e73f430eb8f125e55d1b489c87d5a326891f58fec5fceb01a58435436a715781d13c799ad1101fa7001115c4443cef57e7814c1df6d884df0443f37f853d109c90296070581e43382413cd870c4b768d79e28c21361f9a515f32feb5f369b9502816c1e1f1d282493fc7d4ca43c26dd8cdaf6eb46ec568e89aaa1c540c9a8c1ae34870d65e1acda1517041a77d71819578b20775dbbd267bd3f3271241e852aeb026c5a47195413211b0183f6835518ac09252586247c0fed7e19a81f74376419d09991df994951fb847d140c960a0a8a490c00f2aeb4a15ca77267365a67183beff88bf3f5c8998008ffa98e2fbe849f64505e2481a037bda20c657a8064060f3c15b53a4c3c213d60f751f1ee4ff717d4dbbc0073d89d1cf0f6bb15b0cde4ff066900f6c322f6152ad22226982aeea7d0e3d2e838feaeec3a00e32c06911565931696ddda252cbda7e6119ccf2f7cf57026aba82d12ca6bf5665eb95f53cc6cf9b038136fee8328b98b7fc5274ff2f6f927d615e9295ea82c0cabf5dee543a42beed70de7828a49f8381d88a499157901f8838d36fb454d38c266b890ec8185676a93d01ba807d28bff20c8a059c140d02fd9c5e40761c288638f9a7d41fc7a95a82550fdb6841b741dd7cbde7cafcd25c84d793b5b689181352dd9a7b378463340a34c968796d80312bc2a7abf3351a66db0747d42e904ffbdc6d79fc03c8d1f187114bc92dd95fed7411fec6ae96bdba1eb3afc621739811014598e6d04a7da5513d78b73f622ac18b15c6e029b499f992f0153948c34e50c863ccc9818fccc98dbc6309e5cb371f1d7f45d2b93e9b5c260a9e08c98fca4eb2ab4a8a3f994b3b9bcfa09a63cfd2176748ea1eb0233a243fe5fa0ac310c9383ee82b6f849cc2b0992a29cfeb3129656cabf448c1a36832bf8848d006371b931241c48e4f4bf33f88bbda49ff7a5d7eeed5a8c720eeab4b5f7bf3da25db333fd7bf1d064927f9909246f2b5e148d0a85d6becc6882723843994946e825cd813955bf17d7d500c1d3ff3fabcd72dc47f038321cd613d729eb6eb44ef47b78202cc5d4a7126133e589ceecd18deb7f5b414b6f8e9cdb6551440ff41585896382383c64449911376447fe0d01d4a49a58853d9f6f78f7b047cf0b631f7ca027d458027664793c77c7ff7a895add10ffff044aa2c0c455d689643cc0bcb2b7673ac7cb0af6ff377f8dd18b38ba9c4df3c2a744535b7d9b0a3d225e1dda2b83cdf0631146dab68d9cf59b50fad9a7a0ae71df909adfdbd85e708de5362c6edad84d667256e59f748860adb6a9b33603520e3c8afd57862791306550839cf91595ebfa07d98691bff6234682ddc5a0c759abfe40e27196cbcfe4f61aa492d986a8d065718cac9dfffae55177ffea0e23b53510baf211f429074d9eadde44a4f2164aad37fa3ab2c193f699e5482b51770e706602946561dabb472b8387b22a1f4d1a59ef5cd22e0cdb9e00a85a09dcb379caf5257c5badaf6e441622ccf0851dae662b0818085aeb3e78844143e4947227d8f63bcfd683fb62f1c22a3f0535d03914dbc79dba9431644d19b94eebd67695ffad52a3d3ec9b3127e0ae498563145528b3f36fb73193ee07 Please enter the password to view the content.","categories":[{"name":"Other","slug":"Other","permalink":"https://yncbearz.github.io/categories/Other/"}],"tags":[{"name":"Private Note","slug":"Private-Note","permalink":"https://yncbearz.github.io/tags/Private-Note/"}]},{"title":"MSSQL 報表語法","slug":"MSSQL-Report-Syntax","date":"2023-01-15T06:58:48.000Z","updated":"2025-05-30T08:15:23.249Z","comments":true,"path":"2023/01/15/MSSQL-Report-Syntax/","permalink":"https://yncbearz.github.io/2023/01/15/MSSQL-Report-Syntax/","excerpt":"MSSQL-Report-Syntax","text":"(參考MSSQL) Context 我們是個中文教學的網絡平台，透過跟不同的課程提供者合作來盈利。擁有以下的資料表，來記錄平台的狀況。 為求簡化，我們不會列出所有的表跟欄位。其中有些表可能違反了正規化。 Table: SessionInfo Column Description Id 課程編號 Browser 使用的瀏覽器 (Chrome, Firefox, Safari, …) ServiceProvider 課程服務的提供者 (TutorChinese, ChineseTalker, ChineseCamp, …) Country 連線的國家 (Japan, Korea, Singapore, …) Cost 課程花費 (單位為連線國家的貨幣) TeachingFee 給提供者的教學費用 (單位為連線國家的貨幣) ConnectionTime 連線時間 (以秒記) UserId 使用者編號 Type 課程類型 (Listening, Speaking, Reading, Writing) Status 課程狀態 (Started, Cancelled, Done) Date 連線日期 (UTC 時間) Table: ExchangeRate Column Description Id 貨幣換算編號 Country 貨幣換算的國家 (Japan, Korea, Singapore, Thailand, US, …) MonthKey 貨幣換算的時間 (格式: 202301) Rate 匯率 Preparation Table: SessionInfo Create Table 1234567891011121314CREATE TABLE SessionInfo ( Id INT IDENTITY (1, 1) PRIMARY KEY, Browser nvarchar (50) NOT NULL, ServiceProvider nvarchar (20) NOT NULL, Country nvarchar (50) NOT NULL, Cost DECIMAL(18, 6) NOT NULL, TeachingFee DECIMAL(18, 6) NOT NULL, ConnectionTime INT NOT NULL, UserId INT NOT NULL, Type VARCHAR(20) NOT NULL, Status VARCHAR(20) NOT NULL, DATE datetime NOT NULL, ); Insert Data 利用 PHP，產生隨機資料的程式碼 12345678910111213141516171819202122232425262728&lt;?php$browsers = [&#x27;Chrome&#x27;, &#x27;Firefox&#x27;, &#x27;Safari&#x27;];$serviceProviders = [&#x27;TutorChinese&#x27;, &#x27;ChineseTalker&#x27;, &#x27;ChineseCamp&#x27;];$countries = [&#x27;Japan&#x27;, &#x27;Korea&#x27;, &#x27;Singapore&#x27;];$types = [&#x27;Listening&#x27;, &#x27;Speaking&#x27;, &#x27;Reading&#x27;, &#x27;Writing&#x27;];$statuses = [&#x27;Starting&#x27;, &#x27;Cancelled&#x27;, &#x27;Done&#x27;];$result = &#x27;INSERT INTO SessionInfo (Browser, ServiceProvider, Country, Cost, TeachingFee, ConnectionTime, UserId, Type, Status, DATE)VALUES &#x27;;for ($i = 1; $i &lt;= 1000; $i++) &#123; shuffle($browsers); shuffle($serviceProviders); shuffle($countries); $cost = rand(8443, 243427); $fee = (rand(300, 800)) * 0.001 * $cost; $connectionTime = rand(3550, 11000); $userId = rand(1,1000); shuffle($types); shuffle($statuses); $dateInt2022= mt_rand(1640995200 ,1672444800); $date = date(&quot;Y-m-d H:i:s&quot;,$dateInt2022); $result .= &quot;(&#x27;$browsers[0]&#x27;, &#x27;$serviceProviders[0]&#x27;, &#x27;$countries[0]&#x27;, $cost, $fee, $connectionTime, $userId, &#x27;$types[0]&#x27;, &#x27;$statuses[0]&#x27;, &#x27;$date&#x27;),\\n&quot;;&#125;$result = substr($result, 0, -2) . &#x27;;&#x27;;echo($result); 產生的範例 123INSERT INTO SessionInfo (Browser, ServiceProvider, Country, Cost, TeachingFee, ConnectionTime, UserId, Type, Status, DATE)VALUES (&#x27;Chrome&#x27;, &#x27;TutorChinese&#x27;, &#x27;Japan&#x27;, 8443, 6332, 3600, 1, &#x27;Speaking&#x27;, &#x27;Done&#x27;, &#x27;2022-01-15 09:00:00&#x27;),(&#x27;Chrome&#x27;, &#x27;TutorChinese&#x27;, &#x27;Korea&#x27;, 81709, 61283, 3610, 2, &#x27;Speaking&#x27;, &#x27;Done&#x27;, &#x27;2022-01-15 09:00:00&#x27;); (Note.) 利用上述程式碼產生的資料，主要盈利的分佈會是 Singapore &gt; Japan &gt;&gt;&gt; Korea Table: ExchangeRate Create Table 1234567CREATE TABLE ExchangeRate ( Id INT IDENTITY (1, 1) PRIMARY KEY, Country nvarchar (50) NOT NULL, Rate DECIMAL(10, 6) NOT NULL, MonthKey datetime NOT NULL, ); Insert Data 12345678910111213141516171819202122232425262728293031323334353637INSERT INTO ExchangeRate (Country, Rate, MonthKey)VALUES (&#x27;Japan&#x27;, 0.2408, CONVERT(DATETIME,&#x27;20220101&#x27;, 112)),(&#x27;Japan&#x27;, 0.242, CONVERT(DATETIME,&#x27;20220201&#x27;, 112)),(&#x27;Japan&#x27;, 0.2443, CONVERT(DATETIME,&#x27;20220301&#x27;, 112)),(&#x27;Japan&#x27;, 0.2341, CONVERT(DATETIME,&#x27;20220401&#x27;, 112)),(&#x27;Japan&#x27;, 0.2264, CONVERT(DATETIME,&#x27;20220501&#x27;, 112)),(&#x27;Japan&#x27;, 0.224, CONVERT(DATETIME,&#x27;20220601&#x27;, 112)),(&#x27;Japan&#x27;, 0.2205, CONVERT(DATETIME,&#x27;20220701&#x27;, 112)),(&#x27;Japan&#x27;, 0.2292, CONVERT(DATETIME,&#x27;20220801&#x27;, 112)),(&#x27;Japan&#x27;, 0.2181, CONVERT(DATETIME,&#x27;20220901&#x27;, 112)),(&#x27;Japan&#x27;, 0.2198, CONVERT(DATETIME,&#x27;20221001&#x27;, 112)),(&#x27;Japan&#x27;, 0.2173, CONVERT(DATETIME,&#x27;20221101&#x27;, 112)),(&#x27;Japan&#x27;, 0.2263, CONVERT(DATETIME,&#x27;20221201&#x27;, 112)),(&#x27;Korea&#x27;, 0.0233, CONVERT(DATETIME,&#x27;20220101&#x27;, 112)),(&#x27;Korea&#x27;, 0.0231, CONVERT(DATETIME,&#x27;20220201&#x27;, 112)),(&#x27;Korea&#x27;, 0.0233, CONVERT(DATETIME,&#x27;20220301&#x27;, 112)),(&#x27;Korea&#x27;, 0.0235, CONVERT(DATETIME,&#x27;20220401&#x27;, 112)),(&#x27;Korea&#x27;, 0.0233, CONVERT(DATETIME,&#x27;20220501&#x27;, 112)),(&#x27;Korea&#x27;, 0.0235, CONVERT(DATETIME,&#x27;20220601&#x27;, 112)),(&#x27;Korea&#x27;, 0.023, CONVERT(DATETIME,&#x27;20220701&#x27;, 112)),(&#x27;Korea&#x27;, 0.0231, CONVERT(DATETIME,&#x27;20220801&#x27;, 112)),(&#x27;Korea&#x27;, 0.0225, CONVERT(DATETIME,&#x27;20220901&#x27;, 112)),(&#x27;Korea&#x27;, 0.0221, CONVERT(DATETIME,&#x27;20221001&#x27;, 112)),(&#x27;Korea&#x27;, 0.0227, CONVERT(DATETIME,&#x27;20221101&#x27;, 112)),(&#x27;Korea&#x27;, 0.0235, CONVERT(DATETIME,&#x27;20221201&#x27;, 112)),(&#x27;Singapore&#x27;, 20.552, CONVERT(DATETIME,&#x27;20220101&#x27;, 112)),(&#x27;Singapore&#x27;, 20.5859, CONVERT(DATETIME,&#x27;20220201&#x27;, 112)),(&#x27;Singapore&#x27;, 20.6607, CONVERT(DATETIME,&#x27;20220301&#x27;, 112)),(&#x27;Singapore&#x27;, 21.1392, CONVERT(DATETIME,&#x27;20220401&#x27;, 112)),(&#x27;Singapore&#x27;, 21.2932, CONVERT(DATETIME,&#x27;20220501&#x27;, 112)),(&#x27;Singapore&#x27;, 21.2106, CONVERT(DATETIME,&#x27;20220601&#x27;, 112)),(&#x27;Singapore&#x27;, 21.3519, CONVERT(DATETIME,&#x27;20220701&#x27;, 112)),(&#x27;Singapore&#x27;, 21.9154, CONVERT(DATETIME,&#x27;20220801&#x27;, 112)),(&#x27;Singapore&#x27;, 21.8025, CONVERT(DATETIME,&#x27;20220901&#x27;, 112)),(&#x27;Singapore&#x27;, 22.1604, CONVERT(DATETIME,&#x27;20221001&#x27;, 112)),(&#x27;Singapore&#x27;, 22.711, CONVERT(DATETIME,&#x27;20221101&#x27;, 112)),(&#x27;Singapore&#x27;, 22.5993, CONVERT(DATETIME,&#x27;20221201&#x27;, 112)); Menu Annual Report By Country Quarter Type Country Count QAU Volume(TWD) Fee(TWD) FeePercentage(TWD) Q1 Listening Japan 30 12 73000 51100 70% … Volume Over 50k Users By Country Quarter Country Count Q1 Japan 112 … Connection Time Over 2 Hours Percentage By Type Quarter Type Percentage Q1 Speaking 24% … Favorite Service Provider By Browser Browser ServiceProvider MaxCount Chrome TutorChinese 30 … Done Rate By Country Type Country DoneRate Speaking Japan 75% … Japan Consumption Quartile 25th 50th 75th Volume 2353 6794 8443 250 … Annual Report By Country12345678910111213141516171819202122232425262728293031323334353637383940414243;WITH SessionInfoV2 AS (SELECT si.Browser , si.ServiceProvider , si.Country , si.ConnectionTime , si.UserId , si.[Type] , si.Status , CONCAT(&#x27;Q&#x27;, DATEPART(QUARTER, si.[DATE])) AS Quarter, DATEADD(MONTH, DATEDIFF(MONTH, 0, si.[DATE]), 0) AS Monthkey, si.Cost , si.TeachingFeeFROM SessionInfo si WITH (nolock))SELECT siv2.Quarter, siv2.[Type] , siv2.Country, Count(1) AS Count, Count(DISTINCT(siv2.UserId)) AS QAU, Sum(siv2.Cost * er.Rate) AS &#x27;Volume(TWD)&#x27;, Sum(siv2.TeachingFee * er.Rate) AS &#x27;Fee(TWD)&#x27;, CONCAT( CONVERT (Decimal(10, 2), Round( Sum(siv2.TeachingFee * er.Rate)/ Sum(siv2.Cost * er.Rate), 4 )* 100), &#x27;%&#x27;) AS &#x27;FeePercentage(TWD)&#x27;FROM SessionInfoV2 AS siv2 WITH (nolock)JOIN ExchangeRate AS er ON siv2.MonthKey = er.MonthKey AND siv2.Country = er.CountryWHERE siv2.Status = &#x27;Done&#x27;GROUP BY siv2.Quarter, siv2.[Type], siv2.Country; Volume Over 50k Users By Country1234567891011121314151617181920212223242526272829303132333435363738394041424344454647;WITH SessionInfoV2 AS (SELECT si.Browser , si.ServiceProvider , si.Country , si.ConnectionTime , si.UserId , si.[Type] , si.Status , CONCAT(&#x27;Q&#x27;, DATEPART(QUARTER, si.[DATE])) AS Quarter, DATEADD(MONTH, DATEDIFF(MONTH, 0, si.[DATE]), 0) AS Monthkey, si.Cost , si.TeachingFeeFROM SessionInfo si WITH (nolock)),SessionInfoV3 AS (SELECT siv2.Quarter, siv2.Country, siv2.UserId, Sum(siv2.Cost * er.Rate) AS &#x27;Volume&#x27;FROM SessionInfoV2 siv2 WITH (nolock)JOIN ExchangeRate AS er ON siv2.MonthKey = er.MonthKey AND siv2.Country = er.CountryWHERE siv2.Status = &#x27;Done&#x27;GROUP BY siv2.Quarter, siv2.Country, siv2.UserId)SELECT siv3.Quarter, siv3.Country, Count(DISTINCT(siv3.UserId)) AS CountFROM SessionInfoV3 AS siv3 WITH (nolock)WHERE siv3.Volume &gt; 50000GROUP BY siv3.Quarter, siv3.Country; (Back to Menu) Connection Time Over 2 Hours Percentage By Type1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859;WITH SessionInfoV2 AS (SELECT si.ConnectionTime , si.[Type] , si.Status , CONCAT(&#x27;Q&#x27;, DATEPART(QUARTER, si.[DATE])) AS QuarterFROM SessionInfo si WITH (nolock)),Summary AS (SELECT siv2.Quarter, siv2.[Type], Count(1) AS CountFROM SessionInfoV2 AS siv2 WITH (nolock)WHERE siv2.Status = &#x27;Done&#x27;GROUP BY siv2.Quarter, siv2.[Type]),Over2Hour AS (SELECT siv2.Quarter, siv2.[Type], Count(1) AS CountFROM SessionInfoV2 AS siv2 WITH (nolock)WHERE siv2.ConnectionTime &gt;= 7200 AND siv2.Status = &#x27;Done&#x27;GROUP BY siv2.Quarter, siv2.[Type])SELECT sm.Quarter, sm.[Type], CONCAT ( CONVERT( DECIMAL(10, 2), ( CONVERT(DECIMAL(10, 2), ISNULL (o2.Count, 0)) / CONVERT(DECIMAL(10, 2), sm.Count) ) * 100 ), &#x27;%&#x27; ) AS PercentageFROM Summary AS smLEFT JOIN Over2Hour AS o2 WITH (nolock)ON sm.Quarter = o2.Quarter AND sm.[Type] = o2.[Type]ORDER BY sm.Quarter, sm.[Type]; (Back to Menu) Favorite Service Provider By Browser1234567891011121314151617181920212223242526272829303132;WITH Summary AS (SELECT si.ServiceProvider , si.Browser, Count(DISTINCT (si.UserId)) AS CountFROM SessionInfo si WITH (nolock)WHERE si.Status = &#x27;Done&#x27;GROUP BY si.ServiceProvider , si.Browser)SELECT s.ServiceProvider, s.Browser, s2.MaxCountFROM Summary AS s WITH (nolock)INNER JOIN ( SELECT s1.ServiceProvider, Max(s1.Count) AS MaxCount FROM Summary AS s1 WITH (nolock) GROUP BY s1.ServiceProvider) s2ON s.ServiceProvider = s2.ServiceProvider AND s.Count = s2.MaxCount; (Back to Menu) Done Rate By Country123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354;WITH SessionInfoV2 AS (SELECT si.[Type] , si.Country , si.Status, Count(si.Id) AS CountFROM SessionInfo si WITH (nolock)GROUP BY si.[Type], si.Country, si.Status),Summary AS (SELECT siv2.[Type] , siv2.Country , Sum(siv2.Count) AS CountFROM SessionInfoV2 siv2 WITH (nolock)GROUP BY siv2.[Type], siv2.Country),Done AS (SELECT siv2.[Type] , siv2.Country , siv2.CountFROM SessionInfoV2 siv2 WITH (nolock)WHERE siv2.Status = &#x27;Done&#x27;)SELECT s.[Type], s.Country, CONCAT( CONVERT( DECIMAL(10,2), ( CONVERT(DECIMAL(10,2),ISNULL (d.Count,0)) / CONVERT(DECIMAL(10,2),s.Count) ) * 100 ), &#x27;%&#x27;) AS DoneRateFROM Summary AS s WITH (nolock)LEFT JOIN Done AS d ON s.[Type] = d.[Type] AND s.Country = d.CountryORDER BY s.[Type], s.[Country]; (Back to Menu) Japan-Consumption-Quartile1234567891011121314151617181920212223;DECLARE @StartTime DATETIME = &#x27;2022-01-15 09:00:00&#x27;;DECLARE @EndTime DATETIME = &#x27;2022-01-15 10:00:00&#x27;;WITH JapanConsumption as ( SELECT Cost FROM SessionInfo WITH (nolock) WHERE Country = &#x27;Japan&#x27; AND [Date] &gt;= @StartTime AND [Date] &lt;= @EndTime)SELECT top 1 PERCENTILE_CONT(0.25) WITHIN GROUP (ORDER BY Cost) over() AS &#x27;25th&#x27;, PERCENTILE_CONT(0.5) WITHIN GROUP (ORDER BY Cost) over() AS &#x27;50th&#x27;, PERCENTILE_CONT(0.75) WITHIN GROUP (ORDER BY Cost) over()AS &#x27;75th&#x27;, (select count(1) FROM JapanConsumption WITH (nolock)) as VolumeFROM JapanConsumption; (Back to Menu) ʕ •ᴥ•ʔ：整理好久的範例啊","categories":[{"name":"Programming","slug":"Programming","permalink":"https://yncbearz.github.io/categories/Programming/"}],"tags":[{"name":"SQL","slug":"SQL","permalink":"https://yncbearz.github.io/tags/SQL/"}]},{"title":"元素耦合性","slug":"Component-Coupling","date":"2022-09-16T06:22:27.000Z","updated":"2025-05-30T08:15:23.228Z","comments":true,"path":"2022/09/16/Component-Coupling/","permalink":"https://yncbearz.github.io/2022/09/16/Component-Coupling/","excerpt":"Component-Coupling","text":"The Acyclic Dependencies Principle (ADP)Allow no cycles in the component dependency graph. 元素依賴關係中不允許出現環。 Example Solution 利用依賴反轉原則。 建立新元件，改變依賴結構。 Summary 隔離易變性。 提高可建置性 (buildability) 和可維護性 (maintainability)。 The Stable Dependencies Principle (SDP)Depend in the direction of stability. 朝著穩定的方向抽象。 Definition Fan-in: 輸入依賴度。元件外部，依賴於該元件的類別個數。 Fan-out: 輸出依賴度。元件內部，依賴於元件外的類別個數。 Instability: 不穩定性。 $$I&#x3D;\\frac{Fan-out}{(Fan-in + Fan-out)}，I∈[0,1]$$ Example 計算I值 違反SDP的例子 Solution 利用依賴反轉原則。 Summary 當高階&#x2F;低階模組角色錯置問題時，考慮依賴反轉原則。 無環依賴原則 (ADP) 及 穩定依賴原則 (SDP) 是依賴反轉原則的延伸。 The Stable Abstractions Principle (SAP)A component should be as abstract as it is stable. 元件的抽象程度應該與穩定程度一致。 一個穩定的元件應該是抽象的。 一個不穩定的元件應該是具體的。 依賴應該朝著抽象的方向。 Definition $N_c$ 一元件中類別中的總數。 $N_a$ 一元件中抽象類別及界面的總數。 $A$ 表示抽象性。$A&#x3D;N_a \\div N_c$ 。 $A∈[0,1]$。 Example Summary藉由定義出計算抽象性的度量方式，我們便可以監控依賴關係在不同版本間的變化，進而對設計作出調整。 ʕ •ᴥ•ʔ：順手整理一下以前寫過的筆記。","categories":[{"name":"Clean Code","slug":"Clean-Code","permalink":"https://yncbearz.github.io/categories/Clean-Code/"}],"tags":[{"name":"Principle","slug":"Principle","permalink":"https://yncbearz.github.io/tags/Principle/"}]},{"title":"不！","slug":"Nope","date":"2022-09-08T15:29:03.000Z","updated":"2025-05-30T08:15:23.251Z","comments":true,"path":"2022/09/08/Nope/","permalink":"https://yncbearz.github.io/2022/09/08/Nope/","excerpt":"Nope!","text":"短評不！ 85分 「如果你要訴說一個你無法描述的神秘現象，你會說什麼？」「不！」 這是由拍攝「逃出絕命鎮」及「我們」的導演，喬登·皮爾在2022年的最新作品。一如既往地使用黑人作為主角，搭配上恐怖元素。 上個週末，朋友推薦時，強烈建議不要事先看預告跟劇情。但其實我每部電影都是這樣做啊。 查了下電影app，發覺這部電影放映時間意外的少。全高雄只有四場。索性去了沒去過的岡山秀泰。 撇除捷運來回比較貴之外，當天的觀影體驗很棒。只有一位陌生觀眾，整個影廳幾乎被我們包場了。 回到電影，個人覺得勢必會列入影評社的研究中。 其中的譬喻與象徵很多，彼此前後呼應，我特別特別喜歡結局前的五分鐘。 唯獨劇情方面不夠優秀，Google影評只給出75分。如果文本能再貼近大眾一些，這部電影應該可以得到更好的評價。 如果有打算觀賞這部電影的朋友，這邊提供一個問題，讓你能更投入其中。 Q:「電影男主角與女主角，對於神秘現象態度轉變的原因是什麼？」 以下涉及劇情，建議觀影後再閱讀。 下方為主要人物名稱對照表: 演員 角色 丹尼爾·卡盧亞 歐傑·海沃（OJ Haywood） 琪琪·帕瑪 莫洛·「安」·海沃（Emerald “Em” Haywood） 布蘭登·皮雷亞 安傑·托雷斯，3C家電的店員（Angel Torres） 史蒂芬·連 瑞奇·「朱佩」·帕克（Ricky “Jupe” Park） 個人心得 開頭 透過哥哥歐傑與父親的聊天片段，勾勒出馬場的生意已經不如以往。 妹妹安，則不太想被綁在家族企業之下，試圖發展其他副業。 發現神秘現象 隨著父親因意外去世，我們知道馬場附近有了神秘現象。 歐傑對此沒有很積極，反倒是安認為在網路時代，只要拍攝出神秘現象的原貌，是一個致富翻轉，拯救家族的機會！ 準備工作，試圖開始拍攝 安找到了3C家電的店員，幫忙架設監視器。也試圖聯絡大導演前來幫忙拍攝。但被一口回絕。 導演對安說：「你還沒準備好在世界頂級的舞台。」算是對後面劇情的一點暗示。 與鄰居朱佩家族的衝突 安跑去偷隔壁馬場的假馬裝飾，導致對方回來報復。 有個恐怖的橋段很有趣，是毆傑想把燈關掉，但燈一直亮起來。跟常見的情況相反。 而朱佩提到當年攝影棚，黑猩猩在聽到「叢林」兩字後會暴走的細節。 或許是偷偷在說明，神秘現象是因為「地盤」被入侵，才會導致失控。 瞭解到神秘現象的真面目 經歷過幾天的拍攝，神秘現象的真相也越來越清晰。不是什麼外星人，而是會吃人的巨大飛碟怪！ 安與店員，此時已經打退堂鼓，決定搬離家中。儘管拍攝後可能會改變人生，也不願為此賠上生命。 此時歐傑的回話很有意思：「你走吧！我明天還得早起餵馬！」 與先前以為是外星人時的態度判若兩人。 在瞭解到神秘現象的本體是巨大生物後，歐傑顯露出職人精神，打算將其馴服。 導演的加入 導演聽聞新聞報導，也趕來馬場加入拍攝。 作戰會議期間，店員有句精彩台詞：「我們做這件事，除了錢和名譽，還對人類有幫助吧？」 像是征戰沙場，前往第一線的士兵。最終還是需要一個堅持下去的理由與信念。 而拍攝工作的過程不算相當順利。 導演也說了一句台詞：「我們不配拍到我們不該擁有的畫面。」 導演脫離團隊，獨自一人走上山丘。為了拍出最好的畫面，逐漸拉近與飛碟怪的距離，最終為藝術獻上了生命。 結局 哥哥歐傑憑藉馴馬的經驗，找出了飛碟怪的弱點，並與其展開纏鬥。 妹妹安透過井口的相機，一張一張地拍出哥哥馴服飛碟怪的過程。 致敬了當年高祖父馴服野馬的兩秒影片，同樣透過照片逐格迭代出來的方式。 馴馬人的精神得以在現代重新呈現出來。 ʕ •ᴥ•ʔ：最後結局的呼應真的太棒了！","categories":[{"name":"Life","slug":"Life","permalink":"https://yncbearz.github.io/categories/Life/"}],"tags":[{"name":"Movie","slug":"Movie","permalink":"https://yncbearz.github.io/tags/Movie/"}]},{"title":"元件内聚性","slug":"Component-Cohesion","date":"2022-09-03T09:17:14.000Z","updated":"2025-05-30T08:15:23.228Z","comments":true,"path":"2022/09/03/Component-Cohesion/","permalink":"https://yncbearz.github.io/2022/09/03/Component-Cohesion/","excerpt":"Component-Cohesion","text":"再使用性&#x2F;發佈等價原則The Reuse&#x2F;Release Equivalence Principle, REPThe granule of reuse is the granule of release. 重複使用的粒度就是發佈的粒度。 那些被拿來重複使用的程式碼，需透過發佈程序並賦予版本編號。便於我們追蹤、確保重用的元件是彼此兼容的。 開發人員很常收到新版本的提醒。會根據該版本所作的修改，來決定是否繼續使用舊版本。 組合到元件中的類別和模組應該一起被發佈。它們共享了相同的版本編號與版本追蹤，並被包含到同一版本的文件中。 共同封閉原則The Common Closure Principle, CCPGather into components those classes that change for the same reasons and at the same times. Seperate into different components those classes that change at different times and for different reasons. 收集那些在相同時間、因相同理由改變的類別到元件之中。分離那些在不同時間、因不同理由改變的類別到不同的元件之中。 元件版本的單一職責原則。也與開放封閉原則密切相關。 共同重複使用原則The Common Reuse Principle, CRPDon’t force users of a component to depend on things they don’t need. 不要强迫使用者去依賴他們不需要的元件。 元件版本的介面隔離原則。 The Tension Diagram For Component Cohesion三個内聚性原則彼此的關係像是互相拉鋸。 再使用性&#x2F;發佈等價原則 (REP) 和 共同封閉原則 (CCP)是包容性的原則，兩者都傾向把元件變得更大。 而 共同重複使用原則 (CRP) 則是排除性的原則，它會使得元件變得比較小。 隨著專案的生命周期，位在元件内聚性張力圖的位置也會有所改變。 一般來説，初期時較傾向在三角形的右邊，此時犧牲的是重用。隨著專案成熟度的提升，會開始向左滑動。 Conclusion過去我們對於内聚性的觀點可能只是「一個模組只能執行一個功能」。 但元件内聚性的原則描述了一個更爲複雜的關係。 在選擇類別組合成元件時，必須考慮可重用性與可發展性的相對力量。隨著專案的發展，這些組成是可能隨著時間推移而產生演變的。 ʕ •ᴥ•ʔ：重看無瑕程式碼架構篇，有了些與第一次看不一樣的感受。最後的結論，就像是Shortie哥常說的：「任何事都有其trade-off」吧！","categories":[{"name":"Clean Code","slug":"Clean-Code","permalink":"https://yncbearz.github.io/categories/Clean-Code/"}],"tags":[{"name":"Principle","slug":"Principle","permalink":"https://yncbearz.github.io/tags/Principle/"}]},{"title":"Windows設置","slug":"Windows-Settings","date":"2022-08-27T07:38:04.000Z","updated":"2025-05-30T08:15:23.259Z","comments":true,"path":"2022/08/27/Windows-Settings/","permalink":"https://yncbearz.github.io/2022/08/27/Windows-Settings/","excerpt":"Windows-Settings","text":"緣起最近遇到需要轉換開發環境 (Mac OS -&gt; Windows OS)的情況。會在以下整理出，如何讓兩者操作上盡量接近的方法。 PowerToys首先來介紹這次回到 Windows OS 認識的神兵利器—PowerToys。 可以設定大部分的情境下，需要的快捷鍵。甚至交換按鍵的行爲。 下面列出目前有用到的設定： Remapping Before After Reason Alt (Left) Ctrl (Left) 對調 Alt、Ctrl，使其貼近 Mac OS Ctrl (Left) Alt (Left) 對調 Alt、Ctrl，使其貼近 Mac OS Caps Lock Shift 拔掉 CapsLock 是因爲很少需要，但誤觸時有點煩。 這邊曾經想過對調 Ctrl、Win、Alt，不過遇到的問題會變得比較多。 幾經取捨，最後只對調 Ctrl &amp; Alt。 Before After Reason Alt (Left) + [ Esc 類似 Mac OS vim 中的 ctrl + [ Ctrl (Left) + Tab Alt (Left) + Tab 類似 Mac OS 中的切換應用程式 Ctrl (Left) + Q Alt (Left) + F4 類似 Mac OS 中的關閉應用程式 Ctrl (Left) + F4 Alt (Left) + F4 類似 Windows OS 中的關閉應用程式 Ctrl (Left) + Shift (Left) + 5 F1 類似 Mac OS 中的截圖功能 (使用 Snipaste) Win + Alt + R - Windows OS 中的螢幕錄影功能 Ctrl + Alt + F F11 類似 Mac OS 中的全螢幕功能 Ctrl + P Ctrl + T 類似 IDE 中的開啟檔案功能 (slack.exe) (Note.)查看當前執行的應用程式名稱 1tasklist Searching 最近知道個更厲害的 Searching 工具是Wox。可以關閉 PowerToysRun，改用 Wox。 綁定 Ctrl + Space 後，類似於 Mac 中的 Spotlight 搜尋。 這時候可以用傳統的 Win 開啓内建搜尋。 Wox Plugin Settings 透過儲存 VSCode 工作區，便可以利用 code xxx 開啓。 Wox Browser Bookmarks Wox Web Searches Disabled Features 有些功能目前沒有使用，但會影響我們日常的操作。這邊先把它們關閉。 關閉點兩下 Ctrl，會亮出鼠標位置的功能。 關閉大量重新命名的功能。 輸入法調整因爲使用的是拼音輸入法，這邊推薦使用搜狗輸入法。 切換輸入法一律使用 Win + Space。 (Note.)如果使用的是微軟注音，可以於慣用語言新增 English 的輸入法。之後輸入英文時，使用轉換輸入法的方式，可以解放編輯器内跟 Ctrl 有關的快捷鍵設定。 如何輸入直角引號「」 修改對應的檔案 (Wox punctures.ini) 1%USERPROFILE%\\AppData\\LocalLow\\SogouPY\\punctures.ini 直接找到這兩個設定 123456789[flaafl]Name=flaaaaaaflChHalf=badaaaaacaChFull=badaaaaaca[fnaafn]Name=fnaaaaaafnChHalf=bbdaaaaacbChFull=bbdaaaaacb 修改兩項中的 ChHalf 的內容 123456789[flaafl]Name=flaaaaaaflChHalf=amdaaaaadmChFull=badaaaaaca[fnaafn]Name=fnaaaaaafnChHalf=andaaaaadnChFull=bbdaaaaacb 存檔後，設定檔案為唯讀，重啟電腦即生效。 觸控板 個人習慣的一般設定。 目前的三指設定。 目前沒有任何四指設定。 DB GUI推薦DBeaver 固定成英文界面 安裝好，修改 dbeaver.ini新增以下設定。 1cd C:\\Users\\bear\\AppData\\Local\\DBeaver\\ 1vim .\\dbeaver.ini 新增這行到最下方 1-Duser.language=en Terminal 調整安裝Powershell (不是內建的Windows Powershell哦)1winget install --id Microsoft.Powershell --source winget 搭配Windows Terminal使用，透過設定將Powershell調成預設，加上 - nologo 的後綴就不會顯示更新的訊息。 安裝OhMyPosh1winget install JanDeDobbeleer.OhMyPosh -s winget 安裝font (官方推薦: Meslo) 1sudo oh-my-posh font install (Note.) 如果這邊沒有sudo指令，可參考[Windows 套件管理工具 Scoop] 開始套用OhMyPosh主題 1code $PROFILE 1oh-my-posh init pwsh --config &quot;$env:POSH_THEMES_PATH\\powerlevel10k_lean.omp.json&quot; | Invoke-Expression (Note.) 因為Jetbrains terminal與OhMyPosh有一些相容問題，所以有使用Jetbrains terminal的話，建議選用emoji較少的主題。 調整字型 ShareX可以用來截圖成gif 1scoop install sharex (Reference.) Mac to Windows 在 Windows 11 上透過 Windows Terminal 華麗地執行 Powershell 如何輸入直角引號「」 ʕ •ᴥ•ʔ：在捷運上與Mobius分享同步 OS 心得時，被吐槽之前從 Windows OS 轉 Mac OS，也曾經想同步兩者設定 (對調 Command &amp; Ctrl)。但後來還是把 Mac OS 改回來了。","categories":[{"name":"Programming","slug":"Programming","permalink":"https://yncbearz.github.io/categories/Programming/"}],"tags":[{"name":"Settings","slug":"Settings","permalink":"https://yncbearz.github.io/tags/Settings/"}]},{"title":"子彈列車","slug":"Bullet-Train","date":"2022-08-07T11:51:23.000Z","updated":"2025-05-30T08:15:23.216Z","comments":true,"path":"2022/08/07/Bullet-Train/","permalink":"https://yncbearz.github.io/2022/08/07/Bullet-Train/","excerpt":"Bullet-Train","text":"短評子彈列車 87分 觀影完才知道劇本，是改編自伊坂幸太郎的瓢蟲🐞。 對伊坂幸太郎小說的印象是，推理成分不多、故事線比較紛亂一些。 文本不是這部電影的強項，但剪輯與武打畫面非常優秀！ 可以看到劇組鏡頭的設計，與對打戲上的用心。 同行朋友覺得風格類似「金牌特務」，推薦給喜歡胡鬧劇情與畫面感的朋友。 以下涉及劇情，建議觀影後再閱讀。 個人心得本片在胡鬧的氣氛下，音樂的主題也變得很多元。時而西洋老歌、時而日文歌曲，好像什麼歌在這部電影中都能搭配畫面。 但是這些都不是電影的看點。 我認為這部電影最最優秀的地方是，畫面上的剪輯與武術指導。 以下列舉一些看完後，印象深刻的橋段： 只用幾分鐘簡單的畫面與少許的台詞，就交代完惡狼的背景。 瓢蟲與惡狼用手提箱對打的戲。原來用手提箱打架可以這麼帥。 檸檬與瓢蟲合作詐騙白死神，後來出包的橋段很有趣。 終點站白死神站在日出中，發號施令的畫面。 從馬桶內拍攝瓢蟲通話的鏡頭。 ʕ •ᴥ•ʔ：最近發現劇情優秀的推理小說，翻拍成電影通常不好看，因為已經知道小說的爆點；反倒是那些劇情沒有特別突出的小說，往往能在電影有出乎意料的表現。","categories":[{"name":"Life","slug":"Life","permalink":"https://yncbearz.github.io/categories/Life/"}],"tags":[{"name":"Movie","slug":"Movie","permalink":"https://yncbearz.github.io/tags/Movie/"}]},{"title":"名偵探柯南：萬聖節的新娘","slug":"Detective-Conan-The-Bride-of-Halloween","date":"2022-07-04T14:50:57.000Z","updated":"2025-05-30T08:15:23.230Z","comments":true,"path":"2022/07/04/Detective-Conan-The-Bride-of-Halloween/","permalink":"https://yncbearz.github.io/2022/07/04/Detective-Conan-The-Bride-of-Halloween/","excerpt":"Detective-Conan-The-Bride-of-Halloween","text":"短評名偵探柯南: 萬聖節的新娘 80分 如果在國小左右的觀眾，應該會覺得很好看的電影。 大人的話嘛，不好說。 這邊引用觀影前看到的網友評價。：「推理成分多」：「想去影廳二刷」 以下涉及劇情，建議觀影後再閱讀。 下方為主要人物名稱對照表: 角色 簡介 江戶川柯南 變小的工藤新一。 安室透 本名降谷零，一名公安警察。 村中努 前警視廳搜查一課的警視正，目暮同期同事，有著「魔鬼村中」的稱號。 克里斯汀·理察 村中警官的未婚妻，父母均為法國人。 艾蓮妮卡·拉夫連季耶娃 29歲，發誓要向炸彈犯「火焰」復仇的神秘俄羅斯組織「趕盡殺絕」首領。 個人心得開場還蠻不錯的，藉由高木及佐藤的演習，揭露了這部電影的主線，有人要破壞一場在萬聖節的婚禮。 直到警視廳前出現可疑的俄國男子，留下求救紙條後，被兇手炸歪。劇情也算中規中矩。 安室透與柯南隨後搭上線，為本作提供辦案方向與線索。 讓我開始期待柯南會用什麼樣的方式，來推理出那張被燒毀一半的求救紙條。 接下來的劇情走向就開始越來越奇怪，這邊不贅述細節，直接寫出我滿滿的吐槽。 在接下克里斯汀的委託後，少年偵探團欲前往指定地點，取得朋友送的新婚禮物。 該地點看起來像是廢棄大樓，連小孩都看得出來可怕及危險。但柯南還是義務反顧地走入房間。 ʕ •ᴥ•ʔ：有人說，不入虎穴焉得虎子，這樣才有可能取得跟兇手有關線索啊？ 沒關係，讓我們繼續看下去。 好不容易逃離爆炸，九死一生的柯南，回到醫院探視毛利叔叔。 意外發現完整的求救紙條。 經訊問才知道是，當初灰原在歸還紙條給俄國男子時，小蘭曾瞄到紙條內容後，之後在醫院回憶畫出來的！？ ʕ •ᴥ•ʔ：這不是推理漫畫嗎？不是要透過縝密的推理、一步一步將線索思索出來嗎？ 而且小蘭，你還不是本作的偵探欸。記憶力也太好了吧！ 柯南無視了我的吐槽，繼續解譯這份有圖畫及俄語的紙條。 解救千葉刑警，「趕盡殺絕」首領艾蓮妮卡與柯南的對話 在知道對方是俄國集團後，柯南直接說起了流利的俄語。 艾蓮妮卡：「你會說俄語？」柯南：「嗯啊」 ʕ •ᴥ•ʔ：不是啊，我說柯南，姑且不談你的俄語原本有沒有這麼溜。 你好歹假裝一下，這是老爸在夏威夷的時候教你的吧。 兇手揭露為克里斯汀，在一陣混亂的婚禮現場 柯南正在追捕犯人！ (槍戰進行中) 高木刑警中彈了！ … 原本是段緊湊刺激的劇情。 槍戰的正中央卻有一個心碎的未婚夫，讓其他人的外傷都顯得微不足道。 ʕ •ᴥ•ʔ：「魔鬼村中」 因為愛情，而變成寵妻好丈夫的形象。身為前警視正，卻看不穿枕邊人，其實就是真正的幕後黑手… 安室透，設計兇手自行引爆，在直升機上的炸彈。 ʕ •ᴥ•ʔ：正當我在佩服，安室透，不塊是公安警察aka零的最高負責人，智商就是不一樣的時候… 就看著他帶著聰明的頭腦，從大樓的邊緣，跳上了即將墜毀的直升機… 現在是嫌演出時間不夠，自己加戲了嗎？ 試圖阻止藍色液體與紅色液體接觸的眾人 不知道兇手，到底花了多久的時間，替換了多少的萬聖節燈籠，導致液體流到街道後，像是世界末日一般，水位甚至淹到了孩子們的小腿。 ʕ •ᴥ•ʔ：藍色液體與紅色液體接觸就會爆炸。 雖然沒有明講是什麼。不過應該是毒性很強的化學藥品吧？ 你們這樣浸泡著，真的沒問題嗎？ 爾後眾人像是拔河一般的，拉起足球的逗趣場面。沒進入故事氣氛的我，也只能荒唐地大笑了。 最後我想說 因為柯南不像進擊的巨人那樣，會讓主角群掛掉，使得許多緊張的劇情，最終還是失去了張力。 雖然很早就猜到兇手是誰，不過仍與最後一排同場的女生，過程中笑到不能自己，得到不錯的觀影體驗。 算是一部在家看，我可能不會看完，但在影廳的話，娛樂效果不錯的電影吧！ ʕ •ᴥ•ʔ：在我心中，爛片分為兩種，一種是電影無聊，在時間不多的情況下，我會建議略過這部電影。 另一種則是荒謬。 也許是劇情莫名其妙、畫面不搭聲音，說著角色不該講的台詞，導致氣氛無法烘托。 電影不停地前進，觀眾卻進入不了故事，最後只能用抽離電影的方式欣賞。 而這部柯南屬於後者。會建議如果近期評價最好的電影都看完，再到影廳觀賞。","categories":[{"name":"Life","slug":"Life","permalink":"https://yncbearz.github.io/categories/Life/"}],"tags":[{"name":"Movie","slug":"Movie","permalink":"https://yncbearz.github.io/tags/Movie/"}]},{"title":"捍衛戰士：獨行俠","slug":"Top-Gun-Maverick","date":"2022-06-26T13:00:47.000Z","updated":"2025-05-30T08:15:23.256Z","comments":true,"path":"2022/06/26/Top-Gun-Maverick/","permalink":"https://yncbearz.github.io/2022/06/26/Top-Gun-Maverick/","excerpt":"Top-Gun-Maverick","text":"短評捍衛戰士: 獨行俠 96分 個人非常喜歡的一部電影。可以先補看捍衛戰士第一集，來獲得更好的觀影體驗。 以下涉及劇情，建議觀影後再閱讀。 下方為主要人物名稱對照表: 演員 角色 湯姆·克魯斯 彼得·「獨行俠」·米契爾上校 (Captain Pete “Maverick” Mitchell) 麥爾斯·泰勒 布雷德利·「公雞」·布雷德蕭上尉 (Lieutenant Bradley “Rooster” Bradshaw) 珍妮佛·康納莉 潘妮·班傑明 (Penny Benjamin) 方·基墨 湯姆·「冰人」·卡贊斯基 (Admiral Tom “Iceman” Kazansky) 安東尼·愛德華 尼克·「呆頭鵝」·布雷德蕭 (LTJG Nick ‘Goose’ Bradshaw) 個人心得開場 (致敬第一集) 在還未完全拂曉的天，穿著制服的機組人員，走動在由鋼鐵打造的抹香鯨，航空母艦上。 像是不敢吵醒仍在睡眠中的居民般，輕輕敲打的鼓與沙鈴聲。搭配戰鬥機在跑道上，緩慢移動，齒輪與地面摩擦發出的聲響。 突然間，太陽射出如裝了奶黃包內餡的強光。一架戰鬥機騰空刺入雲霄。音樂同時進入快節奏的「Danger Zone」。 感動再次回來了。 首先我們先來看獨行俠 獨行俠的車庫 車庫掛著人生高光時刻得到的黃金勳章與獎狀，一角的照片僅有各地出身入死的戰友們。 就像是宣誓著: 「就用軍旅生涯填充生活的全部吧！」 沒有家人的獨行俠，依舊獨行。 「暗星」計畫飛行中心 在得知「無人機」計畫，要來排擠「暗星」計畫的經費時，飛行中心的人員，雙手抱胸、嘴唇緊閉，眼神失去了對工作的火球，心中已不再炙熱。 失去薪水樑柱的經濟壓力，結婚基金、孩子的養育費、還沒繳完的房貸，全都在腦海中撲向了胸口。 獨行俠看出了團隊的低氣壓，決定搶先挑戰原本兩個月後目標————10馬赫。 雖然外表不再如年輕時稚嫩，但獨行俠還是，那個敢於衝撞體制的俠。 這36年來都不曾改變。 以下讓我們來讀一下台詞及架構 北島海軍航空站 (致敬第一集) 前期有些酒館與第一天上課的戲，算是復刻第一集的劇情。 最重要的是登場了一個很重要的角色，已逝戰友呆頭鵝的兒子————公雞。 掛著歷屆學員照片的房間 這裡公雞與獨行俠為了當初入學的事情吵了起來。 公雞說: “My dad believed in you. I’m not going to make the same mistake.” 潘妮的家 獨行俠與潘妮約會時，詢問是如何跟修正與女兒的關係的。 潘妮答:「你有時就是得相信他們，讓他們犯點錯。」 後因女兒突然返家，獨行俠離開窗口時說：「我不會再離開你了。」 冰人的辦公室 因公雞與獨行俠還是處不好。冰人告訴他: “It’s time to let go.” 獨行俠回: “If I send him on this mission he might never come home.If I don’t send him he will never forgive me.” 過幾天，冰人辭世。 獨行俠偷開戰鬥機後，出任務前的航空母艦 獨行俠最後選擇公雞出任務，並告訴他: “Don’t Think. Just Do.” 公雞欲言又止，但要出發了。 任務成功，要返回航空母艦時 公雞因誘導彈用完，獨行俠壯烈犧牲。 公雞不顧軍令，返回拯救獨行俠。墜機後被獨行俠推倒問: “What Were You Thinking?!” 公雞答: “You Told Me Not To Think!” 兩人成功竊取F-14，卻被敵軍拆穿時 公雞:「如果我不在，你早就與他們開戰了。」獨行俠:「但是你在啊！」 公雞: “It’s Not The Plane, It’s The Pilot.” 成功回到航母 獨行俠: “Thank you for saving my life.”公雞: “It’s what my dad would’ve done.” 獨行俠的車庫 獨行俠與公雞整理車庫後，便帶著潘妮坐上P-51戰鬥機，翱翔天空。 總結 獨行俠，從獨自一人的車庫，到與大家同在。年紀增加，卻依舊英姿颯爽。 想守護公雞，到信任他能獨當一面，甚至最後還因此被拯救。 這些的變與不變，或許就是這部電影最吸引人的地方吧！ ʕ •ᴥ•ʔ：「你覺得捍衛戰士第一集跟第二集，誰才是更好的電影？」「拜託，現在氣氛正好，別破壞氣氛了。」","categories":[{"name":"Life","slug":"Life","permalink":"https://yncbearz.github.io/categories/Life/"}],"tags":[{"name":"Movie","slug":"Movie","permalink":"https://yncbearz.github.io/tags/Movie/"}]},{"title":"Sorting and Searching","slug":"Sorting-and-Searching","date":"2022-06-12T02:58:37.000Z","updated":"2025-05-30T08:15:23.254Z","comments":true,"path":"2022/06/12/Sorting-and-Searching/","permalink":"https://yncbearz.github.io/2022/06/12/Sorting-and-Searching/","excerpt":"Sorting-and-Searching","text":"排序與堆疊 (Sorting and Searching)常見的排序演算法泡泡排序法 (Bubble Sort) Bubble Sort Implementation 12345678910111213141516171819202122232425262728293031323334&lt;?phpnamespace App\\BubbleSort;class Program&#123; public function sort(array $unsortedItems): array &#123; $firstIndex = 0; $lastIndex = count($unsortedItems) - 1; for ($j = $lastIndex; $j &gt; $firstIndex; $j--) &#123; for ($i = $lastIndex; $i &gt; $firstIndex; $i--) &#123; if ($unsortedItems[$i] &lt; $unsortedItems[$i - 1]) &#123; $unsortedItems = $this-&gt;swap($unsortedItems, $i, $i - 1); &#125; &#125; &#125; $result = $unsortedItems; return $result; &#125; private function swap(array $unsortedItems, int $i, int $j): array &#123; $itemA = $unsortedItems[$i]; $itemB = $unsortedItems[$j]; $unsortedItems[$j] = $itemA; $unsortedItems[$i] = $itemB; return $unsortedItems; &#125;&#125; Time Complexity: $O(n^2)$ 選擇排序法 (Selection Sort) Selection Sort Implementation 1234567891011121314151617181920212223242526272829303132333435363738394041424344&lt;?phpnamespace App\\SelectionSort;class Program&#123; public function sort(array $unsortedItems): array &#123; $itemCount = count($unsortedItems); for ($i = 0; $i &lt; $itemCount - 1; $i++) &#123; $minInfo = $this-&gt;findMin($unsortedItems, $i); $unsortedItems = $this-&gt;swap($unsortedItems, $i, $minInfo); &#125; return $unsortedItems; &#125; private function findMin(array $unsortedItems, int $currentIndex): array &#123; $sliceItems = array_slice($unsortedItems, $currentIndex); $min = min($sliceItems); $minKey = array_keys($unsortedItems, min($sliceItems))[0]; return [ &#x27;value&#x27; =&gt; $min, &#x27;key&#x27; =&gt; $minKey, ]; &#125; private function swap(array $unsortedItems, int $currentIndex, array $minInfo): array &#123; $itemA = $unsortedItems[$currentIndex]; $itemB = $minInfo[&#x27;value&#x27;]; $unsortedItems[$currentIndex] = $itemB; $unsortedItems[$minInfo[&#x27;key&#x27;]] = $itemA; return $unsortedItems; &#125;&#125; Time Complexity: $O(n^2)$ 合併排序法 (Merge Sort) Time Complexity: $O(nlog(n))$ Merge Sort Implementation 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859606162636465666768697071727374&lt;?phpnamespace App\\MergeSort;class Program&#123; public function sort(array $unsortedItems): array &#123; $container = $this-&gt;initContainer($unsortedItems); while (count($container) &gt; 1) &#123; $firstArray = array_shift($container); $secondArray = array_shift($container); $merged = $this-&gt;mergeToOne($firstArray, $secondArray); $container[] = $merged; &#125; $result = $container[0]; return $result; &#125; private function mergeToOne(array $firstArray, array $secondArray = []): array &#123; $result = []; $firstArrayItem = null; $secondArrayItem = null; while (count($firstArray) &gt; 0 &amp;&amp; count($secondArray) &gt; 0) &#123; if (is_null($firstArrayItem)) &#123; $firstArrayItem = $firstArray[0]; &#125; if (is_null($secondArrayItem)) &#123; $secondArrayItem = $secondArray[0]; &#125; if ($firstArrayItem &lt;= $secondArrayItem) &#123; $result[] = $firstArrayItem; array_shift($firstArray); $firstArrayItem = null; &#125; else &#123; $result[] = $secondArrayItem; array_shift($secondArray); $secondArrayItem = null; &#125; continue; &#125; if (count($firstArray) &gt; 0) &#123; $result = array_merge($result, $firstArray); &#125; if (count($secondArray) &gt; 0) &#123; $result = array_merge($result, $secondArray); &#125; return $result; &#125; private function initContainer(array $unsortedItems): array &#123; $result = []; foreach ($unsortedItems as $unsortedItem) &#123; $result[] = [$unsortedItem]; &#125; return $result; &#125;&#125; 快速排序法 (Quick Sort) Time Complexity: $O(nlog(n))$ Worst Time Complexity: $O(n^2)$ 使用分治法(Divide and Conquer)的概念。 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849// 原始資料40 60 50 20 10 30// 選擇最左邊的資料為基準點[40] 60 50 20 10 30// 60 &gt; 40，要移到40的右邊[40] 60 50 20 10 30 ^// 50 &gt; 40，要移到40的右邊[40] 60 50 20 10 30 ^// 20 &lt; 40，要移到40的左邊[40] 60 50 20 10 30 ^20 [40] 60 50 10 30// 10 &lt; 40，要移到40的左邊20 [40] 60 50 10 30 ^20 10 [40] 60 50 30// 同理30 &lt; 40，要移到40的左邊20 10 [40] 60 50 30 ^20 10 30 [40] 60 50// 第一次排序完成20 10 30 40 60 50// 接著排序40左右兩側的資料// 先排左側資料，同樣選擇最左邊的資料為基準點// 左側基準點為20[20] 10 30 40 60 50// 左側資料排序完成10 [20] 30 40 60 50// 接著排序右側資料，一樣選擇最左邊的資料為基準點// 右側基準點為6010 20 30 40 [60] 50//右側排序完成10 20 30 40 50 [60]//排序結果10 20 30 40 50 60 Quick Sort Implementation (version 1) 12345678910111213141516171819202122232425262728&lt;?phpnamespace App\\QuickSort;class Program&#123; public function sort(array $unsortedSortItems): array &#123; if (count($unsortedSortItems) &lt;= 1) &#123; return $unsortedSortItems; &#125; $pivot = array_shift($unsortedSortItems); $left = []; $right = []; foreach ($unsortedSortItems as $unsortedSortItem) &#123; if ($unsortedSortItem &lt;= $pivot) &#123; $left[] = $unsortedSortItem; &#125; else &#123; $right[] = $unsortedSortItem; &#125; &#125; return array_merge($this-&gt;sort($left), [$pivot], $this-&gt;sort($right)); &#125;&#125; 基數排序 (Radix Sort) Time Complexity: $O(nk)$ 基數排序利用整數有限位元這個條件，迭代數字的每一位數，對每一位數分群。 1234567891011121314151617181920212223242526272829// 原始資料101 20 50 1 37// 先對個位數來分群| 0 | 1 | 2 | 3 | 4 | 5 | 6 | 7 | 8 | 9| 20|101| | | | | | 37| || 50| 1 | | | | | | | |//得到照個位數的排序20 50 101 1 37// 接著對十位數來分群| 0 | 1 | 2 | 3 | 4 | 5 | 6 | 7 | 8 | 9|101| | 20| 37| | 50| | | || 1 | | | | | | | | |//得到照十位數的排序101 1 20 37 50//最後照百位數分群| 0 | 1 | 2 | 3 | 4 | 5 | 6 | 7 | 8 | 9| 1 |101| | | | | | | || 20 | | | | | | | | || 37 | | | | | | | | || 50 | | | | | | | | |//排序結果1 20 37 50 101 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111&lt;?phpnamespace App\\RadixSort;class Program&#123; public function sort(array $unsortedItems): array &#123; if (count($unsortedItems) &lt;= 1) &#123; return $unsortedItems; &#125; $max = max($unsortedItems); $numberOfDigits = count(str_split($max, 1)); $unsortedItems = $this-&gt;convertToStringWithZero($unsortedItems, $numberOfDigits); $grouped = $this-&gt;emptyGroup(); foreach ($unsortedItems as $unsortedItem) &#123; $number = $unsortedItem % 10; $grouped[$number][] = $unsortedItem; &#125; if ($numberOfDigits == 1) &#123; return $this-&gt;flatten($grouped); &#125; for ($digit = 2; $digit &lt;= $numberOfDigits; $digit++) &#123; $grouped = $this-&gt;sortByDigitNumber($grouped, $digit); &#125; return $this-&gt;flatten($grouped); &#125; /** * @param array $unsortedItems * @param int $numberOfDigits * @return array */ private function convertToStringWithZero(array $unsortedItems, int $numberOfDigits): array &#123; $result = []; foreach ($unsortedItems as $unsortedItem) &#123; $unsortedItemsWithZero = str_pad($unsortedItem, $numberOfDigits, &#x27;0&#x27;, STR_PAD_LEFT); $result[] = $unsortedItemsWithZero; &#125; return $result; &#125; private function emptyGroup(): array &#123; return [ 0 =&gt; [], 1 =&gt; [], 2 =&gt; [], 3 =&gt; [], 4 =&gt; [], 5 =&gt; [], 6 =&gt; [], 7 =&gt; [], 8 =&gt; [], 9 =&gt; [], ]; &#125; private function flatten(array $grouped): array &#123; $result = []; foreach ($grouped as $number =&gt; $items) &#123; foreach ($items as $item) &#123; $result[] = (int)$item; &#125; &#125; return $result; &#125; private function sortByDigitNumber(array $grouped, int $digit): array &#123; $result = $this-&gt;emptyGroup(); $flatten = $this-&gt;flatten($grouped); foreach ($flatten as $item) &#123; $number = $this-&gt;getCurrentDigitNumber($item, $digit); $result[$number][] = $item; &#125; return $result; &#125; public function getCurrentDigitNumber(int $item, int $digit): int &#123; $digitNumber = $item % 10; if ($digit == 1) &#123; return $digitNumber; &#125; for ($i = 2; $i &lt;= $digit; $i++) &#123; $item = ($item - ($item % 10)) / 10; $digitNumber = $item % 10; &#125; return $digitNumber; &#125;&#125; 搜尋演算法二元搜尋法 (Binary Search) 面試題目10.1 Sorted MergeYou are given two sorted arrays, A and B, where A has a large enough buffer at the end to hold B. Write a method to merge B into A in sorted order.(Hints.)由陣列後面插入比較好，因為有空位。 123456789101112131415161718192021222324252627282930313233343536&lt;?phpclass SortedMerge&#123; public static function merge(array &amp;$a, array &amp;$b) &#123; $indexA = self::getLastElementIndex($a); $indexB = self::getLastElementIndex($b); $indexMerged = count($a) - 1; while ($indexB &gt;= 0) &#123; if ($indexA &gt;= 0 &amp;&amp; $a[$indexA] &gt; $b[$indexB]) &#123; $a[$indexMerged] = $a[$indexA]; $indexA--; &#125; else &#123; $a[$indexMerged] = $b[$indexB]; $indexB--; &#125; $indexMerged--; &#125; &#125; public static function getLastElementIndex(array $array): int &#123; $result = -1; foreach ($array as $value) &#123; if (is_null($value)) &#123; break; &#125; $result++; &#125; return $result; &#125;&#125; 10.2 Group AnagramsWrite a method to sort an array of strings so that all the anagrams are next to each other.anagrams (易位構詞遊戲): 是將組成一個詞或短句的字母重新排列順序，所有字母的都被使用一次，構造出一些新的詞或短句。 example: “earth” &lt;—&gt; “heart” “eleven plus two” &lt;—&gt; “twelve plus one” 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859606162636465666768697071727374757677787980&lt;?phpclass AnagramGrouper&#123; public function groupAnagrams(array $words) &#123; $result = []; foreach ($words as $index =&gt; $word) &#123; if (!isset($words[$index])) &#123; continue; &#125; $divides = self::divideIntoGroups($words, $index); $sameGroupwords = $divides[&#x27;same_group_words&#x27;]; $result = array_merge($result, $sameGroupwords); $sameGroupwordIndexes = $divides[&#x27;same_group_word_indexes&#x27;]; foreach ($sameGroupwordIndexes as $sameGroupwordIndex) &#123; unset($words[$sameGroupwordIndex]); &#125; &#125; return $result; &#125; private function divideIntoGroups(array $words, int $targetIndex): array &#123; $sameGroupwords = []; $sameGroupwordIndexes = []; $targetWord = $words[$targetIndex]; $targetCharacterCounts = $this-&gt;getCharacterCounts($targetWord); foreach ($words as $index =&gt; $currentWord) &#123; if ($index == $targetIndex) &#123; $sameGroupwords[] = $targetWord; $sameGroupwordIndexes[] = $index; continue; &#125; $currentCharacterCounts = $this-&gt;getCharacterCounts($currentWord); if ($currentCharacterCounts == $targetCharacterCounts) &#123; $sameGroupwords[] = $currentWord; $sameGroupwordIndexes[] = $index; &#125; &#125; return [ &#x27;same_group_words&#x27; =&gt; $sameGroupwords, &#x27;same_group_word_indexes&#x27; =&gt; $sameGroupwordIndexes, ]; &#125; private function initCharcterCounts(): array &#123; return [ &#x27;a&#x27; =&gt; 0, &#x27;b&#x27; =&gt; 0, &#x27;c&#x27; =&gt; 0, &#x27;d&#x27; =&gt; 0, &#x27;e&#x27; =&gt; 0, &#x27;f&#x27; =&gt; 0, &#x27;g&#x27; =&gt; 0, &#x27;h&#x27; =&gt; 0, &#x27;i&#x27; =&gt; 0, &#x27;j&#x27; =&gt; 0, &#x27;k&#x27; =&gt; 0, &#x27;l&#x27; =&gt; 0, &#x27;m&#x27; =&gt; 0, &#x27;n&#x27; =&gt; 0, &#x27;o&#x27; =&gt; 0, &#x27;p&#x27; =&gt; 0, &#x27;q&#x27; =&gt; 0, &#x27;r&#x27; =&gt; 0, &#x27;s&#x27; =&gt; 0, &#x27;t&#x27; =&gt; 0, &#x27;u&#x27; =&gt; 0, &#x27;v&#x27; =&gt; 0, &#x27;w&#x27; =&gt; 0, &#x27;x&#x27; =&gt; 0, &#x27;y&#x27; =&gt; 0, &#x27;z&#x27; =&gt; 0 ]; &#125; private function getCharacterCounts(string $word): array &#123; $charcterCounts = $this-&gt;initCharcterCounts(); $characters = str_split($word); foreach ($characters as $character) &#123; $charcterCounts[$character]++; &#125; return $charcterCounts; &#125;&#125; 10.3 Search in Rotated ArrayGiven a sorted array of n integers that has been rotated an unknown number of times, write code to find an element in the array. You may assume that the array was originally sorted in increasing order.123456[1,2,3,4,5,6][6,1,2,3,4,5][5,6,1,2,3,4][4,5,6,1,2,3][3,4,5,6,1,2][2,3,4,5,6,1] 思路: 從小至大排列的旋轉，至少有一側排序是對的。 若目標在排序正確的一側，則binary search。若目標在另一側，則繼續從另一側搜尋。 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117&lt;?phpclass SearchedInRotatedArray&#123; const ITEM_NOT_FOUND = -1; public function search(array $items, int $target, ?int $left = null, ?int $right = null): int &#123; $originalItemsCount = count($items); if ($originalItemsCount == 0) &#123; return self::ITEM_NOT_FOUND; &#125; if ($originalItemsCount == 1) &#123; return ($items[0] == $target) ? 0 : self::ITEM_NOT_FOUND; &#125; if (is_null($left)) &#123; $left = 0; &#125; if (is_null($right)) &#123; $right = $originalItemsCount - 1; &#125; $mid = (int)floor(($left + $right) / 2); if ($mid &lt; 0) &#123; return self::ITEM_NOT_FOUND; &#125; if ($items[$mid] == $target) &#123; return $mid; &#125; if ($items[$left] == $target) &#123; return $left; &#125; if ($items[$right] == $target) &#123; return $right; &#125; $isLeftSorted = ($items[$left] &lt;= $items[$mid]) ? true : false; $isRightSorted = ($items[$mid] &lt;= $items[$right]) ? true : false; if ( ($items[$left] &lt; $target) &amp;&amp; ($target &lt; $items[$mid]) &amp;&amp; $isLeftSorted ) &#123; return $this-&gt;binarySearch($items, $target, $left, $mid); &#125; if ( ($items[$mid] &lt; $target) &amp;&amp; ($target &lt; $items[$right]) &amp;&amp; $isRightSorted ) &#123; return $this-&gt;binarySearch($items, $target, $mid, $right); &#125; if ($isLeftSorted) &#123; return $this-&gt;search($items, $target, $mid, $right - 1); &#125; if ($isRightSorted) &#123; return $this-&gt;search($items, $target, $left, $mid - 1); &#125; return self::ITEM_NOT_FOUND; &#125; private function binarySearch(array $items, int $target, int $left, int $right): int &#123; $originalItemsCount = count($items); if ($originalItemsCount == 0) &#123; return self::ITEM_NOT_FOUND; &#125; if ($originalItemsCount == 1) &#123; return ($items[0] == $target) ? 0 : self::ITEM_NOT_FOUND; &#125; $mid = (int)floor(($left + $right) / 2); if ($items[$mid] == $target) &#123; return $mid; &#125; if ($items[$left] == $target) &#123; return $left; &#125; if ($items[$right] == $target) &#123; return $right; &#125; if ($items[$mid] &gt; $target) &#123; return $this-&gt;binarySearch($items, $target, $left, $mid); &#125; else &#123; return $this-&gt;binarySearch($items, $target, $mid, $right); &#125; &#125;&#125; 10.4 Sorted Search, No SizeYou are given an array like data structure Listy which lacks a size method. It does, however, have an elementAt(i) method that returns the element at index i in 0(1) time. If i is beyond the bounds of the data structure, it returns -1. (For this reason, the data structure only supports positive integers.) Given a Listy which contains sorted, positive integers, find the index at which an element x occurs. If x occurs multiple times, you may return any index.思路: 先找出Listy大概的長度 (利用指數加大的方式)。 接著使用二元搜尋。 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859606162636465666768697071727374&lt;?phpclass Listy&#123; protected array $items; const ITEM_NOT_FOUND = -1; public function __construct(array $items) &#123; $this-&gt;items = $items; &#125; public function elementAt(int $index): int &#123; $result = self::ITEM_NOT_FOUND; if (isset($this-&gt;items[$index])) &#123; return $this-&gt;items[$index]; &#125; return $result; &#125;&#125;class SortedSearchNoSize&#123; protected Listy $listy; const ITEM_NOT_FOUND = -1; public function __construct(Listy $listy) &#123; $this-&gt;listy = $listy; &#125; public function search(int $target): int &#123; $firstItem = $this-&gt;listy-&gt;elementAt(0); if ($firstItem == self::ITEM_NOT_FOUND) &#123; return self::ITEM_NOT_FOUND; &#125; if ($firstItem == $target) &#123; return 0; &#125; $index = 1; while ($this-&gt;listy-&gt;elementAt($index) != self::ITEM_NOT_FOUND) &#123; $index = $index * 2; &#125; return $this-&gt;binarySearch($target, 0, $index); &#125; private function binarySearch(int $target, int $left, int $right): int &#123; while ($left &lt;= $right) &#123; $mid = (int)floor(($left + $right) / 2); $midValue = $this-&gt;listy-&gt;elementAt($mid); if ($midValue &gt; $target || $midValue == -1) &#123; $right = $mid - 1; &#125; else if ($midValue &lt; $target) &#123; $left = $mid + 1; &#125; else &#123; return $mid; &#125; &#125; return self::ITEM_NOT_FOUND; &#125;&#125; 10.5 Sparse SearchGiven a sorted array of strings that is interspersed with empty strings, write a method to find the location of a given string.思路:先找中點附近，不為空的字串。 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122&lt;?phpclass SparseSearch&#123; protected array $items; const ITEM_NOT_FOUND = -1; public function __construct(array $items) &#123; $this-&gt;items = $items; &#125; public function search(string $target, ?int $left = null, ?int $right = null): int &#123; $items = $this-&gt;items; if (count($items) == 0) &#123; return self::ITEM_NOT_FOUND; &#125; if (count($items) == 1) &#123; return ($items[0] == $target) ? 0 : self::ITEM_NOT_FOUND; &#125; if (is_null($left)) &#123; $left = 0; &#125; if (is_null($right)) &#123; $right = count($items) - 1; &#125; if ($left &gt; $right) &#123; return self::ITEM_NOT_FOUND; &#125; $mid = floor(($left + $right) / 2); $currentIndex = $mid; $currentValue = $items[$mid]; if ($currentValue == &#x27;&#x27;) &#123; $closestNotEmptyPointInfo = $this-&gt;findClosestNotEmptyPoint($currentIndex); $currentIndex = $closestNotEmptyPointInfo[&#x27;index&#x27;]; $currentValue = $closestNotEmptyPointInfo[&#x27;value&#x27;]; if ($currentIndex == self::ITEM_NOT_FOUND) &#123; return self::ITEM_NOT_FOUND; &#125; &#125; if ($currentValue == $target) &#123; return $currentIndex; &#125; if ($items[$left] == $target) &#123; return $left; &#125; if ($items[$right] == $target) &#123; return $right; &#125; if (strnatcmp($currentValue, $target) &gt; 0) &#123; return $this-&gt;search($target, $left, $currentIndex - 1); &#125; if (strnatcmp($currentValue, $target) &lt; 0) &#123; return $this-&gt;search($target, $currentIndex, $right - 1); &#125; return self::ITEM_NOT_FOUND; &#125; private function findClosestNotEmptyPoint(int $midPointIndex) &#123; $closestNotEmptyPointIndex = self::ITEM_NOT_FOUND; $closestNotEmptyPointValue = &#x27;&#x27;; $left = $midPointIndex - 1; $right = $midPointIndex + 1; while ( isset($this-&gt;items[$left]) || isset($this-&gt;items[$right]) ) &#123; if ( isset($this-&gt;items[$right]) &amp;&amp; $this-&gt;items[$right] != &#x27;&#x27; ) &#123; $closestNotEmptyPointIndex = $right; $closestNotEmptyPointValue = $this-&gt;items[$closestNotEmptyPointIndex]; break; &#125; if ( isset($this-&gt;items[$left]) &amp;&amp; $this-&gt;items[$left] != &#x27;&#x27; ) &#123; $closestNotEmptyPointIndex = $left; $closestNotEmptyPointValue = $this-&gt;items[$closestNotEmptyPointIndex]; break; &#125; $right++; $left--; if ($left &gt; $right) &#123; break; &#125; &#125; return [ &#x27;index&#x27; =&gt; $closestNotEmptyPointIndex, &#x27;value&#x27; =&gt; $closestNotEmptyPointValue ]; &#125;&#125; 10.6 Sort Big FileImagine you have a 20 GB file with one string per line. Explain how you would sort the file.因限制了20GB的大小，表示不能單純把全部資料帶進記憶體處理。 我們可以將檔案分塊，每一塊獨立排序，存進檔案。 待所有區塊排序後，再將區塊一塊一塊合併(可透過每次存取第一行的合併排序)，最終產生完全排序的檔案。 此演算法稱為外排序 (external sort)。 (Reference.) Quick Sort Implementation In PHP 易位構詞遊戲 ʕ •ᴥ•ʔ：排序演算法還有很多，之後有時間再來補充吧！","categories":[{"name":"Programming","slug":"Programming","permalink":"https://yncbearz.github.io/categories/Programming/"}],"tags":[{"name":"Study Group","slug":"Study-Group","permalink":"https://yncbearz.github.io/tags/Study-Group/"}]},{"title":"460.lfu-cache","slug":"460-lfu-cache","date":"2022-05-28T08:44:58.000Z","updated":"2025-05-30T08:15:23.213Z","comments":true,"path":"2022/05/28/460-lfu-cache/","permalink":"https://yncbearz.github.io/2022/05/28/460-lfu-cache/","excerpt":"460.lfu-cache","text":"Description:Design and implement a data structure for a Least Frequently Used (LFU) cache.Implement the LFUCache class: LFUCache(int capacity) Initializes the object with the capacity of the data structure. int get(int key) Gets the value of the key if the key exists in the cache. Otherwise, returns -1. void put(int key, int value) Update the value of the key if present, or inserts the key if not already present. When the cache reaches its capacity, it should invalidate and remove the least frequently used key before inserting a new item. For this problem, when there is a tie (i.e., two or more keys with the same frequency), the least recently used key would be invalidated. To determine the least frequently used key, a use counter is maintained for each key in the cache. The key with the smallest use counter is the least frequently used key. When a key is first inserted into the cache, its use counter is set to 1 (due to the put operation). The use counter for a key in the cache is incremented either a get or put operation is called on it. The functions get and put must each run in O(1) average time complexity. Example 1: 1234567891011121314151617181920212223242526Input[&quot;LFUCache&quot;, &quot;put&quot;, &quot;put&quot;, &quot;get&quot;, &quot;put&quot;, &quot;get&quot;, &quot;get&quot;, &quot;put&quot;, &quot;get&quot;, &quot;get&quot;, &quot;get&quot;][[2], [1, 1], [2, 2], [1], [3, 3], [2], [3], [4, 4], [1], [3], [4]]Output[null, null, null, 1, null, -1, 3, null, -1, 3, 4]Explanation// cnt(x) = the use counter for key x// cache=[] will show the last used order for tiebreakers (leftmost element is most recent)LFUCache lfu = new LFUCache(2);lfu.put(1, 1); // cache=[1,_], cnt(1)=1lfu.put(2, 2); // cache=[2,1], cnt(2)=1, cnt(1)=1lfu.get(1); // return 1 // cache=[1,2], cnt(2)=1, cnt(1)=2lfu.put(3, 3); // 2 is the LFU key because cnt(2)=1 is the smallest, invalidate 2. // cache=[3,1], cnt(3)=1, cnt(1)=2lfu.get(2); // return -1 (not found)lfu.get(3); // return 3 // cache=[3,1], cnt(3)=2, cnt(1)=2lfu.put(4, 4); // Both 1 and 3 have the same cnt, but 1 is LRU, invalidate 1. // cache=[4,3], cnt(4)=1, cnt(3)=2lfu.get(1); // return -1 (not found)lfu.get(3); // return 3 // cache=[3,4], cnt(4)=1, cnt(3)=3lfu.get(4); // return 4 // cache=[4,3], cnt(4)=2, cnt(3)=3 Constraints: 0 &lt;&#x3D; capacity &lt;&#x3D; $10^4$ 0 &lt;&#x3D; key &lt;&#x3D; $10^5$ 0 &lt;&#x3D; value &lt;&#x3D; $10^9$ At most $2 * 10^5$ calls will be made to get and put. Double Linked List (with sentinel node) 優點：透過設置sentinel，可以快速取得第一個節點和最後一個節點。 Appropriate Answer (Double Linked List): 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123124125126127128129130131132133134135136137138139140141142143144145146147148149150151152153154155156157158159160161162163164165166167168169170171172173174175176177178179180181182183184185186187188189&lt;?phpnamespace LeetCode\\LFUCache;class Node&#123; public ?int $key; public ?int $value; public int $frequence; public ?Node $prev; public ?Node $next; public function __construct( ?int $key, ?int $value ) &#123; $this-&gt;key = $key; $this-&gt;value = $value; $this-&gt;frequence = 1; $this-&gt;prev = null; $this-&gt;next = null; &#125;&#125;class DoubleLinkedList&#123; public Node $sentinel; public int $size; public function __construct() &#123; $this-&gt;sentinel = new Node(null, null); $this-&gt;sentinel-&gt;next = $this-&gt;sentinel; $this-&gt;sentinel-&gt;prev = $this-&gt;sentinel; $this-&gt;size = 0; &#125; public function append(Node $node) &#123; $node-&gt;prev = $this-&gt;sentinel; $node-&gt;next = $this-&gt;sentinel-&gt;next; $this-&gt;sentinel-&gt;next-&gt;prev = $node; $this-&gt;sentinel-&gt;next = $node; $this-&gt;size++; &#125; public function pop(?Node $node = null): ?Node &#123; if ($this-&gt;size == 0) &#123; return null; &#125; //good thinking if (is_null($node)) &#123; $node = $this-&gt;sentinel-&gt;prev; &#125; $node-&gt;prev-&gt;next = $node-&gt;next; $node-&gt;next-&gt;prev = $node-&gt;prev; $this-&gt;size--; return $node; &#125;&#125;class LFUCache&#123; public int $capacity; public int $size; public array $nodeDictionary; public array $doubleLinkedListCollection; public int $minFrequence; const NODE_NOT_EXISTS = -1; /** * @param int $capacity */ public function __construct($capacity) &#123; $this-&gt;capacity = $capacity; $this-&gt;size = 0; $this-&gt;nodeDictionary = []; $this-&gt;doubleLinkedListCollection = []; $this-&gt;minFrequence = 0; &#125; /** * @param int $key * @return int */ public function get($key) &#123; if (!isset($this-&gt;nodeDictionary[$key])) &#123; return self::NODE_NOT_EXISTS; &#125; $node = $this-&gt;nodeDictionary[$key]; $frequence = $node-&gt;frequence; $doubleLinkedList = $this-&gt;doubleLinkedListCollection[$frequence]; $doubleLinkedList-&gt;pop($node); if ($doubleLinkedList-&gt;size == 0 &amp;&amp; $frequence == $this-&gt;minFrequence) &#123; $this-&gt;minFrequence++; &#125; $node-&gt;frequence++; $frequence = $node-&gt;frequence; if (!isset($this-&gt;doubleLinkedListCollection[$frequence])) &#123; $this-&gt;doubleLinkedListCollection[$frequence] = new DoubleLinkedList(); &#125; $doubleLinkedList = $this-&gt;doubleLinkedListCollection[$frequence]; $doubleLinkedList-&gt;append($node); return $node-&gt;value; &#125; /** * @param int $key * @param int $value * @return void */ public function put($key, $value): void &#123; if ($this-&gt;capacity == 0) &#123; return; &#125; if (isset($this-&gt;nodeDictionary[$key])) &#123; $node = $this-&gt;nodeDictionary[$key]; $node-&gt;value = $value; $frequence = $node-&gt;frequence; $doubleLinkedList = $this-&gt;doubleLinkedListCollection[$frequence]; $doubleLinkedList-&gt;pop($node); if ($doubleLinkedList-&gt;size == 0 &amp;&amp; $frequence == $this-&gt;minFrequence) &#123; $this-&gt;minFrequence++; &#125; $node-&gt;frequence++; $frequence = $node-&gt;frequence; if (!isset($this-&gt;doubleLinkedListCollection[$frequence])) &#123; $this-&gt;doubleLinkedListCollection[$frequence] = new DoubleLinkedList(); &#125; $doubleLinkedList = $this-&gt;doubleLinkedListCollection[$frequence]; $doubleLinkedList-&gt;append($node); return; &#125; if ($this-&gt;size == $this-&gt;capacity) &#123; $doubleLinkedList = $this-&gt;doubleLinkedListCollection[$this-&gt;minFrequence]; $unsetNode = $doubleLinkedList-&gt;pop(); $unsetNodeKey = $unsetNode-&gt;key; unset($this-&gt;nodeDictionary[$unsetNodeKey]); $this-&gt;size--; if ($doubleLinkedList-&gt;size == 0 &amp;&amp; $this-&gt;minFrequence &gt; 0) &#123; $this-&gt;minFrequence--; &#125; &#125; $node = new Node($key, $value); $this-&gt;nodeDictionary[$key] = $node; if (!isset($this-&gt;doubleLinkedListCollection[1])) &#123; $this-&gt;doubleLinkedListCollection[1] = new DoubleLinkedList(); &#125; $doubleLinkedList = $this-&gt;doubleLinkedListCollection[1]; $doubleLinkedList-&gt;append($node); $this-&gt;minFrequence = 1; $this-&gt;size++; &#125;&#125; Time Complexity: $O(1)$ (Reference.) Python concise solution detailed explanation: Two dict + Doubly linked list ʕ •ᴥ•ʔ：這題難度hard，看完討論還是弄了好久好久。有小瑕疵時，第21個test case不好debug。","categories":[{"name":"Programming","slug":"Programming","permalink":"https://yncbearz.github.io/categories/Programming/"}],"tags":[{"name":"LeetCode","slug":"LeetCode","permalink":"https://yncbearz.github.io/tags/LeetCode/"}]},{"title":"15.3-sum","slug":"15-3-sum","date":"2022-05-23T14:43:56.000Z","updated":"2025-05-30T08:15:23.212Z","comments":true,"path":"2022/05/23/15-3-sum/","permalink":"https://yncbearz.github.io/2022/05/23/15-3-sum/","excerpt":"15.3-sum","text":"Description:Given an integer array nums, return all the triplets [nums[i], nums[j], nums[k]] such that i !&#x3D; j, i !&#x3D; k, and j !&#x3D; k, and nums[i] + nums[j] + nums[k] &#x3D;&#x3D; 0.Notice that the solution set must not contain duplicate triplets. Example 1: 12Input: nums = [-1,0,1,2,-1,-4]Output: [[-1,-1,2],[-1,0,1]] Example 2: 12Input: nums = []Output: [] Example 3: 12Input: nums = [0]Output: [] Constraints: 0 &lt;&#x3D; nums.length &lt;&#x3D; 3000 $-10^5$ &lt;&#x3D; nums[i] &lt;&#x3D; $10^5$ Appropriate Answer (Sliding Window): 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859606162636465666768697071727374757677787980818283&lt;?phpnamespace LeetCode\\ThreeSum;class Solution&#123; /** * @param int[] $nums * @return int[][] */ public function threeSum($nums) &#123; $answer = []; $length = count($nums); if ($length &lt; 3) &#123; return $answer; &#125; sort($nums); for ($i = 0; $i &lt; $length - 2; $i++) &#123; if ($i != 0 &amp;&amp; $nums[$i - 1] == $nums[$i]) &#123; continue; &#125; $windowLeft = $i + 1; $windowRight = $length - 1; while ($windowLeft &lt; $windowRight) &#123; if ($nums[$i] + $nums[$windowLeft] + $nums[$windowRight] == 0) &#123; $answer[] = [$nums[$i], $nums[$windowLeft], $nums[$windowRight]]; $windowLeft++; while ( $windowLeft &lt; $windowRight &amp;&amp; $nums[$windowLeft - 1] == $nums[$windowLeft] ) &#123; $windowLeft++; &#125; $windowRight--; while ( $windowLeft &lt; $windowRight &amp;&amp; $nums[$windowRight + 1] == $nums[$windowRight] ) &#123; $windowRight--; &#125; &#125; if ($nums[$i] + $nums[$windowLeft] + $nums[$windowRight] &lt; 0) &#123; $windowLeft++; while ( $windowLeft &lt; $windowRight &amp;&amp; $nums[$windowLeft] == $nums[$windowLeft - 1] ) &#123; $windowLeft++; continue; &#125; continue; &#125; if ($nums[$i] + $nums[$windowLeft] + $nums[$windowRight] &gt; 0) &#123; $windowRight--; while ( $windowLeft &lt; $windowRight &amp;&amp; $nums[$windowRight] == $nums[$windowRight + 1] ) &#123; $windowRight--; continue; &#125; continue; &#125; &#125; &#125; return $answer; &#125;&#125; Time Complexity: $O(n^2)$ ʕ •ᴥ•ʔ：排序+選定第一個數字後，創造出使用反向Sliding Window的情境。","categories":[{"name":"Programming","slug":"Programming","permalink":"https://yncbearz.github.io/categories/Programming/"}],"tags":[{"name":"LeetCode","slug":"LeetCode","permalink":"https://yncbearz.github.io/tags/LeetCode/"}]},{"title":"3.longest-substring-without-repeating-characters","slug":"3-longest-substring-without-repeating-characters","date":"2022-04-27T16:16:08.000Z","updated":"2025-05-30T08:15:23.213Z","comments":true,"path":"2022/04/28/3-longest-substring-without-repeating-characters/","permalink":"https://yncbearz.github.io/2022/04/28/3-longest-substring-without-repeating-characters/","excerpt":"3.longest-substring-without-repeating-characters","text":"Description:Given a string s, find the length of the longest substring without repeating characters.Constraints: 0 &lt;&#x3D; s.length &lt;&#x3D; $5*10^4$ s consists of English letters, digits, symbols and spaces Sliding Window Appropriate Answer (Sliding Window): 123456789101112131415161718192021222324252627282930313233343536373839404142&lt;?phpnamespace LeetCode\\LongestSubstringWithoutRepeatintCharacters;class Solution&#123; /** * @param string $string * @return int */ public function lengthOfLongestSubstring($string) &#123; $answer = 0; $length = strlen($string); if ($length == 0) &#123; return $answer; &#125; $windowLeft = 0; $windowRight = 0; $usedCharacters = []; while ($windowRight &lt; $length) &#123; $character = $string[$windowRight]; while ( isset($usedCharacters[$character]) &amp;&amp; $windowLeft &lt;= $usedCharacters[$character] ) &#123; $windowLeft++; &#125; $usedCharacters[$character] = $windowRight; $windowRight++; $answer = max($answer, $windowRight - $windowLeft); &#125; return $answer; &#125;&#125; Time Complexity: $O(n)$ ʕ •ᴥ•ʔ：一開始有嘗試暴力解，但最後一個test case跑不過。","categories":[{"name":"Programming","slug":"Programming","permalink":"https://yncbearz.github.io/categories/Programming/"}],"tags":[{"name":"LeetCode","slug":"LeetCode","permalink":"https://yncbearz.github.io/tags/LeetCode/"}]},{"title":"從輸入網址到渲染畫面，發生了什麼事？","slug":"How-Does-The-Internet-Work","date":"2022-04-21T06:12:55.000Z","updated":"2025-05-30T08:15:23.244Z","comments":true,"path":"2022/04/21/How-Does-The-Internet-Work/","permalink":"https://yncbearz.github.io/2022/04/21/How-Does-The-Internet-Work/","excerpt":"How-Does-The-Internet-Work","text":"解析URL (Uniform Resource Locator)https://yncbearz.github.io/ 通訊協定類型 (Protocol): https, http, ftp, etc. 伺服器位址 (Domain): 可放域名或IP address 埠號 (Port): http預設為80、https預設為443 (Note.)Socket &#x3D; IP address + Port 解析DNS (Domain Name Server) 檢查本地的 DNS 快取 檢查電腦中的 .host 檔 向DNS伺服器發送詢問 Name Description Example DNS 將域名轉換為 IP 地址的分散式資訊系統。 將 example.com 轉換為 192.0.2.1 A record 將域名映射到 IPv4 地址的 DNS 記錄類型。 將 example.com 映射到 192.0.2.1 CNAME 將一個域名指向另一個域名的 DNS 記錄類型。 將 www.example.com 指向 example.com AAAA 將域名映射到 IPv6 地址的 DNS 記錄類型。 將 example.com 映射到 2001:0db8:85a3:0000:0000:8a2e:0370:7334 建立TCP&#x2F;IP (Transmission Control Protocol&#x2F;Internet Protocol)HTTPS是指將HTTP使用SSL加密後再利用TCP發送，加強安全性。TCP&#x2F;IP會經由三次握手建立連線，再經由四次揮手斷開連線。 Get vs Post Get: 瀏覽器將headers與data同時送出，因此只會產生1個TCP封包，最後伺服器端回應200與資料。 Post: 瀏覽器先將headers送出，等到伺服器端回應100 continue後再傳送data，因此會產生2個TCP封包，最後伺服器端回應 200與資料。 伺服器處理請求並返回HTTP回應通用標頭 (General Header) Request URL: 請求位置。 Request Method: 請求方式。 Status Code: 狀態碼。 Remote Address: 請求遠端伺服器位址，會轉為IP。 狀態碼 (Status Code) 1XX: 資訊回應 (Informational responses) 2XX: 成功回應 (Successful responses) 3XX: 重定向 (Redirects) 4XX: 用戶端錯誤 (Client errors) 5XX: 伺服器端錯誤 (Server errors) 更詳盡的資訊在這裡。 請求與回應標頭 (Request &amp; Response Headers) :authority: 要連接的遠端主機和接口訊息。 :method: 連接方法。 :path: 請求網址的檔案路徑和查詢字串。 :scheme: 請求網址的協議規範。(ex: https) 以上為HTTP&#x2F;2的偽請求標頭(pseudo-header field)，並不屬於 HTTP 正規的欄位，因此必須出現在正規欄位之前。 accept: 能夠接受的回應內容類型(content-types)。(ex: text&#x2F;plain) accept-encoding: 能夠接受的編碼方式。(ex: gzip) accept-language: 能夠接受的回應內容的自然語言。(ex: en) cache-control: 用來指定在這次的請求或回應中的所有快取機制都必須遵守的指令。(ex: no-cache) cookie: 由伺服器透過set-cookie所代入的文字串。 upgrade-insecure-requests: 指示伺服器若遇到http時要改為https。 user-agent: 瀏覽器的瀏覽器身分標識字串。 (Reference.) 30. [WEB] 從輸入網址列到渲染畫面，過程經歷了什麼事情？ 在瀏覽器輸入網址並送出後，到底發生了什麼事？ HTTP狀態碼 ʕ •ᴥ•ʔ：面試熱門問題，想藉此整理知識。會隨著時間成長而有更多的Reference。謝謝網路上許多願意分享的前輩。","categories":[],"tags":[{"name":"Note","slug":"Note","permalink":"https://yncbearz.github.io/tags/Note/"}]},{"title":"Math And Logic Puzzles","slug":"Math-And-Logic-Puzzles","date":"2022-04-02T03:10:27.000Z","updated":"2025-05-30T08:15:23.249Z","comments":true,"path":"2022/04/02/Math-And-Logic-Puzzles/","permalink":"https://yncbearz.github.io/2022/04/02/Math-And-Logic-Puzzles/","excerpt":"Math-And-Logic-Puzzles","text":"質數 (Prime Numbers)每個正整數可以分解成質數的乘積。 例如：$$84 &#x3D; 2^2 * 3^1 * 5^0 * 7^1 * 11^0 * 13^0 * 17^0 * … $$ 注意其中有很多質數的指數為0。 整除 (Divisibility)若數字$x$整除數字$y$ ( 寫成 $x|y$ 或 $mod(y, x) &#x3D; 0$ 或 $y≡0 (mod x)$ )，則$x$所有的質因數必須在$y$的質因數中。 更精確的表示：Let $x &#x3D; 2^{j_0} * 3^{j_1} * 5^{j_2} * 7^{j_3} * 11^{j_4} * … $Let $y &#x3D; 2^{k_0} * 3^{k_1} * 5^{k_2} * 7^{k_3} * 11^{k_4} * … $If $x|y,$ then $j_i &lt;&#x3D; k_i, ∀i∈N$ $x$與$y$的最大公因數是：$$gcd(x, y) &#x3D; 2^{min(j_0, k_0)} * 3^{min(j_1, k_1)} * 5^{min(j_2, k_2)} * …$$ $x$與$y$的最小公倍數是：$$lcm(x, y) &#x3D; 2^{max(j_0, k_0)} * 3^{max(j_1, k_1)} * 5^{max(j_2, k_2)} * …$$ 思考一下$gcd * lcm$會得到什麼？ $gcd * lcm$$&#x3D; 2^{min(j_0, k_0)} * 2^{max(j_0, k_0)} * 3^{min(j_1, k_1)} * 3^{max(j_1, k_1)} * …$$&#x3D; 2^{min(j_0, k_0) + max(j_0, k_0)} * 3^{min(j_1, k_1) + max(j_1, k_1)} * …$$&#x3D; 2^{j_0 + k_0} * 3^{j_1 + k_1} * …$$&#x3D; 2^{j_0} * 2^{k_0} * 3^{j_1} * 3^{k_1}…$$&#x3D; xy$ 檢查質數 (Checking for Primality) 從2迭代到$n-1$ 12345678910111213141516&lt;?phpfunction primeNaive(int $n)&#123; if ($n &lt; 2) &#123; return false; &#125; for ($i = 2; $i &lt; $n; $i++) &#123; if ($n % $i == 0) &#123; return false; &#125; &#125; return true;&#125; 從2迭代到$n^{1&#x2F;2}$ 123456789101112131415161718&lt;?phpfunction primeNaive(int $n)&#123; if ($n &lt; 2) &#123; return false; &#125; $sqrt = sqrt($n); for ($i = 2; $i &lt; $sqrt; $i++) &#123; if ($n % $i == 0) &#123; return false; &#125; &#125; return true;&#125; 產生質數清單：埃拉托斯特尼篩法 (Generating a List of Primes: The Sieve of Eratosthenes)利用所有非質數可被質數整除的概念來產生質數清單。 我們從最大值$max$的所有數字清單開始。 首先去掉可被2整除的數字，然後找出下個質數 (下個沒有被去掉的數字)，並去掉可以被它整除的數字。最終可以得到一個從2到$max$的質數清單。 12345678910111213141516171819202122232425262728293031323334353637&lt;?phpfunction sieveOfEratosthenes(int $maxNumber): array&#123; $numbers = range(2, $maxNumber); $prime = 2; while ($prime &lt;= sqrt($maxNumber)) &#123; $numbers = crossOff($numbers, $prime); $prime = getNextPrime($numbers, $prime); &#125; return $numbers;&#125;function crossOff(array $numbers, int $prime): array&#123; foreach ($numbers as $key =&gt; $number) &#123; if ($number &gt; $prime &amp;&amp; $number % $prime == 0) &#123; unset($numbers[$key]); &#125; &#125; return array_values($numbers);&#125;function getNextPrime(array $numbers, int $prime): int&#123; foreach ($numbers as $key =&gt; $number) &#123; if ($number &gt; $prime) &#123; return $number; &#125; &#125; return PHP_INT_MAX;&#125; 面試題目6.1 The Heavy PillYou have 20 bottles of pills. 19 bottles have 1.0 gram pills, but one has pills of weight 1.1 grams. Given a scale that provides an exact measurement, how would you find the heavy bottle? You can only use the scale once.由於我們只能稱一次。因此我們必須一次稱所有藥丸。 透過將瓶子編號，從編號#1的瓶子取出1顆藥丸、編號#2的瓶子取出2顆藥丸、… 我們會取出$$1+2+3+…+20 &#x3D; \\frac{21*20}{2} &#x3D; 210顆藥丸$$ 若全為1克時，為210克。超出的重量則來自1.1克的藥丸。 可透過以下公式找出瓶子編號：$$\\frac{weight - 210}{0.1}$$ 6.2 BasketballYou have a basketball hoop and someone says that you can play one of two games. Game 1: You get one shot to make the hoop. Game 2: You get three shots and you have to make two of three shots. If p is the probability of making a particular shot, for which values of p should you pick one game or the other?賭法一的勝率：p。 賭法二的勝率： $P(賭法二)$$&#x3D; P(投三中三) + P(投三中二)$$&#x3D; p * p * p + p * p * (1-p) * 3$$&#x3D; p^3 + 3p^2(1-p)$ 要選哪一種玩法? 考慮$p &gt; p^3 + 3p^2(1-p)$$2p^3 - 3p^2 + p &gt; 0$$2p^2 - 3p + 1 &gt; 0$$(2p-1)(p-1) &gt; 0$ 得$0 &lt; p &lt; \\frac{1}{2}$ 故(i) 當$0 &lt; p &lt; \\frac{1}{2}$選賭法一。(ii) 當$0.5 &lt; p &lt; 1$選賭法二。(iii) 當$p &#x3D; 0$、$p &#x3D; 0.5$、$p &#x3D; 1$時則都可以。 6.3 DominosThere is an 8x8 chessboard in which two diagonally opposite corners have been cut off. You are given 31 dominos, and a single domino can cover exactly two squares. Can you use the 31 dominos to cover the entire board? Prove your answer (by providing an example or showing why it’s impossible). 6.4 Ants on a TriangleThere are three ants on different vertices of a triangle. What is the probability of collision (between any two or all of them) if they start walking on the sides of the triangle? Assume that each ant randomly picks a direction, with either direction being equally likely to be chosen, and that they walk at the same speed. Similarly, find the probability of collision with n ants on an n-vertex polygon.不碰撞的情況比較單純。 情況一：全部都走順時針的機率 $\\frac{1}{2} * \\frac{1}{2} * \\frac{1}{2} &#x3D; \\frac{1}{8}$ 情況二：全部都走逆時針的機率 $\\frac{1}{2} * \\frac{1}{2} * \\frac{1}{2} &#x3D; \\frac{1}{8}$ 則碰撞機率$1 - \\frac{1}{8} * 2 &#x3D; \\frac{6}{8} &#x3D; \\frac{3}{4}$ 通用情況：$n$隻螞蟻在$n$邊形的碰撞機率 $1 - (\\frac{1}{2})^n * 2$ 6.5 Jugs of WaterYou have a five-quart jug, a three-quart jug, and an unlimited supply of water (but no measuring cups). How would you come up with exactly four quarts of water? Note that the jugs are oddly shaped, such that filling up exactly “half” of the jug would be impossible. 透過五夸脫與三夸脫的容積差。 6.6 Blue-Eyed IslandA bunch of people are living on an island, when a visitor comes with a strange order: all blue-eyed people must leave the island as soon as possible. There will be a flight out at 8:00 pm every evening. Each person can see everyone else’s eye color, but they do not know their own (nor is anyone allowed to tell them). Additionally, they do not know how many people have blue eyes, although they do know that at least one person does. How many days will it take the blue-eyed people to leave? 情況一：假設一個藍眼人在他眼中沒有其他藍眼人，他就會知道自己是唯一的藍眼人。 費時一天。 情況二：假設兩個藍眼人 在他們眼中有一個藍眼人，過了一晚，發現該藍眼人沒有離開。 這表示那個藍眼人中還有藍眼人，即自己也是藍眼人。 費時兩天。 依次推類 若有$n$個聰明的藍眼人，則費時$n$天。 ʕ •ᴥ•ʔ：程式碼可參考：CtCI-6th-php。","categories":[{"name":"Programming","slug":"Programming","permalink":"https://yncbearz.github.io/categories/Programming/"}],"tags":[{"name":"Study Group","slug":"Study-Group","permalink":"https://yncbearz.github.io/tags/Study-Group/"}]},{"title":"Trees And Graphs","slug":"Trees-And-Graphs","date":"2022-02-26T02:33:00.000Z","updated":"2025-05-30T08:15:23.257Z","comments":true,"path":"2022/02/26/Trees-And-Graphs/","permalink":"https://yncbearz.github.io/2022/02/26/Trees-And-Graphs/","excerpt":"Trees-And-Graphs","text":"樹的類型 (Types of Trees)樹與二元樹 (Trees vs. Binary Trees)指每個節點最多兩個子節點的樹。並非所有的樹是二元樹。 無子節點的節點稱為葉 (leaf)。 二元樹與二元搜尋樹 (Binary Tree vs. Binary Search Tree)二元搜尋樹指每個節點都有特定排序的二元樹：所有左邊 &lt;&#x3D; n &lt; 所有右邊。此條件對每個節點n都成立。 平衡與非平衡 (Balanced vs. Unbalanced)注意平衡樹並不表示左右子樹大小完全相同。 實際意義是類似「未到糟糕等級的不平衡」。它的平衡程度足以確保insert與find在$O(logn)$時間內。(不一定要最佳平衡) 常見的平衡樹是紅黑樹(Red Black Tree)和AVL樹。 完全二元樹 (Complete Binary Trees)指的是除了最後一層外，每層都填滿的二元樹。最後一層從左至右填入。 滿二元樹 (Full Binary Trees)指的是每個節點有零或兩個子節點的二元樹。也就是說沒有節點只有一個子節點。 完美二元樹 (Perfect Binary Trees)指的是所有葉節點均在同一層且葉具有最大節點數量。剛好有$2^k-1$個節點。($k$為層數) 二元樹遍歷 (Binary Tree Traversal)12345 4 / \\ 2 6 / \\ / \\1 3 5 7 遍歷方式 輸出結果 Pre-Order Traversal 4213657 In-Order Traversal 1234567 Post-Order Traversal 1325764 Pre-, In-, Post- 是指parent node相對於child node的順序。 123456789101112131415&lt;?phpclass BinaryTreeNode&#123; public mixed $data; public ?BinaryTreeNode $left; public ?BinaryTreeNode $right; public function __construct($data) &#123; $this-&gt;data = $data; $this-&gt;left = null; $this-&gt;right = null; &#125;&#125; 前序遍歷 (Pre-Order Traversal)12345678910111213141516171819202122232425262728&lt;?phpclass PreOrder&#123; protected string $result = &#x27;&#x27;; public function run(BinaryTreeNode $node): string &#123; $this-&gt;preOrderTraversal($node); return $this-&gt;result; &#125; public function preOrderTraversal(?BinaryTreeNode $node) &#123; if ($node != null) &#123; $this-&gt;visit($node); $this-&gt;preOrderTraversal($node-&gt;left); $this-&gt;preOrderTraversal($node-&gt;right); &#125; &#125; private function visit(BinaryTreeNode $node) &#123; $this-&gt;result = $this-&gt;result . $node-&gt;data; &#125;&#125; 中序遍歷 (In-Order Traversal)123456789101112131415161718192021222324252627&lt;?phpclass InOrder&#123; protected string $result = &#x27;&#x27;; public function run(BinaryTreeNode $node): string &#123; $this-&gt;InOrderTraversal($node); return $this-&gt;result; &#125; public function InOrderTraversal(?BinaryTreeNode $node) &#123; if ($node != null) &#123; $this-&gt;InOrderTraversal($node-&gt;left); $this-&gt;visit($node); $this-&gt;InOrderTraversal($node-&gt;right); &#125; &#125; private function visit(BinaryTreeNode $node) &#123; $this-&gt;result = $this-&gt;result . $node-&gt;data; &#125;&#125; 後序遍歷 (Post-Order Traversal)123456789101112131415161718192021222324252627&lt;?phpclass PostOrder&#123; protected string $result = &#x27;&#x27;; public function run(BinaryTreeNode $node): string &#123; $this-&gt;PostOrderTraversal($node); return $this-&gt;result; &#125; public function PostOrderTraversal(?BinaryTreeNode $node) &#123; if ($node != null) &#123; $this-&gt;PostOrderTraversal($node-&gt;left); $this-&gt;PostOrderTraversal($node-&gt;right); $this-&gt;visit($node); &#125; &#125; private function visit(BinaryTreeNode $node) &#123; $this-&gt;result = $this-&gt;result . $node-&gt;data; &#125;&#125; 二元堆積 - 最小堆積與最大堆積 (Binary Heaps - Min-Heaps and Max-Heaps)最小堆積是個完全二元樹，其每個節點都小於子節點，因此根是樹中的最小元素。 有兩個關鍵操作：insert與extract_min。 Insert 插入到最小堆積時，我們總是從底最右插入元素以維持完全樹。 然後我們改正樹，交換新元素與父元素直到新元素落在正確位置。基本上就是將最小元素浮上去。 需要$O(logn)$時間，$n$為堆積的節點數量。 Extract Minimum Element 首先我們刪除最小元素並與堆積中最後一個元素(最下最右的元素)交換。然後與子元素交換直到恢復成最小堆積。 與左或右的子元素交換？視其值而定。左右元素間沒有自然的順序，但你必須取用較小者以維持最小堆積的順序。 (註: pdf版本的80並不符合最小堆積，書上的圖給的值是96) 此演算法也需要$O(logn)$時間。 前綴樹 (Tries - Prefix Trees) 前綴樹常用於儲存供前綴查詢的語言(英文)。 雖然雜湊表可以快速查詢某個字是否為合法的詞，但無法告訴我們字串是否為前綴。這點前綴樹可以做到。 圖 (Graphs)樹為圖的一種，但並非所有圖都是樹。 圖是群有邊 (edge) 的節點。 圖可分有向 (directed) 或無向。 圖可能由多個獨立的子圖組成。若每個點之間都有路徑連接則稱為「連通圖」(connected graph)。 圖也可以有環。沒有環的圖稱為「無環圖」(acyclic graph)。 通常有兩種常見的表示方式。 相鄰清單 (Adjacency List)這是最常見的表示圖方式。每個頂點 (vertex)(或稱為節點)儲存相鄰頂點的清單。在無向圖中，(a, b)的邊會儲存兩次：一次是a的相鄰頂點，一次是b的相鄰頂點。 1234567891011&lt;?phpclass Graph&#123; public Node[] $nodes;&#125;class Node&#123; public string $name; public Node[] $children;&#125; 此Graph類別是必要的，因為不像樹可從一個節點找到使用節點。 你不一定要額外的類別來表示圖。上面的圖可表示為：0: 11: 22: 0, 33: 24: 65: 46: 5 相鄰矩陣 (Adjacency Matrices)相鄰矩陣是N*N布林矩陣 (N為節點數量)。**matrix[i][j]**的true值表示節點i與節點j有邊。 在無向圖中，相鄰矩陣是對稱的。在有向圖不一定對稱。 圖搜尋 (Graph Search)深度優先搜尋 (Depth-First Search, DFS)在DFS中，我們造訪節點a然後迭代a的每個鄰居。造訪a的鄰居b節點時，我們在進入a的其他鄰居前造訪b的所有鄰居。也就是進入其他鄰居前完整搜尋b的分支。 注意前序與其他形式的樹遍歷也是一種DFS。關鍵在於對圖實作時，我們必須檢查節點是否已經造訪過。 廣度優先搜尋 (Breadth-First Search, BFS)在BFS中，節點a在造訪鄰居的鄰居前會造訪每一個鄰居。你可以想像從a開始一層一層搜尋。使用佇列的迭代方案通常最好。 雙向搜尋 (Bidirectional Search)用於找出來源與目標節點間的最短路徑。基本上是同時從兩個節點執行兩個廣度搜尋。 以每個節點最多有k個相鄰節點的圖來說，從節點s到節點t的最短路徑長度為d。 在廣度優先搜尋中，我們會在第一層搜尋最多$k$個節點。第二層對$k$個節點各搜尋$k$個節點，共有$k^2$個節點。會執行$d$次，因此有$O(k^d)$個節點。 在雙向搜尋中，兩個搜尋約在$d&#x2F;2$層後碰撞(路徑中點)。從s開始搜尋造訪約$O(k^{d&#x2F;2})$次，從t開始也是。總共是$2*k^{d&#x2F;2}$，或$O(k^{d&#x2F;2})$個節點。 面試題目 Binary Tree Node 123456789101112131415&lt;?phpclass BinaryTreeNode&#123; public mixed $data; public ?BinaryTreeNode $left; public ?BinaryTreeNode $right; public function __construct($data) &#123; $this-&gt;data = $data; $this-&gt;left = null; $this-&gt;right = null; &#125;&#125; 4.4 Check BalancedImplement a function to check if a binary tree is balanced. For the purposes of this question, a balanced tree is defined to be a tree such that the heights of the two subtrees of any node never differ by more than one. First Answer 123456789101112131415161718192021222324252627282930&lt;?phpclass BalancedTreeChecker&#123; public static function isBalanced(?BinaryTreeNode $node): bool &#123; if (is_null($node)) &#123; return true; &#125; $heightDiff = abs(self::getHeight($node-&gt;left) - self::getHeight($node-&gt;right)); if ($heightDiff &gt; 1) &#123; return false; &#125; else &#123; return self::isBalanced($node-&gt;left) &amp;&amp; self::isBalanced($node-&gt;right); &#125; &#125; public static function getHeight(?BinaryTreeNode $node): int &#123; if (is_null($node)) &#123; return -1; &#125; return max(self::getHeight($node-&gt;left), self::getHeight($node-&gt;right)) + 1; &#125;&#125; Second Answer 1234567891011121314151617181920212223242526272829303132333435363738394041&lt;?phpclass BalancedTreeChecker&#123; public static function isBalanced(?BinaryTreeNode $node): bool &#123; if (is_null($node)) &#123; return true; &#125; return self::getHeight($node) != PHP_INT_MIN; &#125; public static function getHeight(?BinaryTreeNode $node): int &#123; if (is_null($node)) &#123; return -1; &#125; $leftHeight = self::getHeight($node-&gt;left); if ($leftHeight == PHP_INT_MIN) &#123; return PHP_INT_MIN; &#125; $rightHeight = self::getHeight($node-&gt;right); if ($rightHeight == PHP_INT_MIN) &#123; return PHP_INT_MIN; &#125; $heightDiff = abs($leftHeight - $rightHeight); if ($heightDiff &gt; 1) &#123; return PHP_INT_MIN; &#125; else &#123; return max($leftHeight, $rightHeight) + 1; &#125; &#125;&#125; 4.5 Validate BSTImplement a function to check if a binary tree is a binary search tree. First Answer (In-Order Traversal) 1234567891011121314151617181920212223242526272829303132333435363738&lt;?phpclass BinarySearchTreeChecker&#123; protected static ?int $lastPrinted = null; public static function isBinarySearchTree(?BinaryTreeNode $node, $min = null, $max = null) &#123; $result = self::checkBST($node); self::$lastPrinted = null; return $result; &#125; public static function checkBST(?BinaryTreeNode $node) &#123; if (is_null($node)) &#123; return true; &#125; if (!self::checkBST($node-&gt;left)) &#123; return false; &#125; if (!is_null(self::$lastPrinted) &amp;&amp; $node-&gt;data &lt; self::$lastPrinted) &#123; return false; &#125; self::$lastPrinted = $node-&gt;data; if (!self::checkBST($node-&gt;right)) &#123; return false; &#125; return true; &#125;&#125; 4.6 SuccessorWrite an algorithm to find the “next” node (i.e., in-order successor) of a given node in a binary search tree. You may assume that each node has a link to its parent. Ideas: 若有右子樹，則是右子樹上最左邊的節點。 若沒有右子樹，則要看節點與父節點的相對位置 若節點在父節點的左邊，則下一個節點是父節點。 若節點在父節點的右邊，則下一個節點是父節點往上還沒遍歷的節點。即是下一個從左邊回去的節點。 要小心若一路向上的過程中，沒有從左邊回去的節點。 1234567891011inorderSuccessor(Node n) &#123; if (n has a right subtree) &#123; return leftmost child of right subtree; &#125; else &#123; while (n.parent != null &amp;&amp; n is a right child of n.parent) &#123; n = n.parent; &#125; return n.parent; &#125;&#125; Binary Tree Node With Parent 123456789class BinaryTreeNodeWithParent extends BinaryTreeNode&#123; public $parent; public function __construct($data) &#123; parent::__construct($data); &#125;&#125; First Answer 123456789101112131415161718192021222324252627282930313233343536&lt;?phpclass SuccessorNodeFinder&#123; private static function inorderSuccessor(?BinaryTreeNodeWithParent $node): ?BinaryTreeNode &#123; if (is_null($node)) &#123; return null; &#125; if (!is_null($node-&gt;right)) &#123; return self::leftMostChild($node-&gt;right); &#125; else &#123; $parent = $node-&gt;parent; while (!is_null($parent) &amp;&amp; ($parent-&gt;left != $node)) &#123; $node = $parent; $parent = $parent-&gt;parent; &#125; return $parent; &#125; &#125; private static function leftMostChild(BinaryTreeNode $node): BinaryTreeNode &#123; while (!is_null($node-&gt;left)) &#123; $node = $node-&gt;left; &#125; return $node; &#125;&#125; ʕ •ᴥ•ʔ：程式碼可參考：CtCI-6th-php。","categories":[{"name":"Programming","slug":"Programming","permalink":"https://yncbearz.github.io/categories/Programming/"}],"tags":[{"name":"Study Group","slug":"Study-Group","permalink":"https://yncbearz.github.io/tags/Study-Group/"}]},{"title":"Stacks And Queues","slug":"Stacks-And-Queues","date":"2022-02-21T14:39:34.000Z","updated":"2025-05-30T08:15:23.254Z","comments":true,"path":"2022/02/21/Stacks-And-Queues/","permalink":"https://yncbearz.github.io/2022/02/21/Stacks-And-Queues/","excerpt":"Stacks-And-Queues","text":"堆疊 (Stack)實作 LIFO (last-in first-out) 順序，如同一疊鬆餅，最後疊上去的鬆餅會最先被吃掉。 It uses the following operations: pop(): Remove the top item from the stack. push(item): Add an item to the top of the stack. peek(): Return the top of the stack. isEmpty(): Return true if and only if the stack is empty. 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354&lt;?phpclass Stack&#123; protected ?StackNode $top; public function pop() &#123; if (is_null($this-&gt;top)) &#123; throw new Exception(&#x27;Empty Stack&#x27;); &#125; $item = $this-&gt;top-&gt;data; $this-&gt;top = $this-&gt;top-&gt;next; return $item; &#125; public function push($item) &#123; $stackNode = new StackNode($item); $stackNode-&gt;next = $this-&gt;top; $this-&gt;top = $stackNode; &#125; public function peek() &#123; if (is_null($this-&gt;top)) &#123; throw new Exception(&#x27;Empty Stack&#x27;); &#125; return $this-&gt;top-&gt;data; &#125; public function isEmpty() &#123; return is_null($this-&gt;top); &#125;&#125;class StackNode&#123; public mixed $data; public ?StackNode $next; public function __construct($data) &#123; $this-&gt;data = $data; $this-&gt;next = null; &#125;&#125; 佇列 (Queue)實作 FIFO (first-in first-out) 順序，如同售票亭前排隊，最先排隊的人最早拿到票。 It uses the following operations: add(item): Add an item to the end of the queue. remove(): Remove the first item of the queue. peek(): Return the first of the queue. isEmpty(): Return true if and only if the queue is empty. 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566&lt;?phpclass Queue&#123; protected ?QueueNode $first; protected ?QueueNode $last; public function add($item) &#123; $queueNode = new QueueNode($item); if (!is_null($this-&gt;last)) &#123; $this-&gt;last-&gt;next = $queueNode; &#125; $this-&gt;last = $queueNode; if (is_null($this-&gt;first)) &#123; $this-&gt;first = $queueNode; &#125; &#125; public function remove() &#123; if (is_null($this-&gt;first)) &#123; throw new Exception(&#x27;No Such Element&#x27;); &#125; $item = $this-&gt;first-&gt;data; $this-&gt;first = $this-&gt;first-&gt;next; if (is_null($this-&gt;first)) &#123; $this-&gt;last = null; &#125; return $item; &#125; public function peek() &#123; if (is_null($this-&gt;first)) &#123; throw new Exception(&#x27;No Such Element&#x27;); &#125; return $this-&gt;first-&gt;data; &#125; public function isEmpty() &#123; return is_null($this-&gt;first); &#125;&#125;class QueueNode&#123; public mixed $data; public ?QueueNode $next; public function __construct($data) &#123; $this-&gt;data = $data; $this-&gt;next = null; &#125;&#125; ʕ •ᴥ•ʔ：程式碼可參考：CtCI-6th-php。","categories":[{"name":"Programming","slug":"Programming","permalink":"https://yncbearz.github.io/categories/Programming/"}],"tags":[{"name":"Study Group","slug":"Study-Group","permalink":"https://yncbearz.github.io/tags/Study-Group/"}]},{"title":"Linked Lists","slug":"Linked-Lists","date":"2022-02-14T15:57:06.000Z","updated":"2025-05-30T08:15:23.248Z","comments":true,"path":"2022/02/14/Linked-Lists/","permalink":"https://yncbearz.github.io/2022/02/14/Linked-Lists/","excerpt":"Linked-Lists","text":"鏈接清單 (Linked List)鏈接清單是表示一系列節點(node)的資料結構。 與陣列不同，在鏈接清單中存取特定索引並非常數(constant)時間。若要找到清單中的第K個元素，需要迭代K個元素。 建構鏈接清單12345678910111213141516171819202122class Node&#123; public ?Node $next = null; public int $data; public function __construct(int $data) &#123; $this-&gt;int = $data; &#125; public function appendToTail(int $data) &#123; $end = new Node($data); $n = $this; while ($n-&gt;next != null) &#123; $n = $n-&gt;next; &#125; $n-&gt;next = $end; &#125;&#125; 此實作中沒有LinkedList資料結構。我們透過第一個節點參考(reference)存取此鏈接清單。 以這種方式實作鏈接清單必須小心。若有多個物件需要此鏈接清單的參考，而第一個節點改變了呢？ 我們可以選擇實作包裝Node類別的LinkedList類別。它只有一個成員變數：第一個Node。這會大幅解決前述問題。 記得討論鏈接清單要知道是單向或雙向的。 從單向鏈接清單中刪除節點對節點n找出前一個節點prev並將prev.next設定為n.next值。 若為雙向鏈接，還有將n.next.prev設定為n.prev值。 重點是檢查空指標與更新頭尾指標。 runner技巧“runner” (或說是第二個指標) 技巧用於鏈接清單問題。意思是同時以兩個指標迭代鏈接清單，其中一個領先另一個 (節點領先固定數量)。 遞迴問題許多鏈接清單依靠遞迴解決。但你應該要記住遞迴演算法至少需要$O(n)$空間，$n$是遞迴呼叫的深度。 所有遞迴演算法都可以用迭代實作，但會比較複雜。 面試問題2.1 Remove DupsWrite code to remove duplicates from an unsorted linked list. First Answer (hash table) 1234567891011121314151617181920public static function removeDuplicated(Node $node)&#123; $hashTable = []; /** * @var ?Node $previousNode */ $previousNode = null; while (!is_null($node)) &#123; if (in_array($node-&gt;data, $hashTable)) &#123; $previousNode-&gt;next = $node-&gt;next; &#125; else &#123; $hashTable[] = $node-&gt;data; $previousNode = $node; &#125; $node = $node-&gt;getNext(); &#125;&#125; Best Answer (two point) 123456789101112131415161718public static function removeDuplicated(Node $node)&#123; $pointer1 = $node; while (!is_null($pointer1)) &#123; $pointer2 = $pointer1; while (!is_null($pointer2-&gt;next)) &#123; if ($pointer2-&gt;next-&gt;data == $pointer1-&gt;data) &#123; $pointer2-&gt;next = $pointer2-&gt;next-&gt;next; &#125; else &#123; $pointer2 = $pointer2-&gt;next; &#125; &#125; $pointer1 = $pointer1-&gt;next; &#125;&#125; 2.2 Return Kth to LastImplement an algorithm to find the kth to last element of a singly linked list.123456789101112131415161718192021public static function find(Node $node, $k): ?Node&#123; $pointer1 = $node; $pointer2 = $node; for ($i = 0; $i &lt; $k; $i++) &#123; if (is_null($pointer1)) &#123; return null; &#125; $pointer1 = $pointer1-&gt;next; &#125; while ($pointer1 != null) &#123; $pointer1 = $pointer1-&gt;next; $pointer2 = $pointer2-&gt;next; &#125; return $pointer2;&#125; 2.4 PartitionWrite code to partition a linked list around a value x, such that all nodes less than x come before all nodes greater than or equal to x. If x is contained within the list, the values of x only need to be after the elements less than x (see below). The partition element x can appear anywhere in the “right partition”; it does not need to appear between the left and right partitions.[Example] Input:Output:3 -&gt; 5 -&gt; 8 -&gt; 5 -&gt; 10 -&gt; 2 -&gt; 1 [partition&#x3D; 5]3 -&gt; 1 -&gt; 2 -&gt; 10 -&gt; 5 -&gt; 5 -&gt; 8 1234567891011121314151617181920212223242526public static function partition(Node $node, $x)&#123; $head = new Node(); $headStart = $head; $tail = new Node(); $tailStart = $tail; while (!is_null($node)) &#123; $data = $node-&gt;data; if ($data &lt; $x) &#123; $head-&gt;next = new Node($data); $head = $head-&gt;next; &#125; else &#123; $tail-&gt;next = new Node($data); $tail = $tail-&gt;next; &#125; $node = $node-&gt;next; &#125; $head-&gt;next = $tailStart-&gt;next; return $headStart-&gt;next;&#125; 2.6 PalindromeImplement a function to check if a linked list is a palindrome. Solution #1 (Reverse and Compare) 12345678910111213141516171819202122232425262728293031323334public static function isPalindrome(?Node $node): bool&#123; $reversed = self::reverseAndClone($node); return self::isEqual($node, $reversed);&#125;private static function reverseAndClone(Node $node): ?Node&#123; $head = null; while (!is_null($node)) &#123; $n = new Node($node-&gt;data); $n-&gt;next = $head; $head = $n; $node = $node-&gt;next; &#125; return $head;&#125;private static function isEqual(?Node $node, ?Node $reversed): bool&#123; while (!is_null($node) &amp;&amp; !is_null($reversed)) &#123; if ($node-&gt;data != $reversed-&gt;data) &#123; return false; &#125; $node = $node-&gt;next; $reversed = $reversed-&gt;next; &#125; return $node === $reversed;&#125; ʕ •ᴥ•ʔ：程式碼可參考：CtCI-6th-php。","categories":[{"name":"Programming","slug":"Programming","permalink":"https://yncbearz.github.io/categories/Programming/"}],"tags":[{"name":"Study Group","slug":"Study-Group","permalink":"https://yncbearz.github.io/tags/Study-Group/"}]},{"title":"Arrays And Strings","slug":"Arrays-And-Strings","date":"2022-02-13T10:19:34.000Z","updated":"2025-05-30T08:15:23.215Z","comments":true,"path":"2022/02/13/Arrays-And-Strings/","permalink":"https://yncbearz.github.io/2022/02/13/Arrays-And-Strings/","excerpt":"Arrays-And-Strings","text":"雜湊表 (Hash Tables)雜湊表是對應鍵(key)與值(value)，以供高效率查詢的資料結構。 以下描述簡單但最常見的實作。 我們使用一個鏈接清單(linked list)陣列與一個雜湊編碼函式(hash code function)。當要插入鍵與值時，我們會執行： 首先計算鍵的雜湊編碼，通常為int或long。 注意兩個不同的鍵可能有相同的雜湊編碼。 對應該雜湊編碼到陣列的一個索引(index)。它可以是hash(key)% array_length。 兩個不同的雜湊編碼可能對應到同一個索引。 此索引有個鍵與值的鏈接清單。將鍵與值存在這個索引中。我們必須使用鏈接清單是因為有衝突(collision):兩個不同的鍵具有相同的雜湊編碼，或不同的雜湊編碼對應到相同索引。 若衝突量很高，最差的執行時間是$O(n)$，N為鍵的數量。但好的實作可以將衝突降至最少，此時的查詢時間為$O(1)$。 另外我們也可以用平衡二元搜尋樹(balanced binary search tree)實作雜湊表。它具有$O(logN)$查詢時間。好處是使用較少空間，因為不需要分配(allocate)大陣列。還能夠依序迭代(iterate)所有鍵，在某些情況很實用。 Binary Search Tree(BST): Key(L)&lt;Key(Current)&lt;Key(R) Both subtrees of each node are also BSTs Balanced Binary Search Tree: A binary search tree in which the left and right subtrees of every node differ in height by no more than 1 ArrayList 與可變大小陣列有些語言的陣列可以自動調整大小 (通常稱為清單)。Java等其他語言的陣列大小是固定的。 你需要可動態調整大小的類陣列結構時，通常可使用ArrayList。ArrayList是自行調整大小的陣列但存取還是$O(1)$。典型的實作會在陣列滿時，加倍大小。 每次加倍需要$O(n)$時間，但很少發生，插入時間平攤後還是$O(1)$。 123456ArrayList&lt;String&gt; merge(String[] words, String[] more) &#123; ArrayList&lt;String&gt; sentence = new ArrayList&lt;String&gt;(); for (String w : words) sentence.add(w); for (String w : more) sentence.add(w); return sentence;&#125; 為什麼分攤後的插入時間是$O(1)$? 參考先前的平攤時間。 StringBuilder假設要如下連接字串清單，這段程式的執行時間是什麼？ 假設字串的長度(x)都相等且有n個字串。 1234567String joinWords(String[] words) &#123; String sentence = &#x27;&#x27;; for (String w : words) &#123; sentence = sentence + w; &#125; return sentence;&#125; 每個連接都產生新的字串拷貝，將兩個字串複製並連接在一起。第一個迭代需要複製x個字元、第二個迭代需要複製2x個字元、… 因此總時間為$O(x+2x+…+nx) &#x3D; O(xn^2)$ (因為$1+2+…+n &#x3D; n(n+1)&#x2F;2$) StringBuilder可以避免這個問題。StringBuilder建構可調整大小的陣列，只在有需要時再複製成字串。 1234567String joinWords(String[] words) &#123; StringBuilder sentence = new StringBuilder(); for (String w : words) &#123; sentence.append(w); &#125; return sentence.toString();&#125; 面試題目1.1 Is UniqueImplement an algorithm to determine if a string has all unique characters. What if you cannot use additional data structures? 先詢問字串是ASCII或Unicode。 補充: ASCII (American Standard Code for Information Interchange，美國標準資訊交換碼)用一個位元組(bite)，即8個位元(bit)，來表示一個字元。位元組的最高位統一規定為0，剩餘7位用來存儲數據。共128種編碼。擴展的ASCII編碼，則是把位元組的最高位原本統一設置為0的，也用來存儲字符數據。但各國在擴展的部分定義不同。共256種編碼。 Unicode，又被稱為統一碼、萬國碼，使用兩個位元組，即16位元來表示字元。 UTF-8 (8-bit Unicode Transformation Format)，是Unicode的一種編碼方式。可以用一至四個位元組對Unicode字元集中的所有有效編碼點進行編碼。為解決向下相容ASCII碼而設計。 假設為ASCII的128個字元。 123456789101112131415161718public static function isUnique($string): bool&#123; if (strlen($string) &gt; 128) &#123; return false; &#125; $charSet = []; for ($i = 0; $i &lt; strlen($string); $i++) &#123; $value = substr($string, $i, 1); if (isset($charSet[$value])) &#123; return false; &#125; $charSet[$value] = true; &#125; return true;&#125; 此程式的時間複雜度為$O(n)$，n為字串長度。空間複雜度為$O(1)$。也可以說時間複雜度為$O(1)$，因為不會迭代超過128個字元。 若不想假設字元集的大小，可以說時間複雜度為$O(min(c,n))$。其中c為字元集的大小。 提示：使用位元向量。 使用位元向量可降低使用空間。 假設字串只使用a到z的小寫字母。 12345678910111213141516171819202122232425public static function isUnique($string): bool&#123; $checker = 0; for ($i = 0; $i &lt; strlen($string); $i++) &#123; $value = substr($string, $i, 1); $asciiDiff = ord($value) - ord(&#x27;a&#x27;); /** * $a &amp; $b: 取位元的交集。 * $a &lt;&lt; $b: 將位元向左移動b次(即乘以2的b次方)。 */ if (($checker &amp; (1 &lt;&lt; $asciiDiff)) &gt; 0) &#123; return false; &#125; /** * $a |= $b: $a = $a | $b。 */ $checker |= (1 &lt;&lt; $asciiDiff); &#125; return true;&#125; 若不能使用其他資料結構呢？ 相互比較字串的每個字元，需要$O(n^2)$的時間與$O(1)$空間。 若可以修改字元，我們可以用$O(nlog(n))$時間將字串排序，然後線性檢查相鄰字元是否相同。注意：許多排序演算法需要額外空間。 1.5 One AwayThere are three types of edits that can be performed on strings: Insert a character, remove a character, or replace a character. Given two strings, write a function to check if they are one edit (or zero edits) away.[Example]pale, ple -&gt; truepales, pale -&gt; truepale, bale -&gt; truepale, bake -&gt; false 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869public static function isOneOrZeroAway(string $string1, string $string2): bool&#123; $length1 = strlen($string1); $length2 = strlen($string2); if ($length1 == $length2) &#123; return self::isReplaceCharacter($string1, $string2); &#125; elseif (abs($length1 - $length2) == 1) &#123; return ($length1 &gt; $length2) ? self::isOneCharacterDifferent($string1, $string2) : self::isOneCharacterDifferent($string2, $string1); &#125; return false;&#125;public static function isReplaceCharacter(string $string1, string $string2): bool&#123; $result = true; $isReplaceOneTime = false; for ($i = 0; $i &lt; strlen($string1); $i++) &#123; if ($string1[$i] == $string2[$i]) &#123; continue; &#125; if ($isReplaceOneTime) &#123; $result = false; break; &#125; $isReplaceOneTime = true; &#125; return $result;&#125;/** * Think of * (i) bed &amp; ed * (ii) bed &amp; bd * (iii) bed &amp; be * * @param string $longString * @param string $shortString * @return bool */public static function isOneCharacterDifferent(string $longString, string $shortString): bool&#123; $result = true; $isOneCharacterDifferent = false; for ($i = 0; $i &lt; strlen($longString) - 1; $i++) &#123; if ($isOneCharacterDifferent &amp;&amp; ($longString[$i] != $shortString[$i - 1])) &#123; $result = false; break; &#125; if ($longString[$i] == $shortString[$i]) &#123; continue; &#125; $isOneCharacterDifferent = true; &#125; return $result;&#125; 1.9 String RotationAssume you have a method isSubstring which checks if oneword is a substring of another. Given two strings, sl and s2, write code to check if s2 is a rotation of sl using only one call to isSubstring.(e.g. “waterbottle” is a rotation of”erbottlewat”) First Answer: 123456789101112131415161718public static function isRotation($string1, $string2): bool&#123; $length1 = strlen($string1); $length2 = strlen($string2); if ($length1 != $length2) &#123; return false; &#125; $stringRotations = []; for ($offset = 1; $offset &lt; $length1; $offset++) &#123; $partA = substr($string1, $offset); $partB = substr($string1, 0, $offset); $stringRotations[] = $partA . $partB; &#125; return in_array($string2, $stringRotations);&#125; Best Answer: 12345678910public static function isRotation($string1, $string2): bool&#123; $length1 = strlen($string1); $length2 = strlen($string2); if ($length1 != $length2) &#123; return false; &#125; return strpos($string1 . $string1, $string2);&#125; ʕ •ᴥ•ʔ：程式碼可參考：CtCI-6th-php。","categories":[{"name":"Programming","slug":"Programming","permalink":"https://yncbearz.github.io/categories/Programming/"}],"tags":[{"name":"Study Group","slug":"Study-Group","permalink":"https://yncbearz.github.io/tags/Study-Group/"}]},{"title":"Big O","slug":"Big-O","date":"2022-01-23T07:43:53.000Z","updated":"2025-05-30T08:15:23.215Z","comments":true,"path":"2022/01/23/Big-O/","permalink":"https://yncbearz.github.io/2022/01/23/Big-O/","excerpt":"Big-O","text":"Big O是用來評估演算法效能的一種方式。 時間複雜性Big O、Big Theta、與Big Omega O (Big O):描述時間上限。 Ω (Big omega):描述時間下限。 Θ (Big theta):同時表示O與Ω。 通常面試時講的Big O，比較接近學術界的Θ。 最佳情況、最差情況、與預期情況我們將以 快速排序法 (Quick Sort) 為例。 補充:快速排序法的原理是先從原始資料中找一個基準值(Pivot)，接著逐一將資料與基準值比較，小於基準值的資料放在左邊，大於基準值的資料放在右邊，再將兩邊區塊分別再找出基準值，重複前面的步驟，直到排序完為止。 使用分治法(Divide and Conquer)的概念。 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849// 原始資料40 60 50 20 10 30// 選擇最左邊的資料為基準點[40] 60 50 20 10 30// 60 &gt; 40，要移到40的右邊[40] 60 50 20 10 30 ^// 50 &gt; 40，要移到40的右邊[40] 60 50 20 10 30 ^// 20 &lt; 40，要移到40的左邊[40] 60 50 20 10 30 ^20 [40] 60 50 10 30// 10 &lt; 40，要移到40的左邊20 [40] 60 50 10 30 ^20 10 [40] 60 50 30// 同理30 &lt; 40，要移到40的左邊20 10 [40] 60 50 30 ^20 10 30 [40] 60 50// 第一次排序完成20 10 30 40 60 50// 接著排序40左右兩側的資料// 先排左側資料，同樣選擇最左邊的資料為基準點// 左側基準點為20[20] 10 30 40 60 50// 左側資料排序完成10 [20] 30 40 60 50// 接著排序右側資料，一樣選擇最左邊的資料為基準點// 右側基準點為6010 20 30 40 [60] 50//右側排序完成10 20 30 40 50 [60]//排序結果10 20 30 40 50 60 最佳情況: 若所有元素相等，則快速排序法平均只會遍歷一次，執行時間為$O(N)$。 最差情況: 若很不幸地，每次基準點都選到最大元素，則執行時間為$O(N^2)$。 預期情況: 通常不會是最佳情況或最差情況，所以執行時間為$O(nlog{n})$。 空間複雜度空間複雜性與時間複雜性是平行的概念。若建構大小為n的陣列，它需要$O(n)$空間。若需要nxn的二維陣列，則需要$O(n^2)$空間。 遞迴呼叫所需的堆疊(stack)空間也是。 123456int sum(int n) &#123; if (n &lt;= 0) &#123; return 0; &#125; return n + sum(n - 1);&#125; 每個呼叫增加了堆疊層級。 12345sum(4) -&gt; sum(3) -&gt;sum(2) -&gt;sum(1) -&gt;sum(0) 但有n個呼叫，不表示佔用$O(n)$空間。 1234567891011int pairSumSequence(int n) &#123; int sum = 0; for (int i = 0; i &lt; n; i++) &#123; sum += pairSum(i, i+1); &#125; return sum;&#125;int pairSum(int a, int b) &#123; return a + b;&#125; 有$O(n)$個對pairSum的呼叫，但這些呼叫不同時存在堆疊，因此只需要$O(1)$的空間。 降低常數123456int min = Integer.MAX_VALUE;int max = Integer.MIN_VALUE;for (int x : array) &#123; if (x &lt; min) min = x; if (x &gt; max) max = x;&#125; 12345678int min = Integer.MAX_VALUE;int max = Integer.MIN_VALUE;for (int x : array) &#123; if (x &lt; min) min = x;&#125;for (int x : array) &#123; if (x &gt; max) max = x;&#125; 許多人會視第二個for迴圈為$O(2N)$，認為這樣比較“精確”。並不是。 在Big O判斷執行時間如何放大時，我們只需接受$O(N)$一定比$O(N^2)$好。 降低非優勢條件 $O(N^2 + N)$變成$O(N^2)$ $O(N + log{N})$變成$O(N)$ $O(5*2^N + 1000N^{100} )$變成$O(2^N)$ 然而執行時間還是可能有加總。例如$O(B^2 + A)$。 多部份演算法：加與乘 執行時間相加: $O(A + B)$ 123456for (int a : arrA) &#123; print(a);&#125;for (int b : arrB) &#123; print(b);&#125; 執行時間相加: $O(A * B)$ 12345for (int a : arrA) &#123; for (int b : arrB) &#123; print(a + &quot;,&quot; + b); &#125;&#125; 若演算法形式為“做這個，完成後，做那個”，則執行時間相加。若演算法形式為“每次做這個時要做那個”，則執行時間相乘。 平攤時間ArrayList或動態調整大小的陣列兼具陣列功能與彈性大小。遇到上限時，會建構兩倍大小的新陣列並複製所有元素到新陣列中。 那麼你要如何描述插入的執行時間？ 陣列滿的情況(假設有N個元素)，則插入新元素要$O(N)$時間。你必須先建構大小2N的新陣列，然後複製N個元素。 但我們知道它不常發生。大部分的插入時間為$O(1)$時間。 我們將考慮平攤(amortized)時間。 插入元素將加倍容量，因此在X個元素的情況。我們將經歷 $1 + 2 + 4 + … + X$ 個複製。 反過來看，就是 $X + X&#x2F;2 + X&#x2F;4 + … + 1$。約為2X。(無限等比級數) 因此X個插入，需要$O(2X)$時間。每個插入的平攤時間為$O(1)$。 log N 執行時間當你看到題目中元素的數量每次折半，它很可能就是$O(log{n})$執行時間。 遞迴執行時間下列這段程式碼的執行時間是？ 123456int f(int n) &#123; if (n &lt;= 1) &#123; return 1; &#125; return f(n-1) + f(n-1);&#125; 假設呼叫f(4) 1234567 f(4) f(3) f(3) f(2) f(2) f(2) f(2)f(1) f(1) f(1) f(1) f(1) f(1) f(1) f(1) 這個樹有幾個呼叫？ (不要一個一個數！) 這個樹的深度為N。每個節點 (也就是函式呼叫)有兩個子節點。因此每一層比前一層多一倍呼叫。 層 # 節點數量 也表示為… 或… 0 1 $2^0$ 1 2 2 * 前一層 &#x3D; 2 $2^1$ 2 4 2 * 前一層 &#x3D; 2 * $2^1$ &#x3D; $2^2$ $2^2$ 共有 $2^0 + 2^1 + … + 2^N $ 也就是 $2^{N+1}-1$ 個節點。 嘗試記住這個表。遇到多次呼叫的遞迴函式時，執行時間通常 (但不一定) 會是 $O(分支^{深度})$，分支為每個遞迴呼叫再呼叫的數量。 此演算法空間複雜度為$O(N)$。雖然樹節點總數為$O(2^N)$，任一時間只有出現$O(N)$個。 f(n), f(n-1), …, f(1) 因此只需要$O(N)$記憶體空間。 範例與練習範例12此程式計算字串的排列。請問它的時間複雜度是？ 1234567891011121314void permutation(String str) &#123; permutation(str, &quot;&quot;);&#125;void permutation(String str, String prefix) &#123; if (str.length() == 0) &#123; System.out.println(prefix); &#125; else &#123; for (int i = 0; i &lt; str.length(); i++) &#123; String rem = str.substring(0, i) + str.substring(i + 1); permutation(rem, prefix + str.charAt(i)); &#125; &#125;&#125; Q1. permutation有多少次終止條件呼叫？ $n*(n-1)*…*1 &#x3D; n!$ 次的呼叫。 Q2. permutation有多少次終止條件前呼叫？考慮程式碼第9~12行跑幾次。 1234 abc a b cb c a c a bc b c a b a 想像有$n!$個葉，每個葉連結長$n$的路徑。所以不會有超過$n*(n-1)!$個節點。 因此Q1 + Q2共有 $n*n!$ 個節點。 Q3. 每個呼叫要花多久？ 第7行輸出$n$個字元，需要$O(n)$時間。第10,11行，因為字串連接 (rem, prefix與str.charAt(i)加總長度為n)故為$O(n)$時間。 Q4. 總執行時間？$$ n * n! * n &#x3D; O(n^2*n!) $$ ʕ •ᴥ•ʔ：這題感覺只能求最接近解。 範例16下列函式輸出從1到n(含)的2冪。舉例來說，若n為4，它會輸出1、2與4。其執行時間是？ 12345678910111213int powersOf2(int n) &#123; if (n &lt; 1) &#123; return 0; &#125; else if (n == 1) &#123; System.out.println(1); return 1; &#125; else &#123; int prev = powersOf2(n/2); int curr = prev * 2; System.out.println(curr); return curr; &#125;&#125; 可以看出執行時間是$O(log_n)$。 這邊有另一種思考方式是思考隨著$n$增加時執行時間如何變化。 何時 powersOf2 的呼叫次數會增加？ 每次 $n$ 加倍大小時會加1。 VI.2下列程式計算$a^b$。執行時間是？ 123456789int power(int a, int b) &#123; if (b &lt; 0) &#123; return 0; //錯誤 &#125; else if (b == 0) &#123; return 1; &#125; else &#123; return a * power(a, b - 1); &#125;&#125; 會由b依序減1呼叫到0，故$O(b)$。 VI.5下列程式計算整數平方根。若數字非完美平方 (沒有整數平方根)則回傳 -1。 執行時間是？ 123456789101112131415161718int sqrt(int n) &#123; return sqrt_helper(n, 1, n);&#125;int sqrt_helper(int n, int min, int max) &#123; if (max &lt; min) return -1; int guess = (min + max) / 2; if (guess *guess == n) &#123; return guess; &#125; else if (guess * guess &lt; n) &#123; return sqrt_helper(n, guess + 1, max); &#125; else &#123; return sqrt_helper(n, min, guess - l); &#125;&#125; ʕ •ᴥ•ʔ：原本以為會是 $O(\\sqrt{n})$。但觀察上面第八行，會知道每次減半，故為 $O(log(n))$。 VI.6同上題，求程式計算整數平方根。 執行時間是？ 123456789int sqrt(int n) &#123; for (int guess = 1; guess * guess &lt;= n; guess++) &#123; if (guess * guess == n) &#123; return guess; &#125; &#125; return -1;&#125; 這題就是$O(\\sqrt{n})$了。 VI.8從二元樹查詢特地資料，但其非二元搜尋樹。 執行時間是？ Note. 二元樹(Binary tree)是每個節點最多只有兩個分支的樹結構。 二元搜尋樹(Binary Search Tree)，又稱有序二元樹(ordered binary tree)或排序二元樹(sorted binary tree)。 是空樹或有以下幾個特點的二元樹: 若任意節點的左子樹不空，則左子樹上所有節點的值均小於它的根節點的值 若任意節點的右子樹不空，則右子樹上所有節點的值均大於它的根節點的值 任意節點的左、右子樹也分別為二元搜尋樹 由定義，節點可能沒有排序，故為 $O(n)$。 VI.11下列程式輸出字元排序過長度為k的所有字串。它產生所有k長度字串，然後檢查是否有排序。 執行時間是？ 123456789101112131415161718192021222324252627282930313233int numChars = 26;void printSortedStrings(int remaining) &#123; printSortedStrings(remaining, &quot;&quot;);&#125;void printSortedStrings(int remaining, String prefix) &#123; if (remaining== 0) &#123; if (isinOrder(prefix)) &#123; System.out.println(prefix); &#125; &#125; else &#123; for (int i= 0; i &lt; numchars; i++) &#123; char c = ithletter(i); printSortedStrings(remaining - 1, prefix + c); &#125;&#125;boolean isinOrder(String s) &#123; for (int i= 1; i &lt; s.length(); i++) &#123; int prev ithLetter(s.charAt(i - 1)); int curr = ithLetter(s.charAt(i)); if (prev &gt; curr) &#123; return false; &#125; &#125; return true;&#125;char ithLetter(int i) &#123; return (char) (((int) &#x27;a&#x27;) + i);&#125; (參考stackoverflow) The above algorithm works by recursively generating all possible strings of length k using a set of c choices of characters. The number of possible strings of length k you can make from c choices of letters is equal to $c^k$. ithLetter 執行時間為$O(1)$。 isinOrder 執行時間為$O(k)$。 printSortedStrings 這邊則是選擇長度k，再從字母字元數量c中，依次挑選字母。單看挑選字母的執行時間為$O(c^k)$。而我們會根據長度k，遞迴地呼叫。因此執行時間為$O(k\\times{c^k})$。 References: 常見Big O時間的增加速率 VI.11 - stackoverflow ʕ •ᴥ•ʔ：在讀重構extract method，將一個迴圈的多種職責，分開到多個迴圈時，Kyo曾提出很好的比喻：abab跟aabb的效率是相同的。即是降低常數的概念。","categories":[{"name":"Programming","slug":"Programming","permalink":"https://yncbearz.github.io/categories/Programming/"}],"tags":[{"name":"Study Group","slug":"Study-Group","permalink":"https://yncbearz.github.io/tags/Study-Group/"}]},{"title":"常見MySQL語法","slug":"Common-MySQL-Syntax","date":"2022-01-01T08:49:03.000Z","updated":"2025-05-30T08:15:23.228Z","comments":true,"path":"2022/01/01/Common-MySQL-Syntax/","permalink":"https://yncbearz.github.io/2022/01/01/Common-MySQL-Syntax/","excerpt":"Common-MySQL-Syntax","text":"(參考Mysql) Menu Type CRUD Table Create Read Update Delete — — Data Create Read Update Delete — — Index Create Delete — — Column Create Read Update Delete — — Trigger Create Read Delete — — Procedure Create Read Delete — — Variable Create Read Delete — — Create Table12345678CREATE TABLE `users` ( `id` int(11) NOT NULL AUTO_INCREMENT, `name` varchar(255) NOT NULL COMMENT &#x27;user name&#x27;, `created_at` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP, `updated_at` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, PRIMARY KEY (`id`), KEY `index_created_at` (`created_at`)) ENGINE=InnoDB DEFAULT CHARSET=utf8; Read Table1SHOW CREATE TABLE `users`; Update Table12ALTER TABLE `old_table_name`RENAME TO `new_table_name`; Delete Table1DROP TABLE IF EXISTS `users`; (Back to Menu) Create Data123INSERT INTO `users` (`id`, `name`, `created_at`, `updated_at`)VALUES (1, &#x27;Bear&#x27;, NOW(), NOW()),(2, &#x27;Aries&#x27;, NOW(), NOW()); 1234INSERT INTO `foods` (`name`, `country`)SELECT &#x27;sushi&#x27;, `name`FROM `countries`WHERE `id` = 2; Read Data1SELECT * FROM `users`; Update Data12UPDATE `users` SET `name`=&#x27;Lin&#x27;WHERE `id` = 1; JSON 欄位 (extension_item 不能為 null) 只更新 json 中的特定 key 12UPDATE `foods` SET `extension_item` = json_set(`extension_item`, &quot;$.created_at&quot;, &#x27;2022-09-27&#x27;)WHERE `id` = 1; 取代整個 json 欄位的資料 12UPDATE `foods` SET `extension_item` = json_object(&quot;created_at&quot;, &#x27;2022-09-28&#x27;, &quot;updated_at&quot;, &#x27;2022-09-29&#x27;)WHERE `id` = 2; Delete Data123456SET SQL_SAFE_UPDATES = 0;DELETE FROM `users`WHERE `name` = &#x27;Lin&#x27;;SET SQL_SAFE_UPDATES = 1; (Back to Menu) Create Index1234ALTER TABLE `users`ADD INDEX `index_name` (`name`),ALGORITHM = INPLACE,LOCK = NONE; Delete Index1234ALTER TABLE `users`DROP INDEX `index_name`,ALGORITHM = INPLACE,LOCK = NONE; (Back to Menu) Create Column1ALTER TABLE `users` ADD COLUMN `email` varchar(255); Read Column12DESC `users`;SHOW COLUMNS FROM `users`; Update Column1ALTER TABLE `users` MODIFY COLUMN `email` varchar(63); Delete Column1ALTER TABLE `users` DROP COLUMN `email`; (Back to Menu) Create Trigger12345678CREATE TRIGGER `trigger_insert_posts`AFTER INSERT ON `posts`FOR EACH ROWBEGIN UPDATE `stats` SET `post_count` = &#x27;post_count&#x27; + 1 WHERE user_id = new.user_id;END; Read Trigger123SHOW TRIGGERS;SHOW CREATE TRIGGER `trigger_name`; Delete Trigger1DROP TRIGGER IF EXISTS `trigger_name`; (Back to Menu) Create Procedure12345CREATE PROCEDURE `procedure_users_name` (IN input_name varchar(255), OUT count INT)BEGIN SELECT count(*) INTO count FROM `users` WHERE `name` = input_name;END; Read Procedure123SHOW PROCEDURE STATUS;SHOW CREATE PROCEDURE `procedure_name`; Delete Procedure1DROP PROCEDURE IF EXISTS `procedure_name`; (Back to Menu) Create Variable123SET @name = &#x27;bear&#x27;;SET @id = LAST_INSERT_ID(); Read Variable1select @id; Delete Variable1SET @id = NULL; (Back to Menu) ʕ •ᴥ•ʔ：記錄一些常見語法，需要時方便查詢。大寫及&#96;&#96;為非必要，僅用來區分語法及關鍵字。","categories":[{"name":"Programming","slug":"Programming","permalink":"https://yncbearz.github.io/categories/Programming/"}],"tags":[{"name":"SQL","slug":"SQL","permalink":"https://yncbearz.github.io/tags/SQL/"}]},{"title":"107.binary-tree-level-order-traversal-ii","slug":"107-binary-tree-level-order-traversal-ii","date":"2021-04-22T15:55:42.000Z","updated":"2025-05-30T08:15:23.212Z","comments":true,"path":"2021/04/22/107-binary-tree-level-order-traversal-ii/","permalink":"https://yncbearz.github.io/2021/04/22/107-binary-tree-level-order-traversal-ii/","excerpt":"107.binary-tree-level-order-traversal-ii","text":"Description:Given the root of a binary tree, return the bottom-up level order traversal of its nodes’ values. (i.e., from left to right, level by level from leaf to root).Example: 12345678Input: root = [3,9,20,null,null,15,7] 3 / \\ 9 20 / \\ 15 7Output: [[15,7],[9,20],[3]] 12Input: root = [1]Output: [[1]] 12Input: root = []Output: [] 深度優先搜尋 (Depth-First Search, DFS)搜尋頂點時，先探查單一路線，直到無法繼續前進，再折返探查下一個選項路徑。過程中，因展開而得到的頂點選項，可利用堆疊 (Stack) 的資料結構。 廣度優先搜尋 (Breadth-First Search, BFS)搜尋頂點時，從起點經由邊搜尋頂點，直到找到指定的頂點。過程中，因展開而得到的頂點選項，可利用佇列 (Queue) 的資料結構。 First Answer (DFS): 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960&lt;?phpnamespace LeetCode\\BinaryTreeLevelOrderTraversalII;/** * Definition for a binary tree node. * class TreeNode &#123; * public $val = null; * public $left = null; * public $right = null; * function __construct($val = 0, $left = null, $right = null) &#123; * $this-&gt;val = $val; * $this-&gt;left = $left; * $this-&gt;right = $right; * &#125; * &#125; */class Solution&#123; /** * @var array */ protected $answer = []; /** * @param TreeNode $root * @return Integer[][] */ public function levelOrderBottom($root) &#123; if (is_null($root-&gt;val)) &#123; return []; &#125; $this-&gt;findAnswer($root); $this-&gt;reverse(); return $this-&gt;answer; &#125; /** * @param TreeNode $root * @param int $level */ private function findAnswer($root, $level = 0) &#123; if (is_null($root-&gt;val)) &#123; return; &#125; $this-&gt;answer[$level] = array_merge($this-&gt;answer[$level] ?? [], [$root-&gt;val]); $this-&gt;findAnswer($root-&gt;left, $level + 1); $this-&gt;findAnswer($root-&gt;right, $level + 1); &#125; private function reverse() &#123; $this-&gt;answer = array_reverse($this-&gt;answer); &#125;&#125; Other Answer (BFS): 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758596061626364656667&lt;?phpnamespace LeetCode\\BinaryTreeLevelOrderTraversalII;/** * Definition for a binary tree node. * class TreeNode &#123; * public $val = null; * public $left = null; * public $right = null; * function __construct($val = 0, $left = null, $right = null) &#123; * $this-&gt;val = $val; * $this-&gt;left = $left; * $this-&gt;right = $right; * &#125; * &#125; */class Solution&#123; /** * @var array */ protected $answer = []; /** * @param TreeNode $root * @return Integer[][] */ public function levelOrderBottom($root) &#123; if (is_null($root-&gt;val)) &#123; return []; &#125; $this-&gt;answer[0] = [$root-&gt;val]; $this-&gt;findAnswer($root); $this-&gt;reverse(); return $this-&gt;answer; &#125; /** * @param TreeNode $root */ private function findAnswer($root, $level = 1) &#123; if (is_null($root-&gt;val)) &#123; return; &#125; if (!is_null($root-&gt;left)) &#123; $this-&gt;answer[$level] = array_merge($this-&gt;answer[$level] ?? [], [$root-&gt;left-&gt;val]); &#125; if (!is_null($root-&gt;right)) &#123; $this-&gt;answer[$level] = array_merge($this-&gt;answer[$level] ?? [], [$root-&gt;right-&gt;val]); &#125; $this-&gt;findAnswer($root-&gt;left, $level + 1); $this-&gt;findAnswer($root-&gt;right, $level + 1); &#125; private function reverse() &#123; $this-&gt;answer = array_reverse($this-&gt;answer); &#125;&#125; ʕ •ᴥ•ʔ：欣賞一下 DFS 和 BFS 思考上的不同。","categories":[{"name":"Programming","slug":"Programming","permalink":"https://yncbearz.github.io/categories/Programming/"}],"tags":[{"name":"LeetCode","slug":"LeetCode","permalink":"https://yncbearz.github.io/tags/LeetCode/"}]},{"title":"101.symmetric-tree","slug":"101-symmetric-tree","date":"2021-04-11T15:31:42.000Z","updated":"2025-05-30T08:15:23.212Z","comments":true,"path":"2021/04/11/101-symmetric-tree/","permalink":"https://yncbearz.github.io/2021/04/11/101-symmetric-tree/","excerpt":"101.symmetric-tree","text":"Description:Given the root of a binary tree, check whether it is a mirror of itself (i.e., symmetric around its center).Example: 12345678Input: root = [1,2,2,3,4,4,3] 1 / \\ 2 2 / \\ / \\ 3 4 4 3Output: true 12345678Input: root = [1,2,2,null,3,null,3] 1 / \\ 2 2 \\ \\ 3 3Output: false Follow up: Could you solve it both recursively and iteratively? Similar Question: 94.binary-tree-inorder-traversal First Answer (Recursive): 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859606162636465666768697071727374757677787980818283848586878889909192939495&lt;?phpnamespace LeetCode\\SymmetricTree;/** * Definition for a binary tree node. * class TreeNode &#123; * public $val = null; * public $left = null; * public $right = null; * function __construct($val = 0, $left = null, $right = null) &#123; * $this-&gt;val = $val; * $this-&gt;left = $left; * $this-&gt;right = $right; * &#125; * &#125; */class Solution&#123; /** * @var bool */ protected $answer = true; /** * @param TreeNode $root * @return bool */ public function isSymmetric($root) &#123; if (is_null($root-&gt;val)) &#123; return true; &#125; if (is_null($root-&gt;left) &amp;&amp; is_null($root-&gt;right)) &#123; return true; &#125; $this-&gt;checkSysmmetric($root-&gt;left, $root-&gt;right); return $this-&gt;answer; &#125; /** * @param TreeNode $leftTree * @param TreeNode $rightTree */ private function checkSysmmetric($leftTree, $rightTree) &#123; if ($leftTree-&gt;val !== $rightTree-&gt;val) &#123; return $this-&gt;answer = false; &#125; if ( $leftTree-&gt;left instanceof TreeNode &amp;&amp; $rightTree-&gt;right instanceof TreeNode ) &#123; $this-&gt;checkSysmmetric($leftTree-&gt;left, $rightTree-&gt;right); &#125; if ( $leftTree-&gt;right instanceof TreeNode &amp;&amp; $rightTree-&gt;left instanceof TreeNode ) &#123; $this-&gt;checkSysmmetric($leftTree-&gt;right, $rightTree-&gt;left); &#125; if ($this-&gt;isNullAmountOdd($leftTree-&gt;left, $rightTree-&gt;right)) &#123; return $this-&gt;answer = false; &#125; if ($this-&gt;isNullAmountOdd($leftTree-&gt;right, $rightTree-&gt;left)) &#123; return $this-&gt;answer = false; &#125; &#125; /** * @param TreeNode|null $a * @param TreeNode|null $b * @return bool */ private function isNullAmountOdd($a, $b) &#123; $nullAmount = 0; if (is_null($a)) &#123; $nullAmount++; &#125; if (is_null($b)) &#123; $nullAmount++; &#125; return ($nullAmount % 2 == 1); &#125;&#125; Time Complexity: O(n) Other Answer (Iterating + Stack): 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960&lt;?phpnamespace LeetCode\\SymmetricTree;/** * Definition for a binary tree node. * class TreeNode &#123; * public $val = null; * public $left = null; * public $right = null; * function __construct($val = 0, $left = null, $right = null) &#123; * $this-&gt;val = $val; * $this-&gt;left = $left; * $this-&gt;right = $right; * &#125; * &#125; */class Solution&#123; /** * @var array */ protected $stack = []; /** * @param TreeNode $root * @return bool */ public function isSymmetric($root) &#123; if (is_null($root-&gt;val)) &#123; return true; &#125; $this-&gt;stack[] = [$root-&gt;left, $root-&gt;right]; while (count($this-&gt;stack) &gt; 0) &#123; $pop = array_pop($this-&gt;stack); $left = $pop[0]; $right = $pop[1]; if (is_null($left) &amp;&amp; is_null($right)) &#123; continue; &#125; if (is_null($left) || is_null($right)) &#123; return false; &#125; if ($left-&gt;val == $right-&gt;val) &#123; $this-&gt;stack[] = [$left-&gt;left, $right-&gt;right]; $this-&gt;stack[] = [$left-&gt;right, $right-&gt;left]; &#125; else &#123; return false; &#125; &#125; return true; &#125;&#125; Time Complexity: O(n) ʕ •ᴥ•ʔ：Iterating的作法，有體會到要利用Stack當存檔點，但具體的while條件沒有想出來。","categories":[{"name":"Programming","slug":"Programming","permalink":"https://yncbearz.github.io/categories/Programming/"}],"tags":[{"name":"LeetCode","slug":"LeetCode","permalink":"https://yncbearz.github.io/tags/LeetCode/"}]},{"title":"100.same-tree","slug":"100-same-tree","date":"2021-04-10T09:18:39.000Z","updated":"2025-05-30T08:15:23.211Z","comments":true,"path":"2021/04/10/100-same-tree/","permalink":"https://yncbearz.github.io/2021/04/10/100-same-tree/","excerpt":"100.same-tree","text":"Description:Given the roots of two binary trees p and q, write a function to check if they are the same or not.Two binary trees are considered the same if they are structurally identical, and the nodes have the same value.Example: 123456Input: p = [1,2,3], q = [1,2,3] 1 1 / \\ / \\ 2 3 2 3Output: true 123456Input: p = [1,2], q = [1,null,2] 1 1 / \\ 2 2Output: false 123456Input: p = [1,2,1], q = [1,1,2] 1 1 / \\ / \\ 2 1 1 2Output: false First Answer (Recursive): 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657&lt;?phpnamespace LeetCode\\SameTree;/** * Definition for a binary tree node. * class TreeNode &#123; * public $val = null; * public $left = null; * public $right = null; * function __construct($val = 0, $left = null, $right = null) &#123; * $this-&gt;val = $val; * $this-&gt;left = $left; * $this-&gt;right = $right; * &#125; * &#125; */class Solution&#123; /** * @var bool $answer */ protected $answer = true; /** * @param TreeNode $p * @param TreeNode $q * @return bool */ public function isSameTree($p, $q) &#123; $this-&gt;findAnswer($p, $q); return $this-&gt;answer; &#125; /** * @param TreeNode $p * @param TreeNode $q */ private function findAnswer($p, $q) &#123; if ($p-&gt;val !== $q-&gt;val) &#123; return $this-&gt;answer = false; &#125; if (($p-&gt;left-&gt;val !== $q-&gt;left-&gt;val) || ($p-&gt;right-&gt;val !== $q-&gt;right-&gt;val)) &#123; return $this-&gt;answer = false; &#125; if (!is_null($p-&gt;left) &amp;&amp; !is_null($q-&gt;left)) &#123; $this-&gt;findAnswer($p-&gt;left, $q-&gt;left); &#125; if (!is_null($p-&gt;right) &amp;&amp; !is_null($q-&gt;right)) &#123; $this-&gt;findAnswer($p-&gt;right, $q-&gt;right); &#125; &#125;&#125; Time Complexity: O(n) ʕ •ᴥ•ʔ：很久沒寫文了，最近覺得情況不算太好。重新努力，用寫文把狀態找回來。","categories":[{"name":"Programming","slug":"Programming","permalink":"https://yncbearz.github.io/categories/Programming/"}],"tags":[{"name":"LeetCode","slug":"LeetCode","permalink":"https://yncbearz.github.io/tags/LeetCode/"}]},{"title":"95.unique-binary-search-trees-ii","slug":"95-unique-binary-search-trees-ii","date":"2021-01-22T13:46:43.000Z","updated":"2025-05-30T08:15:23.214Z","comments":true,"path":"2021/01/22/95-unique-binary-search-trees-ii/","permalink":"https://yncbearz.github.io/2021/01/22/95-unique-binary-search-trees-ii/","excerpt":"95.unique-binary-search-trees-ii","text":"Description:Given an integer n, generate all structurally unique BST’s (binary search trees) that store values 1 … n.Example: 1234567891011121314151617Input: 3Output:[ [1,null,3,2], [3,2,null,1], [3,1,null,null,2], [2,1,3], [1,null,2,null,3]]Explanation:The above output corresponds to the 5 unique BST&#x27;s shown below: 1 3 3 2 1 \\ / / / \\ \\ 3 2 1 1 3 2 / / \\ \\ 2 1 2 3 Similar Question: 96.unique-binary-search-trees Binary Search Tree(BST): Key(L)&lt;Key(Current)&lt;Key(R) Both subtrees of each node are also BSTs Appropriate Answer (Divide-and-conquer): 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758596061626364656667686970717273747576777879808182838485868788&lt;?phpnamespace LeetCode\\UniqueBinarySearchTreesII;/** * Definition for a binary tree node. */// class TreeNode// &#123;// public $val = null;// public $left = null;// public $right = null;// function __construct($val = 0, $left = null, $right = null)// &#123;// $this-&gt;val = $val;// $this-&gt;left = $left;// $this-&gt;right = $right;// &#125;// &#125;class Solution&#123; /** * @param int $n * @return TreeNode[] */ public function generateTrees($n) &#123; $numbers = range(1, $n); return $this-&gt;generateTreesByNumbers($numbers); &#125; /** * @param int[] $originalNumbers * @return array */ private function generateTreesByNumbers($originalNumbers) &#123; if (count($originalNumbers) == 0) &#123; return [null]; &#125; if (count($originalNumbers) == 1) &#123; return [new TreeNode(array_pop($originalNumbers))]; &#125; $result = []; //[1,2,3] =&gt; (1, [2,3]) (2, [1,3]) (3, [1,2]) foreach ($originalNumbers as $key =&gt; $val) &#123; $currentNumbers = $originalNumbers; unset($currentNumbers[$key]); $otherNumbers = $currentNumbers; $result = array_merge($result, $this-&gt;binarySearch($val, $otherNumbers)); &#125; return $result; &#125; /** * @param int $val * @param int[] $otherNumbers * @return TreeNode[] */ private function binarySearch($val, $otherNumbers) &#123; $smallerNumbers = array_filter($otherNumbers, function ($otherNumber) use ($val) &#123; return $otherNumber &lt; $val; &#125;); $biggerNumbers = array_filter($otherNumbers, function ($otherNumber) use ($val) &#123; return $otherNumber &gt; $val; &#125;); $smallerTrees = $this-&gt;generateTreesByNumbers($smallerNumbers); $biggerTrees = $this-&gt;generateTreesByNumbers($biggerNumbers); $trees = []; foreach ($smallerTrees as $aSmallerTree) &#123; foreach ($biggerTrees as $aBiggerTree) &#123; $tree = new TreeNode($val, $aSmallerTree, $aBiggerTree); $trees[] = $tree; &#125; &#125; return $trees; &#125;&#125; ʕ •ᴥ•ʔ：由 linsheng 提供的解法。","categories":[{"name":"Programming","slug":"Programming","permalink":"https://yncbearz.github.io/categories/Programming/"}],"tags":[{"name":"LeetCode","slug":"LeetCode","permalink":"https://yncbearz.github.io/tags/LeetCode/"}]},{"title":"96.unique-binary-search-trees","slug":"96-unique-binary-search-trees","date":"2021-01-14T15:23:38.000Z","updated":"2025-05-30T08:15:23.214Z","comments":true,"path":"2021/01/14/96-unique-binary-search-trees/","permalink":"https://yncbearz.github.io/2021/01/14/96-unique-binary-search-trees/","excerpt":"96.unique-binary-search-trees","text":"Description:Given n, how many structurally unique BST’s (binary search trees) that store values 1 … n?Example: 12345678910Input: 3Output: 5Explanation:Given n = 3, there are a total of 5 unique BST&#x27;s: 1 3 3 2 1 \\ / / / \\ \\ 3 2 1 1 3 2 / / \\ \\ 2 1 2 3 Appropriate Answer (Dynamic Programming): 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758&lt;?phpnamespace LeetCode\\UniqueBinarySearchTrees;class Solution&#123; /** * @var array */ private $numOfAnswer = []; /** * @param int $n * @return int */ public function numTrees($n) &#123; /** * 沒有節點的情況有一種可能（空集合） */ $this-&gt;numOfAnswer[0] = 1; /** * 1個節點的情況有一種可能（一個點） */ $this-&gt;numOfAnswer[1] = 1; for ($i = 2; $i &lt;= $n; $i++) &#123; $this-&gt;count($i); &#125; return $this-&gt;numOfAnswer[$n]; &#125; /** * @param int $n * @return void */ private function count($n) &#123; /** * 先取出一個節點當root */ $num = $n - 1; /** * 1. 左節點的數量 + 右節點的數量 = $num * 2. 總和 = 左節點數量的所有可能 * 右節點數量的所有可能 */ $result = 0; for ($i = 0; $i &lt;= $num; $i++) &#123; $result = $result + $this-&gt;numOfAnswer[$i] * $this-&gt;numOfAnswer[$num - $i]; &#125; $this-&gt;numOfAnswer[$n] = $result; &#125;&#125; Time Complexity: O(n) ʕ •ᴥ•ʔ：DP Program的思考方式還須多多練習。","categories":[{"name":"Programming","slug":"Programming","permalink":"https://yncbearz.github.io/categories/Programming/"}],"tags":[{"name":"LeetCode","slug":"LeetCode","permalink":"https://yncbearz.github.io/tags/LeetCode/"}]},{"title":"94.binary-tree-inorder-traversal","slug":"94-binary-tree-inorder-traversal","date":"2021-01-02T15:01:19.000Z","updated":"2025-05-30T08:15:23.213Z","comments":true,"path":"2021/01/02/94-binary-tree-inorder-traversal/","permalink":"https://yncbearz.github.io/2021/01/02/94-binary-tree-inorder-traversal/","excerpt":"94.binary-tree-inorder-traversal","text":"Description:Given a binary tree, return the inorder traversal of its nodes’ values.Example: 12345678Input: [1,null,2,3] 1 \\ 2 / 3Output: [1,3,2] Follow up: Recursive solution is trivial, could you do it iteratively? 說明： 12345 4 / \\ 2 6 / \\ / \\1 3 5 7 遍歷方式 輸出結果 搜尋演算法 Pre-Order Traversal 4213657 Depth-first Search In-Order Traversal 1234567 Depth-first Search Post-Order Traversal 1325764 Depth-first Search Level-Order Traversal 4261357 Breadth-first Search Pre-, In-, Post- 是指parent node相對於child node的順序。而Level-則是依照層級關係。 First Answer (Recursive): 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455&lt;?phpnamespace LeetCode\\BinaryTreeInorderTraversal;/** * Definition for a binary tree node. * class TreeNode &#123; * public $val = null; * public $left = null; * public $right = null; * function __construct($value) &#123; $this-&gt;val = $value; &#125; * &#125; */class Solution&#123; /** * @var Integer[] */ protected $answer = []; /** * @param TreeNode $root * @return Integer[] */ public function inorderTraversal($root) &#123; $this-&gt;findAnswer($root); return $this-&gt;answer; &#125; /** * @param TreeNode $root */ private function findAnswer($root) &#123; /** * 先把左子樹找完 */ if (!is_null($root-&gt;left)) &#123; $this-&gt;findAnswer($root-&gt;left); &#125; /** * 沒有左子樹後，填入根（自己） */ $this-&gt;answer[] = $root-&gt;val; /** * 再找右子樹 */ if (!is_null($root-&gt;right)) &#123; $this-&gt;findAnswer($root-&gt;right); &#125; &#125;&#125; Time Complexity: O(n) Other Answer (Iterating + Stack): 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455&lt;?phpnamespace LeetCode\\BinaryTreeInorderTraversal;/** * Definition for a binary tree node. * class TreeNode &#123; * public $val = null; * public $left = null; * public $right = null; * function __construct($value) &#123; $this-&gt;val = $value; &#125; * &#125; */class Solution&#123; /** * @var Integer[] */ protected $answer = []; /** * @var Integer[] */ protected $stack = []; /** * @param TreeNode $root * @return Integer[] */ public function inorderTraversal($root) &#123; $this-&gt;findAnswer($root); return $this-&gt;answer; &#125; /** * @param TreeNode $root */ private function findAnswer($root) &#123; while (count($this-&gt;stack) &gt; 0 || !is_null($root)) &#123; if (!is_null($root)) &#123; $this-&gt;stack[] = $root; $root = $root-&gt;left; &#125; else &#123; $pop = array_pop($this-&gt;stack); $this-&gt;answer[] = $pop-&gt;val; if (!is_null($pop-&gt;right)) &#123; $root = $pop-&gt;right; &#125; &#125; &#125; &#125;&#125; Time Complexity: O(n) ʕ •ᴥ•ʔ：還有看到一種Morris Traversal的方法，之後遇到再補充。","categories":[{"name":"Programming","slug":"Programming","permalink":"https://yncbearz.github.io/categories/Programming/"}],"tags":[{"name":"LeetCode","slug":"LeetCode","permalink":"https://yncbearz.github.io/tags/LeetCode/"}]},{"title":"小筆記：Exists 與 Not Exists","slug":"Note-Exists-And-Not-Exists","date":"2021-01-01T08:01:54.000Z","updated":"2025-05-30T08:15:23.251Z","comments":true,"path":"2021/01/01/Note-Exists-And-Not-Exists/","permalink":"https://yncbearz.github.io/2021/01/01/Note-Exists-And-Not-Exists/","excerpt":"Note-Exists-And-Not-Exists","text":"本篇靈感來源：SQL 達人的工作現場攻略筆記 本書提到的兩張資料表： 原題目如下：今日欲從 emp_skills 表中，挑出會所有skills 表上技能的員工。 這邊想記錄幾個 exists 跟 not exists 語法的效果。 情況一 12345678910111213141516171819SELECT *FROM emp_skills AS AWHERE EXISTS ( SELECT * FROM skills C WHERE EXISTS ( SELECT * FROM emp_skills AS B WHERE (A.emp = B.emp) AND (B.skill = C.skill) )); 效果是，找出至少會一個skills 表上技能的員工。因此靚儀會被去除。 Hint: 把每個人會的技能組當成一個集合。 情況二 12345678910111213141516171819SELECT *FROM emp_skills AS AWHERE NOT EXISTS ( SELECT * FROM skills C WHERE EXISTS ( SELECT * FROM emp_skills AS B WHERE (A.emp = B.emp) AND (B.skill = C.skill) )); 效果是，找出 skills 表上技能一個都不會的員工。因此只有靚儀會被選出。 情況三 12345678910111213141516171819SELECT *FROM emp_skills AS AWHERE EXISTS ( SELECT * FROM skills C WHERE NOT EXISTS ( SELECT * FROM emp_skills AS B WHERE (A.emp = B.emp) AND (B.skill = C.skill) )); 效果是，找出沒有全會skills 表上技能的員工。因此銘仁、靜儀、勝朋皆會被選出。 情況四 12345678910111213141516171819SELECT *FROM emp_skills AS AWHERE NOT EXISTS ( SELECT * FROM skills C WHERE NOT EXISTS ( SELECT * FROM emp_skills AS B WHERE (A.emp = B.emp) AND (B.skill = C.skill) )); 在理解情況三後，這邊的效果就很明顯了。找出會所有skills 表上技能的員工。 最後附上原題目的 NOT EXISTS 解法。 由 Zero 提供 12345678910111213141516171819SELECT DISTINCT empFROM emp_skills AS AWHERE NOT EXISTS ( SELECT * FROM skills C WHERE NOT EXISTS ( SELECT * FROM emp_skills AS B WHERE (A.emp = B.emp) AND (B.skill = C.skill) )); 即修改 SELECT 中欄位值的情況四。 ʕ •ᴥ•ʔ：Zero真是 SQL 大神～","categories":[{"name":"Programming","slug":"Programming","permalink":"https://yncbearz.github.io/categories/Programming/"}],"tags":[{"name":"SQL","slug":"SQL","permalink":"https://yncbearz.github.io/tags/SQL/"}]},{"title":"類別圖：各國婚禮（訪問者模式）","slug":"Class-Diagram-Wedding-Visitor-Pattern","date":"2020-12-27T08:37:14.000Z","updated":"2025-07-30T11:30:13.343Z","comments":true,"path":"2020/12/27/Class-Diagram-Wedding-Visitor-Pattern/","permalink":"https://yncbearz.github.io/2020/12/27/Class-Diagram-Wedding-Visitor-Pattern/","excerpt":"Class-Diagram-Wedding-Visitor-Pattern","text":"Example: 各國婚禮 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859606162636465@startumlinterface WeddingRole&#123; + getClothes(WeddingType WeddingType) + getShoes(WeddingType WeddingType)&#125;interface WeddingType&#123; + getClothes(WeddingRole role) + getShoes(WeddingRole role)&#125;WeddingRole &lt;-&gt; WeddingTypeclass BrideGroom&#123; + name: string;&#125;class Bride&#123; + name: string;&#125;WeddingRole &lt;|.. BrideGroomWeddingRole &lt;|.. BrideWeddingType &lt;|.. ChineseWeddingWeddingType &lt;|.. JapaneseWeddingclass Composite&#123; # children: WeddingRole[] + add(WeddingRole role) + remove(WeddingRole role) + display(WeddingType weddingType)&#125;WeddingRole o--- Compositeclass WeddingTypeFactory&#123; + create(string weddingType): WeddingType&#125;WeddingType &lt;--- WeddingTypeFactoryclass Program&#123; # weddingTypeFactory: WeddingTypeFactory + __construct() + getWedding(string weddingType) + createWeddingType(string weddingType): WeddingType&#125;WeddingTypeFactory &lt;-- ProgramBrideGroom &lt;-- ProgramBride &lt;-- ProgramComposite &lt;-- Program@enduml ʕ •ᴥ•ʔ：若不熟悉 UML 類別圖，可參考UML類別圖說明。","categories":[{"name":"Clean Code","slug":"Clean-Code","permalink":"https://yncbearz.github.io/categories/Clean-Code/"}],"tags":[{"name":"Design Pattern","slug":"Design-Pattern","permalink":"https://yncbearz.github.io/tags/Design-Pattern/"}]},{"title":"範例：各國婚禮（訪問者模式）","slug":"Example-Wedding-Visitor-Pattern","date":"2020-12-27T08:36:50.000Z","updated":"2025-05-30T08:15:23.241Z","comments":true,"path":"2020/12/27/Example-Wedding-Visitor-Pattern/","permalink":"https://yncbearz.github.io/2020/12/27/Example-Wedding-Visitor-Pattern/","excerpt":"Example-Wedding-Visitor-Pattern","text":"Pattern: 訪問者模式 Class Diagram: 各國婚禮 情境：這是一間國際婚禮公司 12345678910111213141516171819202122232425262728293031323334&lt;?phpnamespace App\\VisitorPattern\\Wedding;class Program&#123; /** * @param string $weddingType * @return string */ public function getWedding($weddingType) &#123; switch ($weddingType) &#123; case &#x27;Chinese&#x27;: echo &#x27;新郎：中式囍袍新郎：黑色秀禾鞋新娘：龍鳳褂新娘：紅色秀禾鞋&#x27;; break; case &#x27;Japanese&#x27;: echo &#x27;新郎：繡有家紋的和服新郎：雪駄新娘：純潔的白無垢新娘：草履&#x27;; break; &#125; &#125;&#125; 熟稔設計模式的我們，一眼就看出來改寫的方向。 讓我們抽出新郎與新娘！ 需求一：抽出新郎 (BrideGroom) 與新娘 (Bride) 類別 新郎類別 123456789101112131415161718192021222324252627282930313233343536373839404142&lt;?phpnamespace App\\VisitorPattern\\Wedding;class BrideGroom&#123; /** * @param string $weddingType */ public function getClothes($weddingType) &#123; switch ($weddingType) &#123; case &#x27;Chinese&#x27;: echo &quot;新郎：中式囍袍\\n&quot;; break; case &#x27;Japanese&#x27;: echo &quot;新郎：繡有家紋的和服\\n&quot;; break; &#125; &#125; /** * @param string $weddingType */ public function getShoes($weddingType) &#123; switch ($weddingType) &#123; case &#x27;Chinese&#x27;: echo &quot;新郎：黑色秀禾鞋\\n&quot;; break; case &#x27;Japanese&#x27;: echo &quot;新郎：雪駄\\n&quot;; break; &#125; &#125;&#125; 新娘類別 123456789101112131415161718192021222324252627282930313233343536373839404142&lt;?phpnamespace App\\VisitorPattern\\Wedding;class Bride&#123; /** * @param string $weddingType */ public function getClothes($weddingType) &#123; switch ($weddingType) &#123; case &#x27;Chinese&#x27;: echo &quot;新娘：龍鳳褂\\n&quot;; break; case &#x27;Japanese&#x27;: echo &quot;新娘：純潔的白無垢\\n&quot;; break; &#125; &#125; /** * @param string $weddingType */ public function getShoes($weddingType) &#123; switch ($weddingType) &#123; case &#x27;Chinese&#x27;: echo &quot;新娘：紅色秀禾鞋\\n&quot;; break; case &#x27;Japanese&#x27;: echo &quot;新娘：草履\\n&quot;; break; &#125; &#125;&#125; 最後改寫既有程式碼 12345678910111213141516171819202122&lt;?phpnamespace App\\VisitorPattern\\Wedding;class Program&#123; /** * @param string $weddingType */ public function getWedding($weddingType) &#123; $brideGroom = new BrideGroom(); $bride = new Bride(); $brideGroom-&gt;getClothes($weddingType); $brideGroom-&gt;getShoes($weddingType); $bride-&gt;getClothes($weddingType); $bride-&gt;getShoes($weddingType); &#125;&#125; 正當我們得意洋洋之時，老闆說了一個令人震驚的需求。 Boss：「隨著版圖擴張，我們之後要支援印度、烏克蘭等各國的婚禮服裝。」 經過觀察我們可以發現，不過是哪一國的婚禮，主角皆是新郎與新娘，且都需要取得服裝與鞋子。 其資料結構是穩定的。變動的是服裝與鞋子的操作。 讓我們用訪問者模式改寫它！ 需求二：配合版圖的擴張，實作訪問者模式 定義婚禮角色介面 12345678910111213141516171819&lt;?phpnamespace App\\VisitorPattern\\Wedding\\Contracts;use App\\VisitorPattern\\Wedding\\Contracts\\WeddingType;interface WeddingRole&#123; /** * @param WeddingType $weddingType */ public function getClothes($weddingType); /** * @param WeddingType $weddingType */ public function getShoes($weddingType);&#125; 定義婚禮類型介面 12345678910111213141516&lt;?phpnamespace App\\VisitorPattern\\Wedding\\Contracts;interface WeddingType&#123; /** * @param WeddingRole $role */ public function getClothes($role); /** * @param WeddingRole $role */ public function getShoes($role);&#125; WeddingRole 是原本的 元素類別 (Element) 。 WeddingType 則是原本元素類別中的操作，會成為我們的 訪問者類別 (Visitor) 。根據傳入的 元素類別 (Element) ，而有對應的行為。 修改原本的新郎類別 123456789101112131415161718192021222324252627282930&lt;?phpnamespace App\\VisitorPattern\\Wedding;use App\\VisitorPattern\\Wedding\\Contracts\\WeddingRole;use App\\VisitorPattern\\Wedding\\Contracts\\WeddingType;class BrideGroom implements WeddingRole&#123; /** * @var string */ public $name = &#x27;BrideGroom&#x27;; /** * @param WeddingType $weddingType */ public function getClothes($weddingType) &#123; $weddingType-&gt;getClothes($this); &#125; /** * @param WeddingType $weddingType */ public function getShoes($weddingType) &#123; $weddingType-&gt;getShoes($this); &#125;&#125; 修改原本的新娘類別 12345678910111213141516171819202122232425262728293031&lt;?phpnamespace App\\VisitorPattern\\Wedding;use App\\VisitorPattern\\Wedding\\Contracts\\WeddingRole;use App\\VisitorPattern\\Wedding\\Contracts\\WeddingType;class Bride implements WeddingRole&#123; /** * @var string */ public $name = &#x27;Bride&#x27;; /** * @param WeddingType $weddingType */ public function getClothes($weddingType) &#123; $weddingType-&gt;getClothes($this); &#125; /** * @param WeddingType $weddingType */ public function getShoes($weddingType) &#123; $weddingType-&gt;getShoes($this); &#125;&#125; BrideGroom 與 Bride 會由客戶端將 WeddingType 傳入（第一次分派）之後再將自己傳給 WeddingType （第二次分派）。 實作中式婚禮 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849&lt;?phpnamespace App\\VisitorPattern\\Wedding\\Type;use App\\VisitorPattern\\Wedding\\Contracts\\WeddingType;use App\\VisitorPattern\\Wedding\\Contracts\\WeddingRole;class ChineseWedding implements WeddingType&#123; /** * @param WeddingRole $role */ public function getClothes($role) &#123; $roleName = $role-&gt;name; switch ($roleName) &#123; case &#x27;BrideGroom&#x27;: echo &quot;新郎：中式囍袍\\n&quot;; break; case &#x27;Bride&#x27;: echo &quot;新娘：龍鳳褂\\n&quot;; break; &#125; &#125; /** * @param WeddingRole $role */ public function getShoes($role) &#123; $roleName = $role-&gt;name; switch ($roleName) &#123; case &#x27;BrideGroom&#x27;: echo &quot;新郎：黑色秀禾鞋\\n&quot;; break; case &#x27;Bride&#x27;: echo &quot;新娘：紅色秀禾鞋\\n&quot;; break; &#125; &#125;&#125; 實作日式婚禮 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849&lt;?phpnamespace App\\VisitorPattern\\Wedding\\Type;use App\\VisitorPattern\\Wedding\\Contracts\\WeddingType;use App\\VisitorPattern\\Wedding\\Contracts\\WeddingRole;class JapaneseWedding implements WeddingType&#123; /** * @param WeddingRole $role */ public function getClothes($role) &#123; $roleName = $role-&gt;name; switch ($roleName) &#123; case &#x27;BrideGroom&#x27;: echo &quot;新郎：繡有家紋的和服\\n&quot;; break; case &#x27;Bride&#x27;: echo &quot;新娘：純潔的白無垢\\n&quot;; break; &#125; &#125; /** * @param WeddingRole $role */ public function getShoes($role) &#123; $roleName = $role-&gt;name; switch ($roleName) &#123; case &#x27;BrideGroom&#x27;: echo &quot;新郎：雪駄\\n&quot;; break; case &#x27;Bride&#x27;: echo &quot;新娘：草履\\n&quot;; break; &#125; &#125;&#125; 各國婚禮會根據傳入婚禮角色得不同，而有不同的行為。 實作婚禮類型工廠，方便客戶端呼叫 12345678910111213141516171819202122&lt;?phpnamespace App\\VisitorPattern\\Wedding;use App\\VisitorPattern\\Wedding\\Contracts\\WeddingType;use ReflectionClass;class WeddingTypeFactory&#123; /** * @param string $weddingType * @return WeddingType */ public function create($weddingType) &#123; $namespace = &#x27;App\\VisitorPattern\\Wedding\\Type&#x27;; $className = $weddingType . &#x27;Wedding&#x27;; $reflector = new ReflectionClass($namespace . &#x27;\\\\&#x27; . $className); return $reflector-&gt;newInstance(); &#125;&#125; 實作物件結構類別，用來放入元素，便於我們實現遍歷。方便客戶端的呼叫。 123456789101112131415161718192021222324252627282930313233343536373839404142434445&lt;?phpnamespace App\\VisitorPattern\\Wedding;use App\\VisitorPattern\\Wedding\\Contracts\\WeddingRole;use App\\VisitorPattern\\Wedding\\Contracts\\WeddingType;class Composite&#123; /** * @var WeddingRole[] */ protected $children = []; /** * @param WeddingRole $role * @return void */ public function add(WeddingRole $role) &#123; $this-&gt;children[$role-&gt;name] = $role; &#125; /** * @param WeddingRole $component * @return void */ public function remove(WeddingRole $role) &#123; unset($this-&gt;children[$role-&gt;name]); &#125; /** * @param WeddingType $weddingType * @return void */ public function display(WeddingType $weddingType) &#123; foreach ($this-&gt;children as $child) &#123; $child-&gt;getClothes($weddingType); $child-&gt;getShoes($weddingType); &#125; &#125;&#125; 最後修改既有程式碼 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950&lt;?phpnamespace App\\VisitorPattern\\Wedding;use App\\VisitorPattern\\Wedding\\Contracts\\WeddingType;use App\\VisitorPattern\\Wedding\\WeddingTypeFactory;use App\\VisitorPattern\\Wedding\\Composite;use App\\VisitorPattern\\Wedding\\BrideGroom;use App\\VisitorPattern\\Wedding\\Bride;class Program&#123; /** * @var WeddingTypeFactory */ protected $weddingTypeFactory; public function __construct() &#123; $this-&gt;weddingTypeFactory = new WeddingTypeFactory(); &#125; /** * @param string $weddingType */ public function getWedding($weddingType) &#123; $weddingType = $this-&gt;createWeddingType($weddingType); $composite = new Composite(); $brideGroom = new BrideGroom(); $bride = new Bride(); $composite-&gt;add($brideGroom); $composite-&gt;add($bride); $composite-&gt;display($weddingType); &#125; /** * @param string $weddingType * @return WeddingType */ private function createWeddingType($weddingType) &#123; return $this-&gt;weddingTypeFactory-&gt;create($weddingType); &#125;&#125; [單一職責原則]我們將婚禮角色（資料結構）與婚禮類型（操作）視作兩種不同的職責。 [開放封閉原則]新增&#x2F;修改婚禮類型時，不會修改到所有的程式碼。 [介面隔離原則]婚禮角色介面：會根據客戶端傳入的婚禮類型，再將自己傳入後，完成行為。婚禮類型介面：會根據傳入的婚禮角色，完成行為。 [依賴反轉原則]依賴於抽象的婚禮角色介面與婚禮類型介面。 ʕ •ᴥ•ʔ：揉合許多模式的範例。","categories":[{"name":"Clean Code","slug":"Clean-Code","permalink":"https://yncbearz.github.io/categories/Clean-Code/"}],"tags":[{"name":"Example","slug":"Example","permalink":"https://yncbearz.github.io/tags/Example/"}]},{"title":"訪問者模式","slug":"Visitor-Pattern","date":"2020-12-27T08:36:05.000Z","updated":"2025-05-30T08:15:23.258Z","comments":true,"path":"2020/12/27/Visitor-Pattern/","permalink":"https://yncbearz.github.io/2020/12/27/Visitor-Pattern/","excerpt":"Visitor-Pattern","text":"Visitor Pattern允許在不改變組合內各元素的情況下，增加各元素的新操作。Example: 各國婚禮、動物園管理員 訪問者模式會將類別分為兩類：分別是 訪問者類別 (Visitor) 與 元素類別 (Element) 。 讓原本屬於元素的行為，變成 訪問者類別 (Visitor) 。根據傳入元素的不同，會有對應的行為，緊耦合於 元素類別 (Element) 。 優點：將操作從元素類別抽離，使其能獨立變化。容易新增&#x2F;修改訪問者類別。 缺點：難以增加新的元素。破壞了原本元素的封裝。會使程式碼複雜度提高。 與其他模式的比較：[組合模式]：訪問者模式可能會使用到組合模式的技巧。 [迭代器模式]：訪問者模式可能會使用到迭代器模式的技巧。 ʕ •ᴥ•ʔ：訪問者模式改變了原本的主從關係。","categories":[{"name":"Clean Code","slug":"Clean-Code","permalink":"https://yncbearz.github.io/categories/Clean-Code/"}],"tags":[{"name":"Design Pattern","slug":"Design-Pattern","permalink":"https://yncbearz.github.io/tags/Design-Pattern/"}]},{"title":"類別圖：打招呼（中介者模式）","slug":"Class-Diagram-Say-Hello-Mediator-Pattern","date":"2020-12-20T08:47:01.000Z","updated":"2025-07-30T11:30:13.230Z","comments":true,"path":"2020/12/20/Class-Diagram-Say-Hello-Mediator-Pattern/","permalink":"https://yncbearz.github.io/2020/12/20/Class-Diagram-Say-Hello-Mediator-Pattern/","excerpt":"Class-Diagram-Say-Hello-Mediator-Pattern","text":"Example: 打招呼 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758596061626364@startumlinterface CentralNervousSystem&#123; + sendMessage(string organName, string message): string&#125;interface Executable&#123; + execute(string message): string&#125;class Brain&#123; # organs: Organ[] + setOrgan(Organ organ)&#125;CentralNervousSystem &lt;|.. Brainabstract class Organ&#123; # name: string # brain: Brain + __construct(Brain brain) + getName(): string&#125;Executable &lt;|.. OrganBrain -o OrganBrain &lt;- OrganOrgan &lt;|-- EyeOrgan &lt;|-- EarOrgan &lt;|-- HandOrgan &lt;|-- MouthOrgan &lt;|-- Faceclass Program&#123; # brain: Brain # eye: Eye # ear: Ear # hand: Hand # mouth: Mouth # face: Face + __construct() + see(string item): string + hear(string item): string - resolveBrainAndOrgans() - resolveOrgans()&#125;Brain &lt;- ProgramEye &lt;-- ProgramEar &lt;-- ProgramHand &lt;-- ProgramMouth &lt;-- ProgramFace &lt;-- Program@enduml ʕ •ᴥ•ʔ：若不熟悉 UML 類別圖，可參考UML類別圖說明。","categories":[{"name":"Clean Code","slug":"Clean-Code","permalink":"https://yncbearz.github.io/categories/Clean-Code/"}],"tags":[{"name":"Design Pattern","slug":"Design-Pattern","permalink":"https://yncbearz.github.io/tags/Design-Pattern/"}]},{"title":"範例：打招呼（中介者模式）","slug":"Example-Say-Hello-Mediator-Pattern","date":"2020-12-20T08:45:20.000Z","updated":"2025-05-30T08:15:23.237Z","comments":true,"path":"2020/12/20/Example-Say-Hello-Mediator-Pattern/","permalink":"https://yncbearz.github.io/2020/12/20/Example-Say-Hello-Mediator-Pattern/","excerpt":"Example-Say-Hello-Mediator-Pattern","text":"Pattern: 中介者模式 Class Diagram: 打招呼 \b情境：以下是人腦的運作程式 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859606162&lt;?phpnamespace App\\MediatorPattern\\SayHello;class Program&#123; /** * @param string $item * @return string */ public function see($item) &#123; switch ($item) &#123; case &#x27;認識的人&#x27;: return $this-&gt;sayHello(); break; case &#x27;熟識的人&#x27;: return $this-&gt;waveHand(); break; &#125; &#125; /** * @param string $item * @return string */ public function hear($item) &#123; switch ($item) &#123; case &#x27;喜歡的人&#x27;: return $this-&gt;blush(); break; case &#x27;討厭的人&#x27;: return $this-&gt;pretendToLookBusy(); break; &#125; &#125; private function sayHello() &#123; return &#x27;[嘴巴]發出[你好]的聲音&#x27;; &#125; private function waveHand() &#123; return &#x27;[手]做出[揮手]的動作&#x27;; &#125; private function blush() &#123; return &#x27;[臉]開始[發紅]&#x27;; &#125; private function pretendToLookBusy() &#123; return &#x27;[手]做出[裝忙]的動作&#x27;; &#125;&#125; 隨著行為日趨複雜，我們可能會有更多的動作。這些動作會聯繫著不同的器官。 因為強耦合，無論是器官的增加或是行為改變，都會大大地影響既有程式碼。 讓我們用中介者模式改造它！ 需求一：定義中介者介面 (Mediator)與合作者介面 (Colleague) 使用中樞神經系統作為中介者介面 (Mediator) 1234567891011121314&lt;?phpnamespace App\\MediatorPattern\\SayHello\\Contracts;interface CentralNervousSystem&#123; /** * @param string $organName * @param string $message * @return string */ public function sendMessage($organName, $message);&#125; 使用器官作為合作者介面 (Colleague) 12345678910111213&lt;?phpnamespace App\\MediatorPattern\\SayHello\\Contracts;interface Executable&#123; /** * @param string $message * @return string */ public function execute($message);&#125; 需求二：定義實體中介者，來改變合作者間的依賴關係 實作大腦（中介者） 1234567891011121314151617181920212223242526272829303132&lt;?phpnamespace App\\MediatorPattern\\SayHello;use App\\MediatorPattern\\SayHello\\Contracts\\CentralNervousSystem;use App\\MediatorPattern\\SayHello\\Abstracts\\Organ;class Brain implements CentralNervousSystem&#123; /** * @var Organ[] */ protected $organs = []; /** * @param string $organName * @param string $message * @return string */ public function sendMessage($organName, $message) &#123; $organ = $this-&gt;organs[$organName]; return $organ-&gt;execute($message); &#125; public function setOrgan(Organ $organ) &#123; $organName = $organ-&gt;getName(); $this-&gt;organs[$organName] = $organ; &#125;&#125; 抽象器官（合作者） 123456789101112131415161718192021222324252627282930&lt;?phpnamespace App\\MediatorPattern\\SayHello\\Abstracts;use App\\MediatorPattern\\SayHello\\Contracts\\Executable;use App\\MediatorPattern\\SayHello\\Brain;abstract class Organ implements Executable&#123; /** * @var string */ protected $name = &#x27;Unknown&#x27;; /** * @var Brain */ protected $brain; public function __construct(Brain $brain) &#123; $this-&gt;brain = $brain; &#125; public function getName() &#123; return $this-&gt;name; &#125;&#125; 實作眼睛 (合作者) 1234567891011121314151617181920212223242526272829303132&lt;?phpnamespace App\\MediatorPattern\\SayHello;use App\\MediatorPattern\\SayHello\\Abstracts\\Organ;class Eye extends Organ&#123; /** * @var string */ protected $name = &#x27;眼睛&#x27;; /** * @param string $message * @return string */ public function execute($message) &#123; switch ($message) &#123; case &#x27;認識的人&#x27;: return $this-&gt;brain-&gt;sendMessage(&#x27;嘴巴&#x27;, &#x27;你好&#x27;); break; case &#x27;熟識的人&#x27;: return $this-&gt;brain-&gt;sendMessage(&#x27;手&#x27;, &#x27;揮手&#x27;); break; &#125; &#125;&#125; 實作耳朵 (合作者) 12345678910111213141516171819202122232425262728293031&lt;?phpnamespace App\\MediatorPattern\\SayHello;use App\\MediatorPattern\\SayHello\\Abstracts\\Organ;class Ear extends Organ&#123; /** * @var string */ protected $name = &#x27;耳朵&#x27;; /** * @param string $message * @return string */ public function execute($message) &#123; switch ($message) &#123; case &#x27;喜歡的人&#x27;: return $this-&gt;brain-&gt;sendMessage(&#x27;臉&#x27;, &#x27;發紅&#x27;); break; case &#x27;討厭的人&#x27;: return $this-&gt;brain-&gt;sendMessage(&#x27;手&#x27;, &#x27;裝忙&#x27;); break; &#125; &#125;&#125; 實作手 (合作者) 1234567891011121314151617181920&lt;?phpnamespace App\\MediatorPattern\\SayHello;use App\\MediatorPattern\\SayHello\\Abstracts\\Organ;class Hand extends Organ&#123; protected $name = &#x27;手&#x27;; /** * @param string $message * @return string */ public function execute($message) &#123; return &quot;[手]做出[$message]的動作&quot;; &#125;&#125; 實作嘴巴 (合作者) 1234567891011121314151617181920212223&lt;?phpnamespace App\\MediatorPattern\\SayHello;use App\\MediatorPattern\\SayHello\\Abstracts\\Organ;class Mouth extends Organ&#123; /** * @var string */ protected $name = &#x27;嘴巴&#x27;; /** * @param string $message * @return string */ public function execute($message) &#123; return &quot;[嘴巴]發出[$message]的聲音&quot;; &#125;&#125; 實作臉 (合作者) 1234567891011121314151617181920212223&lt;?phpnamespace App\\MediatorPattern\\SayHello;use App\\MediatorPattern\\SayHello\\Abstracts\\Organ;class Face extends Organ&#123; /** * @var string */ protected $name = &#x27;臉&#x27;; /** * @param string $message * @return string */ public function execute($message) &#123; return &quot;[臉]開始[$message]&quot;; &#125;&#125; 以這個範例來說，中介者是大腦，合作者則是各個器官。 當A器官要呼叫B器官，執行某些動作時，會透過大腦，使得A器官不必知道真正的B器官是誰（鬆耦合）。 需求三：改寫既有程式碼 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687&lt;?phpnamespace App\\MediatorPattern\\SayHello;use App\\MediatorPattern\\SayHello\\Brain;use App\\MediatorPattern\\SayHello\\Eye;use App\\MediatorPattern\\SayHello\\Mouth;use App\\MediatorPattern\\SayHello\\Hand;use App\\MediatorPattern\\SayHello\\Ear;use App\\MediatorPattern\\SayHello\\Face;class Program&#123; /** * @var Brain */ protected $brain; /** * @var Eye */ protected $eye; /** * @var Mouth */ protected $mouth; /** * @var Hand */ protected $hand; /** * @var Ear */ protected $ear; /** * @var Face */ protected $face; public function __construct() &#123; $this-&gt;brain = $this-&gt;resolveBrainAndOrgans(); &#125; /** * @param string $item * @return string */ public function see($item) &#123; return $this-&gt;eye-&gt;execute($item); &#125; /** * @param string $item * @return string */ public function hear($item) &#123; return $this-&gt;ear-&gt;execute($item); &#125; private function resolveBrainAndOrgans() &#123; $this-&gt;brain = new Brain(); $this-&gt;resolveOrgans(); $this-&gt;brain-&gt;setOrgan($this-&gt;eye); $this-&gt;brain-&gt;setOrgan($this-&gt;mouth); $this-&gt;brain-&gt;setOrgan($this-&gt;hand); $this-&gt;brain-&gt;setOrgan($this-&gt;ear); $this-&gt;brain-&gt;setOrgan($this-&gt;face); &#125; private function resolveOrgans() &#123; $this-&gt;eye = new Eye($this-&gt;brain); $this-&gt;mouth = new Mouth($this-&gt;brain); $this-&gt;hand = new Hand($this-&gt;brain); $this-&gt;ear = new Ear($this-&gt;brain); $this-&gt;face = new Face($this-&gt;brain); &#125;&#125; \b[單一職責原則]我們將器官的功能與器官間的關係視作兩種不同的職責。 藉由大腦（中介者）負責聯絡各個器官（合作者）執行對應的行為。 \b[開放封閉原則]無論是新增&#x2F;修改器官，或者新增&#x2F;修改器官間的關係，我們都不會改動到所有程式碼。 \b[介面隔離原則]中介者介面：負責傳送器官間的訊息。合作者介面：負責執行該器官的功能。 \b[依賴反轉原則]大腦依賴於合作者介面。器官負責實作合作者介面。 ʕ •ᴥ•ʔ：早上剛睡醒時，想到的範例。","categories":[{"name":"Clean Code","slug":"Clean-Code","permalink":"https://yncbearz.github.io/categories/Clean-Code/"}],"tags":[{"name":"Example","slug":"Example","permalink":"https://yncbearz.github.io/tags/Example/"}]},{"title":"中介者模式","slug":"Mediator-Pattern","date":"2020-12-20T08:44:51.000Z","updated":"2025-05-30T08:15:23.250Z","comments":true,"path":"2020/12/20/Mediator-Pattern/","permalink":"https://yncbearz.github.io/2020/12/20/Mediator-Pattern/","excerpt":"Mediator-Pattern","text":"Mediator Pattern集中相關對象的之間複雜的溝通與控制方式。Example: 打招呼 中介者模式會將類別分為兩類：分別是中介者類別 (Mediator) 與 合作者類別 (Colleague) 。 優點：容易新增&#x2F;修改合作者。容易新增&#x2F;修改合作者之間的關係。合作者間不必互相參考，使其達到鬆耦合。 缺點：中介者會成為神一般的存在(God Object) 。 與其他模式的比較：[狀態模式]：以關係圖來說，兩個模式皆透過相互參照的方式，消除同分類類別下的強耦合。 起初我會以為中介者模式會類似於Laravel的Container，但兩者目的有很大的不同。 Container主要目的是單例模式與註冊表的實現。而中介者關注在解除合作者之間的耦合關係。 ʕ •ᴥ•ʔ：World Peace!","categories":[{"name":"Clean Code","slug":"Clean-Code","permalink":"https://yncbearz.github.io/categories/Clean-Code/"}],"tags":[{"name":"Design Pattern","slug":"Design-Pattern","permalink":"https://yncbearz.github.io/tags/Design-Pattern/"}]},{"title":"類別圖：新產品開發（職責鏈模式）","slug":"Class-Diagram-Software-Chain-Of-Responsibility-Pattern","date":"2020-12-11T14:17:52.000Z","updated":"2025-07-30T11:30:13.240Z","comments":true,"path":"2020/12/11/Class-Diagram-Software-Chain-Of-Responsibility-Pattern/","permalink":"https://yncbearz.github.io/2020/12/11/Class-Diagram-Software-Chain-Of-Responsibility-Pattern/","excerpt":"Class-Diagram-Software-Chain-Of-Responsibility-Pattern","text":"Example: 新產品開發 12345678910111213141516171819202122232425262728293031323334353637383940414243444546@startumlclass Request&#123; # type: string # content: string + __construct(string type, string content) + getType(): string + getContent(): string&#125;abstract class Handler&#123; # role: string # canHandleType: array # requestType: string # requestContent: string # nextHandler: Handler + handle(Request request): string + setNextHandler(Handler handler) + canHandle(): boolean&#125;Request &lt;- Handlerclass Supportclass ProjectManagerclass BossHandler &lt;|-- SupportHandler &lt;|-- ProjectManagerHandler &lt;|-- Bossclass Program&#123; + handle(Request request): string&#125;Request &lt;- ProgramSupport &lt;-- ProgramProjectManager &lt;-- ProgramBoss &lt;-- Program@enduml ʕ •ᴥ•ʔ：若不熟悉 UML 類別圖，可參考UML類別圖說明。","categories":[{"name":"Clean Code","slug":"Clean-Code","permalink":"https://yncbearz.github.io/categories/Clean-Code/"}],"tags":[{"name":"Design Pattern","slug":"Design-Pattern","permalink":"https://yncbearz.github.io/tags/Design-Pattern/"}]},{"title":"範例：新產品開發（職責鏈模式）","slug":"Example-Software-Chain-Of-Responsibility-Pattern","date":"2020-12-11T14:17:02.000Z","updated":"2025-05-30T08:15:23.238Z","comments":true,"path":"2020/12/11/Example-Software-Chain-Of-Responsibility-Pattern/","permalink":"https://yncbearz.github.io/2020/12/11/Example-Software-Chain-Of-Responsibility-Pattern/","excerpt":"Example-Software-Chain-Of-Responsibility-Pattern","text":"Pattern: 職責鏈模式 Class Diagram: 新產品開發 情境：公司開發了一個新產品，客戶端有許多不同的請求 客戶端的請求類別 12345678910111213141516171819202122232425262728293031323334353637383940414243&lt;?phpnamespace App\\ChainOfResponsibilityPattern\\Software;class Request&#123; /** * @var string */ protected $type; /** * @var string */ protected $content; /** * @param string $type * @param string $content */ public function __construct(string $type, string $content) &#123; $this-&gt;type = $type; $this-&gt;content = $content; &#125; /** * @return string */ public function getType() &#123; return $this-&gt;type; &#125; /** * @return string */ public function getContent() &#123; return $this-&gt;content; &#125;&#125; 原本處理客戶端請求的方式 123456789101112131415161718192021222324252627282930313233343536&lt;?phpnamespace App\\ChainOfResponsibilityPattern\\Software;use Tests\\Unit\\ChainOfResponsibilityPattern\\Software\\Request;class Program&#123; /** * @param Request $request * @return string */ public function handle(Request $request) &#123; $type = $request-&gt;getType(); $content = $request-&gt;getContent(); switch ($type) &#123; case &#x27;bug&#x27;: // $request = new Request(&#x27;bug&#x27;, &#x27;no connection&#x27;); return &quot;Support已開始處理[$type:$content]的問題。&quot;; break; case &#x27;feature&#x27;: // $request = new Request(&#x27;feature&#x27;, &#x27;add filter&#x27;); return &quot;PM已開始處理[$type:$content]的問題。&quot;; break; default: // $request = new Request(&#x27;cooperative business&#x27;, &#x27;become Google partner&#x27;); return &quot;Boss已開始處理[$type:$content]的問題。&quot;; break; &#125; &#125;&#125; 根據請求類型的不同，我們會交由不同的角色來處理問題。 但這些請求，可以透過區分請求類別的方式，統一先交由Support處理，若Support無法處理，再轉給下個負責人。 以這樣的想法，讓我們用職責鏈模式改造它。 首先是抽象的處理器類別，當該處理器無法處理時，會轉給下一個處理器 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859606162636465666768&lt;?phpnamespace App\\ChainOfResponsibilityPattern\\Software\\Abstracts;use App\\ChainOfResponsibilityPattern\\Software\\Request;abstract class Handler&#123; /** * @var string */ protected $role; /** * @var array */ protected $canHandleType = []; /** * @var string */ protected $requestType; /** * @var string */ protected $requestContent; /** * @var Handler */ protected $nextHandler; /** * @param Request $request * @return string */ public function handle(Request $request): string &#123; $this-&gt;requestType = $request-&gt;getType(); $this-&gt;requestContent = $request-&gt;getContent(); if ($this-&gt;canHandle()) &#123; $role = $this-&gt;role; $result = &quot;$role can solve [$this-&gt;requestType:$this-&gt;requestContent] issue.&quot;; return $result; &#125; return $this-&gt;nextHandler-&gt;handle($request); &#125; /** * @param Handler $handler */ public function setNextHandler(Handler $handler) &#123; $this-&gt;nextHandler = $handler; &#125; /** * @return boolean */ protected function canHandle() &#123; return in_array($this-&gt;requestType, $this-&gt;canHandleType); &#125;&#125; 由canHandle()方法來知道，該處理器能不能處理。由setNextHandler()方法，來決定下一個處理器。 Support處理器 12345678910111213141516171819&lt;?phpnamespace App\\ChainOfResponsibilityPattern\\Software;use App\\ChainOfResponsibilityPattern\\Software\\Abstracts\\Handler;class Support extends Handler&#123; /** * @var string */ protected $role = &#x27;Support&#x27;; /** * @var array */ protected $canHandleType = [&#x27;bug&#x27;];&#125; PM處理器 12345678910111213141516171819&lt;?phpnamespace App\\ChainOfResponsibilityPattern\\Software;use App\\ChainOfResponsibilityPattern\\Software\\Abstracts\\Handler;class ProjectManager extends Handler&#123; /** * @var string */ protected $role = &#x27;PM&#x27;; /** * @var array */ protected $canHandleType = [&#x27;bug&#x27;, &#x27;feature&#x27;];&#125; Boss處理器 12345678910111213141516171819202122&lt;?phpnamespace App\\ChainOfResponsibilityPattern\\Software;use App\\ChainOfResponsibilityPattern\\Software\\Abstracts\\Handler;class Boss extends Handler&#123; /** * @var string */ protected $role = &#x27;Boss&#x27;; /** * @return boolean */ protected function canHandle() &#123; return true; &#125;&#125; 最後修改原本的程式碼 123456789101112131415161718192021&lt;?phpnamespace App\\ChainOfResponsibilityPattern\\Software;use App\\ChainOfResponsibilityPattern\\Software\\Request;use App\\ChainOfResponsibilityPattern\\Software\\Support;class Program&#123; public function handle(Request $request) &#123; $support = new Support(); $projectManager = new ProjectManager(); $boss = new Boss(); $support-&gt;setNextHandler($projectManager); $projectManager-&gt;setNextHandler($boss); return $support-&gt;handle($request); &#125;&#125; 這邊可以留意，若有未定義類型的請求，最終都會交由Boss處理器來捕捉。 [單一職責原則]我們把處理器與處理器的順序視作兩種不同的職責。 [開放封閉原則]無論是新增&#x2F;修改處理器的邏輯，或者修改處理器的順序，皆不會改動到所有程式碼。 [依賴反轉原則]抽象的處理器類別依賴於自身（組合模式）。實體的處理器類別則實現它。 ʕ •ᴥ•ʔ：一個很生活化的設計模式。","categories":[{"name":"Clean Code","slug":"Clean-Code","permalink":"https://yncbearz.github.io/categories/Clean-Code/"}],"tags":[{"name":"Example","slug":"Example","permalink":"https://yncbearz.github.io/tags/Example/"}]},{"title":"職責鏈模式","slug":"Chain-Of-Responsibility-Pattern","date":"2020-12-11T14:16:08.000Z","updated":"2025-05-30T08:15:23.216Z","comments":true,"path":"2020/12/11/Chain-Of-Responsibility-Pattern/","permalink":"https://yncbearz.github.io/2020/12/11/Chain-Of-Responsibility-Pattern/","excerpt":"Chain-Of-Responsibility-Pattern","text":"Chain Of Responsibility Pattern使多個物件都有機會處理請求，從而避免請求的發送者和接受者間的耦合關係。請求會沿著這條鏈傳遞，直到有一個物件處理它。Example: 新產品開發 職責鏈模式會將類別分為兩類：分別是請求類別 (Request) 與 處理器類別 (Handler) 。 優點：容易調整職責鏈中處理器的順序。容易新增&#x2F;修改職責鏈中的處理器。 缺點：需注意是否有請求到鏈的末端仍未被處理。 與其他模式的比較：[裝飾者模式]：裝飾者模式中，每個裝飾者類別皆會裝飾被裝飾者類別。而職責鏈模式中的請求，只會交由一個處理器負責處理。 [組合模式]：職責鏈模式中的處理器類別，會實現相同的介面，最後形成類似枝節點類別 (Composite) 與 葉節點類別 (Leaf) 的結構。 ʕ •ᴥ•ʔ：透過類似命令模式的職責切分，將處理器的職責與鏈的職責解耦，使其易於新增&#x2F;修改。","categories":[{"name":"Clean Code","slug":"Clean-Code","permalink":"https://yncbearz.github.io/categories/Clean-Code/"}],"tags":[{"name":"Design Pattern","slug":"Design-Pattern","permalink":"https://yncbearz.github.io/tags/Design-Pattern/"}]},{"title":"類別圖：十二生肖（橋接模式）","slug":"Class-Diagram-Zodiac-Bridge-Pattern","date":"2020-11-22T15:28:25.000Z","updated":"2025-07-30T11:30:13.355Z","comments":true,"path":"2020/11/22/Class-Diagram-Zodiac-Bridge-Pattern/","permalink":"https://yncbearz.github.io/2020/11/22/Class-Diagram-Zodiac-Bridge-Pattern/","excerpt":"Class-Diagram-Zodiac-Bridge-Pattern","text":"Example: 十二生肖 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758@startumlinterface CrossRiverBehavior&#123; + crossRiver()&#125;class RideAtopTheOxclass Swimclass FlyWithNoWingsclass SlitherCrossRiverBehavior &lt;|.. RideAtopTheOxCrossRiverBehavior &lt;|.. SwimCrossRiverBehavior &lt;|.. FlyWithNoWingsCrossRiverBehavior &lt;|.. Slitherabstract class Contestant&#123; # crossRiverBehavior: CrossRiverBehavior + crossRiver()&#125;class Rat&#123; + __construct()&#125;class Ox&#123; + __construct()&#125;class Dragon&#123; + __construct()&#125;class Snake&#123; + __construct()&#125;Contestant --o CrossRiverBehaviorRat --|&gt; ContestantOx --|&gt; ContestantDragon --|&gt; ContestantSnake --|&gt; Contestantclass Program&#123; + crossRiver(string animalName) - getContestant(string animalName)&#125;Program --&gt; Contestant@enduml ʕ •ᴥ•ʔ：若不熟悉 UML 類別圖，可參考UML類別圖說明。","categories":[{"name":"Clean Code","slug":"Clean-Code","permalink":"https://yncbearz.github.io/categories/Clean-Code/"}],"tags":[{"name":"Design Pattern","slug":"Design-Pattern","permalink":"https://yncbearz.github.io/tags/Design-Pattern/"}]},{"title":"範例：十二生肖","slug":"Example-Zodiac-Bridge-Pattern","date":"2020-11-21T10:50:37.000Z","updated":"2025-05-30T08:15:23.241Z","comments":true,"path":"2020/11/21/Example-Zodiac-Bridge-Pattern/","permalink":"https://yncbearz.github.io/2020/11/21/Example-Zodiac-Bridge-Pattern/","excerpt":"Example-Zodiac-Bridge-Pattern","text":"Pattern: 橋接模式 Class Diagram: 十二生肖 情境：玉皇大帝要舉辦渡河比賽，動物選手各顯神通。 123456789101112131415161718192021222324252627282930&lt;?phpnamespace App\\BridgePattern\\Zodiac;class Program&#123; /** * @param string $animal */ public function crossRiver($animal) &#123; switch ($animal) &#123; case &#x27;rat&#x27;: echo &#x27;悠哉地站啊站&#x27;; break; case &#x27;ox&#x27;: echo &#x27;努力地游啊游&#x27;; break; case &#x27;dragon&#x27;: echo &#x27;壯麗地飛啊飛&#x27;; break; case &#x27;snake&#x27;: echo &#x27;迅速地滑啊滑&#x27;; break; &#125; &#125;&#125; 故事中，老鼠與貓站在水牛的背上。 水牛勤奮地游，龍翱翔於天際，蛇則獨樹一幟地滑行在水面⋯⋯ 但今天這都不是重點。 假如原有的動物選手要改變渡河方式？（比如貓貓決定自己游泳）假如要新增新的動物選手？（比如老虎也要參賽） 渡河方式與動物選手是兩種不同層級的職責。讓我們用橋接模式改寫它。 需求一：渡河方式 首先定義渡河方式的介面 12345678&lt;?phpnamespace App\\BridgePattern\\Zodiac\\Contracts;interface CrossRiverBehavior&#123; public function crossRiver();&#125; 渡河方式：站在水牛背上 12345678910111213&lt;?phpnamespace App\\BridgePattern\\Zodiac\\CrossRiverBehaviors;use App\\BridgePattern\\Zodiac\\Contracts\\CrossRiverBehavior;class RideAtopTheOx implements CrossRiverBehavior&#123; public function crossRiver() &#123; echo &#x27;悠哉地站啊站&#x27;; &#125;&#125; 渡河方式：日常游泳 12345678910111213&lt;?phpnamespace App\\BridgePattern\\Zodiac\\CrossRiverBehaviors;use App\\BridgePattern\\Zodiac\\Contracts\\CrossRiverBehavior;class Swim implements CrossRiverBehavior&#123; public function crossRiver() &#123; echo &#x27;努力地游啊游&#x27;; &#125;&#125; 渡河方式：無翅飛行 12345678910111213&lt;?phpnamespace App\\BridgePattern\\Zodiac\\CrossRiverBehaviors;use App\\BridgePattern\\Zodiac\\Contracts\\CrossRiverBehavior;class FlyWithNoWings implements CrossRiverBehavior&#123; public function crossRiver() &#123; echo &#x27;壯麗地飛啊飛&#x27;; &#125;&#125; 渡河方式：滑行 12345678910111213&lt;?phpnamespace App\\BridgePattern\\Zodiac\\CrossRiverBehaviors;use App\\BridgePattern\\Zodiac\\Contracts\\CrossRiverBehavior;class Slither implements CrossRiverBehavior&#123; public function crossRiver() &#123; echo &#x27;迅速地滑啊滑&#x27;; &#125;&#125; 需求二：動物選手 首先定義動物選手的介面 123456789101112131415161718&lt;?phpnamespace App\\BridgePattern\\Zodiac\\Abstracts;use App\\BridgePattern\\Zodiac\\Contracts\\CrossRiverBehavior;abstract class Contestant&#123; /** * @var CrossRiverBehavior */ protected $crossRiverBehavior; public function crossRiver() &#123; $this-&gt;crossRiverBehavior-&gt;crossRiver(); &#125;&#125; 此處的crossRiver()並沒有具體行為，而是交由渡河方式來實作！ 動物選手：老鼠 12345678910111213141516171819&lt;?phpnamespace App\\BridgePattern\\Zodiac\\Contestants;use App\\BridgePattern\\Zodiac\\CrossRiverBehaviors\\RideAtopTheOx;use App\\BridgePattern\\Zodiac\\Abstracts\\Contestant;class Rat extends Contestant&#123; /** * @var RideAtopTheOx */ protected $crossRiverBehavior; public function __construct() &#123; $this-&gt;crossRiverBehavior = new RideAtopTheOx(); &#125;&#125; 動物選手：水牛 12345678910111213141516171819&lt;?phpnamespace App\\BridgePattern\\Zodiac\\Contestants;use App\\BridgePattern\\Zodiac\\CrossRiverBehaviors\\Swim;use App\\BridgePattern\\Zodiac\\Abstracts\\Contestant;class Ox extends Contestant&#123; /** * @var Swim */ protected $crossRiverBehavior; public function __construct() &#123; $this-&gt;crossRiverBehavior = new Swim(); &#125;&#125; 動物選手：龍 12345678910111213141516171819&lt;?phpnamespace App\\BridgePattern\\Zodiac\\Contestants;use App\\BridgePattern\\Zodiac\\CrossRiverBehaviors\\FlyWithNoWings;use App\\BridgePattern\\Zodiac\\Abstracts\\Contestant;class Dragon extends Contestant&#123; /** * @var FlyWithNoWings */ protected $crossRiverBehavior; public function __construct() &#123; $this-&gt;crossRiverBehavior = new FlyWithNoWings(); &#125;&#125; 動物選手：蛇 12345678910111213141516171819&lt;?phpnamespace App\\BridgePattern\\Zodiac\\Contestants;use App\\BridgePattern\\Zodiac\\CrossRiverBehaviors\\Slither;use App\\BridgePattern\\Zodiac\\Abstracts\\Contestant;class Snake extends Contestant&#123; /** * @var Slither */ protected $crossRiverBehavior; public function __construct() &#123; $this-&gt;crossRiverBehavior = new Slither(); &#125;&#125; 最後修改原本的程式碼 12345678910111213141516171819202122232425262728293031&lt;?phpnamespace App\\BridgePattern\\Zodiac;use ReflectionClass;use App\\BridgePattern\\Zodiac\\Contracts\\Contestant;class Program&#123; /** * @param string $animalName */ public function crossRiver($animalName) &#123; $contestant = $this-&gt;getContestant($animalName); $contestant-&gt;crossRiver(); &#125; /** * @param string $animalName * @return Contestant */ private function getContestant($animalName) &#123; $namespace = &#x27;App\\BridgePattern\\Zodiac\\Contestants&#x27;; $className = ucfirst($animalName); $reflector = new ReflectionClass($namespace . &#x27;\\\\&#x27; . $className); return $reflector-&gt;newInstance(); &#125;&#125; 運用反射 (Reflection) 機制，讓客戶端的程式碼不再修改。 [單一職責原則]我們把渡河方式與動物選手視作兩種不同的職責。 [開放封閉原則]無論新增動物選手或者修改渡河方式，皆不會改動到所有程式碼。 [介面隔離原則]區分了渡河方式介面與動物選手介面。 雖然兩者目前都只有crossRiver() 方法，但實作的目的不同。日後也可能因需求調整介面，而發展出截然不同的形式。 [依賴反轉原則]客戶端的程式碼依賴於動物選手介面。動物選手介面依賴於渡河方式介面。再由各個實體動物選手與實體渡河方式進行實作。 ʕ •ᴥ•ʔ：希望這個範例有淺顯易懂。","categories":[{"name":"Clean Code","slug":"Clean-Code","permalink":"https://yncbearz.github.io/categories/Clean-Code/"}],"tags":[{"name":"Example","slug":"Example","permalink":"https://yncbearz.github.io/tags/Example/"}]},{"title":"橋接模式","slug":"Bridge-Pattern","date":"2020-11-21T10:41:22.000Z","updated":"2025-05-30T08:15:23.215Z","comments":true,"path":"2020/11/21/Bridge-Pattern/","permalink":"https://yncbearz.github.io/2020/11/21/Bridge-Pattern/","excerpt":"Bridge-Pattern","text":"Bridge Pattern將抽象部分與實現部分分離，使它們都可以獨立地變化。Example: 十二生肖 橋接模式會將類別分為兩類：分別是抽象類別 (Abstraction) 與 實現類別 (Implementor) 。 抽象類別指的是高層級的抽象層。本身不具備具體邏輯。而實現類別會由低層級的實作層來負責。 舉例：抽象類別 -&gt; 實現類別通話介面 -&gt; 室內電話、行動電話登入介面 -&gt; Web、App 優點：透過分離抽象層與實作層，可根據需求在不同層級上，作相應的變化。 缺點：會使程式碼複雜度提高。 與其他模式的比較：[策略模式]：策略模式屬於行為型 (behavioral) 的設計模式，而橋接模式屬於結構型 (structural) 的設計模式。 這使著兩者在目的上，有著根本的不同。 策略模式可能會隨著運行，動態地調整策略。而橋接模式則會像是兩種不同的實作架構。 [狀態模式]：狀態模式屬於行為型 (behavioral) 的設計模式。可能會在運行過程中改變內部狀態，進而改變具體行為。 舉例： 設計模式 使用情境 策略模式 擁有多家第三方金流，需在主要金流服務掛點時，採用備用金流機制。 狀態模式 行人號誌小綠人會隨著當前標誌不同，顯示不同的圖樣。 橋接模式 框架實作資料庫連線的介面，與其各自不同的具體實作。 ʕ •ᴥ•ʔ：以Laravel而言，設計模式到後來常常會混血，最終還是回歸到S.O.L.I.D的思考。","categories":[{"name":"Clean Code","slug":"Clean-Code","permalink":"https://yncbearz.github.io/categories/Clean-Code/"}],"tags":[{"name":"Design Pattern","slug":"Design-Pattern","permalink":"https://yncbearz.github.io/tags/Design-Pattern/"}]},{"title":"類別圖：生物分類學（組合模式）","slug":"Class-Diagram-Taxonomy-Composite-Pattern","date":"2020-11-15T15:23:02.000Z","updated":"2025-07-30T11:30:13.261Z","comments":true,"path":"2020/11/15/Class-Diagram-Taxonomy-Composite-Pattern/","permalink":"https://yncbearz.github.io/2020/11/15/Class-Diagram-Taxonomy-Composite-Pattern/","excerpt":"Class-Diagram-Taxonomy-Composite-Pattern","text":"Example: 生物分類學 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647@startumlinterface Component&#123; + add(Component component) + remove(Component component) + displayClassifiaction(int depth)&#125;abstract class DashHelper&#123; + getDashes(int count)&#125;class Composite&#123; + name: string # children: Component[] + __construct(string name) - displaySelfClassification(int depth) - displayChildrenClassification(int depth)&#125;class Leaf&#123; + name: string + __construct(string name)&#125;Component &lt;|.. CompositeComponent --o CompositeDashHelper &lt;|-- CompositeComponent &lt;|.. LeafDashHelper &lt;|-- Leafclass Program&#123; + getTaxonomy()&#125;Composite &lt;-- ProgramLeaf &lt;-- Program@enduml （註：此處DashHelper以abstract class表示trait） ʕ •ᴥ•ʔ：若不熟悉 UML 類別圖，可參考UML類別圖說明。","categories":[{"name":"Clean Code","slug":"Clean-Code","permalink":"https://yncbearz.github.io/categories/Clean-Code/"}],"tags":[{"name":"Design Pattern","slug":"Design-Pattern","permalink":"https://yncbearz.github.io/tags/Design-Pattern/"}]},{"title":"範例：生物分類學（組合模式）","slug":"Example-Taxonomy-Composite-Pattern","date":"2020-11-15T15:21:23.000Z","updated":"2025-05-30T08:15:23.238Z","comments":true,"path":"2020/11/15/Example-Taxonomy-Composite-Pattern/","permalink":"https://yncbearz.github.io/2020/11/15/Example-Taxonomy-Composite-Pattern/","excerpt":"Example-Taxonomy-Composite-Pattern","text":"Pattern: 組合模式 Class Diagram: 生物分類學 情境：原本的生物分類學（界門綱目科屬種） 123456789101112131415161718192021222324&lt;?phpnamespace App\\CompositePattern\\Taxonomy;class Program&#123; public function getTaxonomy() &#123; echo &#x27;動物界-- 脊索動物門---- 哺乳綱------ 雙門齒目-------- 無尾熊科---------- 無尾熊屬------------ 無尾熊------ 食肉目-------- 熊科---------- 大貓熊屬------------ 大貓熊&#x27;; &#125;&#125; （註：排版是因為測試時不能有空格，也間接說明了這是個脆弱測試） 我們利用「-」來做出層級的分類概念。 經由分類發現，無尾熊與大貓熊同屬動物界-脊索動物門-哺乳綱。 讓我們透過組合模式，將其改寫成樹形架構！ 需求一：運用組合模式 首先定義組合介面 (Component)，採取透明模式 (uniformity) 12345678910111213&lt;?phpnamespace App\\CompositePattern\\Taxonomy\\Contracts;interface Component&#123; public function add(Component $component); public function remove(Component $component); public function displayClassifiaction(int $depth);&#125; 定義DashHelper （重構時發現枝節點與葉節點可共用的方法） 1234567891011121314151617181920&lt;?phpnamespace App\\CompositePattern\\Taxonomy\\Traits;trait DashHelper&#123; /** * @param integer $count * @return string */ public function getDashes(int $count) &#123; $dash = &#x27;&#x27;; for ($i = 0; $i &lt; $count; $i++) &#123; $dash = $dash . &#x27;-&#x27;; &#125; return $dash; &#125;&#125; DashHelper目的是做出不同層的分類。 定義枝節點類別 (Composite) 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384&lt;?phpnamespace App\\CompositePattern\\Taxonomy;use App\\CompositePattern\\Taxonomy\\Contracts\\Component;use App\\CompositePattern\\Taxonomy\\Traits\\DashHelper;class Composite implements Component&#123; use DashHelper; /** * @var string */ public $name; /** * @var Component[] */ protected $children = []; /** * @param string $name */ public function __construct(string $name) &#123; $this-&gt;name = $name; &#125; /** * @param Component $component * @return void */ public function add(Component $component) &#123; $this-&gt;children[$component-&gt;name] = $component; &#125; /** * @param Component $component * @return void */ public function remove(Component $component) &#123; unset($this-&gt;children[$component-&gt;name]); &#125; /** * @param integer $depth * @return void */ public function displayClassifiaction(int $depth) &#123; $this-&gt;displaySelfClassification($depth); $this-&gt;displayChildrenClassification($depth); &#125; /** * @param int $depth * @return void */ private function displaySelfClassification(int $depth) &#123; $dashes = $this-&gt;getDashes($depth); if (strlen($dashes) == 0) &#123; echo &quot;$this-&gt;name\\n&quot;; return; &#125; echo &quot;$dashes $this-&gt;name\\n&quot;; &#125; /** * @param integer $depth * @return void */ private function displayChildrenClassification(int $depth) &#123; foreach ($this-&gt;children as $child) &#123; $child-&gt;displayClassifiaction($depth + 2); &#125; &#125;&#125; 枝節點會先印出自己的分類名稱，接著加層數給子物件。 定義葉節點類別 (Leaf) 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253&lt;?phpnamespace App\\CompositePattern\\Taxonomy;use App\\CompositePattern\\Taxonomy\\Contracts\\Component;use App\\CompositePattern\\Taxonomy\\Traits\\DashHelper;use Exception;class Leaf implements Component&#123; use DashHelper; /** * @var string */ public $name; /** * @param string $name */ public function __construct(string $name) &#123; $this-&gt;name = $name; &#125; /** * @param Component $component * @throws Exception */ public function add(Component $component) &#123; throw new Exception(&#x27;Cannot add to a leaf&#x27;); &#125; /** * @param Component $component * @throws Exception */ public function remove(Component $component) &#123; throw new Exception(&#x27;Cannot remove from a leaf&#x27;); &#125; /** * @param integer $depth * @return void */ public function displayClassifiaction(int $depth) &#123; $dashes = $this-&gt;getDashes($depth); echo &quot;$dashes $this-&gt;name\\n\\n&quot;; &#125;&#125; 葉節點只會列出自己的分類名稱，而且不允許對子物件的操作。 最後修改客戶端的程式碼 123456789101112131415161718192021222324252627282930313233343536373839404142&lt;?phpnamespace App\\CompositePattern\\Taxonomy;class Program&#123; public function getTaxonomy() &#123; $animalia = new Composite(&#x27;動物界&#x27;); $chordata = new Composite(&#x27;脊索動物門&#x27;); $mammalia = new Composite(&#x27;哺乳綱&#x27;); $animalia-&gt;add($chordata); $chordata-&gt;add($mammalia); // koala $diprotodontia = new Composite(&#x27;雙門齒目&#x27;); $phascolarctidae = new Composite(&#x27;無尾熊科&#x27;); $phascolarctos = new Composite(&#x27;無尾熊屬&#x27;); $phascolarctosCinereus = new Leaf(&#x27;無尾熊&#x27;); $diprotodontia-&gt;add($phascolarctidae); $phascolarctidae-&gt;add($phascolarctos); $phascolarctos-&gt;add($phascolarctosCinereus); $mammalia-&gt;add($diprotodontia); // panda $carnivora = new Composite(&#x27;食肉目&#x27;); $ursidae = new Composite(&#x27;熊科&#x27;); $ailuropoda = new Composite(&#x27;大貓熊屬&#x27;); $ailuropodaMelanoleuca = new Leaf(&#x27;大貓熊&#x27;); $carnivora-&gt;add($ursidae); $ursidae-&gt;add($ailuropoda); $ailuropoda-&gt;add($ailuropodaMelanoleuca); $mammalia-&gt;add($carnivora); $animalia-&gt;displayClassifiaction(0); &#125;&#125; （註：此處的變數命名參考學名） [單一職責原則]透過找出可以繼續遞迴的部分，分出枝節點與葉節點。 [開放封閉原則]可以於組合中新增&#x2F;修改某節點，不去影響其他節點的行為。 [依賴反轉原則]客戶依賴於抽象的 組合介面 (Component) 。枝節點與葉節點實現抽象的 組合介面 (Component) 。 ʕ •ᴥ•ʔ：動物界-脊索動物門-哺乳綱-靈長目-人科-人屬-人。","categories":[{"name":"Clean Code","slug":"Clean-Code","permalink":"https://yncbearz.github.io/categories/Clean-Code/"}],"tags":[{"name":"Example","slug":"Example","permalink":"https://yncbearz.github.io/tags/Example/"}]},{"title":"組合模式","slug":"Composite-Pattern","date":"2020-11-15T15:16:08.000Z","updated":"2025-05-30T08:15:23.229Z","comments":true,"path":"2020/11/15/Composite-Pattern/","permalink":"https://yncbearz.github.io/2020/11/15/Composite-Pattern/","excerpt":"Composite-Pattern","text":"Composite Pattern允許將對象組合成樹形結構來表現整體&#x2F;部分層次結構。組合能讓客戶以一致的方式處理個別對象以及對象組合。Example: 生物分類學 組合模式會將類別分為兩類：分別是枝節點類別 (Composite) 與 葉節點類別 (Leaf) 。 其中葉節點類別沒有子節點。 根據組合介面 (Component) 設計的不同，又可分出兩種類型。 透明方式 (uniformity)於介面宣告管理子物件的方法 (Add, Remove)，使得 枝節點類別 (Composite) 與 葉節點類別 (Leaf) 沒有區別。缺點為 葉節點類別 (Leaf) 本身不具備管理子物件的方法，實現它是沒有意義的。 安全方式 (type safety)不於介面宣告管理子物件的方法，而是在 枝節點類別 (Composite) 中宣告。缺點為客戶端調用時須增加對應的判斷。 優點：面對樹形架構時，能夠使用多態性與遞迴性的作法。 缺點：由於介面須同時滿足枝節點與葉節點，會使程式碼複雜度提高。 與其他模式的比較：[迭代器模式]：運用組合模式，可以與迭代器模式產生良好的協同作用。 [解譯器模式]：兩者有著類似下表的對應關係。 解譯器模式 組合模式 終端表達式 (Terminal Expression) 葉節點類別 (Leaf) 非終端表達式 (NonTerminal Expression) 枝節點類別 (Composite) [裝飾者模式]：裝飾者模式只有一個裝飾過後的物件。而組合模式有著許多個物件。 ʕ •ᴥ•ʔ：組合模式的目的就是實現樹形結構。","categories":[{"name":"Clean Code","slug":"Clean-Code","permalink":"https://yncbearz.github.io/categories/Clean-Code/"}],"tags":[{"name":"Design Pattern","slug":"Design-Pattern","permalink":"https://yncbearz.github.io/tags/Design-Pattern/"}]},{"title":"類別圖：摩斯電碼 （解譯器模式）","slug":"Class-Diagram-Morse-Code-Interpreter-Pattern","date":"2020-11-08T12:10:05.000Z","updated":"2025-07-30T11:30:13.186Z","comments":true,"path":"2020/11/08/Class-Diagram-Morse-Code-Interpreter-Pattern/","permalink":"https://yncbearz.github.io/2020/11/08/Class-Diagram-Morse-Code-Interpreter-Pattern/","excerpt":"Class-Diagram-Morse-Code-Interpreter-Pattern","text":"Example: 摩斯電碼 12345678910111213141516171819202122232425262728293031323334353637383940@startumlclass Context&#123; + text: string + __construct(string text)&#125;interface Expression&#123; + interpret(Context context): Context + execute(string message)&#125;class NonTerminalExpression&#123; + isSpace(string character)&#125;class TerminalExpression&#123; # mapping: array - encode(string character) - typeSpace()&#125;Context &lt;- ExpressionExpression &lt;|-- NonTerminalExpressionExpression &lt;|-- TerminalExpressionclass Program&#123; + encode(string text)&#125;NonTerminalExpression &lt;-- ProgramTerminalExpression &lt;-- Program@enduml ʕ •ᴥ•ʔ：若不熟悉 UML 類別圖，可參考UML類別圖說明。","categories":[{"name":"Clean Code","slug":"Clean-Code","permalink":"https://yncbearz.github.io/categories/Clean-Code/"}],"tags":[{"name":"Design Pattern","slug":"Design-Pattern","permalink":"https://yncbearz.github.io/tags/Design-Pattern/"}]},{"title":"範例：摩斯電碼 （解譯器模式）","slug":"Example-Morse-Code-Interpreter-Pattern","date":"2020-11-08T11:24:18.000Z","updated":"2025-05-30T08:15:23.236Z","comments":true,"path":"2020/11/08/Example-Morse-Code-Interpreter-Pattern/","permalink":"https://yncbearz.github.io/2020/11/08/Example-Morse-Code-Interpreter-Pattern/","excerpt":"Example-Morse-Code-Interpreter-Pattern","text":"Pattern: 解譯器模式 Class Diagram: 摩斯電碼 情境：讓我們試著作一個摩斯電碼機，它會將一般句子轉成摩斯電碼的表示 首先是語境類別 (Context) 12345678910111213141516171819&lt;?phpnamespace App\\InterpreterPattern\\MorseCode;class Context&#123; /** * @var string */ public $text; /** * @param string $text */ public function __construct(string $text) &#123; $this-&gt;text = $text; &#125;&#125; 主要是承載要解譯的詞句，會隨著解譯進度，改變其內容。 接著是表達式類別 (Expression) 1234567891011121314151617181920212223&lt;?phpnamespace App\\InterpreterPattern\\MorseCode\\Contracts;use App\\InterpreterPattern\\MorseCode\\Context;interface Expression&#123; /** * 找出要解析的字串執行，並回傳剩餘字串 * * @param Context $context * @return Context */ public function interpret(Context $context): Context; /** * 解析字串後，印在控制台 * * @param string $message */ public function execute(string $message);&#125; 這邊說明一下，所謂的摩斯電碼，是利用滴答兩種不同長短訊號的排列組合，來表達每一個字母符號。 例如：A的表示為 (.-)。 而在此處的範例中，同個單字的字母會用空格 ( ) 分開，不同單字的字母則會用斜槓 (&#x2F;) 分開。 例如：Good Morning的表示會是 (–. — — -.. &#x2F; – — .-. -. .. -. –.)。 字母間不區分大小寫。 按照上述規則，我想區分出兩種表達式 (Expression)。 解譯字母符號的為終端表達式 (Terminal Expression) ，其他情況為非終端表達式 (NonTerminal Expression) 。 想法是使用非終端表達式時，表示還有字需要解譯。 實作非終端表達式 (NonTerminal Expression) 1234567891011121314151617181920212223242526272829303132333435&lt;?phpnamespace App\\InterpreterPattern\\MorseCode;use App\\InterpreterPattern\\MorseCode\\Contracts\\Expression;use App\\InterpreterPattern\\MorseCode\\Context;class NonTerminalExpression implements Expression&#123; public function interpret(Context $context): Context &#123; $head = &#x27; &#x27;; $context-&gt;text = trim($context-&gt;text); $this-&gt;execute($head); return $context; &#125; /** * @param string $message */ public function execute(string $message) &#123; echo &#x27; / &#x27;; &#125; /** * @param string $character * @return boolean */ public function isSpace($character) &#123; return $character == &#x27; &#x27;; &#125;&#125; 此處interpret()方法會將目前解譯到的詞句，去除前後空白。execute()方法則會印出斜槓 (&#x2F;)。 而isSpace()方法，會在待會的客戶端程式碼用到。 實作終端表達式 (Terminal Expression) 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111&lt;?phpnamespace App\\InterpreterPattern\\MorseCode;use App\\InterpreterPattern\\MorseCode\\Contracts\\Expression;use App\\InterpreterPattern\\MorseCode\\Context;use App\\InterpreterPattern\\MorseCode\\Exceptions\\UndefinedTextException;class TerminalExpression implements Expression&#123; protected $mapping = [ &#x27;a&#x27; =&gt; &#x27;.-&#x27;, &#x27;b&#x27; =&gt; &#x27;-...&#x27;, &#x27;c&#x27; =&gt; &#x27;-.-.&#x27;, &#x27;d&#x27; =&gt; &#x27;-..&#x27;, &#x27;e&#x27; =&gt; &#x27;.&#x27;, &#x27;f&#x27; =&gt; &#x27;..-.&#x27;, &#x27;g&#x27; =&gt; &#x27;--.&#x27;, &#x27;h&#x27; =&gt; &#x27;....&#x27;, &#x27;i&#x27; =&gt; &#x27;..&#x27;, &#x27;j&#x27; =&gt; &#x27;.---&#x27;, &#x27;k&#x27; =&gt; &#x27;-.-&#x27;, &#x27;l&#x27; =&gt; &#x27;.-..&#x27;, &#x27;m&#x27; =&gt; &#x27;--&#x27;, &#x27;n&#x27; =&gt; &#x27;-.&#x27;, &#x27;o&#x27; =&gt; &#x27;---&#x27;, &#x27;p&#x27; =&gt; &#x27;.--.&#x27;, &#x27;q&#x27; =&gt; &#x27;--.-&#x27;, &#x27;r&#x27; =&gt; &#x27;.-.&#x27;, &#x27;s&#x27; =&gt; &#x27;...&#x27;, &#x27;t&#x27; =&gt; &#x27;-&#x27;, &#x27;u&#x27; =&gt; &#x27;..-&#x27;, &#x27;v&#x27; =&gt; &#x27;...-&#x27;, &#x27;w&#x27; =&gt; &#x27;.--&#x27;, &#x27;x&#x27; =&gt; &#x27;-..-&#x27;, &#x27;y&#x27; =&gt; &#x27;-.--&#x27;, &#x27;z&#x27; =&gt; &#x27;--..&#x27;, &#x27;0&#x27; =&gt; &#x27;-----&#x27;, &#x27;1&#x27; =&gt; &#x27;.----&#x27;, &#x27;2&#x27; =&gt; &#x27;..---&#x27;, &#x27;3&#x27; =&gt; &#x27;...--&#x27;, &#x27;4&#x27; =&gt; &#x27;....-&#x27;, &#x27;5&#x27; =&gt; &#x27;.....&#x27;, &#x27;6&#x27; =&gt; &#x27;-....&#x27;, &#x27;7&#x27; =&gt; &#x27;--...&#x27;, &#x27;8&#x27; =&gt; &#x27;---..&#x27;, &#x27;9&#x27; =&gt; &#x27;----.&#x27;, &#x27;.&#x27; =&gt; &#x27;.-.-.-&#x27;, &#x27;,&#x27; =&gt; &#x27;--..--&#x27;, &#x27;?&#x27; =&gt; &#x27;..--..&#x27;, &#x27;/&#x27; =&gt; &#x27;-..-.&#x27;, &quot;&#x27;&quot; =&gt; &#x27;.----.&#x27;, &#x27;!&#x27; =&gt; &#x27;-.-.--&#x27;, ]; public function interpret(Context $context): Context &#123; $firstSpacePos = strpos($context-&gt;text, &#x27; &#x27;); if ($firstSpacePos) &#123; $head = substr($context-&gt;text, 0, $firstSpacePos); $context-&gt;text = substr($context-&gt;text, $firstSpacePos); &#125; else &#123; $head = $context-&gt;text; $context-&gt;text = &#x27;&#x27;; &#125; $this-&gt;execute($head); return $context; &#125; /** * @param string $message */ public function execute(string $message) &#123; $characters = str_split($message); $lastKey = array_key_last($characters); foreach ($characters as $key =&gt; $character) &#123; $this-&gt;encode($character); if ($key == $lastKey) &#123; break; &#125; $this-&gt;typeSpace(); &#125; &#125; /** * @param string $character */ private function encode(string $character) &#123; $character = strtolower($character); if (!array_key_exists($character, $this-&gt;mapping)) &#123; throw new UndefinedTextException(); &#125; echo $this-&gt;mapping[$character]; &#125; private function typeSpace() &#123; echo &#x27; &#x27;; &#125;&#125; 此處interpret()方法會找出要解譯的單字，並截斷它。execute()方法則會逐步印出單字中的每一個字母符號，彼此間以空格隔開。 實作客戶端的程式碼 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849&lt;?phpnamespace App\\InterpreterPattern\\MorseCode;use App\\InterpreterPattern\\MorseCode\\NonTerminalExpression;use App\\InterpreterPattern\\MorseCode\\TerminalExpression;use App\\InterpreterPattern\\MorseCode\\Context;class Program&#123; /** * @var TerminalExpression */ protected $terminalExpression; /** * @var NonTerminalExpression */ protected $nonTerminalExpression; public function __construct() &#123; $this-&gt;terminalExpression = new TerminalExpression(); $this-&gt;nonTerminalExpression = new NonTerminalExpression(); &#125; /** * @param string $text */ public function encode(string $text) &#123; try &#123; $context = new Context(trim($text)); while (strlen($context-&gt;text) &gt; 0) &#123; $firstCharacter = substr($context-&gt;text, 0, 1); if ($this-&gt;nonTerminalExpression-&gt;isSpace($firstCharacter)) &#123; $context = $this-&gt;nonTerminalExpression-&gt;interpret($context); continue; &#125; $context = $this-&gt;terminalExpression-&gt;interpret($context); &#125; &#125; catch (\\Throwable $th) &#123; throw $th; &#125; &#125;&#125; 最後讓我們來看客戶端程式碼怎麼跑吧！ 以Hello World為例： 首先會將Hello World轉成語境類別 (Context) 。 終端表達式 (Terminal Expression) 會截取出Hello這個單字，印出它的摩斯電碼。 非終端表達式 (NonTerminal Expression) 則會去除空白，印出斜槓 (&#x2F;)。 終端表達式 (Terminal Expression) 會截取出World這個單字，印出它的摩斯電碼。 客戶端程式碼判斷解譯完成，結束迴圈。 [單一職責原則]語境類別 (Context) ：負責乘載要解譯的詞句。非終端表達式 (NonTerminal Expression) ：負責連結解譯單字間的文法。終端表達式 (Terminal Expression) ：負責解譯每一個字母符號。 [開放封閉原則]增加要轉譯的字母符號時，僅需修改終端表達式 (Terminal Expression)。 [依賴反轉原則]透過表達式 (Expression) 接口，確保各個表達式都有interpret()方法與execute()方法。 現實中幾乎沒有機會使用到的設計模式，範例想了很多天，希望這樣有傳達出這個模式的精神！ 另外這個範例還沒有完成decode()方法，也就是從摩斯電碼轉回一般句子。 之後有時間會試著實作看看。 ʕ •ᴥ•ʔ：目前心目中前三難的設計模式。","categories":[{"name":"Clean Code","slug":"Clean-Code","permalink":"https://yncbearz.github.io/categories/Clean-Code/"}],"tags":[{"name":"Example","slug":"Example","permalink":"https://yncbearz.github.io/tags/Example/"}]},{"title":"解譯器模式","slug":"Interpreter-Pattern","date":"2020-11-04T09:53:00.000Z","updated":"2025-05-30T08:15:23.246Z","comments":true,"path":"2020/11/04/Interpreter-Pattern/","permalink":"https://yncbearz.github.io/2020/11/04/Interpreter-Pattern/","excerpt":"Interpreter-Pattern","text":"Interpreter Pattern給定一個語言，定義它的語法表示與文法。利用不同的表達式來翻譯語言中的句子。Example: 摩斯電碼 解譯器模式會將類別分為兩類：分別是語境類別 (Context) 與 表達式類別 (Expression) 。 其中語境類別為待翻譯的資料。透過客戶端依序呼叫不同的表達式類別來完成翻譯。 通常一種文法（規則）會對應一個表達式。 \b語言通常會是領域特定語言 (Domain Specific Language) ，即專注於某個應用程式領域的計算機語言。 （例如：SQL, HTML, Regular Expressions） 優點：用來定義簡單語言的文法，使它們可以被翻譯。 缺點：程式碼複雜度提高。當文法變得複雜時，難以維護。 ʕ •ᴥ•ʔ：程式界的翻譯蒟蒻！","categories":[{"name":"Clean Code","slug":"Clean-Code","permalink":"https://yncbearz.github.io/categories/Clean-Code/"}],"tags":[{"name":"Design Pattern","slug":"Design-Pattern","permalink":"https://yncbearz.github.io/tags/Design-Pattern/"}]},{"title":"類別圖：文字積木 （蠅量模式）","slug":"Class-Diagram-Blocks-Flyweight-Pattern","date":"2020-11-02T13:24:10.000Z","updated":"2025-07-30T11:32:57.043Z","comments":true,"path":"2020/11/02/Class-Diagram-Blocks-Flyweight-Pattern/","permalink":"https://yncbearz.github.io/2020/11/02/Class-Diagram-Blocks-Flyweight-Pattern/","excerpt":"Class-Diagram-Blocks-Flyweight-Pattern","text":"Example: 文字積木 123456789101112131415161718192021222324252627282930313233343536@startumlinterface Block&#123; + getShape(): string + display(string word): string&#125;class ConcreteBlock&#123; # shape: string + __construct(string shape) + getShape(): string + display(string word): string&#125;Block &lt;|- ConcreteBlockclass BlockFactory&#123; # blocks: Block[] + getBlock(string shape): Block&#125;Block &lt;-- BlockFactoryclass Program&#123; + getBlocks(): array&#125;BlockFactory &lt;-- Program@enduml ʕ •ᴥ•ʔ：若不熟悉 UML 類別圖，可參考UML類別圖說明。","categories":[{"name":"Clean Code","slug":"Clean-Code","permalink":"https://yncbearz.github.io/categories/Clean-Code/"}],"tags":[{"name":"Design Pattern","slug":"Design-Pattern","permalink":"https://yncbearz.github.io/tags/Design-Pattern/"}]},{"title":"範例：文字積木 （蠅量模式）","slug":"Example-Blocks-Flyweight-Pattern","date":"2020-11-01T16:14:55.000Z","updated":"2025-05-30T08:15:23.232Z","comments":true,"path":"2020/11/02/Example-Blocks-Flyweight-Pattern/","permalink":"https://yncbearz.github.io/2020/11/02/Example-Blocks-Flyweight-Pattern/","excerpt":"Example-Blocks-Flyweight-Pattern","text":"Pattern: 蠅量模式 Class Diagram: 文字積木 情境：這是公司生產的文字積木 12345678910111213141516171819202122232425262728293031323334353637383940414243&lt;?phpnamespace App\\Flyweight\\Blocks;class ConcreteBlock&#123; /** * @var string */ protected $shape; /** * @var string */ public $word; /** * @param string $shape * @param string $word */ public function __construct(string $shape, string $word) &#123; $this-&gt;shape = $shape; $this-&gt;word = $word; &#125; /** * @return string */ public function getShape(): string &#123; return $this-&gt;shape; &#125; /** * @return string */ public function getWord(): string &#123; return $this-&gt;word; &#125;&#125; 客戶端的使用方式 1234567891011121314151617181920212223namespace App\\Flyweight\\Blocks;&lt;?phpnamespace App\\Flyweight\\Blocks;use App\\Flyweight\\Blocks\\ConcreteBlock;class Program&#123; /** * @return array */ public function getBlocks(): array &#123; $firstBlock = new ConcreteBlock(&#x27;star&#x27;, &#x27;B&#x27;); $secondBlock = new ConcreteBlock(&#x27;square&#x27;, &#x27;E&#x27;); $thirdBlock = new ConcreteBlock(&#x27;square&#x27;, &#x27;A&#x27;); $fourthBlock = new ConcreteBlock(&#x27;square&#x27;, &#x27;R&#x27;); return [$firstBlock, $secondBlock, $thirdBlock, $fourthBlock]; &#125;&#125; 隨著積木越賣越好，我們會創建出許多Block，它們要顯示的文字各不相同，但形狀大概就那幾種。 我們決定改變積木的實作，不紀錄顯示文字於積木的狀態中。抽離出共用的形狀部分，來節省記憶體的消耗。 首先定義抽象的積木介面 123456789&lt;?phpnamespace App\\Flyweight\\Blocks\\Contracts;interface Block&#123; public function getShape(); public function display(string $word): string;&#125; 之後我們要顯示文字時，會使用display()方法。 接著定義實體積木 1234567891011121314151617181920212223242526272829303132333435363738&lt;?phpnamespace App\\Flyweight\\Blocks;use App\\Flyweight\\Blocks\\Contracts\\Block;class ConcreteBlock implements Block&#123; /** * @var string */ protected $shape; /** * @param string $shape */ public function __construct(string $shape) &#123; $this-&gt;shape = $shape; &#125; /** * @return string */ public function getShape(): string &#123; return $this-&gt;shape; &#125; /** * @param string $word * @return string */ public function display(string $word): string &#123; return $word; &#125;&#125; 實作積木工廠，採用單例模式來共享 123456789101112131415161718192021222324252627&lt;?phpnamespace App\\Flyweight\\Blocks;use App\\Flyweight\\Blocks\\ConcreteBlock;use App\\Flyweight\\Blocks\\Contracts\\Block;class BlockFactory&#123; /** * @var Block[] */ protected $blocks; /** * @param string $shape * @return ConcreteBlock */ public function getBlock(string $shape): Block &#123; if (!isset($this-&gt;blocks[$shape])) &#123; $this-&gt;blocks[$shape] = new ConcreteBlock($shape); &#125; return $this-&gt;blocks[$shape]; &#125;&#125; 最後修改客戶端的使用方式 12345678910111213141516171819202122232425262728293031&lt;?phpnamespace App\\Flyweight\\Blocks;use App\\Flyweight\\Blocks\\Block;class Program&#123; /** * @return array */ public function getBlocks(): array &#123; $blockFactory = new BlockFactory(); $firstBlock = $blockFactory-&gt;getBlock(&#x27;star&#x27;); // $firstBlock-&gt;display(&#x27;B&#x27;); $secondBlock = $blockFactory-&gt;getBlock(&#x27;square&#x27;); // $secondBlock-&gt;display(&#x27;E&#x27;); $thirdBlock = $blockFactory-&gt;getBlock(&#x27;square&#x27;); // $thirdBlock-&gt;display(&#x27;A&#x27;); $fourthBlock = $blockFactory-&gt;getBlock(&#x27;square&#x27;); // $fourthBlock-&gt;display(&#x27;R&#x27;); return [$firstBlock, $secondBlock, $thirdBlock, $fourthBlock]; &#125;&#125; 當客戶端要顯示文字時，再呼叫display()方法。 [單一職責原則]我們將管理內部狀態與管理外部狀態，視為兩種不同的職責。 透過區分兩者，我們便可以用簡單工廠模式搭配單例模式，切出細粒度的物件，來共用相同的程式碼。 其蠅量類別只紀錄內部狀態且創建後便不會改變。 [開放封閉原則]透過工廠，我們可以修改積木本身的實作（例如換廠牌），而不影響客戶端。當客戶端修改外部狀態時，也不影響原本純內部狀態的積木。 [依賴反轉原則]工廠依賴於抽象的積木介面。實體積木實作了抽象的積木介面。 ʕ •ᴥ•ʔ：原來共享經濟是用了蠅量模式的概念啊。","categories":[{"name":"Clean Code","slug":"Clean-Code","permalink":"https://yncbearz.github.io/categories/Clean-Code/"}],"tags":[{"name":"Example","slug":"Example","permalink":"https://yncbearz.github.io/tags/Example/"}]},{"title":"蠅量模式","slug":"Flyweight-Pattern","date":"2020-11-01T16:09:33.000Z","updated":"2025-05-30T08:15:23.242Z","comments":true,"path":"2020/11/02/Flyweight-Pattern/","permalink":"https://yncbearz.github.io/2020/11/02/Flyweight-Pattern/","excerpt":"Flyweight-Pattern","text":"Flyweight Pattern又稱為享元模式，於相似物件中共享儘可能多的資訊，進而減少記憶體使用量。Example: 文字積木 蠅量模式會將類別分為兩類：分別是工廠類別 (Factory) 與 蠅量類別 (Flyweight) 。 透過區分出程式碼的內部狀態與外部狀態，來找出可以共用的程式碼。 將它抽離成蠅量類別，其狀態是不可變的 (immutable) 。 優點：當擁有許多相似物件時，可節省大量記憶體。 缺點：程式碼複雜度提高。 與其他模式的比較：[單例模式]：兩者的精神皆是透過共用已創建的實例，來節省資源。但蠅量模式的實例狀態是不可變的。 ʕ •ᴥ•ʔ：工廠模式與單例模式的聯合應用技。","categories":[{"name":"Clean Code","slug":"Clean-Code","permalink":"https://yncbearz.github.io/categories/Clean-Code/"}],"tags":[{"name":"Design Pattern","slug":"Design-Pattern","permalink":"https://yncbearz.github.io/tags/Design-Pattern/"}]},{"title":"類別圖：仿真Git （備忘錄模式）","slug":"Class-Diagram-Git-Memento-Pattern","date":"2020-10-26T15:36:16.000Z","updated":"2025-07-30T11:30:13.168Z","comments":true,"path":"2020/10/26/Class-Diagram-Git-Memento-Pattern/","permalink":"https://yncbearz.github.io/2020/10/26/Class-Diagram-Git-Memento-Pattern/","excerpt":"Class-Diagram-Git-Memento-Pattern","text":"Example: 仿真Git 123456789101112131415161718192021222324252627282930313233343536373839404142434445@startumlclass Commit&#123; - code + __construct(string code) + getCode(): string&#125;class Folder&#123; - commits + saveCommit(Commit commit) + getPreviousCommit(int previous): Commit&#125;Commit -o Folderclass Git&#123; # folder - code + __construct(Folder folder) + getUntrackedCode(): string + writeCode(string code) + commit() - createCommit(): Commit + reset(int previous): string&#125;class Program&#123; + run()&#125;Git &lt;- ProgramFolder &lt;- ProgramFolder &lt;-- GitCommit &lt;-- Git@enduml ʕ •ᴥ•ʔ：若不熟悉 UML 類別圖，可參考UML類別圖說明。","categories":[{"name":"Clean Code","slug":"Clean-Code","permalink":"https://yncbearz.github.io/categories/Clean-Code/"}],"tags":[{"name":"Design Pattern","slug":"Design-Pattern","permalink":"https://yncbearz.github.io/tags/Design-Pattern/"}]},{"title":"範例：仿真Git （備忘錄模式）","slug":"Example-Git-Memento-Pattern","date":"2020-10-25T01:06:43.000Z","updated":"2025-05-30T08:15:23.235Z","comments":true,"path":"2020/10/25/Example-Git-Memento-Pattern/","permalink":"https://yncbearz.github.io/2020/10/25/Example-Git-Memento-Pattern/","excerpt":"Example-Git-Memento-Pattern","text":"Pattern: 備忘錄模式 Class Diagram: 仿真Git 情境：讓我們利用備忘錄模式，實作一個仿真Git 首先定義Commit 1234567891011121314151617181920212223242526&lt;?phpnamespace App\\MementoPattern\\Git;/** * This is our Memento in memento pattern */class Commit&#123; /** * This is our state. * * @var string */ private $code; public function __construct(string $code) &#123; $this-&gt;code = $code; &#125; public function getCode(): string &#123; return $this-&gt;code; &#125;&#125; Commit屬於備忘錄類別 (Memento) ，負責儲存原始類別 (Originator) 的狀態。 在這個範例中，code就是我們的狀態。 接著定義Folder 12345678910111213141516171819202122232425262728293031323334353637&lt;?phpnamespace App\\MementoPattern\\Git;use App\\MementoPattern\\Git\\Commit;/** * This is our CareTaker in memento pattern */class Folder&#123; /** * @var Commit[] */ private $commits = []; /** * @param Commit $commit */ public function saveCommit(Commit $commit) &#123; $this-&gt;commits[] = $commit; &#125; /** * @param int $previous * @return Commit */ public function getPreviousCommit(int $previous): Commit &#123; $commitAmount = count($this-&gt;commits); $index = $commitAmount - $previous; $result = $this-&gt;commits[$index]; return $result; &#125;&#125; Folder屬於管理類別 (Caretaker) ，負責管理Commit的存儲。 接著是我們的Git類別 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859606162636465666768697071727374&lt;?phpnamespace App\\MementoPattern\\Git;use App\\MementoPattern\\Git\\Commit;use App\\MementoPattern\\Git\\Folder;/** * This is our Originator in memento pattern */class Git&#123; /** * @var Folder */ protected $folder; /** * This is our state. * * @var string */ private $code; /** * @param Folder $folder */ public function __construct(Folder $folder) &#123; $this-&gt;folder = $folder; &#125; /** * Getter * * @return string */ public function getUntrackedCode(): string &#123; return $this-&gt;code; &#125; /** * Setter * * @var string */ public function writeCode(string $code) &#123; $this-&gt;code = $code; &#125; public function commit() &#123; $commit = $this-&gt;createCommit(); $this-&gt;code = &#x27;&#x27;; $this-&gt;folder-&gt;saveCommit($commit); &#125; private function createCommit(): Commit &#123; return new Commit($this-&gt;code); &#125; /** * @param int $previous * @return string */ public function reset(int $previous): string &#123; return $this-&gt;code = $this-&gt;folder-&gt;getPreviousCommit($previous)-&gt;getCode(); &#125;&#125; Git屬於我們的原始類別 (Originator) ，具有code狀態。 getUntrackedCode()及writeCode()是我們code狀態的Getter&#x2F;Setter。 透過commit()方法，生成Commit，保存了當下code的狀態，並傳給Folder作為紀錄存檔。 透過reset()方法，我們可以載入先前存檔好的code狀態。 最後讓我們看客戶端的程式碼 123456789101112131415161718192021222324252627&lt;?phpnamespace App\\MementoPattern\\Git;use App\\MementoPattern\\Git\\Folder;use App\\MementoPattern\\Git\\Git;class Program&#123; public function run() &#123; $folder = new Folder(); $git = new Git($folder); $git-&gt;writeCode(&#x27;aaa&#x27;); dump($git-&gt;getUntrackedCode()); //aaa $git-&gt;commit(); dump($git-&gt;getUntrackedCode()); //&#x27;&#x27; $git-&gt;writeCode(&#x27;bbb&#x27;); $git-&gt;commit(); $git-&gt;reset(1); dump($git-&gt;getUntrackedCode()); //aaa &#125;&#125; [單一職責原則]我們將原始類別、備忘錄類別與管理類別視為三種職責。 [開放封閉原則]透過備忘錄類別與管理類別，原始類別不需要實作恢復狀態的相關功能。 ʕ •ᴥ•ʔ：這個範例只是利用Git作為媒介，與真實Git行為不完全相同。","categories":[{"name":"Clean Code","slug":"Clean-Code","permalink":"https://yncbearz.github.io/categories/Clean-Code/"}],"tags":[{"name":"Example","slug":"Example","permalink":"https://yncbearz.github.io/tags/Example/"}]},{"title":"備忘錄模式","slug":"Memento-Pattern","date":"2020-10-25T00:50:18.000Z","updated":"2025-05-30T08:15:23.250Z","comments":true,"path":"2020/10/25/Memento-Pattern/","permalink":"https://yncbearz.github.io/2020/10/25/Memento-Pattern/","excerpt":"Memento-Pattern","text":"Memento Pattern透過對象外的存檔，讓對象能夠載入之前的狀態。Example: 仿真Git 備忘錄模式會將類別分成三類：分別是原始類別 (Originator) 、 備忘錄類別 (Memento) 與 管理類別 (Caretaker) 。 原始類別為具有內部狀態的標的。備忘錄類別為儲存的原始類別，擁有當時的內部狀態。管理類別負責備忘錄類別的存儲，並留下歷史紀錄。 優點：可以在不破壞封裝性的情況下，保存物件的狀態。可以藉由管理類別，輕易地恢復先前原始類別的狀態。 缺點：當備忘錄類別過多時，會佔用大量的內存。 與其他模式的比較：[命令模式]：命令模式的層級為一道道的不同的命令。備忘錄模式的層級則為原始類別的狀態。 [原型模式]：\b原型模式相當類似備忘錄模式，但缺少了存儲的管理類別。 ʕ •ᴥ•ʔ：玩過RPG遊戲就會理解的模式。","categories":[{"name":"Clean Code","slug":"Clean-Code","permalink":"https://yncbearz.github.io/categories/Clean-Code/"}],"tags":[{"name":"Design Pattern","slug":"Design-Pattern","permalink":"https://yncbearz.github.io/tags/Design-Pattern/"}]},{"title":"類別圖：假期規劃 （建造者模式）","slug":"Class-Diagram-Vacation-Builder-Pattern","date":"2020-10-17T07:51:28.000Z","updated":"2025-07-30T11:30:13.324Z","comments":true,"path":"2020/10/17/Class-Diagram-Vacation-Builder-Pattern/","permalink":"https://yncbearz.github.io/2020/10/17/Class-Diagram-Vacation-Builder-Pattern/","excerpt":"Class-Diagram-Vacation-Builder-Pattern","text":"Example: 假期規劃 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455@startumlclass Itinerary&#123; # from: string # to: string # day: int # hotel: string # transport: string + __set(name, value) + __get(name): string | int + toArray(): array&#125;interface ItineraryPlanable&#123; + from(string from): self + to(string to): self + spendDays(int days): self + stayAt(string hotel): self + travelBy(string transport): self + getItinerary(): Itinerary&#125;class ItineraryBuilder&#123; # itinerary: Itinerary + __construct()&#125;ItineraryPlanable &lt;|.. ItineraryBuilderItineraryBuilder -&gt; Itineraryclass TravelAgency&#123; # itineraryBuilder: ItineraryPlanable + __construct(ItineraryPlanable itineraryBuilder) + getHighSpeedRailItinerary(): array + getFiveDaysTokyoItinerary(): array&#125;TravelAgency -&gt; ItineraryPlanableclass Program&#123; + getDomesticTravel(): array + getInternationalTravel(): array&#125;Program --&gt; TravelAgency@enduml ʕ •ᴥ•ʔ：若不熟悉 UML 類別圖，可參考UML類別圖說明。","categories":[{"name":"Clean Code","slug":"Clean-Code","permalink":"https://yncbearz.github.io/categories/Clean-Code/"}],"tags":[{"name":"Design Pattern","slug":"Design-Pattern","permalink":"https://yncbearz.github.io/tags/Design-Pattern/"}]},{"title":"範例：假期規劃 （建造者模式）","slug":"Example-Vacation-Builder-Pattern","date":"2020-10-17T07:51:04.000Z","updated":"2025-05-30T08:15:23.240Z","comments":true,"path":"2020/10/17/Example-Vacation-Builder-Pattern/","permalink":"https://yncbearz.github.io/2020/10/17/Example-Vacation-Builder-Pattern/","excerpt":"Example-Vacation-Builder-Pattern","text":"Pattern: 建造者模式 Class Diagram: 假期規劃 \b情境：目前提供旅遊行程的方式 12345678910111213141516171819202122232425262728293031323334353637&lt;?phpnamespace App\\BuilderPattern\\Vacation;class Program&#123; /** * @return array */ public function getDomesticTravel() &#123; //高速鐵路一日體驗 return [ &#x27;from&#x27; =&gt; &#x27;Kaohsiung&#x27;, &#x27;to&#x27; =&gt; &#x27;Taipei&#x27;, &#x27;day&#x27; =&gt; 1, &#x27;transport&#x27; =&gt; &#x27;High Speed Rail&#x27; ]; &#125; /** * @return array */ public function getInternationalTravel() &#123; //東京五日遊 return [ &#x27;from&#x27; =&gt; &#x27;Kaohsiung&#x27;, &#x27;to&#x27; =&gt; &#x27;Tokyo&#x27;, &#x27;day&#x27; =&gt; 5, &#x27;transport&#x27; =&gt; &#x27;Airplane&#x27;, &#x27;hotel&#x27; =&gt; &#x27;Disney Hotel&#x27; ]; &#125;&#125; 老闆希望我們能提供更簡便的方式，來規劃不同的旅遊行程。讓我們用建造者模式改造它。 需求一：實作旅遊行程 （產品類別） 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859606162636465&lt;?phpnamespace App\\BuilderPattern\\Vacation;class Itinerary&#123; /** * @var string */ protected $from; /** * @var string */ protected $to; /** * @var int */ protected $day; /** * @var string */ protected $hotel; /** * @var string */ protected $transport; /** * @param string $name * @param string|int $value */ public function __set($name, $value) &#123; $this-&gt;$name = $value; &#125; /** * @param string $name * @return string|int */ public function __get($name) &#123; return $this-&gt;$name; &#125; /** * @return array */ public function toArray() &#123; $result = get_object_vars($this); foreach ($result as $name =&gt; $value) &#123; if (is_null($value)) &#123; unset($result[$name]); &#125; &#125; return $result; &#125;&#125; 主要都是getter與setter方法。當行程規劃好時，我們會透過toArray() 方法來輸出。 需求二：實作行程建造者 （建造者類別） 定義行程規劃介面 123456789101112131415161718192021&lt;?phpnamespace App\\BuilderPattern\\Vacation\\Contracts;use App\\BuilderPattern\\Vacation\\Itinerary;interface ItineraryPlanable&#123; public function from(string $from): self; public function to(string $to): self; public function spendDays(int $day): self; public function stayAt(string $hotel): self; public function travelBy(string $transport): self; public function getItinerary(): Itinerary;&#125; 實作行程建造者 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859606162636465666768697071727374757677&lt;?phpnamespace App\\BuilderPattern\\Vacation;use App\\BuilderPattern\\Vacation\\Itinerary;use App\\BuilderPattern\\Vacation\\Contracts\\ItineraryPlanable;class ItineraryBuilder implements ItineraryPlanable&#123; /** * @var Itinerary */ protected $itinerary; public function __construct() &#123; $this-&gt;itinerary = new Itinerary(); &#125; /** * @param string $from * @return self */ public function from(string $from): self &#123; $this-&gt;itinerary-&gt;from = $from; return $this; &#125; /** * @param string $to * @return self */ public function to(string $to): self &#123; $this-&gt;itinerary-&gt;to = $to; return $this; &#125; /** * @param integer $day * @return self */ public function spendDays(int $day): self &#123; $this-&gt;itinerary-&gt;day = $day; return $this; &#125; /** * @param string $hotel * @return self */ public function stayAt(string $hotel): self &#123; $this-&gt;itinerary-&gt;hotel = $hotel; return $this; &#125; /** * @param string $transport * @return self */ public function travelBy(string $transport): self &#123; $this-&gt;itinerary-&gt;transport = $transport; return $this; &#125; /** * @return Itinerary */ public function getItinerary(): Itinerary &#123; return $this-&gt;itinerary; &#125;&#125; 行程建造者用了流式接口 (Fluent Interface) ，來增加程式碼可讀性。我們待會會在指揮者類別中展示。 （註：此處也可以實作多個不同的行程建造者，來固定某些行程選項） 需求三：實作旅行社（指揮者類別） 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849&lt;?phpnamespace App\\BuilderPattern\\Vacation;use App\\BuilderPattern\\Vacation\\Contracts\\ItineraryPlanable;class TravelAgency&#123; /** * @var ItineraryPlanable */ protected $itineraryBuilder; public function __construct(ItineraryPlanable $itineraryBuilder) &#123; $this-&gt;itineraryBuilder = $itineraryBuilder; &#125; /** * @return array */ public function getHighSpeedRailItinerary() &#123; $itinerary = $this-&gt;itineraryBuilder -&gt;from(&#x27;Kaohsiung&#x27;) -&gt;to(&#x27;Taipei&#x27;) -&gt;travelBy(&#x27;High Speed Rail&#x27;) -&gt;spendDays(1) -&gt;getItinerary(); return $itinerary-&gt;toArray(); &#125; /** * @return array */ public function getFiveDaysTokyoItinerary() &#123; $itinerary = $this-&gt;itineraryBuilder -&gt;from(&#x27;Kaohsiung&#x27;) -&gt;to(&#x27;Tokyo&#x27;) -&gt;travelBy(&#x27;Airplane&#x27;) -&gt;spendDays(5) -&gt;stayAt(&#x27;Disney Hotel&#x27;) -&gt;getItinerary(); return $itinerary-&gt;toArray(); &#125;&#125; 透過旅行社 （指揮者類別），我們封裝了行程的實作。使得客戶端不用知道行程的建造過程。 最後修改原本的程式碼 1234567891011121314151617181920212223242526272829303132&lt;?phpnamespace App\\BuilderPattern\\Vacation;use App\\BuilderPattern\\Vacation\\TravelAgency;use App\\BuilderPattern\\Vacation\\ItineraryBuilder;class Program&#123; /** * @return array */ public function getDomesticTravel() &#123; //高速鐵路一日體驗 $itineraryBuilder = new ItineraryBuilder(); $travelAgency = new TravelAgency($itineraryBuilder); return $travelAgency-&gt;getHighSpeedRailItinerary(); &#125; /** * @return array */ public function getInternationalTravel() &#123; //東京五日遊 $itineraryBuilder = new ItineraryBuilder(); $travelAgency = new TravelAgency($itineraryBuilder); return $travelAgency-&gt;getFiveDaysTokyoItinerary(); &#125;&#125; [單一職責原則]我們將指揮者類別、建造者類別與產品類別，視為三種不同的職責。由旅行社指揮行程建造者來構建行程。 [開放封閉原則]當新增&#x2F;修改行程時，我們只要調整指揮者類別。當新增&#x2F;修改行程內部的邏輯時，我們僅需修改產品類別。 [依賴反轉原則]指揮者類別依賴於抽象的建造者介面。建造者類別實作抽象的建造者介面。 ʕ •ᴥ•ʔ：核心精神在於分離建造過程與產品本身的邏輯。","categories":[{"name":"Clean Code","slug":"Clean-Code","permalink":"https://yncbearz.github.io/categories/Clean-Code/"}],"tags":[{"name":"Example","slug":"Example","permalink":"https://yncbearz.github.io/tags/Example/"}]},{"title":"建造者模式","slug":"Builder-Pattern","date":"2020-10-17T07:48:51.000Z","updated":"2025-05-30T08:15:23.216Z","comments":true,"path":"2020/10/17/Builder-Pattern/","permalink":"https://yncbearz.github.io/2020/10/17/Builder-Pattern/","excerpt":"Builder-Pattern","text":"Builder Pattern將複雜對象的構建與其表示分離。Example: 假期規劃 建造者模式會將類別分為三類：分別是指揮者類別 (Director)、建造者類別 (Builder) 與 產品類別 (Product) 。 通常會透過指揮者來決定建造過程。有時侯會省略指揮者，改由客戶端直接決定建造過程。 優點：可以按步驟，一步步地創建出物件。將創建物件的邏輯與物件本身的邏輯分離。 缺點：會使程式碼變得複雜。 與其他模式的比較：[工廠方法模式]：工廠方法模式中，不同分類的產品都有了對應的工廠。每個不同的選擇都是物件層級。 建造者模式中，分離了建造者與產品。每個不同的選擇都是步驟層級。 而建造者模式常常會搭配流式接口 (Fluent Interface) 的寫作風格。流式接口通常依賴於方法鏈 (Method Chaining) 。 藉由每個方法都回傳物件本身，來增加程式的可讀性。 ʕ •ᴥ•ʔ：Laravel 中的 query builder ，用的就是建造者模式的概念。","categories":[{"name":"Clean Code","slug":"Clean-Code","permalink":"https://yncbearz.github.io/categories/Clean-Code/"}],"tags":[{"name":"Design Pattern","slug":"Design-Pattern","permalink":"https://yncbearz.github.io/tags/Design-Pattern/"}]},{"title":"類別圖：三隻小豬 （原型模式）","slug":"Class-Diagram-Three-Little-Pigs-Prototype-Pattern","date":"2020-10-11T14:38:30.000Z","updated":"2025-07-30T11:30:13.272Z","comments":true,"path":"2020/10/11/Class-Diagram-Three-Little-Pigs-Prototype-Pattern/","permalink":"https://yncbearz.github.io/2020/10/11/Class-Diagram-Three-Little-Pigs-Prototype-Pattern/","excerpt":"Class-Diagram-Three-Little-Pigs-Prototype-Pattern","text":"Example: 三隻小豬 123456789101112131415161718192021222324252627@startuml Example-Three-Little-Pigs-Prototype-Patternclass Wall&#123; + material: string + __construct(string material)&#125;class Building&#123; + name: string + wall: Wall + __construct(Wall wall, string name)&#125;class Program&#123; + run()&#125;Building-&gt;WallProgram--&gt;BuildingProgram--&gt;Wall@enduml ʕ •ᴥ•ʔ：若不熟悉 UML 類別圖，可參考UML類別圖說明。","categories":[{"name":"Clean Code","slug":"Clean-Code","permalink":"https://yncbearz.github.io/categories/Clean-Code/"}],"tags":[{"name":"Design Pattern","slug":"Design-Pattern","permalink":"https://yncbearz.github.io/tags/Design-Pattern/"}]},{"title":"範例：三隻小豬 （原型模式）","slug":"Example-Three-Little-Pigs-Prototype-Pattern","date":"2020-10-11T14:38:14.000Z","updated":"2025-05-30T08:15:23.239Z","comments":true,"path":"2020/10/11/Example-Three-Little-Pigs-Prototype-Pattern/","permalink":"https://yncbearz.github.io/2020/10/11/Example-Three-Little-Pigs-Prototype-Pattern/","excerpt":"Example-Three-Little-Pigs-Prototype-Pattern","text":"Pattern: 原型模式 Class Diagram: 三隻小豬 情境：三隻小豬想要蓋房子 首先是牆壁，可以選擇不同的建材 1234567891011121314151617&lt;?phpnamespace App\\PrototypePattern\\Building;class Wall&#123; /** * @var string */ public $material; public function __construct(string $material) &#123; $this-&gt;material = $material; &#125;&#125; 接著是房子 1234567891011121314151617181920212223242526272829&lt;?phpnamespace App\\PrototypePattern\\Building;use App\\PrototypePattern\\Building\\Wall;class Building&#123; /** * @var string */ public $name; /** * @var Wall */ public $wall; /** * @param Wall $wall * @param string $name */ public function __construct(Wall $wall, string $name = &#x27;unnamed&#x27;) &#123; $this-&gt;wall = $wall; $this-&gt;name = $name; &#125;&#125; 接著豬大哥用 稻草 (straw) ，蓋了間稻草屋 12345678910111213141516171819202122&lt;?phpnamespace App\\PrototypePattern\\Building;use App\\PrototypePattern\\Building\\Building;use App\\PrototypePattern\\Building\\Wall;class Program&#123; /** * @return array */ public function run() &#123; //firstBuilding $strawWall = new Wall(&#x27;straw&#x27;); $firstBuilding = new Building($strawWall, &#x27;oldestPigHouse&#x27;); dump($firstBuilding-&gt;name); // oldestPigHouse dump($firstBuilding-&gt;wall-&gt;material); // straw &#125;&#125; 完成後，豬大哥很得意自己對房子的設計，詢問弟弟們要不要直接拷貝一間。 需求一：拷貝豬大哥的稻草屋 兩個弟弟想了想，拷貝大哥的房子，好像是個省事的方法，但二弟想用木材 (wood)，三弟想用磚塊 (bricks) 來蓋房子。 決定拷貝稻草屋的弟弟們 1234567891011121314151617181920212223242526272829303132333435363738394041424344&lt;?phpnamespace App\\PrototypePattern\\Building;use App\\PrototypePattern\\Building\\Building;use App\\PrototypePattern\\Building\\Wall;class Program&#123; /** * @return array */ public function run() &#123; //firstBuilding $strawWall = new Wall(&#x27;straw&#x27;); $firstBuilding = new Building($strawWall, &#x27;oldestPigHouse&#x27;); //secondBuilding $secondBuilding = clone $firstBuilding; $secondBuilding-&gt;name = &#x27;middlePigHouse&#x27;; $secondBuilding-&gt;wall-&gt;material = &#x27;wood&#x27;; //thirdBuilding $thirdBuilding = clone $firstBuilding; $thirdBuilding-&gt;name = &#x27;youngestPigHouse&#x27;; $thirdBuilding-&gt;wall-&gt;material = &#x27;bricks&#x27;; dump($firstBuilding-&gt;name); // oldestPigHouse dump($firstBuilding-&gt;wall-&gt;material); // bricks dump($secondBuilding-&gt;name); // middlePigHouse dump($secondBuilding-&gt;wall-&gt;material); // bricks dump($thirdBuilding-&gt;name); // youngestPigHouse dump($thirdBuilding-&gt;wall-&gt;material); // bricks return [ &#x27;firstBuilding&#x27; =&gt; $firstBuilding, &#x27;secondBuilding&#x27; =&gt; $secondBuilding, &#x27;thirdBuilding&#x27; =&gt; $thirdBuilding ]; &#125;&#125; 這時發生了件很尷尬的事情，當豬二哥選用木材當建材時，大哥的稻草屋就變成木頭屋了…而豬小弟選用磚塊當建材時，兩個哥哥們的房子就變成磚頭屋了… 導演表示，這樣故事沒辦法進行下去，請我們修改一下。 需求二：讓弟弟們對建材的修改，不會影響到哥哥 修改Building中的clone()方法，讓拷貝時能重新創建牆壁 123456789101112131415161718192021222324252627282930313233&lt;?phpnamespace App\\PrototypePattern\\Building;use App\\PrototypePattern\\Building\\Wall;class Building&#123; /** * @var string */ public $name; /** * @var Wall */ public $wall; /** * @param Wall $wall * @param string $name */ public function __construct(Wall $wall, string $name = &#x27;unnamed&#x27;) &#123; $this-&gt;wall = $wall; $this-&gt;name = $name; &#125; public function __clone() &#123; $this-&gt;wall = clone $this-&gt;wall; &#125;&#125; 不用修改原本的程式碼 123456789101112131415161718192021222324252627282930313233343536373839404142434445&lt;?phpnamespace App\\PrototypePattern\\Building;use App\\PrototypePattern\\Building\\Building;use App\\PrototypePattern\\Building\\Wall;class Program&#123; /** * @return array */ public function run() &#123; //firstBuilding $strawWall = new Wall(&#x27;straw&#x27;); $firstBuilding = new Building($strawWall, &#x27;oldestPigHouse&#x27;); //secondBuilding $secondBuilding = clone $firstBuilding; $secondBuilding-&gt;name = &#x27;middlePigHouse&#x27;; $secondBuilding-&gt;wall-&gt;material = &#x27;wood&#x27;; //thirdBuilding $thirdBuilding = clone $firstBuilding; $thirdBuilding-&gt;name = &#x27;youngestPigHouse&#x27;; $thirdBuilding-&gt;wall-&gt;material = &#x27;bricks&#x27;; dump($firstBuilding-&gt;name); // oldestPigHouse dump($firstBuilding-&gt;wall-&gt;material); // straw dump($secondBuilding-&gt;name); // middlePigHouse dump($secondBuilding-&gt;wall-&gt;material); // wood dump($thirdBuilding-&gt;name); // youngestPigHouse dump($thirdBuilding-&gt;wall-&gt;material); // bricks return [ &#x27;firstBuilding&#x27; =&gt; $firstBuilding, &#x27;secondBuilding&#x27; =&gt; $secondBuilding, &#x27;thirdBuilding&#x27; =&gt; $thirdBuilding ]; &#125;&#125; 後來弟弟們改用其他建材時，就不會影響到原本哥哥的房子了。 這就是淺複製 (Shallow Copy) 與 深複製 (Deep Copy) 的不同。 後來三隻小豬跑去開建設公司，又是另一個故事了。 ʕ •ᴥ•ʔ：一開始clone()方法能直接使用，是因為PHP的魔術方法__clone()唷！","categories":[{"name":"Clean Code","slug":"Clean-Code","permalink":"https://yncbearz.github.io/categories/Clean-Code/"}],"tags":[{"name":"Example","slug":"Example","permalink":"https://yncbearz.github.io/tags/Example/"}]},{"title":"原型模式","slug":"Prototype-Pattern","date":"2020-10-11T14:37:18.000Z","updated":"2025-05-30T08:15:23.252Z","comments":true,"path":"2020/10/11/Prototype-Pattern/","permalink":"https://yncbearz.github.io/2020/10/11/Prototype-Pattern/","excerpt":"Prototype Pattern","text":"Prototype Pattern當創建實例的過程很昂貴或複雜時，透過拷貝這些原型來建立新的實例。Example: 三隻小豬 原型模式中會將類別分為兩類：分別是原型介面 (Prototype) 及 具體原型類別 (Concrete Prototype) 。 透過原型介面，我們可以知道該實例能拷貝 (clone) ，複製出自己的實例。 其中拷貝又可分為兩種：分別是淺複製 (Shallow Copy) 與 深複製 (Deep Copy) 。 兩者的差別在於，當原型類別的屬性為參考類型 (references) 時，淺複製會指向與實例一樣的位址，不會重新創建屬性。深複製則會重新創建屬性。 這意味著，當使用淺複製時，修改參考類型的屬性會一併修改到原本實例。 優點：可以直接拷貝實例，省去創建的麻煩。也提供了一個不使用繼承 (extend) 來面對複雜實例的方式。 缺點：當架構較為複雜時，深複製可能會不好實作。 與其他模式的比較：[抽象工廠模式]：抽象工廠模式，透過定義產品族的概念，處理複雜的創建。原型模式則是想利用拷貝的概念，來處理複雜的創建。 [單例模式]：單例模式保證同一時間存在一個實例。原型模式則是複製出一個實例。 ʕ •ᴥ•ʔ：在PHP中，由於有魔術方法__clone()的存在，我們可以不定義原型介面，直接使用clone()。","categories":[{"name":"Clean Code","slug":"Clean-Code","permalink":"https://yncbearz.github.io/categories/Clean-Code/"}],"tags":[{"name":"Design Pattern","slug":"Design-Pattern","permalink":"https://yncbearz.github.io/tags/Design-Pattern/"}]},{"title":"類別圖：快取代理（代理模式）","slug":"Class-Diagram-Cache-Proxy-Pattern","date":"2020-10-04T13:21:32.000Z","updated":"2025-07-30T11:30:13.125Z","comments":true,"path":"2020/10/04/Class-Diagram-Cache-Proxy-Pattern/","permalink":"https://yncbearz.github.io/2020/10/04/Class-Diagram-Cache-Proxy-Pattern/","excerpt":"Class-Diagram-Cache-Proxy-Pattern","text":"Example: 快取代理 12345678910111213141516171819202122232425262728293031323334353637@startuml Example-Cache-Proxy-Patterninterface Readable&#123; + read(string keyword): array&#125;class Database&#123; + read(string keyword): array&#125;class CacheProxy&#123; # cached: array # database: Database + __construct() + read(string keyword): array&#125;Readable &lt;|.. CacheProxyReadable &lt;|.. DatabaseCacheProxy -&gt; Databaseclass Program&#123; # proxy: CacheProxy + __construct() + search(string keyword): array&#125;Program -&gt; CacheProxy@enduml ʕ •ᴥ•ʔ：若不熟悉 UML 類別圖，可參考UML類別圖說明。","categories":[{"name":"Clean Code","slug":"Clean-Code","permalink":"https://yncbearz.github.io/categories/Clean-Code/"}],"tags":[{"name":"Design Pattern","slug":"Design-Pattern","permalink":"https://yncbearz.github.io/tags/Design-Pattern/"}]},{"title":"範例：快取代理（代理模式）","slug":"Example-Cache-Proxy-Pattern","date":"2020-10-04T12:16:55.000Z","updated":"2025-05-30T08:15:23.233Z","comments":true,"path":"2020/10/04/Example-Cache-Proxy-Pattern/","permalink":"https://yncbearz.github.io/2020/10/04/Example-Cache-Proxy-Pattern/","excerpt":"Example-Cache-Proxy-Pattern","text":"Pattern: 代理模式 Class Diagram: 快取代理 情境：以下是某搜尋功能 客戶端程式碼 12345678910111213141516171819202122232425262728&lt;?phpnamespace App\\ProxyPattern\\Cache;use App\\ProxyPattern\\Cache\\Database;class Program&#123; /** * @var Database */ protected $database; public function __construct() &#123; $this-&gt;database = new Database(); &#125; /** * @param string $keyword * @return array */ public function search(string $keyword): array &#123; return $this-&gt;database-&gt;read($keyword); &#125;&#125; 實體資料庫（供存取資料用） 1234567891011121314151617181920&lt;?phpnamespace App\\ProxyPattern\\Cache;class Database&#123; /** * @param string $keyword * @return array */ public function read(string $keyword): array &#123; if ($keyword == &#x27;sushi&#x27;) &#123; return [&#x27;Bear Sushi&#x27;, &#x27;Lin Sushi&#x27;, &#x27;Alysa Sushi&#x27;]; &#125; return []; &#125;&#125; 老闆希望搜尋時，若是已搜尋過的資料，便由快取返回，不再呼叫實體資料庫。 讓我們用代理模式改造它。 需求一：實現快取代理 首先定義讀取介面 123456789101112&lt;?phpnamespace App\\ProxyPattern\\Cache\\Contracts;interface Readable&#123; /** * @param string $keyword * @return array */ public function read(string $keyword): array;&#125; 實體資料庫實現讀取介面 12345678910111213141516171819202122&lt;?phpnamespace App\\ProxyPattern\\Cache;use App\\ProxyPattern\\Cache\\Contracts\\Readable;class Database implements Readable&#123; /** * @param string $keyword * @return array */ public function read(string $keyword): array &#123; if ($keyword == &#x27;sushi&#x27;) &#123; return [&#x27;Bear Sushi&#x27;, &#x27;Lin Sushi&#x27;, &#x27;Alysa Sushi&#x27;]; &#125; return []; &#125;&#125; 實作快取代理 12345678910111213141516171819202122232425262728293031323334353637383940&lt;?phpnamespace App\\ProxyPattern\\Cache;use App\\ProxyPattern\\Cache\\Contracts\\Readable;class CacheProxy implements Readable&#123; /** * @var array */ protected $cached = []; /** * @var Database */ protected $database; public function __construct() &#123; $this-&gt;database = new Database(); &#125; /** * @param string $keyword * @return array */ public function read(string $keyword): array &#123; if (isset($this-&gt;cached[$keyword])) &#123; return $this-&gt;cached[$keyword]; &#125; $result = $this-&gt;database-&gt;read($keyword); $this-&gt;cached[$keyword] = $result; return $result; &#125;&#125; 修改客戶端程式碼 12345678910111213141516171819202122232425262728&lt;?phpnamespace App\\ProxyPattern\\Cache;use App\\ProxyPattern\\Cache\\CacheProxy;class Program&#123; /** * @var CacheProxy */ protected $proxy; public function __construct() &#123; $this-&gt;proxy = new CacheProxy(); &#125; /** * @param string $keyword * @return array */ public function search(string $keyword): array &#123; return $this-&gt;proxy-&gt;read($keyword); &#125;&#125; 這下子客戶端搜尋時，若快取代理有資料，便會直接返回結果。 [單一職責原則]我們將實體類別與代理類別視作兩種不同的職責。代理類別主要處理訪問實體類別的行為。 [開放封閉原則]當我們需要實現不屬於實體類別的職責時（例如：關鍵字被搜尋次數），我們可以在代理類別中實現，不須修改實體類別的程式碼。 若有需要其他控制訪問的職責時，也可以新增代理類別。 除了上述的提出介面的委派方法外，也有人用繼承的手法修改行為，但我個人比較不喜歡。 ʕ •ᴥ•ʔ：代理類別就像是實體類別的經紀人一樣。","categories":[{"name":"Clean Code","slug":"Clean-Code","permalink":"https://yncbearz.github.io/categories/Clean-Code/"}],"tags":[{"name":"Example","slug":"Example","permalink":"https://yncbearz.github.io/tags/Example/"}]},{"title":"代理模式","slug":"Proxy-Pattern","date":"2020-10-04T12:13:02.000Z","updated":"2025-05-30T08:15:23.253Z","comments":true,"path":"2020/10/04/Proxy-Pattern/","permalink":"https://yncbearz.github.io/2020/10/04/Proxy-Pattern/","excerpt":"Proxy Pattern","text":"Proxy Pattern為另一個對象提供一個替身或佔位符以控制這個對象的訪問。Example: 快取代理 代理模式將類別分為兩類：分別是 實體類別 (RealSubject) 與 代理類別 (Proxy) 。 代理類別會與實體類別實現相同的介面，且保存對實體類別的引用。 優點：控制訪問的職責，不必寫在實體類別。有了代理類別，可以 延遲實例化 (lazy initialization) 實體類別。可以有多種控制訪問實體類別的方式。可以在實體類別被訪問時，做一些額外的事（不屬於實體類別的職責）。 缺點：程式碼複雜度提高。回應可能會有所延遲。 與其他模式的比較：[轉接頭模式]：轉接頭模式只負責轉化不同介面間的關係。而代理模式則是實現相同的介面，處理更多訪問相關的職責。 [裝飾者模式]：裝飾者模式豐富既有行為時，原因較常是來自客戶端。而代理模式豐富既有行為時，原因較常是來自服務端。 [外觀模式]：外觀模式的目的是提供簡化接口。而代理模式的目的則是控制訪問行為。 常見的使用場景： 遠端代理：控制訪問遠程對象，利用網路轉發到遠程執行。 虛擬代理：控制訪問創建開銷大的對象，待客戶端有請求時才進行實例化。 安全代理：控制訪問對象的許可權。 智慧代理：處理訪問對象時，不屬於訪問對象的職責。 ʕ •ᴥ•ʔ：當想控制訪問對象時，很可能就是使用代理模式的時機。","categories":[{"name":"Clean Code","slug":"Clean-Code","permalink":"https://yncbearz.github.io/categories/Clean-Code/"}],"tags":[{"name":"Design Pattern","slug":"Design-Pattern","permalink":"https://yncbearz.github.io/tags/Design-Pattern/"}]},{"title":"類別圖：歌曲排行（迭代器模式）","slug":"Class-Diagram-Top-Song-Iterator-Pattern","date":"2020-09-28T04:22:49.000Z","updated":"2025-07-30T11:30:13.280Z","comments":true,"path":"2020/09/28/Class-Diagram-Top-Song-Iterator-Pattern/","permalink":"https://yncbearz.github.io/2020/09/28/Class-Diagram-Top-Song-Iterator-Pattern/","excerpt":"Class-Diagram-Top-Song-Iterator-Pattern","text":"Example: 歌曲排行 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859606162636465666768697071727374@startuml Example-Top-Song-Iterator-Patterninterface Traversable&#123;&#125;interface Iterator&#123; + current(): mixed + key(): scalar + next() + rewind() + valid(): bool&#125;interface IteratorAggregate&#123; + getIterator(): Traversable&#125;Traversable &lt;|-- IteratorTraversable &lt;|-- IteratorAggregateclass Song&#123; # name: string # singer: string # releaseDate: DateTime + __construct(array data) + getName(): string + getSinger(): string + getReleaseDate(): DateTime&#125;class SongCollection&#123; # dataOfSongs: array # items: Song[] + __construct(array dataOfSongs) - generateSongs(array dataOfSongs): Song[] + getItems(): Song[] + reverse(): static&#125;IteratorAggregate &lt;|.. SongCollectionSong -o SongCollectionclass SongIterator&#123; # collection: SongCollection # position: int + __construct(SongCollection songCollection)&#125;Iterator &lt;|.. SongIteratorSongCollection &lt;- SongIteratorclass Program&#123; # songCollection: SongCollection + __construct(array song) + list(): array + listReverse(): array&#125;SongCollection &lt;-- Program@enduml ʕ •ᴥ•ʔ：若不熟悉 UML 類別圖，可參考UML類別圖說明。","categories":[{"name":"Clean Code","slug":"Clean-Code","permalink":"https://yncbearz.github.io/categories/Clean-Code/"}],"tags":[{"name":"Design Pattern","slug":"Design-Pattern","permalink":"https://yncbearz.github.io/tags/Design-Pattern/"}]},{"title":"範例：歌曲排行（迭代器模式）","slug":"Example-Top-Song-Iterator-Pattern","date":"2020-09-27T14:54:35.000Z","updated":"2025-05-30T08:15:23.239Z","comments":true,"path":"2020/09/27/Example-Top-Song-Iterator-Pattern/","permalink":"https://yncbearz.github.io/2020/09/27/Example-Top-Song-Iterator-Pattern/","excerpt":"Example-Top-Song-Iterator-Pattern","text":"Pattern: 迭代器模式 Class Diagram: 歌曲排行 需求一：KTV系統要按照新增到系統的時間，由舊到新，實作歌曲排行 定義系統存取歌曲的類別（解析傳進來的data） 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455&lt;?phpnamespace App\\IteratorPattern\\TopSong;use DateTime;class Song&#123; /** * @var string */ protected $name; /** * @var string */ protected $singer; /** * @var DateTime */ protected $releaseDate; public function __construct(array $data) &#123; $this-&gt;name = $data[&#x27;name&#x27;]; $this-&gt;singer = $data[&#x27;singer&#x27;]; $this-&gt;releaseDate = new DateTime($data[&#x27;releaseDate&#x27;]); &#125; /** * @return string */ public function getName() &#123; return $this-&gt;name; &#125; /** * @return string */ public function getSinger() &#123; return $this-&gt;singer; &#125; /** * @return DateTime */ public function getReleaseDate() &#123; return $this-&gt;releaseDate; &#125;&#125; 定義歌曲集合 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051&lt;?phpnamespace App\\IteratorPattern\\TopSong;class SongCollection&#123; /** * @var Song[] */ protected $items = []; public function __construct(array $originalSongs) &#123; $this-&gt;items = $this-&gt;generateSongs($originalSongs); &#125; /** * @param array $originalSongs * @return Song[] */ private function generateSongs($originalSongs) &#123; $result = []; foreach ($originalSongs as $originalSong) &#123; $result[] = new Song($originalSong); &#125; return $result; &#125; /** * @return Song[] */ public function getItems() &#123; return $this-&gt;items; &#125; /** * @return array */ public function list() &#123; foreach ($this-&gt;items as $item) &#123; $result[] = $item-&gt;getName(); &#125; return $result; &#125;&#125; SongCollection就是迭代器模式中的 集合類別 (Aggregate &#x2F; Collection) 。不過我們目前還沒實作PHP的IteratorAggregate介面。 而generateSongs()的目的，是為了將不同來源的歌曲資訊，轉換成系統認識的Song類別。 目前遍歷的程式碼 123456789101112131415161718192021222324&lt;?phpnamespace App\\IteratorPattern\\TopSong;use App\\IteratorPattern\\TopSong\\SongCollection;class Program&#123; /** * @var SongCollection */ protected $songCollection; public function __construct(array $songs) &#123; $this-&gt;songCollection = new SongCollection($songs); &#125; public function list() &#123; return $this-&gt;songCollection-&gt;list(); &#125;&#125; 目前的list()方法，很單純只用到foreach而已。接著用迭代器模式改寫它。 首先實作迭代器 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475&lt;?phpnamespace App\\IteratorPattern\\TopSong;use App\\IteratorPattern\\TopSong\\SongCollection;use Iterator;class SongIterator implements Iterator&#123; /** * @var SongCollection */ protected $collection; /** * @var int */ private $position = 0; public function __construct(SongCollection $collection) &#123; $this-&gt;collection = $collection; &#125; /** * Return the current element * * @return Song */ public function current() &#123; return $this-&gt;collection-&gt;getItems()[$this-&gt;position]; &#125; /** * Return the key of the current element * * @return int */ public function key() &#123; return $this-&gt;position; &#125; /** * Move forward to next element * * @return void */ public function next() &#123; $this-&gt;position++; &#125; /** * Rewind the Iterator to the first element * * @return int */ public function rewind() &#123; $this-&gt;position = 0; &#125; /** * Checks if current position is valid * * @return void */ public function valid() &#123; return isset($this-&gt;collection-&gt;getItems()[$this-&gt;position]); &#125;&#125; SongIterator就是迭代器模式中的 迭代器類別 (Iterator) 。我們實作了PHP的Iterator介面。 必須實作current, key, next, rewind, valid方法，其目的都有寫在PHPDoc中。而我們在建構式中將剛剛的SongCollection注入。 改寫SongCollection 12345678910111213141516171819202122232425262728293031323334353637383940414243444546&lt;?phpnamespace App\\IteratorPattern\\TopSong;use IteratorAggregate;use Traversable;class SongCollection implements IteratorAggregate&#123; /** * @var Song[] */ protected $items = []; public function __construct(array $dataOfSongs) &#123; $this-&gt;items = $this-&gt;generateSongs($dataOfSongs); &#125; /** * @param array $dataOfSongs * @return Song[] */ private function generateSongs($dataOfSongs) &#123; foreach ($dataOfSongs as $dataOfSong) &#123; $result[] = new Song($dataOfSong); &#125; return $result; &#125; /** * @return Song[] */ public function getItems() &#123; return $this-&gt;items; &#125; public function getIterator(): Traversable &#123; return new SongIterator($this); &#125;&#125; 我們實作了PHP的IteratorAggregate介面。 getIterator()方法會將當前的SongCollection注入，並回傳SongIterator。 最後改寫遍歷的程式碼 1234567891011121314151617181920212223242526272829&lt;?phpnamespace App\\IteratorPattern\\TopSong;use App\\IteratorPattern\\TopSong\\SongCollection;class Program&#123; /** * @var SongCollection */ protected $songCollection; public function __construct(array $songs) &#123; $this-&gt;songCollection = new SongCollection($songs); &#125; public function list() &#123; $iterator = $this-&gt;songCollection-&gt;getIterator(); foreach ($iterator as $item) &#123; $result[] = $item-&gt;getName(); &#125; return $result; &#125;&#125; 需求二：按照新增到系統的時間，由新到舊，實作歌曲排行 修改SongCollection，新增reverse()方法 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960&lt;?phpnamespace App\\IteratorPattern\\TopSong;use IteratorAggregate;use Traversable;class SongCollection implements IteratorAggregate&#123; /** * @var array */ protected $dataOfSongs; /** * @var Song[] */ protected $items = []; public function __construct(array $dataOfSongs) &#123; $this-&gt;dataOfSongs = $dataOfSongs; $this-&gt;items = $this-&gt;generateSongs($dataOfSongs); &#125; /** * @param array $dataOfSongs * @return Song[] */ private function generateSongs($dataOfSongs) &#123; foreach ($dataOfSongs as $dataOfSong) &#123; $result[] = new Song($dataOfSong); &#125; return $result; &#125; /** * @return Song[] */ public function getItems() &#123; return $this-&gt;items; &#125; public function getIterator(): Traversable &#123; return new SongIterator($this); &#125; /** * @return static */ public function reverse() &#123; return new static(array_reverse($this-&gt;dataOfSongs)); &#125;&#125; 這邊的reverse()方法，會將原始資料倒序後，回傳一個新的SongCollection。 修改遍歷的程式碼，新增listReverse()方法 123456789101112131415161718192021222324252627282930313233343536373839&lt;?phpnamespace App\\IteratorPattern\\TopSong;use App\\IteratorPattern\\TopSong\\SongCollection;class Program&#123; /** * @var SongCollection */ protected $songCollection; public function __construct(array $songs) &#123; $this-&gt;songCollection = new SongCollection($songs); &#125; public function list() &#123; $iterator = $this-&gt;songCollection-&gt;getIterator(); foreach ($iterator as $item) &#123; $result[] = $item-&gt;getName(); &#125; return $result; &#125; public function listReverse() &#123; $iterator = $this-&gt;songCollection-&gt;reverse()-&gt;getIterator(); foreach ($iterator as $item) &#123; $result[] = $item-&gt;getName(); &#125; return $result; &#125;&#125; [單一職責原則]將集合元素 (Song) 、 集合類別 (SongCollection) 及 迭代器 (SongIterator) 的職責分離。 [開放封閉原則]無論是修改集合元素，或是迭代順序，我們都不會改到所有的程式碼。 [介面隔離原則]定義出集合類別介面與迭代器介面，讓兩者不會互相影響。 [依賴反轉原則]透過集合類別介面與迭代器介面，確保有取得迭代器及foreach()的能力。 ʕ •ᴥ•ʔ：一個讓我枯坐在翰林茶館兩個小時的模式（汗）。","categories":[{"name":"Clean Code","slug":"Clean-Code","permalink":"https://yncbearz.github.io/categories/Clean-Code/"}],"tags":[{"name":"Design Pattern","slug":"Design-Pattern","permalink":"https://yncbearz.github.io/tags/Design-Pattern/"}]},{"title":"迭代器模式","slug":"Iterator-Pattern","date":"2020-09-27T10:07:17.000Z","updated":"2025-05-30T08:15:23.246Z","comments":true,"path":"2020/09/27/Iterator-Pattern/","permalink":"https://yncbearz.github.io/2020/09/27/Iterator-Pattern/","excerpt":"Iterator-Pattern","text":"Iterator Pattern提供一種方法順序訪問一個聚合對象中的各個元素，而又不暴露其內部的表示。Example: 歌曲排行 迭代器模式會將類別分為兩類：分別是集合類別 (Aggregate &#x2F; Collection) 及 迭代器類別 (Iterator) 。 集合類別負責提供統一介面，供所有集合元素使用，使客戶與集合元素的實現解耦。 迭代器類別則負責提供在集合元素中遊走的方法。 舉例：集合元素 -&gt; 集合類別歌曲 -&gt; 歌單菜式 -&gt; 菜單書本 -&gt; 書單 優點：分離了集合物件的遍歷行為，可以在不暴露集合內部的情況下，供外部存取。新增&#x2F;修改遍歷規則時，不會影響到集合元素。 缺點：若只是簡單的遍歷，可能會是一種過度設計。 其實此模式的實現，現在大都已被封裝，只要實現對應的介面就好了。 以PHP而言，主要有以下幾個介面與迭代器模式有關。 介面名稱 用途 Traversable 所有迭代器介面的源頭，主要用來判斷能不能用foreach遍歷。 IteratorAggregate 集合類別的介面，主要用來提供迭代器，需與Iterator介面一起實作。 Iterator 迭代器的介面，定義了遍歷時會用到的方法，需與IteratorAggregate介面一起實作。 其他SPL (Standard PHP Library) 的Iterator。 ʕ •ᴥ•ʔ：讓我們一起欣賞這個古老的模式！","categories":[{"name":"Clean Code","slug":"Clean-Code","permalink":"https://yncbearz.github.io/categories/Clean-Code/"}],"tags":[{"name":"Design Pattern","slug":"Design-Pattern","permalink":"https://yncbearz.github.io/tags/Design-Pattern/"}]},{"title":"範例：電力系統（依賴反轉原則）","slug":"Example-Power-Systems-Dependency-Inversion-Principle","date":"2020-09-21T02:48:11.000Z","updated":"2025-07-30T11:30:13.378Z","comments":true,"path":"2020/09/21/Example-Power-Systems-Dependency-Inversion-Principle/","permalink":"https://yncbearz.github.io/2020/09/21/Example-Power-Systems-Dependency-Inversion-Principle/","excerpt":"Example-Power-Systems-Dependency-Inversion-Principle","text":"Principle: 依賴反轉原則 情境：目前電力系統採用火力發電 火力發電 123456789101112&lt;?phpnamespace App\\SOLID\\DIP\\PowerSystems;class ThermalPower&#123; public function generatePower() &#123; return &#x27;電力&#x27;; &#125;&#125; 電力系統 123456789101112131415&lt;?phpnamespace App\\SOLID\\DIP\\PowerSystems;use App\\SOLID\\DIP\\PowerSystems\\ThermalPower;class Program&#123; public function getPower() &#123; $thermalPower = new ThermalPower(); return $thermalPower-&gt;generatePower(); &#125;&#125; 隨著科技發展，現在我們想要改成用風力發電來取代火力發電，卻發現原本的程式，強耦合在ThermalPower。（依賴了具體的類別） 我們決定定義一個抽象的介面，讓程式依賴在介面，並由各個發電方式實作介面。改變彼此的依賴關係。 需求一：定義抽象介面，改變電力系統與火力發電的依賴關係 首先定義發電介面 123456789&lt;?phpnamespace App\\SOLID\\DIP\\PowerSystems\\Contracts;interface PowerGeneratable&#123; public function generatePower();&#125; 接著讓火力發電實作發電介面 1234567891011121314&lt;?phpnamespace App\\SOLID\\DIP\\PowerSystems;use App\\SOLID\\DIP\\PowerSystems\\Contracts\\PowerGeneratable;class ThermalPower implements PowerGeneratable&#123; public function generatePower() &#123; return &#x27;電力&#x27;; &#125;&#125; 最後改寫原本的電力系統 1234567891011121314&lt;?phpnamespace App\\SOLID\\DIP\\PowerSystems;use App\\SOLID\\DIP\\PowerSystems\\Contracts\\PowerGeneratable;class Program&#123; public function getPower(PowerGeneratable $powerGeneration) &#123; return $powerGeneration-&gt;generatePower(); &#125;&#125; （註：現在要用什麼樣的發電方式，會交由客戶端決定） 客戶端使用火力發電（提供測試程式碼，供參考） 1234567891011121314151617181920212223242526272829&lt;?phpnamespace Tests\\Feature\\SOLID\\DIP\\PowerSystems;use PHPUnit\\Framework\\TestCase;use App\\SOLID\\DIP\\PowerSystems\\Program;use App\\SOLID\\DIP\\PowerSystems\\ThermalPower;class ProgramTest extends TestCase&#123; /** * @var Program */ protected $sut; protected function setUp(): void &#123; $this-&gt;sut = new Program(); &#125; public function testGetPowerByThermalPower() &#123; $expected = &#x27;電力&#x27;; $powerGeneration = new ThermalPower(); $actual = $this-&gt;sut-&gt;getPower($powerGeneration); $this-&gt;assertEquals($expected, $actual); &#125;&#125; 需求二：新增風力發電 實作風力發電 1234567891011121314&lt;?phpnamespace App\\SOLID\\DIP\\PowerSystems;use App\\SOLID\\DIP\\PowerSystems\\Contracts\\PowerGeneratable;class WindPower implements PowerGeneratable&#123; public function generatePower() &#123; return &#x27;電力&#x27;; &#125;&#125; 客戶端使用風力發電（提供測試程式碼，供參考） 1234567891011121314151617181920212223242526272829303132333435363738&lt;?phpnamespace Tests\\Feature\\SOLID\\DIP\\PowerSystems;use PHPUnit\\Framework\\TestCase;use App\\SOLID\\DIP\\PowerSystems\\Program;use App\\SOLID\\DIP\\PowerSystems\\ThermalPower;use App\\SOLID\\DIP\\PowerSystems\\WindPower;class ProgramTest extends TestCase&#123; /** * @var Program */ protected $sut; protected function setUp(): void &#123; $this-&gt;sut = new Program(); &#125; public function testGetPowerByThermalPower() &#123; $expected = &#x27;電力&#x27;; $powerGeneration = new ThermalPower(); $actual = $this-&gt;sut-&gt;getPower($powerGeneration); $this-&gt;assertEquals($expected, $actual); &#125; public function testGetPowerByWindPower() &#123; $expected = &#x27;電力&#x27;; $powerGeneration = new WindPower(); $actual = $this-&gt;sut-&gt;getPower($powerGeneration); $this-&gt;assertEquals($expected, $actual); &#125;&#125; 最後附上類別圖比較： 依賴具體的火力發電 123456789101112131415@startumlclass ThermalPower&#123; + generatePower()&#125;class Program&#123; + getPower()&#125;Program --&gt; ThermalPower@enduml 依賴抽象的發電介面，並由各個發現方式實作介面（可以觀察火力發電與風力發電的依賴方向，是不是反轉了呢） 123456789101112131415161718192021222324252627@startumlinterface PowerGeneratable&#123; + generatePower()&#125;class ThermalPower&#123; + generatePower()&#125;class WindPower&#123; + generatePower()&#125;class Program&#123; + getPower(PowerGenertable powerGeneratable)&#125;Program --&gt; PowerGeneratablePowerGeneratable &lt;|-- ThermalPowerPowerGeneratable &lt;|-- WindPower@enduml ʕ •ᴥ•ʔ：透過遵守依賴反轉原則，我們也讓程式符合開放封閉原則。","categories":[{"name":"Clean Code","slug":"Clean-Code","permalink":"https://yncbearz.github.io/categories/Clean-Code/"}],"tags":[{"name":"Example","slug":"Example","permalink":"https://yncbearz.github.io/tags/Example/"}]},{"title":"範例：咖啡機（介面隔離原則）","slug":"Example-Coffee-Machine-Interface-Segregation-Principle","date":"2020-09-19T15:42:00.000Z","updated":"2025-05-30T08:15:23.234Z","comments":true,"path":"2020/09/19/Example-Coffee-Machine-Interface-Segregation-Principle/","permalink":"https://yncbearz.github.io/2020/09/19/Example-Coffee-Machine-Interface-Segregation-Principle/","excerpt":"Example-Coffee-Machine-Interface-Segregation-Principle","text":"Principle: 介面隔離原則 情境：目前我們有一台全自動咖啡機 首先定義全自動咖啡機介面 1234567891011&lt;?phpnamespace App\\SOLID\\ISP\\CoffeeMachine\\Contracts;interface AutomaticCoffeeMachineInterface&#123; public function grind($coffeeBeans); public function brew($coffeePowder);&#125; 接著是全自動咖啡機 12345678910111213141516171819202122&lt;?phpnamespace App\\SOLID\\ISP\\CoffeeMachine;use App\\SOLID\\ISP\\CoffeeMachine\\Contracts\\AutomaticCoffeeMachineInterface;class AutomaticCoffeeMachine implements AutomaticCoffeeMachineInterface&#123; public function grind($coffeeBeans) &#123; if ($coffeeBeans == &#x27;咖啡豆&#x27;) &#123; return &#x27;咖啡粉&#x27;; &#125; &#125; public function brew($coffeePowder) &#123; if ($coffeePowder == &#x27;咖啡粉&#x27;) &#123; return &#x27;咖啡&#x27;; &#125; &#125;&#125; 最後是目前的沖煮方式 12345678910111213141516171819202122232425262728293031323334353637&lt;?phpnamespace App\\SOLID\\ISP\\CoffeeMachine;class Program&#123; protected $coffeeGrinder; protected $coffeeMaker; public function getCoffeeByAutomaticCoffeeMachine($coffeeBeans) &#123; $automaticCoffeeMachine = new AutomaticCoffeeMachine(); $this-&gt;coffeeGrinder = $automaticCoffeeMachine; $this-&gt;coffeeMaker = $automaticCoffeeMachine; return $this-&gt;getCoffee($coffeeBeans); &#125; private function grind($coffeeBeans) &#123; return $this-&gt;coffeeGrinder-&gt;grind($coffeeBeans); &#125; private function brew($coffeePowder) &#123; return $this-&gt;coffeeMaker-&gt;brew($coffeePowder); &#125; private function getCoffee($coffeeBeans) &#123; $coffeePowder = $this-&gt;grind($coffeeBeans); $coffee = $this-&gt;brew($coffeePowder); return $coffee; &#125;&#125; 然而，隨著對咖啡興趣增加，我們想來玩玩摩卡壺。卻發現摩卡壺不會磨粉… 需求一：將全自動咖啡機介面職責分離，拆分出磨粉介面與沖煮介面 首先定義磨粉介面 123456789&lt;?phpnamespace App\\SOLID\\ISP\\CoffeeMachine\\Contracts;interface CoffeeGrinder&#123; public function grind($coffeeBeans);&#125; 接著定義沖煮介面 123456789&lt;?phpnamespace App\\SOLID\\ISP\\CoffeeMachine\\Contracts;interface CoffeeMaker&#123; public function brew($coffeePowder);&#125; 最後修改原本的全自動咖啡機，讓它實作新的兩個介面 123456789101112131415161718192021222324&lt;?phpnamespace App\\SOLID\\ISP\\CoffeeMachine;use App\\SOLID\\ISP\\CoffeeMachine\\Contracts\\CoffeeGrinder;use App\\SOLID\\ISP\\CoffeeMachine\\Contracts\\CoffeeMaker;class AutomaticCoffeeMachine implements CoffeeGrinder, CoffeeMaker&#123; public function grind($coffeeBeans) &#123; if ($coffeeBeans == &#x27;咖啡豆&#x27;) &#123; return &#x27;咖啡粉&#x27;; &#125; &#125; public function brew($coffeePowder) &#123; if ($coffeePowder == &#x27;咖啡粉&#x27;) &#123; return &#x27;咖啡&#x27;; &#125; &#125;&#125; 需求二：實作磨豆機與摩卡壺 實作磨豆機（因為拆分出沖煮介面，它不需要知道如何沖煮） 12345678910111213141516&lt;?phpnamespace App\\SOLID\\ISP\\CoffeeMachine;use App\\SOLID\\ISP\\CoffeeMachine\\Contracts\\CoffeeGrinder;class NormalCoffeeGrinder implements CoffeeGrinder&#123; public function grind($coffeeBeans) &#123; if ($coffeeBeans == &#x27;咖啡豆&#x27;) &#123; return &#x27;咖啡粉&#x27;; &#125; &#125;&#125; 實作摩卡壺（因為拆分出磨豆介面，它不需要知道如何磨豆） 12345678910111213141516&lt;?phpnamespace App\\SOLID\\ISP\\CoffeeMachine;use App\\SOLID\\ISP\\CoffeeMachine\\Contracts\\CoffeeMaker;class Mocalpot implements CoffeeMaker&#123; public function brew($coffeePowder) &#123; if ($coffeePowder == &#x27;咖啡粉&#x27;) &#123; return &#x27;咖啡&#x27;; &#125; &#125;&#125; 最後新增煮咖啡的方法，用磨豆機與摩卡壺的組合 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859606162636465666768&lt;?phpnamespace App\\SOLID\\ISP\\CoffeeMachine;use App\\SOLID\\ISP\\CoffeeMachine\\Contracts\\CoffeeGrinder;use App\\SOLID\\ISP\\CoffeeMachine\\Contracts\\CoffeeMaker;use App\\SOLID\\ISP\\CoffeeMachine\\NormalCoffeeGrinder;use App\\SOLID\\ISP\\CoffeeMachine\\MocalPot;class Program&#123; /** * @var CoffeeGrinder */ protected $coffeeGrinder; /** * @var CoffeeMaker */ protected $coffeeMaker; public function getCoffeeByAutomaticCoffeeMachine($coffeeBeans) &#123; $automaticCoffeeMachine = new AutomaticCoffeeMachine(); $this-&gt;setCoffeeGrinder($automaticCoffeeMachine); $this-&gt;setCoffeeMaker($automaticCoffeeMachine); return $this-&gt;getCoffee($coffeeBeans); &#125; public function getCoffeeByNormalCoffeeGrinderAndMocalPot($coffeeBeans) &#123; $normalCoffeeGrinder = new NormalCoffeeGrinder(); $mocalPot = new MocalPot(); $this-&gt;setCoffeeGrinder($normalCoffeeGrinder); $this-&gt;setCoffeeMaker($mocalPot); return $this-&gt;getCoffee($coffeeBeans); &#125; private function grind($coffeeBeans) &#123; return $this-&gt;coffeeGrinder-&gt;grind($coffeeBeans); &#125; private function brew($coffeePowder) &#123; return $this-&gt;coffeeMaker-&gt;brew($coffeePowder); &#125; private function getCoffee($coffeeBeans) &#123; $coffeePowder = $this-&gt;grind($coffeeBeans); $coffee = $this-&gt;brew($coffeePowder); return $coffee; &#125; private function setCoffeeGrinder(CoffeeGrinder $coffeeGrinder) &#123; $this-&gt;coffeeGrinder = $coffeeGrinder; &#125; private function setCoffeeMaker(CoffeeMaker $coffeeMaker) &#123; $this-&gt;coffeeMaker = $coffeeMaker; &#125;&#125; ʕ •ᴥ•ʔ：運用介面隔離原則拆分介面職責，我們就可以玩更多花樣的咖啡沖煮方法了。 而煮咖啡方法也不必因為器具更換而修改。符合開放封閉原則。","categories":[{"name":"Clean Code","slug":"Clean-Code","permalink":"https://yncbearz.github.io/categories/Clean-Code/"}],"tags":[{"name":"Example","slug":"Example","permalink":"https://yncbearz.github.io/tags/Example/"}]},{"title":"範例：老爸餐廳（裡氏替換原則）","slug":"Example-Dad-Restaurant-Liskov-Substitution-Principle","date":"2020-09-19T06:23:08.000Z","updated":"2025-05-30T08:15:23.235Z","comments":true,"path":"2020/09/19/Example-Dad-Restaurant-Liskov-Substitution-Principle/","permalink":"https://yncbearz.github.io/2020/09/19/Example-Dad-Restaurant-Liskov-Substitution-Principle/","excerpt":"Example-Dad-Restaurant-Liskov-Substitution-Principle","text":"Principle: 裡氏替換原則 情境：老爸開了一間速食餐廳 首先定義餐廳的產出：餐點介面 123456789&lt;?phpnamespace App\\SOLID\\LSP\\Restaurant\\Contracts;interface Eatable&#123; public function beEaten();&#125; 接著供應的餐點類型：漢堡、炸雞、雞塊，它們都必須實作餐點介面 1234567891011121314&lt;?phpnamespace App\\SOLID\\LSP\\Restaurant\\Food;use App\\SOLID\\LSP\\Restaurant\\Contracts\\Eatable;class Burger implements Eatable&#123; public function beEaten() &#123; return &#x27;招牌漢堡被吃了&#x27;; &#125;&#125; 1234567891011121314&lt;?phpnamespace App\\SOLID\\LSP\\Restaurant\\Food;use App\\SOLID\\LSP\\Restaurant\\Contracts\\Eatable;class FriedChicken implements Eatable&#123; public function beEaten() &#123; return &#x27;招牌炸雞被吃了&#x27;; &#125;&#125; 1234567891011121314&lt;?phpnamespace App\\SOLID\\LSP\\Restaurant\\Food;use App\\SOLID\\LSP\\Restaurant\\Contracts\\Eatable;class ChickenNuggets implements Eatable&#123; public function beEaten() &#123; return &#x27;招牌雞塊被吃了&#x27;; &#125;&#125; 最後是老爸的餐廳 123456789101112131415161718192021222324252627282930313233343536&lt;?phpnamespace App\\SOLID\\LSP\\Restaurant;use App\\SOLID\\LSP\\Restaurant\\Contracts\\Eatable;use App\\SOLID\\LSP\\Restaurant\\Food\\Burger;use Exception;use App\\SOLID\\LSP\\Restaurant\\Food\\ChickenNuggets;use App\\SOLID\\LSP\\Restaurant\\Food\\FriedChicken;class DadRestaurant&#123; public function getFood($money): Eatable &#123; if (!is_int($money)) &#123; throw new Exception(&#x27;我們只收現金&#x27;); &#125; $randomNumber = rand(1, 3); switch ($randomNumber) &#123; case 1: return new Burger(); break; case 2: return new FriedChicken(); break; case 3: return new ChickenNuggets(); break; &#125; &#125;&#125; 這邊可以發現，老爸餐廳的出餐是很隨意的，客人用現金，可以換取餐點。 但餐點可能是漢堡、炸雞或是雞塊其中之一。 時光匆匆，過了幾年，兒子決定繼承老爸餐廳 現在有些客人會使用信用卡等其他的付款方式。也不希望餐廳餐點總是如此隨意，無法預料。 新開的餐廳決定只供應漢堡這種餐點，並提供其他付款方式。（即對Input型態更寬鬆，而Output型態更嚴謹） 兒子新開的餐廳 12345678910111213141516&lt;?phpnamespace App\\SOLID\\LSP\\Restaurant;use App\\SOLID\\LSP\\Restaurant\\DadRestaurant;use App\\SOLID\\LSP\\Restaurant\\Food\\Burger;use App\\SOLID\\LSP\\Restaurant\\Contracts\\Eatable;class SonRestaurant extends DadRestaurant&#123; public function getFood($goldFlow): Eatable &#123; return new Burger(); &#125;&#125; 測試客人消費的情況 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152&lt;?phpnamespace Tests\\Unit\\SOLID\\LSP;use PHPUnit\\Framework\\TestCase;use App\\SOLID\\LSP\\Restaurant\\Program;use App\\SOLID\\LSP\\Restaurant\\Contracts\\Eatable;class ProgramTest extends TestCase&#123; /** * @var Program */ protected $sut; public function setUp(): void &#123; $this-&gt;sut = new Program(); &#125; public function testUseMoneyInDadRestaurant() &#123; $expected = Eatable::class; $money = 100; $actual = $this-&gt;sut-&gt;getFoodInDadRestaurant($money); $this-&gt;assertInstanceOf($expected, $actual); &#125; public function testUseCardInDadRestaurant() &#123; $card = &#x27;信用卡&#x27;; $this-&gt;expectExceptionMessage(&#x27;我們只收現金&#x27;); $this-&gt;sut-&gt;getFoodInDadRestaurant($card); &#125; public function testUseMoneyInSonRestaurant() &#123; $expected = Eatable::class; $money = 100; $actual = $this-&gt;sut-&gt;getFoodInSonRestaurant($money); $this-&gt;assertInstanceOf($expected, $actual); &#125; public function testUseCardInSonRestaurant() &#123; $expected = Eatable::class; $card = &#x27;信用卡&#x27;; $actual = $this-&gt;sut-&gt;getFoodInSonRestaurant($card); $this-&gt;assertInstanceOf($expected, $actual); &#125;&#125; 透過測試，我們可以發現： 顧客類型 付款方式 老爸的餐廳 兒子的餐廳 老顧客 現金 可以換取餐點 可以換取餐點 （但只有漢堡） 新顧客 信用卡 無法換取餐點 可以換取餐點 符合了裡氏替換原則的精神。 ʕ •ᴥ•ʔ：這是一個簡易的範例，細節部分請大家多多包涵。","categories":[{"name":"Clean Code","slug":"Clean-Code","permalink":"https://yncbearz.github.io/categories/Clean-Code/"}],"tags":[{"name":"Example","slug":"Example","permalink":"https://yncbearz.github.io/tags/Example/"}]},{"title":"類別圖：Line群組通知（觀察者模式）","slug":"Class-Diagram-Line-Group-Observer-Pattern","date":"2020-09-16T16:25:37.000Z","updated":"2025-07-30T11:30:13.176Z","comments":true,"path":"2020/09/17/Class-Diagram-Line-Group-Observer-Pattern/","permalink":"https://yncbearz.github.io/2020/09/17/Class-Diagram-Line-Group-Observer-Pattern/","excerpt":"Class-Diagram-Line-Group-Observer-Pattern","text":"Example: Line群組通知 1234567891011121314151617181920212223242526272829303132@startuml Example-Line-Group-Observer-Patternabstract class Observer&#123; &#123;abstract&#125; + update()&#125;abstract class Subject&#123; + attachObserver(Observer observer) + detachObserver(Observer observer) + notifyObservers()&#125;Observer &lt;- Subjectclass User&#123; + __construct(string name)&#125;Observer &lt;|-- Userclass Program&#123; # state:string + run()&#125;Subject &lt;|-- Program@enduml ʕ •ᴥ•ʔ：若不熟悉 UML 類別圖，可參考UML類別圖說明。","categories":[{"name":"Clean Code","slug":"Clean-Code","permalink":"https://yncbearz.github.io/categories/Clean-Code/"}],"tags":[{"name":"Design Pattern","slug":"Design-Pattern","permalink":"https://yncbearz.github.io/tags/Design-Pattern/"}]},{"title":"範例：Line群組通知（觀察者模式）","slug":"Example-Line-Group-Observer-Pattern","date":"2020-09-16T13:14:10.000Z","updated":"2025-05-30T08:15:23.235Z","comments":true,"path":"2020/09/16/Example-Line-Group-Observer-Pattern/","permalink":"https://yncbearz.github.io/2020/09/16/Example-Line-Group-Observer-Pattern/","excerpt":"Example-Line-Group-Observer-Pattern","text":"Pattern: 觀察者模式 Class Diagram: Line群組通知 情境：讓我們用Line群組，來實作觀察者模式 首先實作抽象的觀察者類別 (Observer) 其中會有接收到主題類別通知時的更新方法 （具體實作內容由子類決定）。 12345678&lt;?phpnamespace App\\ObserverPattern\\LineGroup;abstract class Observer&#123; abstract public function update();&#125; 接著實作抽象的主題類別 (Subject) 它會有新增觀察者、移除觀察者、通知觀察者的方法。 1234567891011121314151617181920212223242526272829303132333435&lt;?phpnamespace App\\ObserverPattern\\LineGroup;use App\\ObserverPattern\\LineGroup\\Observer;abstract class Subject&#123; /** * @var array */ protected $observers = []; public function attachObserver(Observer $observer) &#123; $this-&gt;observers[] = $observer; &#125; public function detachObserver(Observer $observer) &#123; $index = array_search($observer, $this-&gt;observers); if ($index &gt;= 0) &#123; unset($this-&gt;observers[$index]); &#125; &#125; public function notifyObservers() &#123; foreach ($this-&gt;observers as $observer) &#123; $observer-&gt;update(); &#125; &#125;&#125; 利用剛剛建立的觀察者類別，實作使用者 12345678910111213141516171819202122&lt;?phpnamespace App\\ObserverPattern\\LineGroup;use App\\ObserverPattern\\LineGroup\\Observer;class User extends Observer&#123; protected $name; public function __construct($name) &#123; $this-&gt;name = $name; &#125; public function update() &#123; //使用者手機跳出通知 //使用者電腦跳出通知 &#125;&#125; 實作群組聊天室，並模擬使用情況 12345678910111213141516171819202122232425262728293031323334353637383940&lt;?phpnamespace App\\ObserverPattern\\LineGroup;use App\\ObserverPattern\\LineGroup\\Subject;use App\\ObserverPattern\\LineGroup\\User;class Program extends Subject&#123; protected $state = &#x27;nothing new&#x27;; public function run() &#123; //Bear加入群組 $bear = new User(&#x27;Bear&#x27;); $this-&gt;attachObserver($bear); //通知群組 $this-&gt;notifyObservers(); //Jane加入群組 $jane = new User(&#x27;Jane&#x27;); $this-&gt;attachObserver($jane); //通知群組 $this-&gt;notifyObservers(); //有新訊息，通知群組 $this-&gt;state = &#x27;new message&#x27;; $this-&gt;notifyObservers(); $this-&gt;state = &#x27;nothing new&#x27;; //Jane離開群組 $this-&gt;detachObserver($jane); //通知群組 $this-&gt;notifyObservers(); &#125;&#125; [單一職責原則]我們將主題類別 (Subject) 與 觀察者類別 (Observer) 視作兩種不同的職責。目前範例尚未將聊天室的職責與通知的職責分離。 [開放封閉原則]當新增新的主題類別時，我們可以輕易地新增、移除、通知對應觀察者。亦可以新增新的觀察者類別，再將其加入既有的主題類別。 [裡氏替換原則]透過子類來定義觀察者類別中更新方法具體的實作。目前範例的缺點是，觀察者類別不好對更新方法取更適合的命名。 [依賴反轉原則]抽象主題類別依賴於抽象的觀察者類別。使用者類別實作抽象的觀察者類別。 主題類別不必知道具體觀察者想做什麼，僅需知道觀察者類別有接口可以通知更新。 ʕ •ᴥ•ʔ：架構容易，細節仍需琢磨的模式。","categories":[{"name":"Clean Code","slug":"Clean-Code","permalink":"https://yncbearz.github.io/categories/Clean-Code/"}],"tags":[{"name":"Example","slug":"Example","permalink":"https://yncbearz.github.io/tags/Example/"}]},{"title":"觀察者模式","slug":"Observer-Pattern","date":"2020-09-13T14:43:12.000Z","updated":"2025-05-30T08:15:23.251Z","comments":true,"path":"2020/09/13/Observer-Pattern/","permalink":"https://yncbearz.github.io/2020/09/13/Observer-Pattern/","excerpt":"Observer-Pattern","text":"Observer Pattern在對象之間定義一對多的依賴。當一個對象改變狀態，依賴它的對象都會收到通知，並自動更新。亦被稱作發佈&#x2F;訂閱模式 (Publish&#x2F;Subscribe Pattern)。Example: Line群組通知 觀察者模式會將類別分為兩類：分別是主題類別 (Subject) 與 觀察者類別 (Observer) 。 透過增加&#x2F;移除名單中的觀察者，來控制主題類別改變時，要通知的對象有哪些。 優點：透過定義好的主題介面與觀察者介面，將主題類別與觀察者類別的關係解耦。 即主題類別不需要知道真正的觀察者是誰，而觀察者類別也不需要知道到底是誰通知它的。 缺點：會使程式碼變得複雜。觀察者類別中的方法名稱必須一致（可以用事件委託技術修正）若觀察者訂閱多個主題時，無法決定被通知的順序。 與其他模式的比較：[命令模式]：命令模式中，調用者發送命令給接收者，由接收者決定是否執行命令。觀察者模式中，主題發送通知給觀察者後，由觀察者自行決定要執行的行動。 經常運用在實時事件系統。程式中有「通知」兩字的行為，很可能是它的應用時機。 ʕ •ᴥ•ʔ：又是個日常生活中就會看到的模式。","categories":[{"name":"Clean Code","slug":"Clean-Code","permalink":"https://yncbearz.github.io/categories/Clean-Code/"}],"tags":[{"name":"Design Pattern","slug":"Design-Pattern","permalink":"https://yncbearz.github.io/tags/Design-Pattern/"}]},{"title":"類別圖：運輸系統（抽象工廠模式）","slug":"Class-Diagram-Transport-Abstract-Factory-Pattern","date":"2020-09-08T13:01:23.000Z","updated":"2025-07-30T11:30:13.292Z","comments":true,"path":"2020/09/08/Class-Diagram-Transport-Abstract-Factory-Pattern/","permalink":"https://yncbearz.github.io/2020/09/08/Class-Diagram-Transport-Abstract-Factory-Pattern/","excerpt":"Class-Diagram-Transport-Abstract-Factory-Pattern","text":"Example: 運輸系統 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113@startuml Example-Transport-Factory-Method-Patterninterface ModelFactory&#123; + createModel(): Model + createChair(): Chair&#125;interface Model&#123; + getName(): string&#125;interface Chair&#123; + getName(): string&#125;ModelFactory ---&gt; ModelModelFactory ---&gt; Chairclass LocalTrainFactory&#123; + createModel(): Model + createChair(): Chair&#125;class SemiExpressFactory&#123; + createModel(): Model + createChair(): Chair&#125;class LimitedExpressFactory&#123; + createModel(): Model + createChair(): Chair&#125;class Boeing747Factory&#123; + createModel(): Model + createChair(): Chair&#125;ModelFactory &lt;|.. LocalTrainFactoryModelFactory &lt;|.. SemiExpressFactoryModelFactory &lt;|.. LimitedExpressFactoryModelFactory &lt;|.. Boeing747Factoryclass LocalTrain&#123; + getName(): string&#125;class SemiExpress&#123; + getName(): string&#125;class LimitedExpress&#123; + getName(): string&#125;class Boeing747&#123; + getName(): string&#125;Model &lt;|.. LocalTrainModel &lt;|.. SemiExpressModel &lt;|.. LimitedExpressModel &lt;|.. Boeing747class LongChair&#123; + getName(): string&#125;class ReservedSeatChair&#123; + getName(): string&#125;class PlaneChair&#123; + getName(): string&#125;Chair &lt;|.. LongChairChair &lt;|.. ReservedSeatChairChair &lt;|.. PlaneChairclass Program&#123; + getModel(string model): string + getChair(string model): string - createModelFactory(string model): ModelFactory&#125;Program --&gt; ModelFactoryLocalTrainFactory ---&gt; LocalTrainLocalTrainFactory ---&gt; LongChairSemiExpressFactory ---&gt; SemiExpressSemiExpressFactory ---&gt; ReservedSeatChairLimitedExpressFactory ---&gt; LimitedExpressLimitedExpressFactory ---&gt; ReservedSeatChairBoeing747Factory ---&gt; Boeing747Boeing747Factory ---&gt; PlaneChair@enduml ʕ •ᴥ•ʔ：若不熟悉 UML 類別圖，可參考UML類別圖說明。","categories":[{"name":"Clean Code","slug":"Clean-Code","permalink":"https://yncbearz.github.io/categories/Clean-Code/"}],"tags":[{"name":"Design Pattern","slug":"Design-Pattern","permalink":"https://yncbearz.github.io/tags/Design-Pattern/"}]},{"title":"範例：運輸系統 （抽象工廠模式）","slug":"Example-Transport-Abstract-Factory-Pattern","date":"2020-09-04T13:21:08.000Z","updated":"2025-05-30T08:15:23.239Z","comments":true,"path":"2020/09/04/Example-Transport-Abstract-Factory-Pattern/","permalink":"https://yncbearz.github.io/2020/09/04/Example-Transport-Abstract-Factory-Pattern/","excerpt":"Example-Transport-Abstract-Factory-Pattern","text":"Pattern: 抽象工廠模式 Class Diagram: 運輸系統 前情提要：鐵路運輸系統，參考範例：運輸系統（工廠方法模式） 123456789101112131415161718192021222324252627282930313233&lt;?phpnamespace App\\FactoryPattern\\Transport\\AbstractFactoryPattern;use App\\FactoryPattern\\Transport\\AbstractFactoryPattern\\Contracts\\ModelFactory;use ReflectionClass;class Program&#123; /** * @param string $modelName * @return string */ public function getModel($modelName) &#123; $modelFactory = $this-&gt;createModelFactory($modelName); $model = $modelFactory-&gt;createModel(); return $model-&gt;getName(); &#125; /** * @param string $modelName * @return ModelFactory */ private function createModelFactory($modelName) &#123; $namespace = &#x27;App\\FactoryPattern\\Transport\\AbstractFactoryPattern\\ModelFactories&#x27;; $className = $modelName . &#x27;Factory&#x27;; $reflector = new ReflectionClass($namespace . &#x27;\\\\&#x27; . $className); return $reflector-&gt;newInstance(); &#125;&#125; 需求一：各交通工具準備就緒，要開始處理內裝問題。 由於不同的機型會有不同的內裝，讓我們從定義椅子介面開始。 定義椅子介面 123456789&lt;?phpnamespace App\\FactoryPattern\\Transport\\AbstractFactoryPattern\\Contracts;interface Chair&#123; public function getName();&#125; 接著改寫機型工廠介面，除了製作機型外，要新增製作椅子的方法。 1234567891011121314&lt;?phpnamespace App\\FactoryPattern\\Transport\\AbstractFactoryPattern\\Contracts;use App\\FactoryPattern\\Transport\\AbstractFactoryPattern\\Contracts\\Model;use App\\FactoryPattern\\Transport\\AbstractFactoryPattern\\Contracts\\Chair;interface ModelFactory&#123; public function createModel(): Model; public function createChair(): Chair;&#125; 實作長型座椅 1234567891011121314&lt;?phpnamespace App\\FactoryPattern\\Transport\\AbstractFactoryPattern\\Chair;use App\\FactoryPattern\\Transport\\AbstractFactoryPattern\\Contracts\\Chair;class LongChair implements Chair&#123; public function getName() &#123; return &#x27;長型座椅&#x27;; &#125;&#125; 實作對號座椅 1234567891011121314&lt;?phpnamespace App\\FactoryPattern\\Transport\\AbstractFactoryPattern\\Chair;use App\\FactoryPattern\\Transport\\AbstractFactoryPattern\\Contracts\\Chair;class ReservedSeatChair implements Chair&#123; public function getName() &#123; return &#x27;對號座椅&#x27;; &#125;&#125; 實作飛機座椅 1234567891011121314&lt;?phpnamespace App\\FactoryPattern\\Transport\\AbstractFactoryPattern\\Chair;use App\\FactoryPattern\\Transport\\AbstractFactoryPattern\\Contracts\\Chair;class PlaneChair implements Chair&#123; public function getName() &#123; return &#x27;飛機座椅&#x27;; &#125;&#125; 接著改寫各個機型工廠，選擇適合的座椅。 改寫區間車工廠 12345678910111213141516171819202122232425&lt;?phpnamespace App\\FactoryPattern\\Transport\\AbstractFactoryPattern\\ModelFactories;use App\\FactoryPattern\\Transport\\AbstractFactoryPattern\\Contracts\\Model;use App\\FactoryPattern\\Transport\\AbstractFactoryPattern\\Contracts\\ModelFactory;use App\\FactoryPattern\\Transport\\AbstractFactoryPattern\\Model\\LocalTrain;use App\\FactoryPattern\\Transport\\AbstractFactoryPattern\\Contracts\\Chair;use App\\FactoryPattern\\Transport\\AbstractFactoryPattern\\Chair\\LongChair;class LocalTrainFactory implements ModelFactory&#123; public function createModel(): Model &#123; //取得生產材料... //招募技術團隊... return new LocalTrain(); &#125; public function createChair(): Chair &#123; return new LongChair(); &#125;&#125; 改寫復興號工廠 12345678910111213141516171819202122232425&lt;?phpnamespace App\\FactoryPattern\\Transport\\AbstractFactoryPattern\\ModelFactories;use App\\FactoryPattern\\Transport\\AbstractFactoryPattern\\Contracts\\Model;use App\\FactoryPattern\\Transport\\AbstractFactoryPattern\\Contracts\\ModelFactory;use App\\FactoryPattern\\Transport\\AbstractFactoryPattern\\Model\\SemiExpress;use App\\FactoryPattern\\Transport\\AbstractFactoryPattern\\Contracts\\Chair;use App\\FactoryPattern\\Transport\\AbstractFactoryPattern\\Chair\\ReservedSeatChair;class SemiExpressFactory implements ModelFactory&#123; public function createModel(): Model &#123; //取得生產材料... //招募技術團隊... return new SemiExpress(); &#125; public function createChair(): Chair &#123; return new ReservedSeatChair(); &#125;&#125; 改寫自強號工廠 123456789101112131415161718192021222324&lt;?phpnamespace App\\FactoryPattern\\Transport\\AbstractFactoryPattern\\ModelFactories;use App\\FactoryPattern\\Transport\\AbstractFactoryPattern\\Contracts\\Model;use App\\FactoryPattern\\Transport\\AbstractFactoryPattern\\Model\\LimitedExpress;use App\\FactoryPattern\\Transport\\AbstractFactoryPattern\\Contracts\\ModelFactory;use App\\FactoryPattern\\Transport\\AbstractFactoryPattern\\Contracts\\Chair;use App\\FactoryPattern\\Transport\\AbstractFactoryPattern\\Chair\\ReservedSeatChair;class LimitedExpressFactory implements ModelFactory&#123; public function createModel(): Model &#123; //取得生產材料... //招募技術團隊... return new LimitedExpress(); &#125; public function createChair(): Chair &#123; return new ReservedSeatChair(); &#125;&#125; 改寫波音 747 工廠 12345678910111213141516171819202122232425&lt;?phpnamespace App\\FactoryPattern\\Transport\\AbstractFactoryPattern\\ModelFactories;use App\\FactoryPattern\\Transport\\AbstractFactoryPattern\\Contracts\\ModelFactory;use App\\FactoryPattern\\Transport\\AbstractFactoryPattern\\Contracts\\Model;use App\\FactoryPattern\\Transport\\AbstractFactoryPattern\\Model\\Boeing747;use App\\FactoryPattern\\Transport\\AbstractFactoryPattern\\Contracts\\Chair;use App\\FactoryPattern\\Transport\\AbstractFactoryPattern\\Chair\\PlaneChair;class Boeing747Factory implements ModelFactory&#123; public function createModel(): Model &#123; //取得生產材料... //招募技術團隊.. return new Boeing747(); &#125; public function createChair(): Chair &#123; return new PlaneChair(); &#125;&#125; 最後改寫原本的程式碼 123456789101112131415161718192021222324252627282930313233343536373839404142434445&lt;?phpnamespace App\\FactoryPattern\\Transport\\AbstractFactoryPattern;use App\\FactoryPattern\\Transport\\AbstractFactoryPattern\\Contracts\\ModelFactory;use ReflectionClass;class Program&#123; /** * @param string $modelName * @return string */ public function getModel($modelName) &#123; $modelFactory = $this-&gt;createModelFactory($modelName); $model = $modelFactory-&gt;createModel(); return $model-&gt;getName(); &#125; /** * @param string $modelName * @return string */ public function getChair($modelName) &#123; $modelFactory = $this-&gt;createModelFactory($modelName); $chair = $modelFactory-&gt;createChair(); return $chair-&gt;getName(); &#125; /** * @param string $modelName * @return ModelFactory */ private function createModelFactory($modelName) &#123; $namespace = &#x27;App\\FactoryPattern\\Transport\\AbstractFactoryPattern\\ModelFactories&#x27;; $className = $modelName . &#x27;Factory&#x27;; $reflector = new ReflectionClass($namespace . &#x27;\\\\&#x27; . $className); return $reflector-&gt;newInstance(); &#125;&#125; 透過工廠介面，我們組合了各種類型產品。使得不同類型的產品之間，有了產品族的聯繫關係。 [單一職責原則]我們將工廠類別 (Factory) 與產品類別 (Product) 視作兩種不同的職責。 [開放封閉原則]當新增新的產品族時，我們僅需新增工廠類別。當修改既有產品時，我們僅需修改其產品類別，不會影響到其他的產品類別。 [介面隔離原則]工廠介面：用來創建機型及座椅。產品介面：用來創建對應的產品。 [依賴反轉原則]工廠介面依賴於抽象的機型介面與座椅介面。 工廠實作抽象的工廠介面。機型實作抽象的機型介面。座椅實作抽象的座椅介面。 ʕ •ᴥ•ʔ：雖然有點複雜，但這個模式好美。","categories":[{"name":"Clean Code","slug":"Clean-Code","permalink":"https://yncbearz.github.io/categories/Clean-Code/"}],"tags":[{"name":"Example","slug":"Example","permalink":"https://yncbearz.github.io/tags/Example/"}]},{"title":"抽象工廠模式","slug":"Abstract-Factory-Pattern","date":"2020-09-04T13:16:26.000Z","updated":"2025-05-30T08:15:23.214Z","comments":true,"path":"2020/09/04/Abstract-Factory-Pattern/","permalink":"https://yncbearz.github.io/2020/09/04/Abstract-Factory-Pattern/","excerpt":"Abstract Factory Pattern","text":"Abstract Factory Pattern提供一個接口，用於創建相關或依賴對象的家族，而不需要明確指定具體類。即產品增加產品族的概念。Example: 運輸系統、世紀帝國 抽象工廠模式會將類別分為兩類：分別是工廠類別 (Creator) 與 產品類別 (Product) 。兩者皆有對應的抽象介面，即抽象工廠類別 (AbstractFactory) 與 抽象產品類別 (AbstractProduct) 。 不同類型的產品結盟成產品族。 優點：將創建物件的邏輯與物件本身的邏輯分離。一個工廠只會對應一個產品族類別，遵守開放封閉原則。 缺點：會使程式碼變得複雜。不容易替產品族新增新的產品。（須修改抽象工廠介面） 與其他模式的比較：[簡單工廠模式]：簡單工廠模式僅擁有一個工廠，透過 switch 子句，創建同種類型的不同產品。 無法遵守開放封閉原則。 [工廠方法模式]：工廠方法模式擁有多個工廠，各個工廠創建同種類型的不同產品。 而抽象工廠模式則是擁有多個工廠，各個工廠創建多種類型的產品。不同類型的產品，有著一條隱密的線，形成產品族的關係。 實作技巧： 將 factory 作成 singleton。 若會有好幾個產品族物件並存，不妨採用 Prototype 來製作工廠類別 (Factory) 。 ʕ •ᴥ•ʔ：把你學會的 S.O.L.I.D 同時發揮出來。","categories":[{"name":"Clean Code","slug":"Clean-Code","permalink":"https://yncbearz.github.io/categories/Clean-Code/"}],"tags":[{"name":"Design Pattern","slug":"Design-Pattern","permalink":"https://yncbearz.github.io/tags/Design-Pattern/"}]},{"title":"類別圖：運輸系統（工廠方法模式）","slug":"Class-Diagram-Transport-Factory-Method-Pattern","date":"2020-08-30T01:50:38.000Z","updated":"2025-07-30T11:30:13.302Z","comments":true,"path":"2020/08/30/Class-Diagram-Transport-Factory-Method-Pattern/","permalink":"https://yncbearz.github.io/2020/08/30/Class-Diagram-Transport-Factory-Method-Pattern/","excerpt":"Class-Diagram-Transport-Factory-Method-Pattern","text":"Example: 運輸系統 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778@startuml Example-Transport-Factory-Method-Patterninterface ModelFactory&#123; + createModel(): Model&#125;interface Model&#123; + getName(): string&#125;ModelFactory ---&gt; Modelclass LocalTrainFactory&#123; + createModel(): Model&#125;class SemiExpressFactory&#123; + createModel(): Model&#125;class LimitedExpressFactory&#123; + createModel(): Model&#125;class Boeing747Factory&#123; + createModel(): Model&#125;ModelFactory &lt;|.. LocalTrainFactoryModelFactory &lt;|.. SemiExpressFactoryModelFactory &lt;|.. LimitedExpressFactoryModelFactory &lt;|.. Boeing747Factoryclass LocalTrain&#123; + getName(): string&#125;class SemiExpress&#123; + getName(): string&#125;class LimitedExpress&#123; + getName(): string&#125;class Boeing747&#123; + getName(): string&#125;Model &lt;|.. LocalTrainModel &lt;|.. SemiExpressModel &lt;|.. LimitedExpressModel &lt;|.. Boeing747class Program&#123; + getModel(string model): string - createModelFactory(string model): ModelFactory&#125;Program --&gt; ModelFactoryLocalTrainFactory ---&gt; LocalTrainSemiExpressFactory ---&gt; SemiExpressLimitedExpressFactory ---&gt; LimitedExpressBoeing747Factory ---&gt; Boeing747@enduml 這個圖真的很適合說明依賴反轉原則 ʕ •ᴥ•ʔ：若不熟悉 UML 類別圖，可參考UML類別圖說明。","categories":[{"name":"Clean Code","slug":"Clean-Code","permalink":"https://yncbearz.github.io/categories/Clean-Code/"}],"tags":[{"name":"Design Pattern","slug":"Design-Pattern","permalink":"https://yncbearz.github.io/tags/Design-Pattern/"}]},{"title":"範例：運輸系統（工廠方法模式）","slug":"Example-Transport-Factory-Method-Pattern","date":"2020-08-29T18:02:11.000Z","updated":"2025-05-30T08:15:23.240Z","comments":true,"path":"2020/08/30/Example-Transport-Factory-Method-Pattern/","permalink":"https://yncbearz.github.io/2020/08/30/Example-Transport-Factory-Method-Pattern/","excerpt":"Example-Transport-Factory-Method-Pattern","text":"Pattern: 工廠方法模式 Class Diagram: 運輸系統 \b前情提要：鐵路運輸系統，參考範例：運輸系統（簡單工廠模式) 12345678910111213141516171819&lt;?phpnamespace App\\FactoryPattern\\Transport\\SimpleFactoryPattern;use App\\FactoryPattern\\Transport\\SimpleFactoryPattern\\RailwayModelFactory;class Program&#123; /** * @param string $modelName * @return string */ public function getModel($modelName) &#123; $railwayModelFactory = new RailwayModelFactory(); $model = $railwayModelFactory-&gt;createModel($modelName); return $model-&gt;getName(); &#125;&#125; 需求一：隨著公司擴大，運輸系統不再僅限鐵路，將引進波音747，進軍航空業 此時發現，原本的簡單工廠，從創建對象都是火車，到有飛機，邏輯越來越複雜了。 常常違反開放封閉原則，讓我們用工廠方法模式修正它。 首先定義機型工廠介面（可生產火車、飛機等各種機型） 12345678910&lt;?phpnamespace App\\FactoryPattern\\Transport\\FactoryMethodPattern\\Contracts;use App\\FactoryPattern\\Transport\\FactoryMethodPattern\\Contracts\\Model;interface ModelFactory&#123; public function createModel(): Model;&#125; 實作區間車工廠 1234567891011121314151617&lt;?phpnamespace App\\FactoryPattern\\Transport\\FactoryMethodPattern\\ModelFactories;use App\\FactoryPattern\\Transport\\FactoryMethodPattern\\Contracts\\Model;use App\\FactoryPattern\\Transport\\FactoryMethodPattern\\Contracts\\ModelFactory;use App\\FactoryPattern\\Transport\\FactoryMethodPattern\\Model\\LocalTrain;class LocalTrainFactory implements ModelFactory&#123; public function createModel(): Model &#123; //取得生產材料... //招募技術團隊... return new LocalTrain(); &#125;&#125; 實作復興號工廠 1234567891011121314151617&lt;?phpnamespace App\\FactoryPattern\\Transport\\FactoryMethodPattern\\ModelFactories;use App\\FactoryPattern\\Transport\\FactoryMethodPattern\\Contracts\\Model;use App\\FactoryPattern\\Transport\\FactoryMethodPattern\\Contracts\\ModelFactory;use App\\FactoryPattern\\Transport\\FactoryMethodPattern\\Model\\SemiExpress;class SemiExpressFactory implements ModelFactory&#123; public function createModel(): Model &#123; //取得生產材料... //招募技術團隊... return new SemiExpress(); &#125;&#125; 實作自強號工廠 1234567891011121314151617&lt;?phpnamespace App\\FactoryPattern\\Transport\\FactoryMethodPattern\\ModelFactories;use App\\FactoryPattern\\Transport\\FactoryMethodPattern\\Contracts\\Model;use App\\FactoryPattern\\Transport\\FactoryMethodPattern\\Model\\LimitedExpress;use App\\FactoryPattern\\Transport\\FactoryMethodPattern\\Contracts\\ModelFactory;class LimitedExpressFactory implements ModelFactory&#123; public function createModel(): Model &#123; //取得生產材料... //招募技術團隊... return new LimitedExpress(); &#125;&#125; 修改原本的程式碼 123456789101112131415161718192021222324252627282930313233343536373839404142&lt;?phpnamespace App\\FactoryPattern\\Transport\\FactoryMethodPattern;use App\\FactoryPattern\\Transport\\FactoryMethodPattern\\ModelFactories\\LimitedExpressFactory;use App\\FactoryPattern\\Transport\\FactoryMethodPattern\\ModelFactories\\LocalTrainFactory;use App\\FactoryPattern\\Transport\\FactoryMethodPattern\\ModelFactories\\SemiExpressFactory;class Program&#123; /** * @param string $modelName * @return string */ public function getModel($modelName) &#123; $modelFactory = $this-&gt;createModelFactory($modelName); $model = $modelFactory-&gt;createModel(); return $model-&gt;getName(); &#125; /** * @param string $modelName * @return ModelFactory */ private function createModelFactory($modelName) &#123; switch ($modelName) &#123; case &#x27;LimitedExpress&#x27;: return new LimitedExpressFactory(); break; case &#x27;LocalTrain&#x27;: return new LocalTrainFactory(); break; case &#x27;SemiExpress&#x27;: return new SemiExpressFactory(); break; &#125; &#125;&#125; 運用反射 (Reflection) 機制，讓客戶端的程式碼不再修改 123456789101112131415161718192021222324252627282930313233&lt;?phpnamespace App\\FactoryPattern\\Transport\\FactoryMethodPattern;use App\\FactoryPattern\\Transport\\FactoryMethodPattern\\Contracts\\ModelFactory;use ReflectionClass;class Program&#123; /** * @param string $modelName * @return string */ public function getModel($modelName) &#123; $modelFactory = $this-&gt;createModelFactory($modelName); $model = $modelFactory-&gt;createModel(); return $model-&gt;getName(); &#125; /** * @param string $modelName * @return ModelFactory */ private function createModelFactory($modelName) &#123; $namespace = &#x27;App\\FactoryPattern\\Transport\\FactoryMethodPattern\\ModelFactories&#x27;; $className = $modelName . &#x27;Factory&#x27;; $reflector = new ReflectionClass($namespace . &#x27;\\\\&#x27; . $className); return $reflector-&gt;newInstance(); &#125;&#125; 這下子，改造工程結束，讓我們回到波音747！ 實作波音747機型 12345678910111213&lt;?phpnamespace App\\FactoryPattern\\Transport\\FactoryMethodPattern\\Model;use App\\FactoryPattern\\Transport\\FactoryMethodPattern\\Contracts\\Model;class Boeing747 implements Model&#123; public function getName() &#123; return &#x27;波音747&#x27;; &#125;&#125; 最後實作波音747工廠 123456789101112131415&lt;?phpnamespace App\\FactoryPattern\\Transport\\FactoryMethodPattern\\ModelFactories;use App\\FactoryPattern\\Transport\\FactoryMethodPattern\\Contracts\\ModelFactory;use App\\FactoryPattern\\Transport\\FactoryMethodPattern\\Contracts\\Model;use App\\FactoryPattern\\Transport\\FactoryMethodPattern\\Model\\Boeing747;class Boeing747Factory implements ModelFactory&#123; public function createModel(): Model &#123; return new Boeing747(); &#125;&#125; [單一職責原則]我們將創建類別 (Creator) 與 產品類別 (Product) 視作兩種不同的職責。 [開放封閉原則]當新增新的產品時，我們僅需新增產品類別及新增創建類別。當修改既有產品時，我們僅需修改其產品類別，不會影響到其他的產品類別。 [介面隔離原則]拆分出工廠介面與機型介面。 [依賴反轉原則]客戶依賴於抽象工廠介面與機型介面。工廠類別實作抽象的工廠介面。機型類別實作抽象的機型介面。 ʕ •ᴥ•ʔ：不久之後，我們會再一次看到這個範例，敬請期待。","categories":[{"name":"Clean Code","slug":"Clean-Code","permalink":"https://yncbearz.github.io/categories/Clean-Code/"}],"tags":[{"name":"Example","slug":"Example","permalink":"https://yncbearz.github.io/tags/Example/"}]},{"title":"工廠方法模式","slug":"Factory-Method-Pattern","date":"2020-08-29T18:01:01.000Z","updated":"2025-05-30T08:15:23.242Z","comments":true,"path":"2020/08/30/Factory-Method-Pattern/","permalink":"https://yncbearz.github.io/2020/08/30/Factory-Method-Pattern/","excerpt":"Factory-Method-Pattern","text":"Factory Method Pattern簡單工廠的延伸，不再提供統一的工廠類來建立所有物件，而是將Factory類別抽象化，針對不同分類的物件有不同的工廠。Example: 運輸系統、世紀帝國 工廠方法模式會將類別分為兩類：分別是工廠類別 (Creator) 與 產品類別 (Product) 。 透過定義好的介面，讓類別的實例化延遲到子類中進行。 優點：將創建物件的邏輯與物件本身的邏輯分離。一個工廠只會對應一個類別，完全遵守了開放封閉原則。 缺點：會做出很多小類別。（每次新增產品類別，就得新增對應的工廠類別） 與其他模式的比較：[簡單工廠模式]：比起簡單工廠模式，工廠方法模式能在創建物件時，將複雜的創建邏輯處理地更好。 [樣板方法模式]：工廠方法模式，是一個迷你的樣板方法模式，它只提出了建造類別這個步驟。 ʕ •ᴥ•ʔ：將開放封閉原則展現的淋漓盡致！","categories":[{"name":"Clean Code","slug":"Clean-Code","permalink":"https://yncbearz.github.io/categories/Clean-Code/"}],"tags":[{"name":"Design Pattern","slug":"Design-Pattern","permalink":"https://yncbearz.github.io/tags/Design-Pattern/"}]},{"title":"類別圖：運輸系統（簡單工廠模式）","slug":"Class-Diagram-Transport-Simple-Factory-Pattern","date":"2020-08-29T18:00:15.000Z","updated":"2025-07-30T11:30:13.314Z","comments":true,"path":"2020/08/30/Class-Diagram-Transport-Simple-Factory-Pattern/","permalink":"https://yncbearz.github.io/2020/08/30/Class-Diagram-Transport-Simple-Factory-Pattern/","excerpt":"Class-Diagram-Transport-Simple-Factory-nattern","text":"Example: 運輸系統 1234567891011121314151617181920212223242526272829303132333435363738394041@startuml Example-Transport-Simple-Factory-Patterninterface Model&#123; + getName()&#125;class LocalTrain&#123; + getName()&#125;class LimitedExpress&#123; + getName()&#125;class SemiExpress&#123; + getName()&#125;Model &lt;|.. LocalTrainModel &lt;|.. LimitedExpressModel &lt;|.. SemiExpressclass RailwayModelFactory&#123; + createModel(string model): Model&#125;RailwayModelFactory --&gt; Modelclass Program&#123; + getModel(string model): string&#125;Program -&gt; RailwayModelFactory@enduml ʕ •ᴥ•ʔ：若不熟悉 UML 類別圖，可參考UML類別圖說明。","categories":[{"name":"Clean Code","slug":"Clean-Code","permalink":"https://yncbearz.github.io/categories/Clean-Code/"}],"tags":[{"name":"Design Pattern","slug":"Design-Pattern","permalink":"https://yncbearz.github.io/tags/Design-Pattern/"}]},{"title":"範例：運輸系統（簡單工廠模式)","slug":"Example-Transport-Simple-Factory-Pattern","date":"2020-08-29T16:19:25.000Z","updated":"2025-05-30T08:15:23.240Z","comments":true,"path":"2020/08/30/Example-Transport-Simple-Factory-Pattern/","permalink":"https://yncbearz.github.io/2020/08/30/Example-Transport-Simple-Factory-Pattern/","excerpt":"Example-Transport-Simple-Factory-Pattern","text":"Pattern: 簡單工廠模式 Class Diagram: 運輸系統 情境：運輸系統，用來取得當前機型名稱等資訊 123456789101112131415161718192021222324&lt;?phpnamespace App\\FactoryPattern\\Transport\\SimpleFactoryPattern;class Program&#123; /** * @param string $modelName * @return string */ public function getModel($modelName) &#123; switch ($modelName) &#123; case &#x27;LocalTrain&#x27;: return &#x27;區間車&#x27;; break; case &#x27;LimitedExpress&#x27;: return &#x27;自強號&#x27;; break; &#125; &#125;&#125; 需求一：新增復興號 (SemiExpress) 正當我們想直接在switch中新增一個case時，發現這種做法違反了開放封閉原則。 明明是新增機型，卻修改到了既有的程式碼（取得機型名稱）。此外在修改機型名稱時，也會修改到既有程式碼。 讓我們用簡單工廠模式，將創建物件與物件本身的職責分離。（註：客戶端的程式碼、創建機型、機型本身，共三種職責） 首先定義機型介面 12345678&lt;?phpnamespace App\\FactoryPattern\\Transport\\SimpleFactoryPattern\\Contracts;interface Model&#123; public function getName();&#125; 實作區間車機型 12345678910111213&lt;?phpnamespace App\\FactoryPattern\\Transport\\SimpleFactoryPattern\\Model;use App\\FactoryPattern\\Transport\\SimpleFactoryPattern\\Contracts\\Model;class LocalTrain implements Model&#123; public function getName() &#123; return &#x27;區間車&#x27;; &#125;&#125; 實作自強號機型 12345678910111213&lt;?phpnamespace App\\FactoryPattern\\Transport\\SimpleFactoryPattern\\Model;use App\\FactoryPattern\\Transport\\SimpleFactoryPattern\\Contracts\\Model;class LimitedExpress implements Model&#123; public function getName() &#123; return &#x27;自強號&#x27;; &#125;&#125; 實作鐵路機型工廠 123456789101112131415161718192021222324252627&lt;?phpnamespace App\\FactoryPattern\\Transport\\SimpleFactoryPattern;use App\\FactoryPattern\\Transport\\SimpleFactoryPattern\\Contracts\\Model;use App\\FactoryPattern\\Transport\\SimpleFactoryPattern\\Model\\LocalTrain;use App\\FactoryPattern\\Transport\\SimpleFactoryPattern\\Model\\LimitedExpress;class RailWayModelFactory&#123; /** * @param string $modelName * @return Model */ public function createModel($modelName): Model &#123; switch ($modelName) &#123; case &#x27;LocalTrain&#x27;: return new LocalTrain(); break; case &#x27;LimitedExpress&#x27;: return new LimitedExpress(); break; &#125; &#125;&#125; 接著是修改原本的程式 12345678910111213141516171819&lt;?phpnamespace App\\FactoryPattern\\Transport\\SimpleFactoryPattern;use App\\FactoryPattern\\Transport\\SimpleFactoryPattern\\RailwayModelFactory;class Program&#123; /** * @param string $modelName * @return string */ public function getModel($modelName) &#123; $railwayModelFactory = new RailwayModelFactory(); $model = $railwayModelFactory-&gt;createModel($modelName); return $model-&gt;getName(); &#125;&#125; 回到需求，實作復興號機型 12345678910111213&lt;?phpnamespace App\\FactoryPattern\\Transport\\SimpleFactoryPattern\\Model;use App\\FactoryPattern\\Transport\\SimpleFactoryPattern\\Contracts\\Model;class SemiExpress implements Model&#123; public function getName() &#123; return &#x27;復興號&#x27;; &#125;&#125; 最後修改鐵路機型工廠 1234567891011121314151617181920212223242526272829303132&lt;?phpnamespace App\\FactoryPattern\\Transport\\SimpleFactoryPattern;use App\\FactoryPattern\\Transport\\SimpleFactoryPattern\\Contracts\\Model;use App\\FactoryPattern\\Transport\\SimpleFactoryPattern\\Model\\LocalTrain;use App\\FactoryPattern\\Transport\\SimpleFactoryPattern\\Model\\LimitedExpress;use App\\FactoryPattern\\Transport\\SimpleFactoryPattern\\Model\\SemiExpress;class RailWayModelFactory&#123; /** * @param string $model * @return Model */ public function createModel($model): Model &#123; switch ($model) &#123; case &#x27;LocalTrain&#x27;: return new LocalTrain(); break; case &#x27;LimitedExpress&#x27;: return new LimitedExpress(); break; case &#x27;SemiExpress&#x27;: return new SemiExpress(); break; &#125; &#125;&#125; [單一職責原則] 我們將 創建類別 (Creator) 與 產品類別 (Product) 視作兩種不同的職責。 將取得機型資訊的運輸系統視作第三種職責。 [開放封閉原則] 當新增新的產品時，我們僅需新增產品類別及修改創建類別。 當修改既有產品時，我們僅需修改其產品類別及創建類別，不會影響到其他的產品類別。 無論是新增&#x2F;修改產品，我們都不用再去修改到運輸系統類別。 [依賴反轉原則] 運輸類別依賴抽象的機型介面。 產品類別實作抽象的機型介面。 透過簡單工廠模式，運輸系統類別減少了改變的機會，但創建類別依然常常需要變更。 ʕ •ᴥ•ʔ：不久之後，我們還會見到這個範例，敬請期待。","categories":[{"name":"Clean Code","slug":"Clean-Code","permalink":"https://yncbearz.github.io/categories/Clean-Code/"}],"tags":[{"name":"Example","slug":"Example","permalink":"https://yncbearz.github.io/tags/Example/"}]},{"title":"類別圖：會員制 （狀態模式）","slug":"Class-Diagram-Premium-State-Pattern","date":"2020-08-25T00:55:57.000Z","updated":"2025-07-30T11:30:13.198Z","comments":true,"path":"2020/08/25/Class-Diagram-Premium-State-Pattern/","permalink":"https://yncbearz.github.io/2020/08/25/Class-Diagram-Premium-State-Pattern/","excerpt":"Class-Diagram-Premium-State-Pattern","text":"Example: 會員制 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758596061626364656667686970717273@startumlabstract class UserState&#123; + LICENCE = &#x27;undefined user&#x27; + getLicense() + register() + subscribe() + cancelSubscription() + deleteAccount()&#125;class GuestState&#123; # program + LICENCE = &#x27;guest&#x27; + __construct(Program $program) + register() + subscribe() + cancelSubscription() + deleteAccount()&#125;class MemberState&#123; # program + LICENCE = &#x27;member&#x27; + __construct(Program $program) + register() + subscribe() + cancelSubscription() + deleteAccount()&#125;class PremiumState&#123; # program + LICENCE = &#x27;premium&#x27; + __construct(Program $program) + register() + subscribe() + cancelSubscription() + deleteAccount()&#125;UserState &lt;|.. GuestStateUserState &lt;|.. MemberStateUserState &lt;|.. PremiumStateclass Program&#123; # license # guestState # memberState # premiumState + __construct() + register() + getLicense() + subscribe() + cancelSubscription() + deleteAccount() + setGuestState() + setMemberState() + setPremiumState() + getState()&#125;GuestState &lt;--&gt; ProgramMemberState &lt;--&gt; ProgramPremiumState &lt;--&gt; Program@enduml ʕ •ᴥ•ʔ：若不熟悉 UML 類別圖，可參考UML類別圖說明。","categories":[{"name":"Clean Code","slug":"Clean-Code","permalink":"https://yncbearz.github.io/categories/Clean-Code/"}],"tags":[{"name":"Design Pattern","slug":"Design-Pattern","permalink":"https://yncbearz.github.io/tags/Design-Pattern/"}]},{"title":"範例：會員制（狀態模式）","slug":"Example-Premium-State-Pattern","date":"2020-08-20T17:08:01.000Z","updated":"2025-05-30T08:15:23.236Z","comments":true,"path":"2020/08/21/Example-Premium-State-Pattern/","permalink":"https://yncbearz.github.io/2020/08/21/Example-Premium-State-Pattern/","excerpt":"Example-Premium-State-Pattern","text":"Pattern: 狀態模式 Class Diagram: 會員制 情境：平台有三種身份，分別是訪客 (guest) 、 會員 (member) 及 付費會員(premium) 訪客藉由註冊 (register) ，可成為會員。 會員藉由訂閱 (subsribe) ，可成為付費會員。 付費會員藉由取消訂閱 (cancelSubscription) ，可變回會員。 會員及付費會員藉由刪除帳號 (deleteAccount) ，可變回訪客。 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859606162636465666768697071727374&lt;?phpnamespace App\\StatePattern\\Youtube;use Exception;class Program&#123; /** * @var string */ protected $license; public function __construct() &#123; $this-&gt;setLicense(&#x27;guest&#x27;); &#125; public function register() &#123; if ($this-&gt;license == &#x27;premium&#x27;) &#123; return; &#125; $this-&gt;license = &#x27;member&#x27;; &#125; public function getLicense() &#123; return $this-&gt;license; &#125; /** * @param string $license */ public function setLicense($license) &#123; $this-&gt;license = $license; &#125; public function subscribe() &#123; if ($this-&gt;license == &#x27;premium&#x27;) &#123; return; &#125; if ($this-&gt;license == &#x27;member&#x27;) &#123; $this-&gt;license = &#x27;premium&#x27;; return; &#125; throw new Exception(&#x27;You need to be a member before subscribing.&#x27;); &#125; public function cancelSubscription() &#123; if ($this-&gt;license == &#x27;premium&#x27;) &#123; $this-&gt;license = &#x27;member&#x27;; return; &#125; throw new Exception(&#x27;Sorry, you have not subscribed.&#x27;); &#125; public function deleteAccount() &#123; if ($this-&gt;license == &#x27;member&#x27; || $this-&gt;license == &#x27;premium&#x27;) &#123; $this-&gt;license = &#x27;guest&#x27;; return; &#125; throw new Exception(&#x27;You need to be a member before deleting account.&#x27;); &#125;&#125; 隨著功能越來越多，每次新增功能時，我們都會有許多複雜的條件式（判斷當前用戶狀態）。 讓我們用狀態模式改善它。 需求一：切分出不同的用戶狀態 首先定義用戶狀態（抽象） 123456789101112131415161718192021&lt;?phpnamespace App\\StatePattern\\Youtube\\State;abstract class UserState&#123; const LICENCE = &#x27;undefined user&#x27;; public function getLicense() &#123; return $this::LICENCE; &#125; abstract function register(); abstract function subscribe(); abstract function cancelSubscription(); abstract function deleteAccount();&#125; 訪客狀態 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748&lt;?phpnamespace App\\StatePattern\\Youtube\\State;use App\\StatePattern\\Youtube\\Program;use Exception;use App\\StatePattern\\Youtube\\State\\UserState;class GuestState extends UserState&#123; /** * @var Program */ protected $program; /** * @var string */ const LICENCE = &#x27;guest&#x27;; /** * @param Program $program */ public function __construct(Program $program) &#123; $this-&gt;program = $program; &#125; public function register() &#123; $this-&gt;program-&gt;setMemberState(); &#125; public function subscribe() &#123; throw new Exception(&#x27;You need to be a member before subscribing.&#x27;); &#125; public function cancelSubscription() &#123; throw new Exception(&#x27;Sorry, you have not subscribed.&#x27;); &#125; public function deleteAccount() &#123; throw new Exception(&#x27;You need to be a member before deleting account.&#x27;); &#125;&#125; 會員狀態 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748&lt;?phpnamespace App\\StatePattern\\Youtube\\State;use App\\StatePattern\\Youtube\\Program;use Exception;use App\\StatePattern\\Youtube\\State\\UserState;class MemberState extends UserState&#123; /** * @var Program */ protected $program; /** * @var string */ const LICENCE = &#x27;member&#x27;; /** * @param Program $program */ public function __construct(Program $program) &#123; $this-&gt;program = $program; &#125; public function register() &#123; return; &#125; public function subscribe() &#123; $this-&gt;program-&gt;setPremiumState(); &#125; public function cancelSubscription() &#123; throw new Exception(&#x27;Sorry, you have not subscribed.&#x27;); &#125; public function deleteAccount() &#123; $this-&gt;program-&gt;setGuestState(); &#125;&#125; 付費會員狀態 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647&lt;?phpnamespace App\\StatePattern\\Youtube\\State;use App\\StatePattern\\Youtube\\Program;use App\\StatePattern\\Youtube\\State\\UserState;class PremiumState extends UserState&#123; /** * @var Program */ protected $program; /** * @var string */ const LICENCE = &#x27;premium&#x27;; /** * @param Program $program */ public function __construct(Program $program) &#123; $this-&gt;program = $program; &#125; public function register() &#123; return; &#125; public function subscribe() &#123; return; &#125; public function cancelSubscription() &#123; $this-&gt;program-&gt;setMemberState(); &#125; public function deleteAccount() &#123; $this-&gt;program-&gt;setGuestState(); &#125;&#125; 最後修改原本的情境類別 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990&lt;?phpnamespace App\\StatePattern\\Youtube;use App\\StatePattern\\Youtube\\State\\MemberState;use App\\StatePattern\\Youtube\\State\\GuestState;use App\\StatePattern\\Youtube\\State\\PremiumState;use App\\StatePattern\\Youtube\\State\\UserState;class Program&#123; /** * @var string */ protected $license; /** * @var MemberState */ protected $memberState; /** * @var GuestState */ protected $guestState; /** * @var PremiumState */ protected $premiumState; /** * @var UserState */ protected $state; public function __construct() &#123; $this-&gt;memberState = new MemberState($this); $this-&gt;guestState = new GuestState($this); $this-&gt;premiumState = new PremiumState($this); $this-&gt;setGuestState(); &#125; public function register() &#123; $this-&gt;state-&gt;register(); &#125; public function getLicense() &#123; return $this-&gt;state-&gt;getLicense(); &#125; public function subscribe() &#123; $this-&gt;state-&gt;subscribe(); &#125; public function cancelSubscription() &#123; $this-&gt;state-&gt;cancelSubscription(); &#125; public function setGuestState() &#123; $this-&gt;state = $this-&gt;guestState; &#125; public function setMemberState() &#123; $this-&gt;state = $this-&gt;memberState; &#125; public function setPremiumState() &#123; $this-&gt;state = $this-&gt;premiumState; &#125; public function getState() &#123; return $this-&gt;state; &#125; public function deleteAccount() &#123; $this-&gt;state-&gt;deleteAccount(); &#125;&#125; [單一職責原則]我們將情境類別與狀態類別視作兩種不同的職責。透過委派來實現不同狀態下的行為。 [開放封閉原則]修改既有狀態類別的行為，不會影響到全部的既有狀態類別。（新增狀態類別時，可能會影響到） [介面隔離原則]情境類別依賴於抽象的用戶狀態 (User State) 。不同的狀態類別實作抽象的用戶狀態 (User State) 。 ʕ •ᴥ•ʔ：透過測試，重構這個範例時有遇到一些小困難。大家也可以挑戰看看。","categories":[{"name":"Clean Code","slug":"Clean-Code","permalink":"https://yncbearz.github.io/categories/Clean-Code/"}],"tags":[{"name":"Example","slug":"Example","permalink":"https://yncbearz.github.io/tags/Example/"}]},{"title":"狀態模式","slug":"State-Pattern","date":"2020-08-20T17:07:23.000Z","updated":"2025-05-30T08:15:23.255Z","comments":true,"path":"2020/08/21/State-Pattern/","permalink":"https://yncbearz.github.io/2020/08/21/State-Pattern/","excerpt":"State-Pattern","text":"State Pattern允許對象在內部狀態改變時，改變它的行為，對象看起來好像修改了它的類。Example: 會員制 狀態模式會將類別分為兩類：分別是情境類別 (Context) 與 狀態類別 (State) 。 當前對象會隨著內部狀態，改變它的行為。 狀態模式涉及了 有限狀態機 (Finite-State Machine) 的概念。 有限個狀態，彼此間因動作而造成狀態轉移的系統，同一時間內只會表現出一種狀態。 優點：將狀態類抽離，可讓當前對象複雜的條件判斷簡化。即消除龐大的條件分支敘述。 缺點：會製造出許多的小類別。 與其他模式的比較：[簡單工廠模式]：簡單工廠模式的物件，創造後行為就不會改變了。而狀態模式則可能因應其狀態，做出不同的行為。 [策略模式]：定義算法族，委派給不同的物件。而狀態模式中的小類別層級，皆可獨立運作。 [單例模式]：我們可以將 狀態類別 (State) 作成單例模式。 [蠅量模式]：如果 狀態類別 (State) 不含內在狀態（即只以物件型別來代表狀態的類型），此時的 狀態類別 (State) 就變成了蠅量模式。 ʕ •ᴥ•ʔ：狀態模式可以內聚不同 function 中的 if&#x2F;else 或者 switch。","categories":[{"name":"Clean Code","slug":"Clean-Code","permalink":"https://yncbearz.github.io/categories/Clean-Code/"}],"tags":[{"name":"Design Pattern","slug":"Design-Pattern","permalink":"https://yncbearz.github.io/tags/Design-Pattern/"}]},{"title":"類別圖：自助餐餐廳（外觀模式）","slug":"Class-Diagram-Buffet-Facade-Pattern","date":"2020-08-16T15:22:42.000Z","updated":"2025-07-30T11:30:13.104Z","comments":true,"path":"2020/08/16/Class-Diagram-Buffet-Facade-Pattern/","permalink":"https://yncbearz.github.io/2020/08/16/Class-Diagram-Buffet-Facade-Pattern/","excerpt":"Class-Diagram-Buffet-Facade-Pattern","text":"Example: 自助餐餐廳 1234567891011121314151617181920212223242526272829303132333435363738394041@startuml Example-Buffet-Facade-Patternclass IceCreamMachine&#123; + addIngredients() + stir() + chill() + squeeze()&#125;class CoffeeMachine&#123; + addCoffeeBeans() + grind() + brew() + stirWithMilk()&#125;class IceCreamMachineFacade&#123; &#123;static&#125; + makeIceCream()&#125;class CoffeeMachineFacade&#123; &#123;static&#125; + makeLatte()&#125;IceCreamMachineFacade --&gt; IceCreamMachineCoffeeMachineFacade --&gt; CoffeeMachineclass Program&#123; + makeIceCream() + makeLatte()&#125;Program --&gt; IceCreamMachineFacadeProgram --&gt; CoffeeMachineFacade@enduml ʕ •ᴥ•ʔ：若不熟悉 UML 類別圖，可參考UML類別圖說明。","categories":[{"name":"Clean Code","slug":"Clean-Code","permalink":"https://yncbearz.github.io/categories/Clean-Code/"}],"tags":[{"name":"Design Pattern","slug":"Design-Pattern","permalink":"https://yncbearz.github.io/tags/Design-Pattern/"}]},{"title":"範例：自助餐餐廳 （外觀模式)","slug":"Example-Buffet-Facade-Pattern","date":"2020-08-15T16:43:53.000Z","updated":"2025-05-30T08:15:23.232Z","comments":true,"path":"2020/08/16/Example-Buffet-Facade-Pattern/","permalink":"https://yncbearz.github.io/2020/08/16/Example-Buffet-Facade-Pattern/","excerpt":"Example-Buffet-Facade-Pattern","text":"Pattern: 外觀模式 Class Diagram: 自助餐餐廳 情境：以下是某自助餐餐廳的情況 自助式霜淇淋機 123456789101112131415161718192021222324252627282930&lt;?phpnamespace App\\FacadePattern\\Buffet;class IceCreamMachine&#123; public function addIngredients() &#123; //倒入牛奶、糖、鮮奶油、蛋黃等 return $this; &#125; public function stir() &#123; //攪拌均勻 return $this; &#125; public function chill() &#123; //使其冷藏 return $this; &#125; public function squeeze() &#123; //擠出霜淇淋 return &#x27;霜淇淋&#x27;; &#125;&#125; 自助式咖啡機 123456789101112131415161718192021222324252627282930&lt;?phpnamespace App\\FacadePattern\\Buffet;class CoffeeMachine&#123; public function addCoffeeBeans() &#123; //放入咖啡豆 return $this; &#125; public function grind() &#123; //研磨咖啡豆 return $this; &#125; public function brew() &#123; //沖煮咖啡 return $this; &#125; public function stirWithMilk() &#123; //與牛奶攪拌 return &#x27;拿鐵&#x27;; &#125;&#125; 老闆認為目前的方式，客人必須知道霜淇淋機與咖啡機所有的操作流程。 不是那麼地友好，希望我們能寫個簡單的介面，讓客人更容易取得餐點。 需求一：替霜淇淋機與咖啡機設計簡單的介面，方便取用 霜淇淋機的簡單介面 12345678910111213141516171819&lt;?phpnamespace App\\FacadePattern\\Buffet\\Facade;use App\\FacadePattern\\Buffet\\IceCreamMachine;class IceCreamMachineFacade&#123; public static function makeIceCream() &#123; $iceCreamMachine = new IceCreamMachine(); return $iceCreamMachine -&gt;addIngredients() -&gt;stir() -&gt;chill() -&gt;squeeze(); &#125;&#125; 咖啡機的簡單介面 12345678910111213141516171819&lt;?phpnamespace App\\FacadePattern\\Buffet\\Facade;use App\\FacadePattern\\Buffet\\CoffeeMachine;class CoffeeMachineFacade&#123; public static function makeLatte() &#123; $coffeeMachine = new CoffeeMachine(); return $coffeeMachine -&gt;addCoffeeBeans() -&gt;grind() -&gt;brew() -&gt;stirWithMilk(); &#125;&#125; 最後修改客人的點餐程式 12345678910111213141516171819&lt;?phpnamespace App\\FacadePattern\\Buffet;use App\\FacadePattern\\Buffet\\Facade\\CoffeeMachineFacade;use App\\FacadePattern\\Buffet\\Facade\\IceCreamMachineFacade;class Program&#123; public function makeIceCream() &#123; return IceCreamMachineFacade::makeIceCream(); &#125; public function makeLatte() &#123; return CoffeeMachineFacade::makeLatte(); &#125;&#125; 這下子，客人終於不用知道太多，便能取得自己想要的餐點了。 [單一職責原則]我們將子類別與接口類別視作兩種不同的職責。 [開放封閉原則]對於客戶端與接口類別來說，並不會因為我們用了新的咖啡機而有所區別。 然而當子類別改動時可能會連帶修改到接口類別。 ʕ •ᴥ•ʔ：在這個例子中，我會覺得是霜淇淋機&#x2F;咖啡機不對，竟然沒有提供簡單的介面！","categories":[{"name":"Clean Code","slug":"Clean-Code","permalink":"https://yncbearz.github.io/categories/Clean-Code/"}],"tags":[{"name":"Example","slug":"Example","permalink":"https://yncbearz.github.io/tags/Example/"}]},{"title":"外觀模式","slug":"Facade-Pattern","date":"2020-08-15T16:41:49.000Z","updated":"2025-05-30T08:15:23.242Z","comments":true,"path":"2020/08/16/Facade-Pattern/","permalink":"https://yncbearz.github.io/2020/08/16/Facade-Pattern/","excerpt":"Facade-Pattern","text":"Facade Pattern提供一個統一的接口，用來訪問子系統中的一群接口。外觀模式定義了一個高層接口，讓子系統更容易使用。Example: 自助餐餐廳 外觀模式會將類別分為兩類：分別是統一的接口類 (Facade) 與 子系統類 (Subsystem) 。 接口類會提供簡單的接口，供客戶使用。 優點：因為封裝，解除了客戶與子系統間的耦合關係。可以透過接口類，來操作子系統中複雜的功能。 缺點：接口類可能會因為耦合太多子系統，而職責過重。 與其他模式的比較：[轉接頭模式]：轉接頭模式將一個接口轉化成另一個接口。而外觀模式則是提供簡化接口。 兩者的差異不在於包裝了幾個類別，而是在於意圖的不同。 [樣板方法模式]：樣板方法模式的抽象規則類與實體算法類會實現相同接口。外觀模式則無此限制。 ʕ •ᴥ•ʔ：外觀模式是封裝的一種高級應用。","categories":[{"name":"Clean Code","slug":"Clean-Code","permalink":"https://yncbearz.github.io/categories/Clean-Code/"}],"tags":[{"name":"Design Pattern","slug":"Design-Pattern","permalink":"https://yncbearz.github.io/tags/Design-Pattern/"}]},{"title":"類別圖：才藝表演（轉接頭模式）","slug":"Class-Diagram-Talent-Show-Adapter-Pattern","date":"2020-08-10T00:38:26.000Z","updated":"2025-07-30T11:30:13.252Z","comments":true,"path":"2020/08/10/Class-Diagram-Talent-Show-Adapter-Pattern/","permalink":"https://yncbearz.github.io/2020/08/10/Class-Diagram-Talent-Show-Adapter-Pattern/","excerpt":"Class-Diagram-Talent-Show-Adapter-Pattern","text":"Example: 才藝表演 12345678910111213141516171819202122232425262728293031323334353637383940414243@startuml Example-Talent-Show-Adapter-Patterninterface ShowInterface&#123; + show()&#125;class PianoPlayer&#123; + play()&#125;class PianoPlayerAdapter&#123; + __construct(PianoPlayer pianoPlayer) + show()&#125;class JokeTeller&#123; + tell()&#125;class JokeTellerAdapter&#123; + __construct(JokeTeller jokeTeller) + show()&#125;PianoPlayerAdapter --&gt; PianoPlayerShowInterface &lt;|.. PianoPlayerAdapterJokeTellerAdapter --&gt; JokeTellerShowInterface &lt;|.. JokeTellerAdapterclass Program&#123; + run() - preparePerformers()&#125;Program -&gt; ShowInterface@enduml ʕ •ᴥ•ʔ：若不熟悉 UML 類別圖，可參考UML類別圖說明。","categories":[{"name":"Clean Code","slug":"Clean-Code","permalink":"https://yncbearz.github.io/categories/Clean-Code/"}],"tags":[{"name":"Design Pattern","slug":"Design-Pattern","permalink":"https://yncbearz.github.io/tags/Design-Pattern/"}]},{"title":"範例：才藝表演（轉接頭模式）","slug":"Example-Talent-Show-Adapter-Pattern","date":"2020-08-09T07:34:23.000Z","updated":"2025-05-30T08:15:23.238Z","comments":true,"path":"2020/08/09/Example-Talent-Show-Adapter-Pattern/","permalink":"https://yncbearz.github.io/2020/08/09/Example-Talent-Show-Adapter-Pattern/","excerpt":"Example-Talent-Show-Adapter-Pattern","text":"Pattern: 轉接頭模式 Class Diagram: 才藝表演 情境：以下是某才藝表演 1234567891011121314151617181920212223&lt;?phpnamespace App\\AdapterPattern\\TalentShow;class Program&#123; /** * @return array */ public function run() &#123; $result = []; $pianoPlayer = new PianoPlayer(); $result[] = $pianoPlayer-&gt;play(); $jokeTeller = new JokeTeller(); $result[] = $jokeTeller-&gt;tell(); return $result; &#125;&#125; 主持人覺得需要知道，每位表演者的表演方式，有些麻煩。希望我們定義一個統一的介面，讓他的主持工作能更順利。 需求一：定義表演介面，使得表演項目能夠被管理 隨著項目變多，每個人的表演都不一樣。可能會有彈鋼琴、拉扯鈴、講笑話、演話劇等。 但是這些項目，未必都是為了才藝表演而存在。讓我們以此為基礎，切分兩者的職責。 首先定義表演的介面 12345678&lt;?phpnamespace App\\AdapterPattern\\TalentShow\\Contracts;interface ShowInterface&#123; public function show();&#125; 接著實作鋼琴表演者的轉接頭 123456789101112131415161718192021222324&lt;?phpnamespace App\\AdapterPattern\\TalentShow\\Adapter;use App\\AdapterPattern\\TalentShow\\PianoPlayer;use App\\AdapterPattern\\TalentShow\\Contracts\\ShowInterface;class PianoPlayerAdapter implements ShowInterface&#123; /** * @var PianoPlayer */ protected $pianoPlayer; public function __construct(PianoPlayer $pianoPlayer) &#123; $this-&gt;pianoPlayer = $pianoPlayer; &#125; public function show() &#123; return $this-&gt;pianoPlayer-&gt;play(); &#125;&#125; 透過這個轉接頭，當我們請鋼琴表演者表演時，他就會開始彈鋼琴。 再來是笑話表演者的轉接頭 123456789101112131415161718192021222324&lt;?phpnamespace App\\AdapterPattern\\TalentShow\\Adapter;use App\\AdapterPattern\\TalentShow\\Contracts\\ShowInterface;use App\\AdapterPattern\\TalentShow\\JokeTeller;class JokeTellerAdapter implements ShowInterface&#123; /** * @var JokeTeller */ protected $jokeTeller; public function __construct(JokeTeller $jokeTeller) &#123; $this-&gt;jokeTeller = $jokeTeller; &#125; public function show() &#123; return $this-&gt;jokeTeller-&gt;tell(); &#125;&#125; 透過這個轉接頭，當我們請笑話表演者表演時，他就會開始講笑話。 最後是修改原本的程式 123456789101112131415161718192021222324252627282930313233343536373839&lt;?phpnamespace App\\AdapterPattern\\TalentShow;use App\\AdapterPattern\\TalentShow\\Adapter\\PianoPlayerAdapter;use App\\AdapterPattern\\TalentShow\\Adapter\\JokeTellerAdapter;use App\\AdapterPattern\\TalentShow\\Contracts\\ShowInterface;class Program&#123; /** * @var ShowInterface[] */ protected $performers = []; /** * @return array */ public function run() &#123; $this-&gt;preparePerformers(); $result = []; foreach ($this-&gt;performers as $performer) &#123; $result[] = $performer-&gt;show(); &#125; return $result; &#125; private function preparePerformers() &#123; $pianoPlayer = new PianoPlayer(); $this-&gt;performers[] = new PianoPlayerAdapter($pianoPlayer); $jokeTeller = new JokeTeller(); $this-&gt;performers[] = new JokeTellerAdapter($jokeTeller); &#125;&#125; 透過各種實作表演介面的轉接頭，我們便能更好地管理表演項目了。（比如：進退場的流程、項目的介紹等） [單一職責原則]我們將才藝類別與表演項目類別視作兩種不同的職責。 [開放封閉原則]若我們需要在表演時，增加新的表演者，可以不修改原本才藝類別的程式碼。只需新增一個對應的轉接頭。 [介面隔離原則]才藝類別與表演項目類別實作的是兩個不同的接口。透過轉接頭，讓原本接口不同的類別能夠介接。 [依賴反轉原則]客戶端的程式碼依賴抽象的表演介面。轉接頭實作抽象的表演介面。 ʕ •ᴥ•ʔ：除了上述包裹類別的方式外，轉接頭還能透過多重繼承的方式實現。將來撰寫其他語言範例時，再來補充。","categories":[{"name":"Clean Code","slug":"Clean-Code","permalink":"https://yncbearz.github.io/categories/Clean-Code/"}],"tags":[{"name":"Example","slug":"Example","permalink":"https://yncbearz.github.io/tags/Example/"}]},{"title":"轉接頭模式","slug":"Adapter-Pattern","date":"2020-08-09T07:31:09.000Z","updated":"2025-05-30T08:15:23.214Z","comments":true,"path":"2020/08/09/Adapter-Pattern/","permalink":"https://yncbearz.github.io/2020/08/09/Adapter-Pattern/","excerpt":"Adapter Pattern","text":"Adapter Pattern將一個類的接口，轉換成客戶期望的另一個接口。轉接頭讓原本接口不兼容的類可以合作無間。Example: 才藝表演 轉接頭模式會將類別分為三類：分別是原有的系統、轉接頭 (Adapter) 與客戶類別。 透過轉接頭類別，讓原有的系統能夠實現客戶類別所需的方法。 優點：可以在不改變原有的程式碼的情況下，製作轉接頭，使其與新的程式碼介接。 缺點：程式碼複雜度提高。 與其他模式的比較：[裝飾者模式]：裝飾者模式透過遞迴的方式，不停地豐富既有行為。而轉接頭模式則是透過改變介面來滿足新的程式碼。 [策略模式]：策略模式是定義出算法族，供不同類別去實作。而轉接頭模式是結合不同介面的算法，讓它們能實現相同的新介面。 ʕ •ᴥ•ʔ：比較常見的翻譯，好像是適配器或轉接器，不過我習慣叫它轉接頭模式。","categories":[{"name":"Clean Code","slug":"Clean-Code","permalink":"https://yncbearz.github.io/categories/Clean-Code/"}],"tags":[{"name":"Design Pattern","slug":"Design-Pattern","permalink":"https://yncbearz.github.io/tags/Design-Pattern/"}]},{"title":"最小知識原則","slug":"Least-Knowledge-Principle","date":"2020-08-05T15:27:54.000Z","updated":"2025-05-30T08:15:23.248Z","comments":true,"path":"2020/08/05/Least-Knowledge-Principle/","permalink":"https://yncbearz.github.io/2020/08/05/Least-Knowledge-Principle/","excerpt":"Least-Knowledge-Principle","text":"Least Knowledge Principle (LKP)Only talk to your immediate friends. 只跟你的密友說話。 客戶不該知道細節，僅需知道接口方法。 客戶不該知道內部生產的演算法、依賴了哪些類別，只需知道接口方法和結果。 其核心精神強調了類別之間的鬆耦合。（隱藏內部的實作，就更容易對其作出改變） 此原則亦被稱作 迪米特法則 (Law of Demeter) 。 ʕ •ᴥ•ʔ：除了類別間的關係，也可以應用在 API 的設計。","categories":[{"name":"Clean Code","slug":"Clean-Code","permalink":"https://yncbearz.github.io/categories/Clean-Code/"}],"tags":[{"name":"Principle","slug":"Principle","permalink":"https://yncbearz.github.io/tags/Principle/"}]},{"title":"類別圖：影片製作大師（樣板方法模式）","slug":"Class-Diagram-Video-Maker-Template-Method-Pattern","date":"2020-08-03T14:24:05.000Z","updated":"2025-07-30T11:30:13.335Z","comments":true,"path":"2020/08/03/Class-Diagram-Video-Maker-Template-Method-Pattern/","permalink":"https://yncbearz.github.io/2020/08/03/Class-Diagram-Video-Maker-Template-Method-Pattern/","excerpt":"Class-Diagram-Video-Maker-Template-Method-Pattern","text":"Example: 影片製作大師 1234567891011121314151617181920212223242526272829303132333435363738394041424344@startuml Example-Video-Maker-Template-Method-Patternabstract class BasicVideo&#123; + make() # shoot() # upload() &#123;abstract&#125; # generateIdeas() &#123;abstract&#125; # editing()&#125;class UnboxVideo&#123; # generateIdeas() # editing()&#125;class TutorialVideo&#123; # generateIdeas() # editing()&#125;class StoryVideo&#123; # generateIdeas() # editing()&#125;BasicVideo &lt;|-- UnboxVideoBasicVideo &lt;|-- TutorialVideoBasicVideo &lt;|-- StoryVideoclass Program&#123; + makeUnboxVideo() + makeTurtorialVideo() + makeStoryVideo()&#125;Program -&gt; BasicVideo@enduml ʕ •ᴥ•ʔ：若不熟悉 UML 類別圖，可參考UML類別圖說明。","categories":[{"name":"Clean Code","slug":"Clean-Code","permalink":"https://yncbearz.github.io/categories/Clean-Code/"}],"tags":[{"name":"Design Pattern","slug":"Design-Pattern","permalink":"https://yncbearz.github.io/tags/Design-Pattern/"}]},{"title":"範例：影片製作大師（樣板方法模式）","slug":"Example-Video-Maker-Template-Method-Pattern","date":"2020-08-02T15:44:20.000Z","updated":"2025-05-30T08:15:23.240Z","comments":true,"path":"2020/08/02/Example-Video-Maker-Template-Method-Pattern/","permalink":"https://yncbearz.github.io/2020/08/02/Example-Video-Maker-Template-Method-Pattern/","excerpt":"Example-Video-Maker-Template-Method-Pattern","text":"Pattern: 樣板方法模式 Class Diagram: 影片製作大師 情境：以下是某攝影棚的影片製作方式 1234567891011121314151617181920212223&lt;?phpnamespace App\\TemplateMethodPattern\\Video;use App\\TemplateMethodPattern\\Video\\UnboxVideo;class Program&#123; public function makeUnboxVideo() &#123; return &#x27;選擇開箱項目、拍攝、剪輯出個人開箱的風格、上傳影片&#x27;; &#125; public function makeTutorialVideo() &#123; return &#x27;設計教學內容、拍攝、剪輯出個人教學的風格、上傳影片&#x27;; &#125; public function makeStoryVideo() &#123; return &#x27;選擇故事主題、拍攝、剪輯出個人說故事的風格、上傳影片&#x27;; &#125;&#125; 老闆覺得影片製作，有些相同的環節，希望我們開發程式解決，增加影片產生效率。 需求一：找出共同點，寫出樣板供大家使用 研究後發現，無論是哪種類型的影片，製作上大致可以歸類出四個步驟： 主題發想 影片拍攝 剪輯 上傳 由於公司影片大多於攝影棚拍攝，且上傳的平台相同，各個類型影片的差異，主要是在主題發想與剪輯。 我們以此為基礎，設計出樣板 1234567891011121314151617181920212223242526272829&lt;?phpnamespace App\\TemplateMethodPattern\\Video;abstract class BasicVideo&#123; public function make() &#123; return $this-&gt;generateIdeas() . &#x27;、&#x27; . $this-&gt;shoot() . &#x27;、&#x27; . $this-&gt;editing() . &#x27;、&#x27; . $this-&gt;upload(); &#125; protected function shoot() &#123; return &#x27;拍攝&#x27;; &#125; protected function upload() &#123; return &#x27;上傳影片&#x27;; &#125; abstract protected function generateIdeas(); abstract protected function editing();&#125; 在make()方法中，我們定義了一個影片產生的流程。 而拍攝與上傳是每種類型影片的共同行為，我們定義在shoot()方法及upload()方法中。 需求二：替各種類型的影片不同的部分作客製化 首先是開箱型影片 12345678910111213141516171819&lt;?phpnamespace App\\TemplateMethodPattern\\Video;use App\\TemplateMethodPattern\\Video\\BasicVideo;class UnboxVideo extends BasicVideo&#123; protected function generateIdeas() &#123; return &#x27;選擇開箱項目&#x27;; &#125; protected function editing() &#123; return &#x27;剪輯出個人開箱的風格&#x27;; &#125;&#125; 接著是教學型影片 12345678910111213141516171819&lt;?phpnamespace App\\TemplateMethodPattern\\Video;use App\\TemplateMethodPattern\\Video\\BasicVideo;class TutorialVideo extends BasicVideo&#123; protected function generateIdeas() &#123; return &#x27;設計教學內容&#x27;; &#125; protected function editing() &#123; return &#x27;剪輯出個人教學的風格&#x27;; &#125;&#125; 再來是故事型影片 12345678910111213141516171819&lt;?phpnamespace App\\TemplateMethodPattern\\Video;use App\\TemplateMethodPattern\\Video\\BasicVideo;class StoryVideo extends BasicVideo&#123; protected function generateIdeas() &#123; return &#x27;選擇故事主題&#x27;; &#125; protected function editing() &#123; return &#x27;剪輯出個人說故事的風格&#x27;; &#125;&#125; 最後修改原本的程式 123456789101112131415161718192021222324252627&lt;?phpnamespace App\\TemplateMethodPattern\\Video;use App\\TemplateMethodPattern\\Video\\UnboxVideo;class Program&#123; public function makeUnboxVideo() &#123; $unboxVideo = new UnboxVideo(); return $unboxVideo-&gt;make(); &#125; public function makeTutorialVideo() &#123; $tutorialVideo = new TutorialVideo(); return $tutorialVideo-&gt;make(); &#125; public function makeStoryVideo() &#123; $storyVideo = new StoryVideo(); return $storyVideo-&gt;make(); &#125;&#125; [單一職責原則]我們將製作影片的流程與製作影片的方式視作兩種不同的職責。 [開放封閉原則]除了流程之外，不同影片的類型也歸類到不同的子類，未來新增&#x2F;修改影片類型製作方式時，也不會互相影響。 [依賴反轉原則]客戶端的程式碼依賴抽象的父類基本影片。不同類型的影片類別實作抽象的父類基本影片。 ʕ •ᴥ•ʔ：一個簡單易懂的模式，背後隱藏了很多設計模式的原則。","categories":[{"name":"Clean Code","slug":"Clean-Code","permalink":"https://yncbearz.github.io/categories/Clean-Code/"}],"tags":[{"name":"Example","slug":"Example","permalink":"https://yncbearz.github.io/tags/Example/"}]},{"title":"樣板方法模式","slug":"Template-Method-Pattern","date":"2020-08-02T10:26:46.000Z","updated":"2025-05-30T08:15:23.256Z","comments":true,"path":"2020/08/02/Template-Method-Pattern/","permalink":"https://yncbearz.github.io/2020/08/02/Template-Method-Pattern/","excerpt":"Template-Method-Pattern","text":"Template Method Pattern在一個方法中定義一個算法的骨架，而將一些步驟延遲到子類中。Example: 影片製作大師 樣板方法模式會將類別分為兩類：分別是抽象規則類 (Abstract Class) 與 實體算法類 (Concrete Class) 。 抽象規則類負責定義流程，實體算法類則關心細節如何實現。也可以增加鉤子 (hook)，使子類更加容易客製化。 優點：可以讓主流程中，相同的部分共用，不同的部分產生變化。 缺點：會使子類受限於骨架。 與其他模式的比較：[簡單工廠模式]：簡單工廠模式，是一個迷你的樣板方法模式，它只提出了建造類別這個步驟。 [策略模式]：策略模式，可以是樣板方法模式中的某個步驟。 以上兩個模式都可以與樣板方法模式協作良好。 當需要在同一套流程中，有部分細節需要個別實現時，很可能就是使用樣板方法模式的時機。 ʕ •ᴥ•ʔ：感覺大部分的情境中，樣板方法模式都不會只是單獨出現。","categories":[{"name":"Clean Code","slug":"Clean-Code","permalink":"https://yncbearz.github.io/categories/Clean-Code/"}],"tags":[{"name":"Design Pattern","slug":"Design-Pattern","permalink":"https://yncbearz.github.io/tags/Design-Pattern/"}]},{"title":"類別圖：機器人廚師（命令模式）","slug":"Class-Diagram-Robot-Chef-Command-Pattern","date":"2020-07-28T23:36:04.000Z","updated":"2025-07-30T11:30:13.219Z","comments":true,"path":"2020/07/29/Class-Diagram-Robot-Chef-Command-Pattern/","permalink":"https://yncbearz.github.io/2020/07/29/Class-Diagram-Robot-Chef-Command-Pattern/","excerpt":"Class-Diagram-Robot-Chef-Command-Pattern","text":"Example: 機器人廚師 1234567891011121314151617181920212223242526272829303132333435363738394041424344@startuml Example-Robot-Chef-Command-Patternabstract class Chef&#123; + cookFiletMignon() + cookSirloinSteak()&#125;Chef &lt;|-- RobotChefAChef &lt;|-- RobotChefBinterface Command&#123; + execute()&#125;class CookFiletMignonCommand&#123; # chef + execute()&#125;class CookSirloinSteakCommand&#123; # chef + execute()&#125;Command &lt;|.. CookFiletMignonCommandCommand &lt;|.. CookSirloinSteakCommandChef &lt;--- CookFiletMignonCommandChef &lt;--- CookSirloinSteakCommandClass Program&#123; + makeOrder()&#125;Program -&gt; Command@enduml ʕ •ᴥ•ʔ：若不熟悉 UML 類別圖，可參考UML類別圖說明。","categories":[{"name":"Clean Code","slug":"Clean-Code","permalink":"https://yncbearz.github.io/categories/Clean-Code/"}],"tags":[{"name":"Design Pattern","slug":"Design-Pattern","permalink":"https://yncbearz.github.io/tags/Design-Pattern/"}]},{"title":"範例：機器人廚師（命令模式）","slug":"Example-Robot-Chef-Command-Pattern","date":"2020-07-21T16:11:24.000Z","updated":"2025-05-30T08:15:23.237Z","comments":true,"path":"2020/07/22/Example-Robot-Chef-Command-Pattern/","permalink":"https://yncbearz.github.io/2020/07/22/Example-Robot-Chef-Command-Pattern/","excerpt":"Example-Robot-Chef-Command-Pattern","text":"Pattern: 命令模式 Class Diagram: 機器人廚師 情境：這是一間牛排館，會根據客戶的訂單出菜 123456789101112131415161718192021222324&lt;?phpnamespace App\\CommandPattern\\WesternRestaurant;class Program&#123; /** * @param array $order * @return array */ public function makeOrder($order) &#123; $result = []; if (in_array(&#x27;Filet Mignon&#x27;, $order)) &#123; $result[] = &#x27;菲力牛排&#x27;; &#125; if (in_array(&#x27;Sirloin Steak&#x27;, $order)) &#123; $result[] = &#x27;沙朗牛排&#x27;; &#125; return $result; &#125;&#125; 隨著生日蒸蒸日上，老闆已經沒辦法同時處理客人點餐與煎牛排了（這是兩種職責）。 決定引進我們販賣的機器人廚師，讓他能專心在記下客人的需求。 需求一：老闆決定到外場服務，透過指令指揮內場的機器人廚師煎牛排 首先是機器人廚師的程式碼 12345678910111213141516171819202122&lt;?phpnamespace App\\CommandPattern\\WesternRestaurant\\Receiver;abstract class Chef&#123; /** * @return string */ public function cookFiletMignon() &#123; return &#x27;菲力牛排&#x27;; &#125; /** * @return string */ public function cookSirloinSteak() &#123; return &#x27;沙朗牛排&#x27;; &#125;&#125; 12345678910&lt;?phpnamespace App\\CommandPattern\\WesternRestaurant\\Receiver;use App\\CommandPattern\\WesternRestaurant\\Receiver\\Chef;class RobotChefA extends Chef&#123;&#125; 12345678910&lt;?phpnamespace App\\CommandPattern\\WesternRestaurant\\Receiver;use App\\CommandPattern\\WesternRestaurant\\Receiver\\Chef;class RobotChefB extends Chef&#123;&#125; 再定義出命令介面 12345678&lt;?phpnamespace App\\CommandPattern\\WesternRestaurant\\Contracts;interface Command&#123; public function execute();&#125; 需要的指令：煎菲力牛排、煎沙朗牛排 123456789101112131415161718192021222324252627&lt;?phpnamespace App\\CommandPattern\\WesternRestaurant;use App\\CommandPattern\\WesternRestaurant\\Contracts\\Command;use App\\CommandPattern\\WesternRestaurant\\Receiver\\Chef;class CookFiletMignonCommand implements Command&#123; /** * @var Chef */ protected $chef; public function __construct(Chef $chef) &#123; $this-&gt;chef = $chef; &#125; /** * @return string */ public function execute() &#123; return $this-&gt;chef-&gt;cookFiletMignon(); &#125;&#125; 123456789101112131415161718192021222324252627&lt;?phpnamespace App\\CommandPattern\\WesternRestaurant;use App\\CommandPattern\\WesternRestaurant\\Contracts\\Command;use App\\CommandPattern\\WesternRestaurant\\Receiver\\Chef;class CookSirloinSteakCommand implements Command&#123; /** * @param Chef */ protected $chef; public function __construct(Chef $chef) &#123; $this-&gt;chef = $chef; &#125; /** * @return string */ public function execute() &#123; return $this-&gt;chef-&gt;cookSirloinSteak(); &#125;&#125; 最後修改原本牛排館的程式 123456789101112131415161718192021222324252627282930313233&lt;?phpnamespace App\\CommandPattern\\WesternRestaurant;use App\\CommandPattern\\WesternRestaurant\\Receiver\\RobotChefA;use App\\CommandPattern\\WesternRestaurant\\Receiver\\RobotChefB;class Program&#123; /** * @param array $order * @return array */ public function makeOrder($order) &#123; $chefA = new RobotChefA(); $chefB = new RobotChefB(); $cookFiletMignonCommand = new cookFiletMignonCommand($chefA); $cookSirloinSteakCommand = new CookSirloinSteakCommand($chefB); $result = []; if (in_array(&#x27;Filet Mignon&#x27;, $order)) &#123; $result[] = $cookFiletMignonCommand-&gt;execute(); &#125; if (in_array(&#x27;Sirloin Steak&#x27;, $order)) &#123; $result[] = $cookSirloinSteakCommand-&gt;execute(); &#125; return $result; &#125;&#125; [角色對應關係]調用者 (Invoker) ：老闆接收者 (Receiver) ：機器人廚師命令 (Command) ：煎牛排指令 [單一職責原則]我們將點餐與煎牛排視作兩種不同的職責。透過命令來聯繫兩者。 [開放封閉原則]當新增&#x2F;修改需求時，不會動到所有程式碼。（比如：外場老闆不會知道烹調方式的改變、機器人不會知道當前餐廳的優惠） [依賴反轉原則]調用者依賴抽象的命令介面。命令實作抽象的命令介面。 此外命令模式還可以留下點餐紀錄，便於將來結帳、重做餐點呢。 ʕ •ᴥ•ʔ：使用命令模式的老闆，也隱含「人力」資源管理的味道。（指定誰做什麼餐點）","categories":[{"name":"Clean Code","slug":"Clean-Code","permalink":"https://yncbearz.github.io/categories/Clean-Code/"}],"tags":[{"name":"Example","slug":"Example","permalink":"https://yncbearz.github.io/tags/Example/"}]},{"title":"命令模式","slug":"Command-Pattern","date":"2020-07-20T00:44:01.000Z","updated":"2025-05-30T08:15:23.227Z","comments":true,"path":"2020/07/20/Command-Pattern/","permalink":"https://yncbearz.github.io/2020/07/20/Command-Pattern/","excerpt":"Command-Pattern","text":"Command Pattern將請求封裝成對象，以便使用不同的請求來進行參數化。命令模式也支持隊列、日誌及可撤銷的操作。Example: 機器人廚師 命令模式會將類別分成三類：分別是 調用者 (Invoker) 、 接收者 (Receiver) 及 命令 (Command) 。 優點：容易滿足開放封閉原則（需要時新增命令即可）。若有需要，可將命令記錄至日誌中，便於重做 (redo) 及撤消 (undo)。允許接收者決定是否否決請求。 缺點：會做出許多小類別。 與其他模式的比較：[策略模式]：以四則運算來比喻的話，策略模式像是算法族中，有加減乘除四種算法；而命令模式則像是一段計算過程：加三、減五、乘二。每個運算都是一道命令。 ʕ •ᴥ•ʔ：透過將命令切分成類別，解耦了**調用者（命令請求者）與接收者（命令執行者）**的依賴關係。","categories":[{"name":"Clean Code","slug":"Clean-Code","permalink":"https://yncbearz.github.io/categories/Clean-Code/"}],"tags":[{"name":"Design Pattern","slug":"Design-Pattern","permalink":"https://yncbearz.github.io/tags/Design-Pattern/"}]},{"title":"類別圖：資料庫連線（單例模式）","slug":"Class-Diagram-DB-Connection-Singleton-Pattern","date":"2020-07-19T10:21:04.000Z","updated":"2025-07-30T11:30:13.155Z","comments":true,"path":"2020/07/19/Class-Diagram-DB-Connection-Singleton-Pattern/","permalink":"https://yncbearz.github.io/2020/07/19/Class-Diagram-DB-Connection-Singleton-Pattern/","excerpt":"Class-Diagram-DB-Connection-Singleton-Pattern","text":"Example: 資料庫連線 123456789101112131415161718192021@startuml Example-DB-Connection-Singleton-Patternclass Program&#123; + getDBConnection()&#125;class DBConnection&#123; - instance - __construct() - __clone() - __wakeup() + getInstance()&#125;Program -&gt; DBConnection@enduml ʕ •ᴥ•ʔ：若不熟悉 UML 類別圖，可參考UML類別圖說明。","categories":[{"name":"Clean Code","slug":"Clean-Code","permalink":"https://yncbearz.github.io/categories/Clean-Code/"}],"tags":[{"name":"Design Pattern","slug":"Design-Pattern","permalink":"https://yncbearz.github.io/tags/Design-Pattern/"}]},{"title":"範例：資料庫連線（單例模式）","slug":"Example-DB-Connection-Singleton-Pattern","date":"2020-07-16T15:07:01.000Z","updated":"2025-05-30T08:15:23.235Z","comments":true,"path":"2020/07/16/Example-DB-Connection-Singleton-Pattern/","permalink":"https://yncbearz.github.io/2020/07/16/Example-DB-Connection-Singleton-Pattern/","excerpt":"Example-DB-Connection-Singleton-Pattern","text":"Pattern: 單例模式 Class Diagram: 資料庫連線 需求一：客戶想要能與資料庫連線的類別 1234567891011&lt;?phpnamespace App\\SingletonPattern\\DBConnection;class DBConnection&#123; public function __construct() &#123; &#125;&#125; 123456789101112131415&lt;?phpnamespace App\\SingletonPattern\\DBConnection;class Program&#123; /** * @return DBConnection */ public function getDBConnection() &#123; return new DBConnection(); &#125;&#125; 需求二：客戶說希望能修改成只建立唯一的連線。 1234567891011121314151617181920212223242526272829303132333435363738394041424344&lt;?phpnamespace App\\SingletonPattern\\DBConnection;class DBConnection&#123; private static $instance = null; /** * 僅有私有的建構函式，讓外界僅能以 getInstance() 呼叫 */ private function __construct() &#123; &#125; /** * 避免克隆後，生成兩個實例 */ private function __clone() &#123; &#125; /** * 避免反序列化後，生成兩個實例 */ private function __wakeup() &#123; &#125; /** * 透過公開的靜態方法取得實例 * * @return DBConnection */ public static function getInstance() &#123; if (static::$instance === null) &#123; static::$instance = new self(); &#125; return self::$instance; &#125;&#125; 123456789101112131415&lt;?phpnamespace App\\SingletonPattern\\DBConnection;class Program&#123; /** * @return DBConnection */ public function getDBConnection() &#123; return DBConnection::getInstance(); &#125;&#125; 在這裡我們一共用了兩個技巧： 透過公開的靜態方法，呼叫私有的建構函式，來保證 DBConnection 的唯一。 在 getInstance() 中，我們會判斷 $instance 是否為 null，才決定是否實例化，為單例模式中Lazy Initialization的形式。 單例模式還有以下其他形式（處理多線程）： Eager Initialization （類別 $instance 一開始就建立，PHP 貌似不支援） Synchronized（同步方法） Double-Checked Locking（雙重檢查加鎖） 在 PHP 中，web 環境的每一個 request 都是獨立的線程，而 cli 環境，則需裝 pthreads 才能實現多線程。 因為 PHP 鮮少使用多線程，算是巧妙地閃躲了單例模式的使用問題。將來有機會會以其他程式語言，再次撰寫相關範例。 ʕ •ᴥ•ʔ：看似簡單，背後卻有許多細節的反模式。","categories":[{"name":"Clean Code","slug":"Clean-Code","permalink":"https://yncbearz.github.io/categories/Clean-Code/"}],"tags":[{"name":"Example","slug":"Example","permalink":"https://yncbearz.github.io/tags/Example/"}]},{"title":"單例模式","slug":"Singleton-Pattern","date":"2020-07-15T14:58:04.000Z","updated":"2025-05-30T08:15:23.254Z","comments":true,"path":"2020/07/15/Singleton-Pattern/","permalink":"https://yncbearz.github.io/2020/07/15/Singleton-Pattern/","excerpt":"Singleton-Pattern","text":"Singleton Pattern確保一個類只有一個實例，並提供一個全局訪問點。Example: 資料庫連線 單例模式只會將類別分為一類，即 單例類別 (Singleton) 。 單例類別會管理實例的產生，並提供存取實例的方法。 優點：可以確保類別只有一個實例。可以提供全局訪問點。 缺點：違反單一職責原則。實現單例時，須考慮多線程問題。因其特殊性，單例模式不容易作測試。 與全域變數的比較：單例模式可以嚴格地控制客戶如何存取它及何時使用它，並且具有狀態（可在執行時發生改變）。 ʕ •ᴥ•ʔ：單例模式常被視為一種反模式 (anti-pattern)。很可能是設計模式中，唯一一個違反單一職責原則。","categories":[{"name":"Clean Code","slug":"Clean-Code","permalink":"https://yncbearz.github.io/categories/Clean-Code/"}],"tags":[{"name":"Design Pattern","slug":"Design-Pattern","permalink":"https://yncbearz.github.io/tags/Design-Pattern/"}]},{"title":"類別圖：漢堡點餐系統（裝飾者模式）","slug":"Class-Diagram-Burgers-Ordering-System-Decorator-Pattern","date":"2020-07-13T00:12:02.000Z","updated":"2025-07-30T11:30:13.114Z","comments":true,"path":"2020/07/13/Class-Diagram-Burgers-Ordering-System-Decorator-Pattern/","permalink":"https://yncbearz.github.io/2020/07/13/Class-Diagram-Burgers-Ordering-System-Decorator-Pattern/","excerpt":"Class-Diagram-Burgers-Ordering-System-Decorator-Pattern","text":"Example: 漢堡點餐系統 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748@startuml Example-Burgers-Ordering-System-Decorator-Patterninterface Food&#123; + getDescription()&#125;abstract class Burger&#123; # name + getDescription()&#125;abstract class Ingredient&#123; # name # food + getDescription() + customized() # changeDefaultIfDemanded() - getIngredientName()&#125;class Program&#123; # demand + makeBigMac() - getBurgerDescription() - subLastPunctuation()&#125;Program -&gt; FoodFood &lt;|.. BurgerBurger &lt;|-- BigMacFood &lt;|.. IngredientIngredient o-- FoodIngredient &lt;|-- BreadIngredient &lt;|-- BeefIngredient &lt;|-- CheeseIngredient &lt;|-- LettuceIngredient &lt;|-- PickleIngredient &lt;|-- Salad@enduml ʕ •ᴥ•ʔ：若不熟悉 UML 類別圖，可參考UML類別圖說明。","categories":[{"name":"Clean Code","slug":"Clean-Code","permalink":"https://yncbearz.github.io/categories/Clean-Code/"}],"tags":[{"name":"Design Pattern","slug":"Design-Pattern","permalink":"https://yncbearz.github.io/tags/Design-Pattern/"}]},{"title":"範例：漢堡點餐系統（裝飾者模式）","slug":"Example-Burgers-Ordering-System-Decorator-Pattern","date":"2020-07-11T16:16:22.000Z","updated":"2025-05-30T08:15:23.232Z","comments":true,"path":"2020/07/12/Example-Burgers-Ordering-System-Decorator-Pattern/","permalink":"https://yncbearz.github.io/2020/07/12/Example-Burgers-Ordering-System-Decorator-Pattern/","excerpt":"Example:Burgers Ordering System (Decorator Pattern)","text":"Pattern: 裝飾者模式 Class Diagram: 漢堡點餐系統 需求一：客戶想要一個漢堡點餐系統 12345678910111213141516&lt;?phpnamespace App\\DecoratorPattern\\Burger;class Program&#123; public function makeBigMac() &#123; return &#x27;大麥克：麵包、牛肉、生菜、沙拉、麵包、牛肉、起司、生菜、沙拉、麵包&#x27;; &#125; public function makeDoubleCheeseBurger() &#123; return &#x27;雙層牛肉吉事堡：麵包、酸菜、起司、牛肉、起司、牛肉、麵包&#x27;; &#125;&#125; 需求二：客戶想要點餐能夠客製化 (比如說：兩倍起司) 我們決定先嘗試實作大麥克的客製化 12345678910111213141516171819202122232425&lt;?phpnamespace App\\DecoratorPattern\\Burger;class Program&#123; protected $cheese = &#x27;normal&#x27;; /** * @param array $demand */ public function customize($demand) &#123; $this-&gt;cheese = $demand[&#x27;cheese&#x27;]; &#125; public function makeBigMac() &#123; if ($this-&gt;cheese == &#x27;double&#x27;) &#123; return &#x27;大麥克：麵包、牛肉、生菜、沙拉、麵包、牛肉、兩倍起司、生菜、沙拉、麵包&#x27;; &#125; return &#x27;大麥克：麵包、牛肉、生菜、沙拉、麵包、牛肉、起司、生菜、沙拉、麵包&#x27;; &#125;&#125; 在完成後，卻發現了一些問題： 每當有配料客製化需求時，我們必須改變大麥克的實作，違反開放封閉原則。 不同的漢堡種類，客製化的過程會違反 DRY 原則。 新增漢堡種類時，我們可能要實作目前所有客製化的選項。 藉由以上幾點，我們知道漢堡的實作與配料客製化是兩個不同的職責。我們試著改用裝飾者模式實作。 首先定義食物介面 12345678&lt;?phpnamespace App\\DecoratorPattern\\Burger\\Contracts;interface Food&#123; public function getDescription();&#125; 接著定義抽象的漢堡類別，並實作食物介面 12345678910111213141516&lt;?phpnamespace App\\DecoratorPattern\\Burger\\ConcreteComponent;use App\\DecoratorPattern\\Burger\\Contracts\\Food;abstract class Burger implements Food&#123; protected $name = &#x27;未知品項&#x27;; public function getDescription() &#123; return $this-&gt;name . &#x27;：&#x27;; &#125;&#125; 實作大麥克漢堡 1234567891011&lt;?phpnamespace App\\DecoratorPattern\\Burger\\ConcreteComponent;use App\\DecoratorPattern\\Burger\\ConcreteComponent\\Burger;class BigMac extends Burger&#123; protected $name = &#x27;大麥克&#x27;;&#125; 漢堡在裝飾者模式中屬於裝飾物件類別，也就是被裝飾者。 接著定義配料的抽象類別，也實作食物介面 1234567891011121314151617181920212223242526&lt;?phpnamespace App\\DecoratorPattern\\Burger\\Decorator;use App\\DecoratorPattern\\Burger\\Contracts\\Food;abstract class Ingredient implements Food&#123; /** * @var Food */ protected $food; protected $name = &#x27;未知配料&#x27;; public function __construct(Food $food) &#123; $this-&gt;food = $food; &#125; public function getDescription() &#123; return $this-&gt;food-&gt;getDescription() . $this-&gt;name . &#x27;、&#x27;; &#125;&#125; 注意：Food包括漢堡類（被裝飾者）和配料類（裝飾者）。 而這邊__construct()與getDescription()方法的實作，晚點會透過它們來實現裝飾。 接著實作各式配料 12345678910&lt;?phpnamespace App\\DecoratorPattern\\Burger\\Decorator;use App\\DecoratorPattern\\Burger\\Decorator\\Ingredient;class Bread extends Ingredient&#123; protected $name = &#x27;麵包&#x27;;&#125; 12345678910&lt;?phpnamespace App\\DecoratorPattern\\Burger\\Decorator;use App\\DecoratorPattern\\Burger\\Decorator\\Ingredient;class Beef extends Ingredient&#123; protected $name = &#x27;牛肉&#x27;;&#125; 1234567891011&lt;?phpnamespace App\\DecoratorPattern\\Burger\\Decorator;use App\\DecoratorPattern\\Burger\\Decorator\\Ingredient;class Lettuce extends Ingredient&#123; protected $name = &#x27;生菜&#x27;;&#125; 12345678910&lt;?phpnamespace App\\DecoratorPattern\\Burger\\Decorator;use App\\DecoratorPattern\\Burger\\Decorator\\Ingredient;class Salad extends Ingredient&#123; protected $name = &#x27;沙拉&#x27;;&#125; 12345678910&lt;?phpnamespace App\\DecoratorPattern\\Burger\\Decorator;use App\\DecoratorPattern\\Burger\\Decorator\\Ingredient;class Cheese extends Ingredient&#123; protected $name = &#x27;起司&#x27;;&#125; 配料在裝飾者模式中屬於裝飾者類別，也就是裝飾者。 準備工作就緒，讓我們來做一個大麥克吧 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455&lt;?phpnamespace App\\DecoratorPattern\\Burger;use App\\DecoratorPattern\\Burger\\ConcreteComponent\\BigMac;use App\\DecoratorPattern\\Burger\\Decorator\\Bread;use App\\DecoratorPattern\\Burger\\Decorator\\Beef;use App\\DecoratorPattern\\Burger\\Decorator\\Lettuce;use App\\DecoratorPattern\\Burger\\Decorator\\Cheese;use App\\DecoratorPattern\\Burger\\Decorator\\Salad;use App\\DecoratorPattern\\Burger\\Decorator\\Pickle;use App\\DecoratorPattern\\Burger\\Decorator\\Ingredient;class Program&#123; public function makeBigMac() &#123; $bigMac = new BigMac(); $topBread = new Bread($bigMac); $firstBeef = new Beef($topBread); $firstLettuce = new Lettuce($firstBeef); $firstSalad = new Salad($firstLettuce); $middleBread = new Bread($firstSalad); $secondBeef = new Beef($middleBread); $cheese = new Cheese($secondBeef); $secondLettuce = new Lettuce($cheese); $secondSalad = new Salad($secondLettuce); $bottomBread = new Bread($secondSalad); // 大麥克：麵包、牛肉、生菜、沙拉、麵包、牛肉、起司、生菜、沙拉、麵包 return $this-&gt;getBurgerDescription($bottomBread); &#125; /** * @param Ingredient $burger * @return string */ private function getBurgerDescription(Ingredient $burger) &#123; $result = $burger-&gt;getDescription(); return $this-&gt;subLastPunctuation($result); &#125; /** * 去除最後一個標點符號 * * @param string $string * @return string */ private function subLastPunctuation($string) &#123; return mb_substr($string, 0, mb_strlen($string, &#x27;UTF-8&#x27;) - 1, &#x27;UTF-8&#x27;); &#125;&#125; 有用subLastPunctuation方法作文字修飾，可忽略。 透過Ingredient抽象類別的**__construct()包裝先前的類**，當我們使用getDescription()時便能夠一層一層地往內部呼叫，直到所有類別都被呼叫後，才動態產生所需的結果。 讓我們回到需求二：兩倍起司的客製化需求 我們先來改寫Ingredient抽象類別新增customize()與changeDefaultIfDemanded()來作客製化的需求 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859606162636465666768&lt;?phpnamespace App\\DecoratorPattern\\Burger\\Decorator;use App\\DecoratorPattern\\Burger\\Contracts\\Food;use ReflectionClass;abstract class Ingredient implements Food&#123; /** * @var Food */ protected $food; protected $name = &#x27;未知配料&#x27;; public function __construct(Food $food) &#123; $this-&gt;food = $food; &#125; public function getDescription() &#123; return $this-&gt;food-&gt;getDescription() . $this-&gt;name . &#x27;、&#x27;; &#125; /** * 讓最後一個裝飾者客製化自己外，也能客製化先前的裝飾者 * * @param array $demand * @return food */ public function customize($demand) &#123; $this-&gt;changeDefaultIfDemanded($demand); if ($this-&gt;food instanceof Ingredient) &#123; $this-&gt;food-&gt;customize($demand); &#125; return $this; &#125; /** * 我們會利用該配料名稱，當作客製化的設定 * * @param array $demand */ protected function changeDefaultIfDemanded($demand) &#123; $ingredientName = $this-&gt;getIngredientName(); if (isset($demand[$ingredientName])) &#123; $this-&gt;$ingredientName = $demand[$ingredientName]; &#125; &#125; /** * @return string */ private function getIngredientName() &#123; $reflectionClass = new ReflectionClass($this); return strtolower($reflectionClass-&gt;getShortName()); &#125;&#125; 注意：Food包括漢堡類（被裝飾者）和配料類（裝飾者）。customize()方法遇到Food為配料時，會往內部呼叫，直到所有配料都被呼叫。 changeDefaultIfDemanded()，可理解成demand有提到的配料才會作客製化，可忽略。 接著改寫 Cheese 類別 12345678910111213141516171819202122&lt;?phpnamespace App\\DecoratorPattern\\Burger\\Decorator;use App\\DecoratorPattern\\Burger\\Decorator\\Ingredient;class Cheese extends Ingredient&#123; protected $name = &#x27;起司&#x27;; protected $cheese = &#x27;normal&#x27;; public function getDescription() &#123; if ($this-&gt;cheese == &#x27;double&#x27;) &#123; return $this-&gt;food-&gt;getDescription() . &#x27;兩倍&#x27; . $this-&gt;name . &#x27;、&#x27;; &#125; return parent::getDescription(); &#125;&#125; 最後改寫 Program 的實作 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758596061626364656667686970&lt;?phpnamespace App\\DecoratorPattern\\Burger;use App\\DecoratorPattern\\Burger\\ConcreteComponent\\BigMac;use App\\DecoratorPattern\\Burger\\Decorator\\Bread;use App\\DecoratorPattern\\Burger\\Decorator\\Beef;use App\\DecoratorPattern\\Burger\\Decorator\\Lettuce;use App\\DecoratorPattern\\Burger\\Decorator\\Cheese;use App\\DecoratorPattern\\Burger\\Decorator\\Salad;use App\\DecoratorPattern\\Burger\\Decorator\\Pickle;use App\\DecoratorPattern\\Burger\\Decorator\\Ingredient;class Program&#123; /** * @var array */ protected $demand = []; /** * @param array $demand */ public function setDemand($demand) &#123; $this-&gt;demand = $demand; &#125; /** * @return string */ public function makeBigMac() &#123; $bigMac = new BigMac(); $topBread = new Bread($bigMac); $firstBeef = new Beef($topBread); $firstLettuce = new Lettuce($firstBeef); $firstSalad = new Salad($firstLettuce); $middleBread = new Bread($firstSalad); $secondBeef = new Beef($middleBread); $cheese = new Cheese($secondBeef); $secondLettuce = new Lettuce($cheese); $secondSalad = new Salad($secondLettuce); $bottomBread = new Bread($secondSalad); return $this-&gt;getBurgerDescription($bottomBread); &#125; /** * 去除最後一個標點符號 * * @param string $string * @return string */ private function subLastPunctuation($string) &#123; return mb_substr($string, 0, mb_strlen($string, &#x27;UTF-8&#x27;) - 1, &#x27;UTF-8&#x27;); &#125; /** * @param Ingredient $ingredient * @return string */ private function getBurgerDescription(Ingredient $ingredient) &#123; $result = $ingredient-&gt;customize($this-&gt;demand)-&gt;getDescription(); return $this-&gt;subLastPunctuation($result); &#125;&#125; \b[單一職責原則]我們將漢堡的實作與配料客製化視作兩種不同的職責。 [開放封閉原則]無論是新增漢堡種類、新增配料或客製化，我們都能夠僅改到小部分的程式碼。 [裡氏替換原則]遇到客製化需求時，我們可能會改寫配料中的getDescription()方法。 [介面隔離原則]食物介面 - 使每個食物能透過getDescription()方法組裝。漢堡抽象類別 - 被裝飾者，主要是為了與配料類（裝飾者）職責切割。配料抽象類別 - 裝飾者，擁有一些客製化的方法。 [依賴反轉原則]許多方法都依賴在食物介面、漢堡抽象類別、配料抽象類別。 ʕ •ᴥ•ʔ：這個Example有作testing ，被我refactor無數次，是目前為止最喜歡的範例！","categories":[{"name":"Clean Code","slug":"Clean-Code","permalink":"https://yncbearz.github.io/categories/Clean-Code/"}],"tags":[{"name":"Example","slug":"Example","permalink":"https://yncbearz.github.io/tags/Example/"}]},{"title":"裝飾者模式","slug":"Decorator-Pattern","date":"2020-07-11T16:14:24.000Z","updated":"2025-05-30T08:15:23.229Z","comments":true,"path":"2020/07/12/Decorator-Pattern/","permalink":"https://yncbearz.github.io/2020/07/12/Decorator-Pattern/","excerpt":"Decorator-Pattern","text":"Decorator Pattern動態地將責任附加到對象上。若要擴展功能，裝飾者提供了比繼承更有彈性的替代方案。Example: 漢堡點餐系統 裝飾者模式會將類別分為兩類：分別是 裝飾物件類別 (ConcreteComponent) 與 裝飾者類別 (Decorator) 。 其中裝飾物件與裝飾者會實現相同的接口。 在裝飾物件類別不知道裝飾者的情況下，我們會在產生對象時，動態地將其一個個裝飾上去。 一般會透過建構函式來包裝先前的裝飾者。便於理解，裝飾物件即被裝飾者。 優點：當需要動態reuse寫好的類別方法時，裝飾者模式提供了用組合取代繼承的解決方案。（一種wrapping的委託技術） 職責切分明確，裝飾者類別僅需完成自己的方法，由客戶端決定執行順序。 缺點：程式碼複雜度提高。當方法不依賴執行順序時，無法用裝飾者模式實作。 與其他模式的比較：[策略模式]：以卡牌遊戲比喻的話，策略模式是決定要出哪張怪獸卡，而裝飾者模式則是在原有的怪獸卡上，加上裝備卡。 ʕ •ᴥ•ʔ：裝飾者模式專注在對象上，也就更能客製化需求。（動態產生對象，而不是子類）","categories":[{"name":"Clean Code","slug":"Clean-Code","permalink":"https://yncbearz.github.io/categories/Clean-Code/"}],"tags":[{"name":"Design Pattern","slug":"Design-Pattern","permalink":"https://yncbearz.github.io/tags/Design-Pattern/"}]},{"title":"類別圖：收銀機（策略模式)","slug":"Class-Diagram-Cash-Register-Strategy-Pattern","date":"2020-07-06T14:38:50.000Z","updated":"2025-07-30T11:30:13.149Z","comments":true,"path":"2020/07/06/Class-Diagram-Cash-Register-Strategy-Pattern/","permalink":"https://yncbearz.github.io/2020/07/06/Class-Diagram-Cash-Register-Strategy-Pattern/","excerpt":"Class-Diagram-Cash-Register-Strategy-Pattern","text":"Example: 收銀機 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859606162636465@startuml Example-Cash-Register-Strategy-Patternclass Program&#123; - CashContext cashContent + pay() + getReceipt()&#125;class CashContext&#123; - Payable discountMethod - Receiptable receipt - resolveDiscountMethod() - resolveReceiptType() + pay() + getReceipt()&#125;interface Payable&#123; + pay()&#125;class NormalPay&#123; + pay()&#125;class OffPercentPay&#123; + pay()&#125;class FeedBackPay&#123; + pay()&#125;interface Receiptable&#123; + getReceipt()&#125;class ElectronicReceipt&#123; + getReceipt()&#125;class NormalReceipt&#123; + getReceipt()&#125;Payable &lt;|.. NormalPayPayable &lt;|.. OffPercentPayPayable &lt;|.. FeedBackPayReceiptable &lt;|.. ElectronicReceiptReceiptable &lt;|.. NormalReceiptProgram -&gt; CashContextCashContext o-- PayableCashContext o-- Receiptable 注意 Program 跟 CashContext 的方法名只是恰好與 Payable &amp; Receiptable 中相同。 為了易於理解，並未列出所有細節。 ʕ •ᴥ•ʔ：若不熟悉 UML 類別圖，可參考UML類別圖說明。","categories":[{"name":"Clean Code","slug":"Clean-Code","permalink":"https://yncbearz.github.io/categories/Clean-Code/"}],"tags":[{"name":"Design Pattern","slug":"Design-Pattern","permalink":"https://yncbearz.github.io/tags/Design-Pattern/"}]},{"title":"範例：收銀機 （策略模式)","slug":"Example-Cash-Register-Strategy-Pattern","date":"2020-07-05T13:22:32.000Z","updated":"2025-05-30T08:15:23.234Z","comments":true,"path":"2020/07/05/Example-Cash-Register-Strategy-Pattern/","permalink":"https://yncbearz.github.io/2020/07/05/Example-Cash-Register-Strategy-Pattern/","excerpt":"Example-Cash-Register-Strategy-Pattern","text":"Pattern: 策略模式 Class Diagram: 收銀機 需求一：客戶想要一台收銀機 12345678910111213141516171819202122&lt;?phpnamespace App\\StrategyPattern\\CashRegister;class Program&#123; /** * @var int */ private $originalPrice; public function __construct($originalPrice) &#123; $this-&gt;originalPrice = $originalPrice; &#125; public function pay() &#123; return $this-&gt;originalPrice; &#125;&#125; 需求二：客戶想要有一個優惠活動 (打8折) 12345678910111213141516171819202122232425262728293031&lt;?phpnamespace App\\StrategyPattern\\CashRegister;class Program&#123; /** * @var int */ private $originalPrice; /** * @var string */ private $promotion; public function __construct($originalPrice, $promotion) &#123; $this-&gt;originalPrice = $originalPrice; $this-&gt;promotion = $promotion; &#125; public function pay() &#123; if ($this-&gt;promotion == &#x27;20% off&#x27;) &#123; return $this-&gt;originalPrice * 0.8; &#125; return $this-&gt;originalPrice; &#125;&#125; 需求三：客戶想要有另一個優惠 (買300回饋100) 身為工程師的我們，二話不說加上了這個功能 12345678910111213141516public function pay()&#123; $originalPrice = $this-&gt;originalPrice; if ($this-&gt;promotion == &#x27;20% off&#x27;) &#123; return $originalPrice * 0.8; &#125; if ($this-&gt;promotion == &#x27;spend_300_feedback_100&#x27;) &#123; if ($originalPrice &gt;= 300) &#123; return $originalPrice - floor($originalPrice / 300) * 100; &#125; &#125; return $originalPrice;&#125; 這時候功能是完成了，但有沒有覺得哪裡怪怪的？欸嘿，我們想到之前學過的簡單工廠模式。 可以實作三個類別，分別是正常付費、8折付費、買300回饋100。讓我們利用簡單工廠改造它。 首先定義付錢介面 12345678&lt;?phpnamespace App\\StrategyPattern\\CashRegister\\Contracts;interface Payable&#123; public function pay();&#125; 實作正常付費類別 1234567891011121314151617181920212223&lt;?phpnamespace App\\StrategyPattern\\CashRegister;use App\\StrategyPattern\\CashRegister\\Contracts\\Payable;class NormalPay implements Payable&#123; /** * @var int */ private $originalPrice; public function __construct($originalPrice) &#123; $this-&gt;originalPrice = $originalPrice; &#125; public function pay() &#123; return $this-&gt;originalPrice; &#125;&#125; 實作打折付費類別 1234567891011121314151617181920212223242526272829&lt;?phpnamespace App\\StrategyPattern\\CashRegister;use App\\StrategyPattern\\CashRegister\\Contracts\\Payable;class OffPercentPay implements Payable&#123; /** * @var int */ private $originalPrice; /** * @var double */ private $offPercent; public function __construct($originalPrice, $offPercent) &#123; $this-&gt;originalPrice = $originalPrice; $this-&gt;offPercent = $offPercent; &#125; public function pay() &#123; return $this-&gt;originalPrice * (1 - $this-&gt;offPercent); &#125;&#125; 實作買多少回饋多少類別 12345678910111213141516171819202122232425262728293031323334353637383940414243&lt;?phpnamespace App\\StrategyPattern\\CashRegister;use App\\StrategyPattern\\CashRegister\\Contracts\\Payable;class FeedbackPay implements Payable&#123; /** * @var int */ private $originalPrice; /** * @var int */ private $priceCondition; /** * @var int */ private $feedback; public function __construct($originalPrice, $priceCondition, $feedback) &#123; $this-&gt;originalPrice = $originalPrice; $this-&gt;priceCondition = $priceCondition; $this-&gt;feedback = $feedback; &#125; public function pay() &#123; $originalPrice = $this-&gt;originalPrice; $priceCondition = $this-&gt;priceCondition; $feedback = $this-&gt;feedback; if ($originalPrice &gt;= $priceCondition) &#123; return $originalPrice - floor($originalPrice / $priceCondition) * $feedback; &#125; return $originalPrice; &#125;&#125; 最後原本程式再搭配工廠即可完成。 (下略) 正當我們洋洋得意的時候，客戶送來第四個需求… 需求四：客戶希望收銀機可以開一般發票或電子發票 不是啊，客戶你要這種發票類型的需求你要先說.. (碎念) 按照簡單工廠模式的思維，我們必須為這個需求做出6個類別，分別是 **（正常付費、打折付費、買多少回饋多少）x（一般發票、電子發票）**的排列組合。 不行不行，假設客戶將來又提出要開統編的需求，我們就要寫8個類別了。 而且這樣也違反開放封閉原則。每次有新需求都會改動所有的程式碼。 在我們研究一下後，發現了一個適合的設計模式：策略模式 我們首先製作一個消費明細類別，它擁有所有的優惠方式 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253&lt;?phpnamespace App\\StrategyPattern\\CashRegister;use App\\StrategyPattern\\CashRegister\\OffPercentPay;use App\\StrategyPattern\\CashRegister\\FeedbackPay;use App\\StrategyPattern\\CashRegister\\NormalPay;use App\\StrategyPattern\\CashRegister\\Contracts\\Payable;class CashContext&#123; /** * @var Payable */ private $discountMethod; /** * @param int $originalPrice * @param string $discountType */ public function __construct($originalPrice, $discountType) &#123; $this-&gt;resolveDiscountMethod($originalPrice, $discountType); &#125; /** * @param int $originalPrice * @param string $discountType */ private function resolveDiscountMethod($originalPrice, $discountType) &#123; switch ($discountType) &#123; case &#x27;20% off&#x27;: $this-&gt;discountMethod = new OffPercentPay($originalPrice, 0.2); break; case &#x27;spend_300_feedback_100&#x27;: $this-&gt;discountMethod = new FeedbackPay($originalPrice, 300, 100); break; default: $this-&gt;discountMethod = new NormalPay($originalPrice); break; &#125; &#125; public function pay() &#123; return $this-&gt;discountMethod-&gt;pay(); &#125;&#125; 再來修改Program，讓它呼叫消費明細物件 123456789101112131415161718192021222324252627&lt;?phpnamespace App\\StrategyPattern\\CashRegister;use App\\StrategyPattern\\CashRegister\\CashContext;class Program&#123; /** * @var CashContext */ private $cashContext; /** * @param int $originalPrice * @param string $discountType */ public function __construct($originalPrice, $discountType) &#123; $this-&gt;cashContext = new CashContext($originalPrice, $discountType); &#125; public function pay() &#123; return $this-&gt;cashContext-&gt;pay(); &#125;&#125; 這樣好像還看不出來有什麼好處，我們繼續實作。 定義發票介面 12345678&lt;?phpnamespace App\\StrategyPattern\\CashRegister\\Contracts;interface Receiptable&#123; public function getReceipt();&#125; 實作一般發票 12345678910111213&lt;?phpnamespace App\\StrategyPattern\\CashRegister;use App\\StrategyPattern\\CashRegister\\Contracts\\Receiptable;class NormalReceipt implements Receiptable&#123; public function getReceipt() &#123; return &#x27;一般發票&#x27;; &#125;&#125; 實作電子發票 12345678910111213&lt;?phpnamespace App\\StrategyPattern\\CashRegister;use App\\StrategyPattern\\CashRegister\\Contracts\\Receiptable;class ElectronicReceipt implements Receiptable&#123; public function getReceipt() &#123; return &#x27;電子發票&#x27;; &#125;&#125; 修改消費明細類別 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859606162636465666768697071727374757677787980&lt;?phpnamespace App\\StrategyPattern\\CashRegister;use App\\StrategyPattern\\CashRegister\\NormalPay;use App\\StrategyPattern\\CashRegister\\NormalReceipt;use App\\StrategyPattern\\CashRegister\\Contracts\\Payable;use App\\StrategyPattern\\CashRegister\\ElectronicReceipt;use App\\StrategyPattern\\CashRegister\\Contracts\\Receiptable;class CashContext&#123; /** * @var Payable */ private $discountMethod; /** * @var Receiptable */ private $receipt; /** * @param int $originalPrice * @param string $discountType * @param string $receiptType */ public function __construct($originalPrice, $discountType, $receiptType) &#123; $this-&gt;resolveDiscountMethod($originalPrice, $discountType); $this-&gt;resolveReceiptType($receiptType); &#125; /** * @param int $originalPrice * @param string $discountType */ private function resolveDiscountMethod($originalPrice, $discountType) &#123; switch ($discountType) &#123; case &#x27;20% off&#x27;: $this-&gt;discountMethod = new OffPercentPay($originalPrice, 0.2); break; case &#x27;spend_300_feedback_100&#x27;: $this-&gt;discountMethod = new FeedbackPay($originalPrice, 300, 100); break; default: $this-&gt;discountMethod = new NormalPay($originalPrice); break; &#125; &#125; /** * @param string $receiptType */ private function resolveReceiptType($receiptType) &#123; switch ($receiptType) &#123; case &#x27;electronicReceipt&#x27;: $this-&gt;receipt = new ElectronicReceipt(); break; default: $this-&gt;receipt = new NormalReceipt(); break; &#125; &#125; public function pay() &#123; return $this-&gt;discountMethod-&gt;pay(); &#125; public function getReceipt() &#123; return $this-&gt;receipt-&gt;getReceipt(); &#125;&#125; 最後修改原本的Program 12345678910111213141516171819202122232425262728293031323334&lt;?phpnamespace App\\StrategyPattern\\CashRegister;use App\\StrategyPattern\\CashRegister\\CashContext;class Program&#123; /** * @var CashContext */ private $cashContext; /** * @param int $originalPrice * @param string $discountType * @param string $receiptType */ public function __construct($originalPrice, $discountType, $receiptType) &#123; $this-&gt;cashContext = new CashContext($originalPrice, $discountType, $receiptType); &#125; public function pay() &#123; return $this-&gt;cashContext-&gt;pay(); &#125; public function getReceipt() &#123; return $this-&gt;cashContext-&gt;getReceipt(); &#125;&#125; [單一職責原則]將類別本身職責跟算法族的職責分離，就是策略模式的精神！ [開放封閉原則]這下子，我們終於不會在客戶提出一個新需求時，影響到全部的既有程式碼了。 [介面隔離原則]定義出付錢介面與發票介面，讓兩者不會互相影響。可以交由各自的算法族，分別實現。 [依賴反轉原則]消費明細類別依賴抽象的付錢介面與發票介面。不同的算法族，實現對應的抽象介面。 ʕ •ᴥ•ʔ：使用策略模式，我們依然會做出許多小類別（算法族&#x2F;算法），但因為切分的更細，也就更能因應需求去做變化。","categories":[{"name":"Clean Code","slug":"Clean-Code","permalink":"https://yncbearz.github.io/categories/Clean-Code/"}],"tags":[{"name":"Example","slug":"Example","permalink":"https://yncbearz.github.io/tags/Example/"}]},{"title":"策略模式","slug":"Strategy-Pattern","date":"2020-07-05T13:02:46.000Z","updated":"2025-05-30T08:15:23.255Z","comments":true,"path":"2020/07/05/Strategy-Pattern/","permalink":"https://yncbearz.github.io/2020/07/05/Strategy-Pattern/","excerpt":"Strategy-Pattern","text":"Strategy Pattern定義算法族，分別封裝，讓彼此之間能互相替換，使算法變化獨立。Example: 收銀機 策略模式只會將類別分為一類，即 算法族類別 (Algorithm) 。 同一算法族類別會實作相同介面，便於替換。 優點：將物件本身的職責與算法的職責分離。新增&#x2F;修改算法時，不會影響既有程式碼。具體算法組合交給客戶端，能在執行時才被決定。 缺點：會做出許多小類別。 與其他模式的比較：[簡單工廠模式]：在簡單工廠模式中，各個物件都已定義好其中的方法，而策略模式的精神則是執行時組合不同的演算法。 當需要在不同時間應用不同的業務規則時，很可能就是使用策略模式的時機。 ʕ •ᴥ•ʔ：將職責切分至算法族的層級，就是策略模式。","categories":[{"name":"Clean Code","slug":"Clean-Code","permalink":"https://yncbearz.github.io/categories/Clean-Code/"}],"tags":[{"name":"Design Pattern","slug":"Design-Pattern","permalink":"https://yncbearz.github.io/tags/Design-Pattern/"}]},{"title":"類別圖：計算機（簡單工廠模式）","slug":"Class-Diagram-Calculator-Simple-Factory-Pattern","date":"2020-06-27T03:44:52.000Z","updated":"2025-07-30T11:30:13.137Z","comments":true,"path":"2020/06/27/Class-Diagram-Calculator-Simple-Factory-Pattern/","permalink":"https://yncbearz.github.io/2020/06/27/Class-Diagram-Calculator-Simple-Factory-Pattern/","excerpt":"Class-Diagram-Calculator-Simple-Factory-Pattern","text":"Example: 計算機 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647@startuml Example-Calculator-Simple-Factory-Patternclass Program&#123; + run()&#125;class SimpleOperationFactory&#123; + create() : Operable&#125;interface Operable&#123; + execute()&#125;class AddOperation&#123; + execute()&#125;class MinusOperation&#123; + execute()&#125;class DivideOperation&#123; + execute()&#125;class MultiplyOperation&#123; + execute()&#125;Operable &lt;|.. AddOperationOperable &lt;|.. MinusOperationOperable &lt;|.. DivideOperationOperable &lt;|.. MultiplyOperationProgram -&gt; SimpleOperationFactorySimpleOperationFactory -&gt; Operable@enduml ʕ •ᴥ•ʔ：若不熟悉 UML 類別圖，可參考UML類別圖說明。","categories":[{"name":"Clean Code","slug":"Clean-Code","permalink":"https://yncbearz.github.io/categories/Clean-Code/"}],"tags":[{"name":"Design Pattern","slug":"Design-Pattern","permalink":"https://yncbearz.github.io/tags/Design-Pattern/"}]},{"title":"UML類別圖說明","slug":"Class-Diagram-Description","date":"2020-06-26T03:38:55.000Z","updated":"2025-07-30T11:30:13.162Z","comments":true,"path":"2020/06/26/Class-Diagram-Description/","permalink":"https://yncbearz.github.io/2020/06/26/Class-Diagram-Description/","excerpt":"Class-Diagram-Description","text":"Class DiagramClass diagram describes the structure of a system by showing the system’s classes, their attributes, operations (or methods), and the relationships among objects. 類別圖描述了系統的類別集合，類別的屬性和類別之間的關係。 關聯 (Association) ：以實線箭頭表示。關聯關係使一個類別知道另外一個類別的屬性和方法；通常含有「知道」、「瞭解」的含義。 貓咪知道天氣情況 123456789@startuml Associationclass Cat&#123; # Climate climate&#125;class ClimateCat -&gt; Climate@enduml 實作 (Implementation) ：以空心三角形的虛線箭頭表示。實作關係指的是一個 class 類別實現 interface 介面。 飛機實作可飛行介面 12345678910111213@startuml Implementationinterface Flyable&#123; + fly()&#125;Class Plane&#123; + fly()&#125;Flyable &lt;|.. Plane@enduml 聚合 (Aggregation)：以空心菱形的實線表示。聚合關係是整體與部分的「弱」包含關係。部分類別可單獨存在，也可以屬於多個整體物件。 描述has-a的關係 學校包含學生、課堂包含學生 學生可以單獨存在 12345678910111213141516@startuml Aggregationclass Studentclass Course&#123; # Student[] students&#125;class School&#123; # Student[] students&#125;Course o- StudentSchool o-- Student@enduml 組成（Composition）：以實心菱形的實線表示。組成關係是整體與部分的「強」包含關係。部分類別無法單獨存在，其生命週期與整體相同。 描述contains-a的關係 手錶包含時針、時鐘包含時針 時針無法單獨存在 123456789101112131415161718@startuml Compositionclass Watch&#123; # HourHand&#125;class Clock&#123; # HourHand&#125;class HourHandWatch *-- HourHandClock *-- HourHand@enduml 繼承 (Inheritance)：以空心三角形的實線箭頭表示。繼承關係指的是父類別擁有子類別的共有功能。而子類別可以視作父類別的特例。 描述is-a的關係 學生是人的特例、工程師是人的特例 123456@startuml InheritancePerson &lt;|-- StudentPerson &lt;|-- Programmer@enduml ʕ •ᴥ•ʔ：學習Design Pattern的過程中，一定會遇到的圖形！寫完才發現，自己很少描述聚合跟組成的關係。","categories":[{"name":"Clean Code","slug":"Clean-Code","permalink":"https://yncbearz.github.io/categories/Clean-Code/"}],"tags":[{"name":"Design Pattern","slug":"Design-Pattern","permalink":"https://yncbearz.github.io/tags/Design-Pattern/"}]},{"title":"KISS 原則","slug":"Keep-It-Simple-Stupid","date":"2020-06-25T08:13:10.000Z","updated":"2025-05-30T08:15:23.246Z","comments":true,"path":"2020/06/25/Keep-It-Simple-Stupid/","permalink":"https://yncbearz.github.io/2020/06/25/Keep-It-Simple-Stupid/","excerpt":"Keep-It-Simple-And-Stupid","text":"Keep It Simple and Stupid (KISS) 保持簡單和愚蠢 讓程式碼保持簡單。 這樣做的優點是，任何人都能理解你的代碼，進而增加其生命週期 (可以被維護及複用)。 看似簡單的精神，卻需要許多努力才能實踐。 程式碼意圖表達性佳 適時的使用設計模式 Coding Style 貼近社群 其最終目的都是，減少程式碼的理解成本。 ʕ •ᴥ•ʔ：Kent Beck 實作模式中的核心精神，算是我第二喜歡的原則！","categories":[{"name":"Clean Code","slug":"Clean-Code","permalink":"https://yncbearz.github.io/categories/Clean-Code/"}],"tags":[{"name":"Principle","slug":"Principle","permalink":"https://yncbearz.github.io/tags/Principle/"}]},{"title":"不要重複你自己","slug":"Dont-Repeat-Yourself","date":"2020-06-23T14:44:45.000Z","updated":"2025-05-30T08:15:23.230Z","comments":true,"path":"2020/06/23/Dont-Repeat-Yourself/","permalink":"https://yncbearz.github.io/2020/06/23/Dont-Repeat-Yourself/","excerpt":"Don't-Repeat-Yourself","text":"Don’t Repeat Yourself (DRY)Every piece of knowledge must have a single, unambiguous, authoritative representation within a system. 系統中的每個部分，都必須要有唯一、明確且權威的代表。 在許多部分，有著重覆的程式碼，會造成將來修改時有所遺漏，透過遵守 DRY ，修改一處程式碼後，其餘地方便會同步改變。 不要用複製貼上編程法。(Copy-and-paste programming) 而違反 DRY 原則，又被戲稱為 WET“Write Every Time”“We Enjoy Typing” ʕ •ᴥ•ʔ：Avoid writing duplicate code !","categories":[{"name":"Clean Code","slug":"Clean-Code","permalink":"https://yncbearz.github.io/categories/Clean-Code/"}],"tags":[{"name":"Principle","slug":"Principle","permalink":"https://yncbearz.github.io/tags/Principle/"}]},{"title":"範例：計算機 （簡單工廠模式)","slug":"Example-Calculator-Simple-Factory-Pattern","date":"2020-06-21T14:40:20.000Z","updated":"2025-05-30T08:15:23.233Z","comments":true,"path":"2020/06/21/Example-Calculator-Simple-Factory-Pattern/","permalink":"https://yncbearz.github.io/2020/06/21/Example-Calculator-Simple-Factory-Pattern/","excerpt":"Example-Calculator-Simple-Factory-Pattern","text":"Pattern: 簡單工廠模式 Class Diagram: 計算機 需求一：客戶想要一個加法計算機 123456789101112131415161718192021222324252627282930313233&lt;?phpnamespace App\\FactoryPattern\\Calculator;class Program&#123; /** * @var int */ private $firstNumber; /** * @var int */ private $secondNumber; /** * @var string */ private $operationString; public function __construct($firstNumber, $secondNumber) &#123; $this-&gt;firstNumber = $firstNumber; $this-&gt;secondNumber = $secondNumber; &#125; public function run() &#123; return $this-&gt;firstNumber + $this-&gt;secondNumber; &#125;&#125; 需求二：客戶想要在既有的計算機上，增加減法功能 我們思路如下： 首先改變建構式，讓參數有運算符號 123456public function __construct($firstNumber, $secondNumber, $operationString)&#123; $this-&gt;firstNumber = $firstNumber; $this-&gt;secondNumber = $secondNumber; $this-&gt;operationString = $operationString;&#125; 由運算符號，執行對應的方法 1234567891011121314public function run()&#123; $operationString = $this-&gt;operationString; switch ($operationString) &#123; case &#x27;+&#x27;: return $this-&gt;firstNumber + $this-&gt;secondNumber; break; case &#x27;-&#x27;: return $this-&gt;firstNumber - $this-&gt;secondNumber; break; &#125;&#125; 需求三：客戶想要除法的功能 於是我們在函式中，再添加一個除法的功能 123456789101112131415161718192021public function run()&#123; $operationString = $this-&gt;operationString; switch ($operationString) &#123; case &#x27;+&#x27;: return $this-&gt;firstNumber + $this-&gt;secondNumber; break; case &#x27;-&#x27;: return $this-&gt;firstNumber - $this-&gt;secondNumber; break; case &quot;/&quot;: if ($this-&gt;secondNumber === 0) &#123; return &#x27;Division by zero&#x27;; &#125; return $this-&gt;firstNumber / $this-&gt;secondNumber; break; &#125;&#125; 這時候功能是完成了，但有沒有覺得哪裡怪怪的？ 除法的case很醜，要額外判斷除數不為0，增加了嵌套層數。 每當客戶要新增&#x2F;修改&#x2F;刪除一種運算時，其餘的運算都會被修改到。違反了開放封閉原則。 讓我們用簡單工廠改造它。 首先定義運算的介面 12345678&lt;?phpnamespace App\\FactoryPattern\\Calculator\\Contracts;interface Operable&#123; public function execute();&#125; 實作加法運算 12345678910111213141516&lt;?phpnamespace App\\FactoryPattern\\Calculator\\Operation;use App\\FactoryPattern\\Calculator\\Contracts\\Operable;class AddOperation implements Operable&#123; public $firstNumber; public $secondNumber; public function execute() &#123; return $this-&gt;firstNumber + $this-&gt;secondNumber; &#125;&#125; 實作減法運算 12345678910111213141516&lt;?phpnamespace App\\FactoryPattern\\Calculator\\Operation;use App\\FactoryPattern\\Calculator\\Contracts\\Operable;class MinusOperation implements Operable&#123; public $firstNumber; public $secondNumber; public function execute() &#123; return $this-&gt;firstNumber - $this-&gt;secondNumber; &#125;&#125; 實作除法運算 12345678910111213141516171819&lt;?phpnamespace App\\FactoryPattern\\Calculator\\Operation;use App\\FactoryPattern\\Calculator\\Contracts\\Operable;class DivideOperation implements Operable&#123; public $firstNumber; public $secondNumber; public function execute() &#123; if ($this-&gt;secondNumber === 0) &#123; return &#x27;Division by zero&#x27;; &#125; return $this-&gt;firstNumber / $this-&gt;secondNumber; &#125;&#125; 最後做一個創造運算的工廠 1234567891011121314151617181920212223242526272829303132&lt;?phpnamespace App\\FactoryPattern\\Calculator;use App\\FactoryPattern\\Calculator\\Contracts\\Operable;use App\\FactoryPattern\\Calculator\\Operation\\AddOperation;use App\\FactoryPattern\\Calculator\\Operation\\MinusOperation;use App\\FactoryPattern\\Calculator\\Operation\\DivideOperation;class SimpleOperationFactory&#123; /** * @param string $operationString * @return Operable */ public function create($operationString): Operable &#123; switch ($operationString) &#123; case &#x27;+&#x27;: return new AddOperation(); break; case &#x27;-&#x27;: return new MinusOperation(); break; case &#x27;/&#x27;: return new DivideOperation(); break; &#125; &#125;&#125; 修改原本的產品程式碼，讓運算由工廠產生 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354&lt;?phpnamespace App\\FactoryPattern\\Calculator;use App\\FactoryPattern\\Calculator\\Contracts\\Operable;use App\\FactoryPattern\\Calculator\\SimpleOperationFactory;class Program&#123; /** * @var int */ private $firstNumber; /** * @var int */ private $secondNumber; /** * @var string */ private $operationString; /** * @var Operable */ private $operation; public function __construct($firstNumber, $secondNumber, $operationString) &#123; $this-&gt;firstNumber = $firstNumber; $this-&gt;secondNumber = $secondNumber; $this-&gt;operationString = $operationString; &#125; public function run() &#123; $simpleOperationFactory = new SimpleOperationFactory(); $this-&gt;operation = $simpleOperationFactory-&gt;create($this-&gt;operationString); return $this-&gt;execute(); &#125; /** * @return int|string */ private function execute() &#123; $this-&gt;operation-&gt;firstNumber = $this-&gt;firstNumber; $this-&gt;operation-&gt;secondNumber = $this-&gt;secondNumber; return $this-&gt;operation-&gt;execute(); &#125;&#125; 需求四：客戶想要乘法的功能 實作乘法運算 12345678910111213141516&lt;?phpnamespace App\\FactoryPattern\\Calculator\\Operation;use App\\FactoryPattern\\Calculator\\Contracts\\Operable;class MultiplyOperation implements Operable&#123; public $firstNumber; public $secondNumber; public function execute() &#123; return $this-&gt;firstNumber * $this-&gt;secondNumber; &#125;&#125; 修改運算工廠 123456789101112131415161718192021222324/** * @param string $operationString * @return Operable */public function create($operationString): Operable&#123; switch ($operationString) &#123; case &#x27;+&#x27;: return new AddOperation(); break; case &#x27;-&#x27;: return new MinusOperation(); break; case &#x27;/&#x27;: return new DivideOperation(); break; case &#x27;*&#x27;: return new MultiplyOperation(); break; &#125;&#125; [單一職責原則]將創造運算的職責跟運算本身的職責分離，就是工廠模式的精神！ [開放封閉原則]這下子，我們終於不會每次新增&#x2F;修改&#x2F;刪除一個運算時，影響到其餘所有運算了。 ʕ •ᴥ•ʔ：函式出現switch時，很可能就是使用工廠模式的時機。","categories":[{"name":"Clean Code","slug":"Clean-Code","permalink":"https://yncbearz.github.io/categories/Clean-Code/"}],"tags":[{"name":"Example","slug":"Example","permalink":"https://yncbearz.github.io/tags/Example/"}]},{"title":"簡單工廠模式","slug":"Simple-Factory-Pattern","date":"2020-06-21T12:39:30.000Z","updated":"2025-05-30T08:15:23.253Z","comments":true,"path":"2020/06/21/Simple-Factory-Pattern/","permalink":"https://yncbearz.github.io/2020/06/21/Simple-Factory-Pattern/","excerpt":"Simple Factory Pattern","text":"Simple Factory Pattern又稱為靜態工廠，傳入不同的參數以取得不同的類別物件。Example: 計算機、運輸系統、世紀帝國 簡單工廠模式會將類別分為兩類：分別是工廠類別 (Creator) 與 產品類別 (Product) 。 在簡單工廠模式中，通常只會有一個工廠，負責一種產品的創建。 優點：將創建物件的邏輯與物件本身的邏輯分離，符合單一職責原則。 缺點：因工廠負責產品族中所有產品的創建，當新增&#x2F;修改產品時，無法遵守開放封閉原則。 簡單工廠模式適用於創建物件時，沒有複雜邏輯的情況。 ʕ •ᴥ•ʔ：創造物件就是工廠模式唯一的職責。","categories":[{"name":"Clean Code","slug":"Clean-Code","permalink":"https://yncbearz.github.io/categories/Clean-Code/"}],"tags":[{"name":"Design Pattern","slug":"Design-Pattern","permalink":"https://yncbearz.github.io/tags/Design-Pattern/"}]},{"title":"設計模式目錄","slug":"Design-Pattern-Menu","date":"2020-06-21T12:21:04.000Z","updated":"2025-05-30T08:15:23.230Z","comments":true,"path":"2020/06/21/Design-Pattern-Menu/","permalink":"https://yncbearz.github.io/2020/06/21/Design-Pattern-Menu/","excerpt":"Design-Pattern-Menu","text":"Design Pattern Menu 模式 範例 簡單工廠模式 (Simple Factory Pattern) 計算機、運輸系統、世紀帝國 工廠方法模式 (Factory Method Pattern) 運輸系統、世紀帝國 抽象工廠模式 (Abstract Factory Pattern) 運輸系統、世紀帝國 策略模式 (Strategy Pattern) 收銀機 裝飾者模式 (Decorator Pattern) 漢堡點餐系統 單例模式 (Singleton Pattern) 資料庫連線 命令模式 (Command Pattern) 機器人廚師 樣板方法模式 (Template Method Pattern) 影片製作大師 轉接頭模式 (Adapter Pattern) 才藝表演 外觀模式 (Facade Pattern) 自助餐餐廳 狀態模式 (State Pattern) 會員制、光的三原色 觀察者模式 (Observer Pattern) Line群組通知 迭代器模式 (Iterator Pattern) 歌曲排行 代理模式 (Proxy Pattern) 快取代理 原型模式 (Prototype Pattern) 三隻小豬 建造者模式 (Builder Pattern) 假期規劃 備忘錄模式 (Memento Pattern) 仿真Git 蠅量模式 (Flyweight Pattern) 文字積木 解譯器模式 (Interpreter Pattern) 摩斯電碼 組合模式 (Composite Pattern) 生物分類學 橋接模式 (Bridge Pattern) 十二生肖 職責鏈模式 (Chain Of Responsibility Pattern) 新產品開發 中介者模式 (Mediator Pattern) 打招呼 訪問者模式 (Visitor Pattern) 各國婚禮、動物園管理員 ʕ •ᴥ•ʔ：會在這裡陸續更新！","categories":[{"name":"Clean Code","slug":"Clean-Code","permalink":"https://yncbearz.github.io/categories/Clean-Code/"}],"tags":[{"name":"Design Pattern","slug":"Design-Pattern","permalink":"https://yncbearz.github.io/tags/Design-Pattern/"},{"name":"Menu","slug":"Menu","permalink":"https://yncbearz.github.io/tags/Menu/"}]},{"title":"依賴反轉原則","slug":"Dependency-Inversion-Principle","date":"2020-06-08T01:56:53.000Z","updated":"2025-05-30T08:15:23.230Z","comments":true,"path":"2020/06/08/Dependency-Inversion-Principle/","permalink":"https://yncbearz.github.io/2020/06/08/Dependency-Inversion-Principle/","excerpt":"Dependency-Inversion-Principle","text":"Dependency Inversion Principle (DIP)High-level modules should not depend on low-level modules. Both should depend on abstractions 高階模組不應該依賴低階模組。它們都應該依賴抽象。 Abstractions should not depend on details. Details (concrete implementations) should depend on abstractions. 抽象不應該依賴細節。細節應該依賴抽象。 Example: 電力系統 目的是把高階模組對低階模組的依賴解耦，改為高階模組依賴定義出的抽象介面，而由低階模組去實現介面。 其中的依賴關係被顛倒，使得低階模組依賴於高階的抽象介面。 Def. 發電：泛指從其它種類的能源轉換為電力的過程。 最初我們有一個電力系統，發電系統採用火力發電，之後再由輸電系統，配給各個用戶。 今天我們想要抽換發電系統，改為風力發電。卻發現原本的電力系統強耦合於火力發電，不易抽換。 透過定義出抽象的發電介面，我們可以讓電力系統依賴於發電介面，並讓火力發電、風力發電去實作發電介面。 因為依賴抽象化，未來就更容易抽換發電系統了。 ʕ •ᴥ•ʔ：重讀一次DIP發現重點在於，如何定義出足夠抽象的介面。","categories":[{"name":"Clean Code","slug":"Clean-Code","permalink":"https://yncbearz.github.io/categories/Clean-Code/"}],"tags":[{"name":"Principle","slug":"Principle","permalink":"https://yncbearz.github.io/tags/Principle/"},{"name":"S.O.L.I.D","slug":"S-O-L-I-D","permalink":"https://yncbearz.github.io/tags/S-O-L-I-D/"}]},{"title":"介面隔離原則","slug":"Interface-Segregation-Principle","date":"2020-06-03T15:08:50.000Z","updated":"2025-05-30T08:15:23.246Z","comments":true,"path":"2020/06/03/Interface-Segregation-Principle/","permalink":"https://yncbearz.github.io/2020/06/03/Interface-Segregation-Principle/","excerpt":"Interface-Segregation-Principle","text":"Interface Segregation Principle (ISP)No client should be forced to depend on methods it does not use. 客戶不應該依賴他們不使用的方法。 Example: 咖啡機 透過將龐大的介面，拆分成一個個的小介面，解開耦合，進而容易重構、修改及部署。 前陣子Johnny提出ISP的目的，是為了多型的實作，也是不錯的觀點。（註：小介面比較易於實作） Def. 全自動咖啡機：會自己磨粉、沖煮的咖啡機。 假使我們實作一個咖啡機介面，內有兩種方法，分別是磨粉及沖煮。 隨著對咖啡的興趣增加，我們可能會想玩摩卡壺。（註：摩卡壺為一種沖煮咖啡的器具） 這時會發現，原本咖啡機介面職責有點多。摩卡壺沒辦法實作咖啡機介面（不會磨粉）。 透過將介面拆分成：磨粉介面、沖煮介面，我們可以讓原本的全自動咖啡機改成實作這兩種介面。 而摩卡壺實作沖煮介面。 這下原本的煮咖啡程式，就可以寫好不修改了。 ʕ •ᴥ•ʔ：ISP不就是介面版本的單一職責原則嗎?（笑）","categories":[{"name":"Clean Code","slug":"Clean-Code","permalink":"https://yncbearz.github.io/categories/Clean-Code/"}],"tags":[{"name":"Principle","slug":"Principle","permalink":"https://yncbearz.github.io/tags/Principle/"},{"name":"S.O.L.I.D","slug":"S-O-L-I-D","permalink":"https://yncbearz.github.io/tags/S-O-L-I-D/"}]},{"title":"裡氏替換原則","slug":"Liskov-Substitution-Principle","date":"2020-05-31T05:18:05.000Z","updated":"2025-05-30T08:15:23.249Z","comments":true,"path":"2020/05/31/Liskov-Substitution-Principle/","permalink":"https://yncbearz.github.io/2020/05/31/Liskov-Substitution-Principle/","excerpt":"Liskov-Substitution-Principle","text":"Liskov Substitution Principle (LSP)Subtypes must be substitutable for their base types. 子類別必須要能替代它的父類別。 Example: 老爸餐廳 目前是以集合關係的角度來理解 LSP。 實作上大致有兩個概念： 子類別的Input型態可以比父類別更寬鬆。 子類別的Output型態則需比父類別更為嚴謹。 這樣子類別才有取代父類別的可能。（既有行為正常） Def. 餐廳：顧客可以用金流換取餐點的地方。 舉個實際例子，假設你要繼承老爸的餐廳： [Input篇]原本顧客習慣的付款方式是現金，你可以另外提供信用卡來付款。這樣原本使用現金的顧客，依然能在你的店消費。 [Output篇]而顧客來到餐廳的目的是餐點，你可以提供漢堡、炸牛排、陽春麵等等。但必須要是餐點。 (Reference.) SOLID 之 里氏替換原則 (Liskov substitution principle) ʕ •ᴥ•ʔ：LSP背後就是集合論啊，數學系對這個原則備感親切。","categories":[{"name":"Clean Code","slug":"Clean-Code","permalink":"https://yncbearz.github.io/categories/Clean-Code/"}],"tags":[{"name":"Principle","slug":"Principle","permalink":"https://yncbearz.github.io/tags/Principle/"},{"name":"S.O.L.I.D","slug":"S-O-L-I-D","permalink":"https://yncbearz.github.io/tags/S-O-L-I-D/"}]},{"title":"開放封閉原則","slug":"Open-Close-Principle","date":"2020-05-30T06:44:40.000Z","updated":"2025-05-30T08:15:23.252Z","comments":true,"path":"2020/05/30/Open-Close-Principle/","permalink":"https://yncbearz.github.io/2020/05/30/Open-Close-Principle/","excerpt":"Open-Close-Principle","text":"Open-Close Principle (OCP)A software artifact should be open for extension but closed for modification. 一個軟體製品應該對於擴展是開放的，但對於修改是封閉的。 OCP是系統架構背後的推動力之一。目標是使系統易於擴展而不會因修改而產生較大的影響。 問：遵守單一職責原則會有什麼好處？答：你就可以遵守開放封閉原則囉（笑） 職責拆分與抽象化，便是這個原則的核心精神。其影響力無遠弗屆，從模組、類別到方法都能見其身影。 當你因為需求變更而修改到既有程式碼時，很有可能就會違反 OCP。（比違反SRP容易察覺） 這是之前，在讀S.O.L.I.D時比較困惑的原則，實務情境不知道該如何遵守 OCP。 目前理解的流程： 先清楚各個程式碼區塊，所負責的任務是什麼。 接著拆分職責，定義抽象的介面。 最後考慮架構，理解何時可以修改既有程式碼、何時應該新增程式碼。 SRP 跟 OCP 是我心中最重要的兩個原則，相比之下，其他原則都像是他倆的補充說明。 ʕ •ᴥ•ʔ：定義好各個程式碼區塊的職責，然後遵守它。","categories":[{"name":"Clean Code","slug":"Clean-Code","permalink":"https://yncbearz.github.io/categories/Clean-Code/"}],"tags":[{"name":"Principle","slug":"Principle","permalink":"https://yncbearz.github.io/tags/Principle/"},{"name":"S.O.L.I.D","slug":"S-O-L-I-D","permalink":"https://yncbearz.github.io/tags/S-O-L-I-D/"}]},{"title":"單一職責原則","slug":"Single-Responsibility-Principle","date":"2020-05-27T16:00:33.000Z","updated":"2025-05-30T08:15:23.253Z","comments":true,"path":"2020/05/28/Single-Responsibility-Principle/","permalink":"https://yncbearz.github.io/2020/05/28/Single-Responsibility-Principle/","excerpt":"Single-Responsibility-Principle","text":"Single Responsibility Principle (SRP)A module should have one, and only one, reason to change. 一個模組應當有一個，且只有一個會改變的理由。 如果不好理解其定義的話，在Clean Architecture中有提到其最終版為，一個模組應當只對唯一的一個角色負責。 其影響力無遠弗屆，從模組、類別到方法都能見其身影。 討論code的時候，需要先建立彼此的共識。理解對方對code職責的定義，往往是很有幫助的。 這段Code的職責在你的定義下是做什麼的？用來解決什麼問題？它的服務對象是誰？任務目標是什麼？ 最近讀Refactoring時，討論到變數命名時，應只被設定一次。Kyo 提出，這不就是變數的單一職責原則嗎？ ʕ •ᴥ•ʔ：所有Clean Code的原點，也是我最喜歡的原則。跟 91 coaching 討論時，有提到需求改變時，只需要改變一個地方，也是另一種檢驗的方式。","categories":[{"name":"Clean Code","slug":"Clean-Code","permalink":"https://yncbearz.github.io/categories/Clean-Code/"}],"tags":[{"name":"Principle","slug":"Principle","permalink":"https://yncbearz.github.io/tags/Principle/"},{"name":"S.O.L.I.D","slug":"S-O-L-I-D","permalink":"https://yncbearz.github.io/tags/S-O-L-I-D/"}]}],"categories":[{"name":"Other","slug":"Other","permalink":"https://yncbearz.github.io/categories/Other/"},{"name":"Programming","slug":"Programming","permalink":"https://yncbearz.github.io/categories/Programming/"},{"name":"Clean Code","slug":"Clean-Code","permalink":"https://yncbearz.github.io/categories/Clean-Code/"},{"name":"Life","slug":"Life","permalink":"https://yncbearz.github.io/categories/Life/"}],"tags":[{"name":"Study Group","slug":"Study-Group","permalink":"https://yncbearz.github.io/tags/Study-Group/"},{"name":"Note","slug":"Note","permalink":"https://yncbearz.github.io/tags/Note/"},{"name":"Design Pattern","slug":"Design-Pattern","permalink":"https://yncbearz.github.io/tags/Design-Pattern/"},{"name":"Example","slug":"Example","permalink":"https://yncbearz.github.io/tags/Example/"},{"name":"Principle","slug":"Principle","permalink":"https://yncbearz.github.io/tags/Principle/"},{"name":"Private Note","slug":"Private-Note","permalink":"https://yncbearz.github.io/tags/Private-Note/"},{"name":"SQL","slug":"SQL","permalink":"https://yncbearz.github.io/tags/SQL/"},{"name":"With TM","slug":"With-TM","permalink":"https://yncbearz.github.io/tags/With-TM/"},{"name":"Settings","slug":"Settings","permalink":"https://yncbearz.github.io/tags/Settings/"},{"name":"Movie","slug":"Movie","permalink":"https://yncbearz.github.io/tags/Movie/"},{"name":"LeetCode","slug":"LeetCode","permalink":"https://yncbearz.github.io/tags/LeetCode/"},{"name":"Menu","slug":"Menu","permalink":"https://yncbearz.github.io/tags/Menu/"},{"name":"S.O.L.I.D","slug":"S-O-L-I-D","permalink":"https://yncbearz.github.io/tags/S-O-L-I-D/"}]}