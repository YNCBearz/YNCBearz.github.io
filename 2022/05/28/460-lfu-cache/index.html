<!DOCTYPE html>
<html>
<head><link rel=manifest href=/manifest.json>
    <meta charset="utf-8" />

    




  <link rel="apple-touch-icon" sizes="512x512" href="/images/icons/512x512.png">

  <link rel="apple-touch-icon" sizes="256x256" href="/images/icons/256x256.png">

  <link rel="apple-touch-icon" sizes="128x128" href="/images/icons/128x128.png">

<meta name="msapplication-TileColor" content="#006bde" />

<meta name="theme-color" content="#006bde" />

<meta name="apple-mobile-web-app-capable" content="yes" />
<meta name="apple-mobile-web-app-status-bar-style" content="default" />
<meta name="apple-mobile-web-app-title" content="YNCBearz" />



    
    <title>460.lfu-cache | YNCBearz</title>
    
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    
    <meta name="keywords" content="LeetCode" />
    
    <meta name="description" content="460.lfu-cache">
<meta property="og:type" content="article">
<meta property="og:title" content="460.lfu-cache">
<meta property="og:url" content="https://yncbearz.github.io/2022/05/28/460-lfu-cache/index.html">
<meta property="og:site_name" content="YNCBearz">
<meta property="og:description" content="460.lfu-cache">
<meta property="og:locale" content="en_US">
<meta property="og:image" content="https://yncbearz.github.io/images/thumbnails/handara-gate.webp">
<meta property="article:published_time" content="2022-05-28T08:44:58.000Z">
<meta property="article:modified_time" content="2025-05-30T08:15:23.213Z">
<meta property="article:author" content="YNCBearz">
<meta property="article:tag" content="LeetCode">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://yncbearz.github.io/images/thumbnails/handara-gate.webp">
    

    

    
        <link rel="icon" href="/images/favicon.ico" />
    

    
<link rel="stylesheet" href="/libs/font-awesome/css/font-awesome.min.css">

    
<link rel="stylesheet" href="/libs/titillium-web/styles.css">

    
<link rel="stylesheet" href="/libs/source-code-pro/styles.css">


    
<link rel="stylesheet" href="/css/style.css">


    
<script src="/libs/jquery/3.5.0/jquery.min.js"></script>

    
<script src="/libs/clipboard.js-master/dist/clipboard.min.js"></script>

    
    
    
    
    
    


<meta name="generator" content="Hexo 7.3.0"></head>

<body>
    <div id="wrap">
        <header id="header">
    <div id="header-outer" class="outer">
        <div class="container">
            <div class="container-inner">
                <div id="header-title">
                    <h1 class="logo-wrap">
                        <a href="/" class="logo"></a>
                    </h1>
                    
                </div>
                <div id="header-inner" class="nav-container">
                    <a id="main-nav-toggle" class="nav-icon fa fa-bars"></a>
                    <div class="nav-container-inner">
                        <ul id="main-nav">
                            
                                <li class="main-nav-list-item" >
                                    <a class="main-nav-list-link" href="/">Home</a>
                                </li>
                            
                                    <ul class="main-nav-list"><li class="main-nav-list-item"><a class="main-nav-list-link" href="/categories/Clean-Code/">Clean Code</a></li><li class="main-nav-list-item"><a class="main-nav-list-link" href="/categories/Life/">Life</a></li><li class="main-nav-list-item"><a class="main-nav-list-link" href="/categories/Other/">Other</a></li><li class="main-nav-list-item"><a class="main-nav-list-link" href="/categories/Programming/">Programming</a></li></ul>
                                
                                <li class="main-nav-list-item" >
                                    <a class="main-nav-list-link" href="/about/index.html">About</a>
                                </li>
                            
                        </ul>
                        <nav id="sub-nav">
                            <div id="search-form-wrap">

    <form class="search-form">
        <input type="text" class="ins-search-input search-form-input" placeholder="Search" />
        <button type="submit" class="search-form-submit"></button>
    </form>
    <div class="ins-search">
    <div class="ins-search-mask"></div>
    <div class="ins-search-container">
        <div class="ins-input-wrapper">
            <input type="text" class="ins-search-input" placeholder="Type something..." />
            <span class="ins-close ins-selectable"><i class="fa fa-times-circle"></i></span>
        </div>
        <div class="ins-section-wrapper">
            <div class="ins-section-container"></div>
        </div>
    </div>
</div>
<script>
(function (window) {
    var INSIGHT_CONFIG = {
        TRANSLATION: {
            POSTS: 'Posts',
            PAGES: 'Pages',
            CATEGORIES: 'Categories',
            TAGS: 'Tags',
            UNTITLED: '(Untitled)',
        },
        ROOT_URL: '/',
        CONTENT_URL: '/content.json',
    };
    window.INSIGHT_CONFIG = INSIGHT_CONFIG;
})(window);
</script>

<script src="/js/insight.js"></script>


</div>
                        </nav>
                    </div>
                </div>
            </div>
        </div>
    </div>
</header>

        <div class="container">
            <div class="main-body container-inner">
                <div class="main-body-inner">
                    <section id="main">
                        <div class="main-body-header">
    <h1 class="header">
    
    <a class="page-title-link" href="/categories/Programming/">Programming</a>
    </h1>
</div>

                        <div class="main-body-content">
                            <article id="post-460-lfu-cache"
    class="article article-single article-type-post"
    itemscope itemprop="blogPost">
    <div class="article-inner">
        
        <header class="article-header">
            
    
        <h1 class="article-title" itemprop="name">
        460.lfu-cache
        </h1>
    

        </header>
        
        
        <div class="article-meta">
            
  <div class="article-date">
    <i class="fa fa-calendar"></i>
    <a href="/2022/05/28/460-lfu-cache/" class="article-date">
       <time datetime="2022-05-28T08:44:58.000Z" itemprop="datePublished">2022-05-28</time>
    </a>
  </div>


            

            
    <div class="article-tag">
        <i class="fa fa-tag"></i>
        <a class="tag-link-link" href="/tags/LeetCode/" rel="tag">LeetCode</a>
    </div>

            
            

            

        </div>
        
        
        <div class="article-entry" itemprop="articleBody">
            

            

            

            <h2 id="Description"><a href="#Description" class="headerlink" title="Description:"></a>Description:</h2><h3 id="Design-and-implement-a-data-structure-for-a-Least-Frequently-Used-LFU-cache"><a href="#Design-and-implement-a-data-structure-for-a-Least-Frequently-Used-LFU-cache" class="headerlink" title="Design and implement a data structure for a Least Frequently Used (LFU) cache."></a>Design and implement a data structure for a <a target="_blank" rel="noopener" href="https://en.wikipedia.org/wiki/Least_frequently_used">Least Frequently Used (LFU)</a> cache.</h3><h4 id="Implement-the-LFUCache-class"><a href="#Implement-the-LFUCache-class" class="headerlink" title="Implement the LFUCache class:"></a>Implement the LFUCache class:</h4><ul>
<li>LFUCache(int capacity) Initializes the object with the capacity of the data structure.</li>
<li>int get(int key) Gets the value of the key if the key exists in the cache. Otherwise, returns -1.</li>
<li>void put(int key, int value) Update the value of the key if present, or inserts the key if not already present. When the cache reaches its capacity, it should invalidate and remove the <strong>least frequently used</strong> key before inserting a new item. For this problem, when there is a tie (i.e., two or more keys with the same frequency), the <strong>least recently used</strong> key would be invalidated.</li>
</ul>
<p>To determine the least frequently used key, a use counter is maintained for each key in the cache. The key with the smallest use counter is the least frequently used key.</p>
<p>When a key is first inserted into the cache, its use counter is set to 1 (due to the put operation). The use counter for a key in the cache is incremented either a get or put operation is called on it.</p>
<p>The functions get and put must each run in O(1) average time complexity.</p>
<p><strong>Example 1:</strong></p>
<figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">Input</span><br><span class="line">[&quot;LFUCache&quot;, &quot;put&quot;, &quot;put&quot;, &quot;get&quot;, &quot;put&quot;, &quot;get&quot;, &quot;get&quot;, &quot;put&quot;, &quot;get&quot;, &quot;get&quot;, &quot;get&quot;]</span><br><span class="line">[[2], [1, 1], [2, 2], [1], [3, 3], [2], [3], [4, 4], [1], [3], [4]]</span><br><span class="line">Output</span><br><span class="line">[null, null, null, 1, null, -1, 3, null, -1, 3, 4]</span><br><span class="line"></span><br><span class="line">Explanation</span><br><span class="line">// cnt(x) = the use counter for key x</span><br><span class="line">// cache=[] will show the last used order for tiebreakers (leftmost element is  most recent)</span><br><span class="line">LFUCache lfu = new LFUCache(2);</span><br><span class="line">lfu.put(1, 1);   // cache=[1,_], cnt(1)=1</span><br><span class="line">lfu.put(2, 2);   // cache=[2,1], cnt(2)=1, cnt(1)=1</span><br><span class="line">lfu.get(1);      // return 1</span><br><span class="line">                 // cache=[1,2], cnt(2)=1, cnt(1)=2</span><br><span class="line">lfu.put(3, 3);   // 2 is the LFU key because cnt(2)=1 is the smallest, invalidate 2.</span><br><span class="line">                 // cache=[3,1], cnt(3)=1, cnt(1)=2</span><br><span class="line">lfu.get(2);      // return -1 (not found)</span><br><span class="line">lfu.get(3);      // return 3</span><br><span class="line">                 // cache=[3,1], cnt(3)=2, cnt(1)=2</span><br><span class="line">lfu.put(4, 4);   // Both 1 and 3 have the same cnt, but 1 is LRU, invalidate 1.</span><br><span class="line">                 // cache=[4,3], cnt(4)=1, cnt(3)=2</span><br><span class="line">lfu.get(1);      // return -1 (not found)</span><br><span class="line">lfu.get(3);      // return 3</span><br><span class="line">                 // cache=[3,4], cnt(4)=1, cnt(3)=3</span><br><span class="line">lfu.get(4);      // return 4</span><br><span class="line">                 // cache=[4,3], cnt(4)=2, cnt(3)=3</span><br></pre></td></tr></table></figure>

<p><strong>Constraints:</strong></p>
<ul>
<li>0 &lt;&#x3D; capacity &lt;&#x3D; $10^4$</li>
<li>0 &lt;&#x3D; key &lt;&#x3D; $10^5$</li>
<li>0 &lt;&#x3D; value &lt;&#x3D; $10^9$</li>
<li>At most $2 * 10^5$ calls will be made to get and put.</li>
</ul>
<hr>
<h1 id="Double-Linked-List-with-sentinel-node"><a href="#Double-Linked-List-with-sentinel-node" class="headerlink" title="Double Linked List (with sentinel node)"></a>Double Linked List (with sentinel node)</h1><p><img src="/images/notes/2022/05/double-linked-list-with-sentinel.png"></p>
<p><strong>優點</strong>：<br>透過設置<strong>sentinel</strong>，可以快速取得第一個節點和最後一個節點。</p>
<hr>
<blockquote>
<p>Appropriate Answer (Double Linked List):</p>
</blockquote>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">namespace</span> <span class="title class_">LeetCode</span>\<span class="title class_">LFUCache</span>;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Node</span></span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line">    <span class="keyword">public</span> ?<span class="keyword">int</span> <span class="variable">$key</span>;</span><br><span class="line">    <span class="keyword">public</span> ?<span class="keyword">int</span> <span class="variable">$value</span>;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">int</span> <span class="variable">$frequence</span>;</span><br><span class="line">    <span class="keyword">public</span> ?Node <span class="variable">$prev</span>;</span><br><span class="line">    <span class="keyword">public</span> ?Node <span class="variable">$next</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">__construct</span>(<span class="params"></span></span></span><br><span class="line"><span class="params"><span class="function">        ?<span class="keyword">int</span> <span class="variable">$key</span>,</span></span></span><br><span class="line"><span class="params"><span class="function">        ?<span class="keyword">int</span> <span class="variable">$value</span></span></span></span><br><span class="line"><span class="params"><span class="function">    </span>) </span>&#123;</span><br><span class="line">        <span class="variable language_">$this</span>-&gt;key = <span class="variable">$key</span>;</span><br><span class="line">        <span class="variable language_">$this</span>-&gt;value = <span class="variable">$value</span>;</span><br><span class="line"></span><br><span class="line">        <span class="variable language_">$this</span>-&gt;frequence = <span class="number">1</span>;</span><br><span class="line">        <span class="variable language_">$this</span>-&gt;prev = <span class="literal">null</span>;</span><br><span class="line">        <span class="variable language_">$this</span>-&gt;next = <span class="literal">null</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">DoubleLinkedList</span></span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line">    <span class="keyword">public</span> Node <span class="variable">$sentinel</span>;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">int</span> <span class="variable">$size</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">__construct</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="variable language_">$this</span>-&gt;sentinel = <span class="keyword">new</span> <span class="title class_">Node</span>(<span class="literal">null</span>, <span class="literal">null</span>);</span><br><span class="line">        <span class="variable language_">$this</span>-&gt;sentinel-&gt;next = <span class="variable language_">$this</span>-&gt;sentinel;</span><br><span class="line">        <span class="variable language_">$this</span>-&gt;sentinel-&gt;prev = <span class="variable language_">$this</span>-&gt;sentinel;</span><br><span class="line"></span><br><span class="line">        <span class="variable language_">$this</span>-&gt;size = <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">append</span>(<span class="params">Node <span class="variable">$node</span></span>)</span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="variable">$node</span>-&gt;prev = <span class="variable language_">$this</span>-&gt;sentinel;</span><br><span class="line">        <span class="variable">$node</span>-&gt;next = <span class="variable language_">$this</span>-&gt;sentinel-&gt;next;</span><br><span class="line"></span><br><span class="line">        <span class="variable language_">$this</span>-&gt;sentinel-&gt;next-&gt;prev = <span class="variable">$node</span>;</span><br><span class="line">        <span class="variable language_">$this</span>-&gt;sentinel-&gt;next = <span class="variable">$node</span>;</span><br><span class="line"></span><br><span class="line">        <span class="variable language_">$this</span>-&gt;size++;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">pop</span>(<span class="params">?Node <span class="variable">$node</span> = <span class="literal">null</span></span>): ?<span class="title">Node</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (<span class="variable language_">$this</span>-&gt;size == <span class="number">0</span>) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">//good thinking</span></span><br><span class="line">        <span class="keyword">if</span> (<span class="title function_ invoke__">is_null</span>(<span class="variable">$node</span>)) &#123;</span><br><span class="line">            <span class="variable">$node</span> = <span class="variable language_">$this</span>-&gt;sentinel-&gt;prev;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="variable">$node</span>-&gt;prev-&gt;next = <span class="variable">$node</span>-&gt;next;</span><br><span class="line">        <span class="variable">$node</span>-&gt;next-&gt;prev = <span class="variable">$node</span>-&gt;prev;</span><br><span class="line"></span><br><span class="line">        <span class="variable language_">$this</span>-&gt;size--;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> <span class="variable">$node</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">LFUCache</span></span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">int</span> <span class="variable">$capacity</span>;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">int</span> <span class="variable">$size</span>;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">array</span> <span class="variable">$nodeDictionary</span>;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">array</span> <span class="variable">$doubleLinkedListCollection</span>;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">int</span> <span class="variable">$minFrequence</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">const</span> <span class="variable constant_">NODE_NOT_EXISTS</span> = -<span class="number">1</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> int $capacity</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">__construct</span>(<span class="params"><span class="variable">$capacity</span></span>)</span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="variable language_">$this</span>-&gt;capacity = <span class="variable">$capacity</span>;</span><br><span class="line">        <span class="variable language_">$this</span>-&gt;size = <span class="number">0</span>;</span><br><span class="line">        <span class="variable language_">$this</span>-&gt;nodeDictionary = [];</span><br><span class="line">        <span class="variable language_">$this</span>-&gt;doubleLinkedListCollection = [];</span><br><span class="line">        <span class="variable language_">$this</span>-&gt;minFrequence = <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> int $key</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> int</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">get</span>(<span class="params"><span class="variable">$key</span></span>)</span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (!<span class="keyword">isset</span>(<span class="variable language_">$this</span>-&gt;nodeDictionary[<span class="variable">$key</span>])) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="built_in">self</span>::<span class="variable constant_">NODE_NOT_EXISTS</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="variable">$node</span> = <span class="variable language_">$this</span>-&gt;nodeDictionary[<span class="variable">$key</span>];</span><br><span class="line">        <span class="variable">$frequence</span> = <span class="variable">$node</span>-&gt;frequence;</span><br><span class="line"></span><br><span class="line">        <span class="variable">$doubleLinkedList</span> = <span class="variable language_">$this</span>-&gt;doubleLinkedListCollection[<span class="variable">$frequence</span>];</span><br><span class="line">        <span class="variable">$doubleLinkedList</span>-&gt;<span class="title function_ invoke__">pop</span>(<span class="variable">$node</span>);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (<span class="variable">$doubleLinkedList</span>-&gt;size == <span class="number">0</span> &amp;&amp; <span class="variable">$frequence</span> == <span class="variable language_">$this</span>-&gt;minFrequence) &#123;</span><br><span class="line">            <span class="variable language_">$this</span>-&gt;minFrequence++;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="variable">$node</span>-&gt;frequence++;</span><br><span class="line">        <span class="variable">$frequence</span> = <span class="variable">$node</span>-&gt;frequence;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (!<span class="keyword">isset</span>(<span class="variable language_">$this</span>-&gt;doubleLinkedListCollection[<span class="variable">$frequence</span>])) &#123;</span><br><span class="line">            <span class="variable language_">$this</span>-&gt;doubleLinkedListCollection[<span class="variable">$frequence</span>] = <span class="keyword">new</span> <span class="title class_">DoubleLinkedList</span>();</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="variable">$doubleLinkedList</span> = <span class="variable language_">$this</span>-&gt;doubleLinkedListCollection[<span class="variable">$frequence</span>];</span><br><span class="line">        <span class="variable">$doubleLinkedList</span>-&gt;<span class="title function_ invoke__">append</span>(<span class="variable">$node</span>);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> <span class="variable">$node</span>-&gt;value;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> int $key</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> int $value</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> void</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">put</span>(<span class="params"><span class="variable">$key</span>, <span class="variable">$value</span></span>): <span class="title">void</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (<span class="variable language_">$this</span>-&gt;capacity == <span class="number">0</span>) &#123;</span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (<span class="keyword">isset</span>(<span class="variable language_">$this</span>-&gt;nodeDictionary[<span class="variable">$key</span>])) &#123;</span><br><span class="line">            <span class="variable">$node</span> = <span class="variable language_">$this</span>-&gt;nodeDictionary[<span class="variable">$key</span>];</span><br><span class="line">            <span class="variable">$node</span>-&gt;value = <span class="variable">$value</span>;</span><br><span class="line">            <span class="variable">$frequence</span> = <span class="variable">$node</span>-&gt;frequence;</span><br><span class="line"></span><br><span class="line">            <span class="variable">$doubleLinkedList</span> = <span class="variable language_">$this</span>-&gt;doubleLinkedListCollection[<span class="variable">$frequence</span>];</span><br><span class="line">            <span class="variable">$doubleLinkedList</span>-&gt;<span class="title function_ invoke__">pop</span>(<span class="variable">$node</span>);</span><br><span class="line"></span><br><span class="line">            <span class="keyword">if</span> (<span class="variable">$doubleLinkedList</span>-&gt;size == <span class="number">0</span> &amp;&amp; <span class="variable">$frequence</span> == <span class="variable language_">$this</span>-&gt;minFrequence) &#123;</span><br><span class="line">                <span class="variable language_">$this</span>-&gt;minFrequence++;</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            <span class="variable">$node</span>-&gt;frequence++;</span><br><span class="line">            <span class="variable">$frequence</span> = <span class="variable">$node</span>-&gt;frequence;</span><br><span class="line"></span><br><span class="line">            <span class="keyword">if</span> (!<span class="keyword">isset</span>(<span class="variable language_">$this</span>-&gt;doubleLinkedListCollection[<span class="variable">$frequence</span>])) &#123;</span><br><span class="line">                <span class="variable language_">$this</span>-&gt;doubleLinkedListCollection[<span class="variable">$frequence</span>] = <span class="keyword">new</span> <span class="title class_">DoubleLinkedList</span>();</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            <span class="variable">$doubleLinkedList</span> = <span class="variable language_">$this</span>-&gt;doubleLinkedListCollection[<span class="variable">$frequence</span>];</span><br><span class="line">            <span class="variable">$doubleLinkedList</span>-&gt;<span class="title function_ invoke__">append</span>(<span class="variable">$node</span>);</span><br><span class="line"></span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (<span class="variable language_">$this</span>-&gt;size == <span class="variable language_">$this</span>-&gt;capacity) &#123;</span><br><span class="line">            <span class="variable">$doubleLinkedList</span> = <span class="variable language_">$this</span>-&gt;doubleLinkedListCollection[<span class="variable language_">$this</span>-&gt;minFrequence];</span><br><span class="line">            <span class="variable">$unsetNode</span> = <span class="variable">$doubleLinkedList</span>-&gt;<span class="title function_ invoke__">pop</span>();</span><br><span class="line"></span><br><span class="line">            <span class="variable">$unsetNodeKey</span> = <span class="variable">$unsetNode</span>-&gt;key;</span><br><span class="line">            <span class="keyword">unset</span>(<span class="variable language_">$this</span>-&gt;nodeDictionary[<span class="variable">$unsetNodeKey</span>]);</span><br><span class="line"></span><br><span class="line">            <span class="variable language_">$this</span>-&gt;size--;</span><br><span class="line"></span><br><span class="line">            <span class="keyword">if</span> (<span class="variable">$doubleLinkedList</span>-&gt;size == <span class="number">0</span> &amp;&amp; <span class="variable language_">$this</span>-&gt;minFrequence &gt; <span class="number">0</span>) &#123;</span><br><span class="line">                <span class="variable language_">$this</span>-&gt;minFrequence--;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="variable">$node</span> = <span class="keyword">new</span> <span class="title class_">Node</span>(<span class="variable">$key</span>, <span class="variable">$value</span>);</span><br><span class="line">        <span class="variable language_">$this</span>-&gt;nodeDictionary[<span class="variable">$key</span>] = <span class="variable">$node</span>;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (!<span class="keyword">isset</span>(<span class="variable language_">$this</span>-&gt;doubleLinkedListCollection[<span class="number">1</span>])) &#123;</span><br><span class="line">            <span class="variable language_">$this</span>-&gt;doubleLinkedListCollection[<span class="number">1</span>] = <span class="keyword">new</span> <span class="title class_">DoubleLinkedList</span>();</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="variable">$doubleLinkedList</span> = <span class="variable language_">$this</span>-&gt;doubleLinkedListCollection[<span class="number">1</span>];</span><br><span class="line">        <span class="variable">$doubleLinkedList</span>-&gt;<span class="title function_ invoke__">append</span>(<span class="variable">$node</span>);</span><br><span class="line"></span><br><span class="line">        <span class="variable language_">$this</span>-&gt;minFrequence = <span class="number">1</span>;</span><br><span class="line">        <span class="variable language_">$this</span>-&gt;size++;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>Time Complexity: <em><strong>$O(1)$</strong></em></li>
</ul>
<hr>
<p>(Reference.)</p>
<ul>
<li><a target="_blank" rel="noopener" href="https://leetcode.com/problems/lfu-cache/discuss/207673/Python-concise-solution-**detailed**-explanation%3A-Two-dict-%2B-Doubly-linked-list">Python concise solution <strong>detailed</strong> explanation: Two dict + Doubly linked list</a></li>
</ul>
<hr>
<p>ʕ •ᴥ•ʔ：這題難度hard，看完討論還是弄了好久好久。<br>有小瑕疵時，第21個test case不好debug。</p>

        </div>
        <footer class="article-footer">
            



    <a class="article-share-link tooltipped tooltipped-s" aria-label="Copy to clipboard" data-clipboard-text="https://yncbearz.github.io/2022/05/28/460-lfu-cache/"><i class="fa fa-share" aria-hidden="true"></i>Share</a>
<script>
    (function ($) {
        var clipboard = new ClipboardJS('.article-share-link');

        clipboard.on('success', e => {
            e.trigger.setAttribute('aria-label', 'Copied!');
            e.clearSelection();
        });

        // Replace tooltip message when mouse leaves button
        // and prevent page refresh after click button
        var btn = document.querySelector('.article-share-link');
        btn.addEventListener('mouseleave', e => {
            e.target.setAttribute('aria-label', 'Copy to clipboard');
            e.target.blur();
        });

        btn.addEventListener('click', e => {
            e.preventDefault();
        });
    })(jQuery);
</script>



        </footer>
    </div>
    <script type="application/ld+json">
    {
        "@context": "https://schema.org",
        "@type": "BlogPosting",
        "author": {
            "@type": "Person",
            "name": "YNCBearz"
        },
        "headline": "460.lfu-cache",
        "image": "https://yncbearz.github.io/images/thumbnails/handara-gate.webp",
        "keywords": "LeetCode",
        "genre": "Programming",
        "datePublished": "2022-05-28",
        "dateCreated": "2022-05-28",
        "dateModified": "2025-05-30",
        "url": "https://yncbearz.github.io/2022/05/28/460-lfu-cache/",
        "description": "460.lfu-cache",
        "wordCount": 2661
    }
</script>

</article>

    <section id="comments">
    
        
<div id="comment-container"></div>


    
    </section>


                        </div>
                    </section>
                    <aside id="sidebar">
    <a class="sidebar-toggle" title="Expand Sidebar"><i class="toggle icon"></i></a>
    <div class="sidebar-top">
        <p>follow:</p>
        <ul class="social-links">
            
                
                <li>
                    <a class="social-tooltip" title="github" href="https://github.com/YNCBearz" target="_blank" rel="noopener">
                        <i class="icon fa fa-github"></i>
                    </a>
                </li>
                
            
                
                <li>
                    <a class="social-tooltip" title="youtube" href="https://www.youtube.com/channel/UClWx47-swj-zud4t8i8E-AA/featured" target="_blank" rel="noopener">
                        <i class="icon fa fa-youtube"></i>
                    </a>
                </li>
                
            
                
                <li>
                    <a class="social-tooltip" title="paper-plane" href="mailto:yncbearz@gmail.com" target="_blank" rel="noopener">
                        <i class="icon fa fa-paper-plane"></i>
                    </a>
                </li>
                
            
        </ul>
    </div>
    
        
<nav id="article-nav">
    
        <a href="/2022/06/12/Sorting-and-Searching/" id="article-nav-newer" class="article-nav-link-wrap">
        <strong class="article-nav-caption">newer</strong>
        <p class="article-nav-title">
        
            Sorting and Searching
        
        </p>
        <i class="icon fa fa-chevron-right" id="icon-chevron-right"></i>
    </a>
    
    
        <a href="/2022/05/23/15-3-sum/" id="article-nav-older" class="article-nav-link-wrap">
        <strong class="article-nav-caption">older</strong>
        <p class="article-nav-title">15.3-sum</p>
        <i class="icon fa fa-chevron-left" id="icon-chevron-left"></i>
        </a>
    
</nav>

    
    <div class="widgets-container">
        
            
                

            
                
    <div class="widget-wrap">
        <h3 class="widget-title">recents</h3>
        <div class="widget">
            <ul id="recent-post" class="">
                
                    <li>
                        
                        <div class="item-thumbnail">
                            <a href="/2025/07/26/Fitts-Law/" class="thumbnail">
    
    
        <span style="background-image:url(/images/thumbnails/music-control.webp)" alt="費茲法則" class="thumbnail-image"></span>
    
    
</a>

                        </div>
                        
                        <div class="item-inner">
                            <p class="item-category"><a class="article-category-link" href="/categories/Other/">Other</a></p>
                            <p class="item-title"><a href="/2025/07/26/Fitts-Law/" class="title">費茲法則</a></p>
                            <p class="item-date"><time datetime="2025-07-26T11:26:41.000Z" itemprop="datePublished">2025-07-26</time></p>
                        </div>
                    </li>
                
                    <li>
                        
                        <div class="item-thumbnail">
                            <a href="/2025/06/19/Blog-Feature-List/" class="thumbnail">
    
    
        <span style="background-image:url(/images/thumbnails/schedule-plan.webp)" alt="部落格功能清單" class="thumbnail-image"></span>
    
    
</a>

                        </div>
                        
                        <div class="item-inner">
                            <p class="item-category"><a class="article-category-link" href="/categories/Programming/">Programming</a></p>
                            <p class="item-title"><a href="/2025/06/19/Blog-Feature-List/" class="title">部落格功能清單</a></p>
                            <p class="item-date"><time datetime="2025-06-19T02:17:52.000Z" itemprop="datePublished">2025-06-19</time></p>
                        </div>
                    </li>
                
                    <li>
                        
                        <div class="item-thumbnail">
                            <a href="/2025/04/26/Kent-Beck-Implementation-Patterns/" class="thumbnail">
    
    
        <span style="background-image:url(/images/thumbnails/christmas-cookies.webp)" alt="Kent Beck 的實作模式" class="thumbnail-image"></span>
    
    
</a>

                        </div>
                        
                        <div class="item-inner">
                            <p class="item-category"><a class="article-category-link" href="/categories/Clean-Code/">Clean Code</a></p>
                            <p class="item-title"><a href="/2025/04/26/Kent-Beck-Implementation-Patterns/" class="title">Kent Beck 的實作模式</a></p>
                            <p class="item-date"><time datetime="2025-04-26T14:05:09.000Z" itemprop="datePublished">2025-04-26</time></p>
                        </div>
                    </li>
                
                    <li>
                        
                        <div class="item-thumbnail">
                            <a href="/2025/02/22/How-To-Write-Code-With-Cursor/" class="thumbnail">
    
    
        <span style="background-image:url(/images/thumbnails/laptop-coffee.webp)" alt="如何使用 Cursor 來寫程式" class="thumbnail-image"></span>
    
    
</a>

                        </div>
                        
                        <div class="item-inner">
                            <p class="item-category"><a class="article-category-link" href="/categories/Programming/">Programming</a></p>
                            <p class="item-title"><a href="/2025/02/22/How-To-Write-Code-With-Cursor/" class="title">如何使用 Cursor 來寫程式</a></p>
                            <p class="item-date"><time datetime="2025-02-22T12:28:53.000Z" itemprop="datePublished">2025-02-22</time></p>
                        </div>
                    </li>
                
                    <li>
                        
                        <div class="item-thumbnail">
                            <a href="/2024/09/27/Class-Diagram-ZooKeeper-Visitor-Pattern/" class="thumbnail">
    
    
        <span style="background-image:url(/images/thumbnails/chalkboard.webp)" alt="類別圖：動物園管理員（訪問者模式）" class="thumbnail-image"></span>
    
    
</a>

                        </div>
                        
                        <div class="item-inner">
                            <p class="item-category"><a class="article-category-link" href="/categories/Clean-Code/">Clean Code</a></p>
                            <p class="item-title"><a href="/2024/09/27/Class-Diagram-ZooKeeper-Visitor-Pattern/" class="title">類別圖：動物園管理員（訪問者模式）</a></p>
                            <p class="item-date"><time datetime="2024-09-26T16:27:50.000Z" itemprop="datePublished">2024-09-27</time></p>
                        </div>
                    </li>
                
            </ul>
        </div>
    </div>

            
                
    <div class="widget-wrap widget-list">
        <h3 class="widget-title">tags</h3>
        <div class="widget">
            <ul class="tag-list" itemprop="keywords"><li class="tag-list-item"><a class="tag-list-link" href="/tags/Design-Pattern/" rel="tag">Design Pattern</a><span class="tag-list-count">57</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Example/" rel="tag">Example</a><span class="tag-list-count">32</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/LeetCode/" rel="tag">LeetCode</a><span class="tag-list-count">9</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Menu/" rel="tag">Menu</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Movie/" rel="tag">Movie</a><span class="tag-list-count">4</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Note/" rel="tag">Note</a><span class="tag-list-count">8</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Principle/" rel="tag">Principle</a><span class="tag-list-count">11</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Private-Note/" rel="tag">Private Note</a><span class="tag-list-count">3</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/S-O-L-I-D/" rel="tag">S.O.L.I.D</a><span class="tag-list-count">5</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/SQL/" rel="tag">SQL</a><span class="tag-list-count">4</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Settings/" rel="tag">Settings</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Study-Group/" rel="tag">Study Group</a><span class="tag-list-count">10</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/With-TM/" rel="tag">With TM</a><span class="tag-list-count">3</span></li></ul>
        </div>
    </div>


            
                <script>
	$(function () {
		// ref: https://github.com/zenorocha/codecopy/blob/master/src/scripts/main.js
		var snippets = document.querySelectorAll('figure.highlight');
		var htmlCopyButton = `
			<button class="codecopy-btn tooltipped tooltipped-sw" aria-label="Copy to clipboard">
				<i class="fa fa-copy" aria-hidden="true"></i>
			</button>`;

		snippets.forEach(snippet => {
			var parent = snippet.parentNode;
			var wrapper = document.createElement('div');

			parent.replaceChild(wrapper, snippet);
			wrapper.appendChild(snippet);

			wrapper.classList.add('code-highlight');
			wrapper.firstChild.insertAdjacentHTML('beforebegin', htmlCopyButton);

			var lang = (snippet.classList[1] || 'code').toUpperCase();
			wrapper.setAttribute('data-lang', lang);
		});

		// Add copy to clipboard functionality and user feedback
		var clipboard = new ClipboardJS('.codecopy-btn', {
			target: trigger => {
				return trigger.nextSibling.querySelector('.code');
			},
		});

		clipboard.on('success', e => {
			e.trigger.setAttribute('aria-label', 'Copied!');
			e.clearSelection();
		});

		// Replace tooltip message when mouse leaves button
		// and prevent page refresh after click button
		var btns = document.querySelectorAll('.codecopy-btn');

		btns.forEach(btn => {
			btn.addEventListener('mouseleave', e => {
				e.target.setAttribute('aria-label', 'Copy to clipboard');
				e.target.blur();
			});

			btn.addEventListener('click', e => {
				e.preventDefault();
			});
		});
	});
</script>
            
        
    </div>
</aside>

                </div>
            </div>
        </div>
        <footer id="footer">
    <div class="container">
        <div class="container-inner">
            <a id="back-to-top" href="javascript:;"><i class="icon fa fa-angle-up"></i></a>
            <div class="credit">
                <h1 class="logo-wrap">
                    <a href="/" class="logo"></a>
                </h1>
                <p>&copy; 2025 YNCBearz</p>
                
                <p>Powered by <a href="https://hexo.io/" target="_blank">Hexo</a>. Theme by <a href="https://github.com/ppoffice" target="_blank">PPOffice</a></p>
                
            </div>
            <div class="footer-plugins">
              
    


            </div>
        </div>
    </div>
</footer>

    </div>
    
    
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/gitalk@1/dist/gitalk.css">
<script src="https://cdn.jsdelivr.net/npm/gitalk@1/dist/gitalk.min.js"></script>
<script>
    var gitalk = new Gitalk({
        clientID: '9365194fd9e037a4bbd7',
        clientSecret: '6cec7d68df75f62cdf81c6e816b836b39d658b14',
        id: '74620b558d5ca5d11b0532b83d92c97f',
        repo: 'yncbearz.github.io',
        owner: 'YNCBearz',
        admin: "YNCBearz"
    })
    gitalk.render('comment-container')
</script>





    
    
    

    
    



<!-- Custom Scripts -->

<script src="/js/main.js"></script>


<script>if ('serviceWorker' in navigator) {
  navigator.serviceWorker.register('/sw.js?t=1753875325087')
    .then(function () {console.log('ServiceWorker Register Successfully.')})
    .catch(function (e) {console.error(e)});
}
</script></body>
</html>
